/*
Product Name: dhtmlxSuite 
Version: 5.1.0 
Edition: Standard 
License: content of this file is covered by DHTMLX Commercial or enterpri. Usage outside GPL terms is prohibited. To obtain Commercial or Enterprise license contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

if(typeof(window.dhx)=="undefined"){window.dhx=window.dhx4={version:"5.1.0",skin:null,skinDetect:function(a){var b=Math.floor(dhx4.readFromCss(a+"_skin_detect")/10)*10;return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace",40:"material"}[b]||null},readFromCss:function(c,e,g){var b=document.createElement("DIV");b.className=c;if(document.body.firstChild!=null){document.body.insertBefore(b,document.body.firstChild)}else{document.body.appendChild(b)}if(typeof(g)=="string"){b.innerHTML=g}var a=b[e||"offsetWidth"];b.parentNode.removeChild(b);b=null;return a},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var c=this.first();for(var b in this.data){c=Math.max(c,this.data[b])}return c},reserve:function(a){this.data[a]=this.last()+this.step;return this.data[a]},clear:function(a){if(this.data[a]!=null){this.data[a]=null;delete this.data[a]}}},s2b:function(a){if(typeof(a)=="string"){a=a.toLowerCase()}return(a==true||a==1||a=="true"||a=="1"||a=="yes"||a=="y"||a=="on")},s2j:function(s){var obj=null;dhx4.temp=null;try{eval("dhx4.temp="+s)}catch(e){dhx4.temp=null}obj=dhx4.temp;dhx4.temp=null;return obj},absLeft:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this.getOffset(a).left},absTop:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this.getOffset(a).top},_aOfs:function(a){var c=0,b=0;while(a){c=c+parseInt(a.offsetTop);b=b+parseInt(a.offsetLeft);a=a.offsetParent}return{top:c,left:b}},_aOfsRect:function(e){var j=e.getBoundingClientRect();var l=document.body;var b=document.documentElement;var a=window.pageYOffset||b.scrollTop||l.scrollTop;var g=window.pageXOffset||b.scrollLeft||l.scrollLeft;var h=b.clientTop||l.clientTop||0;var m=b.clientLeft||l.clientLeft||0;var n=j.top+a-h;var c=j.left+g-m;return{top:Math.round(n),left:Math.round(c)}},getOffset:function(a){if(a.getBoundingClientRect){return this._aOfsRect(a)}else{return this._aOfs(a)}},_isObj:function(a){return(a!=null&&typeof(a)=="object"&&typeof(a.length)=="undefined")},_copyObj:function(e){if(this._isObj(e)){var c={};for(var b in e){if(typeof(e[b])=="object"&&e[b]!=null){c[b]=this._copyObj(e[b])}else{c[b]=e[b]}}}else{var c=[];for(var b=0;b<e.length;b++){if(typeof(e[b])=="object"&&e[b]!=null){c[b]=this._copyObj(e[b])}else{c[b]=e[b]}}}return c},screenDim:function(){var a=(navigator.userAgent.indexOf("MSIE")>=0);var b={};b.left=document.body.scrollLeft;b.right=b.left+(window.innerWidth||document.body.clientWidth);b.top=Math.max((a?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop);b.bottom=b.top+(a?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight);return b},selectTextRange:function(g,j,b){g=(typeof(g)=="string"?document.getElementById(g):g);var a=g.value.length;j=Math.max(Math.min(j,a),0);b=Math.min(b,a);if(g.setSelectionRange){try{g.setSelectionRange(j,b)}catch(h){}}else{if(g.createTextRange){var c=g.createTextRange();c.moveStart("character",j);c.moveEnd("character",b-a);try{c.select()}catch(h){}}}},transData:null,transDetect:function(){if(this.transData==null){this.transData={transProp:false,transEv:null};var c={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var b in c){if(this.transData.transProp==false&&document.documentElement.style[b]!=null){this.transData.transProp=b;this.transData.transEv=c[b]}}c=null}return this.transData},_xmlNodeValue:function(a){var c="";for(var b=0;b<a.childNodes.length;b++){c+=(a.childNodes[b].nodeValue!=null?a.childNodes[b].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"")}return c}};window.dhx4.isIE=(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE6=(window.XMLHttpRequest==null&&navigator.userAgent.indexOf("MSIE")>=0);window.dhx4.isIE7=(navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0);window.dhx4.isIE8=(navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE9=(navigator.userAgent.indexOf("MSIE 9.0")>=0&&navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE10=(navigator.userAgent.indexOf("MSIE 10.0")>=0&&navigator.userAgent.indexOf("Trident")>=0&&window.navigator.pointerEnabled!=true);window.dhx4.isIE11=(navigator.userAgent.indexOf("Trident")>=0&&window.navigator.pointerEnabled==true);window.dhx4.isEdge=(navigator.userAgent.indexOf("Edge")>=0);window.dhx4.isOpera=(navigator.userAgent.indexOf("Opera")>=0);window.dhx4.isChrome=(navigator.userAgent.indexOf("Chrome")>=0)&&!window.dhx4.isEdge;window.dhx4.isKHTML=(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0)&&!window.dhx4.isEdge;window.dhx4.isFF=(navigator.userAgent.indexOf("Firefox")>=0);window.dhx4.isIPad=(navigator.userAgent.search(/iPad/gi)>=0);window.dhx4.dnd={evs:{},p_en:((window.dhx4.isIE||window.dhx4.isEdge)&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)),_mTouch:function(a){return(window.dhx4.isIE10&&a.pointerType==a.MSPOINTER_TYPE_MOUSE||window.dhx4.isIE11&&a.pointerType=="mouse"||window.dhx4.isEdge&&a.pointerType=="mouse")},_touchOn:function(a){if(a==null){a=document.body}a.style.touchAction=a.style.msTouchAction="";a=null},_touchOff:function(a){if(a==null){a=document.body}a.style.touchAction=a.style.msTouchAction="none";a=null}};if(window.navigator.pointerEnabled==true){window.dhx4.dnd.evs={start:"pointerdown",move:"pointermove",end:"pointerup"}}else{if(window.navigator.msPointerEnabled==true){window.dhx4.dnd.evs={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}}else{if(typeof(window.addEventListener)!="undefined"){window.dhx4.dnd.evs={start:"touchstart",move:"touchmove",end:"touchend"}}}}}if(typeof(window.dhx4.template)=="undefined"){window.dhx4.trim=function(a){return String(a).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")};window.dhx4.template=function(b,c,a){return b.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(){var j=arguments[1];var h=window.dhx4.trim(arguments[3]);var l=null;var g=[c[j]];if(h.length>0){h=h.split(":");var e=[];for(var m=0;m<h.length;m++){if(m>0&&e[e.length-1].match(/\\$/)!=null){e[e.length-1]=e[e.length-1].replace(/\\$/,"")+":"+h[m]}else{e.push(h[m])}}l=e[0];for(var m=1;m<e.length;m++){g.push(e[m])}}if(typeof(l)=="string"&&typeof(window.dhx4.template[l])=="function"){return window.dhx4.template[l].apply(window.dhx4.template,g)}if(j.length>0&&typeof(c[j])!="undefined"){if(a==true){return window.dhx4.trim(c[j])}return String(c[j])}return""})};window.dhx4.template.date=function(a,b){if(a!=null){if(a instanceof Date){return window.dhx4.date2str(a,b)}else{a=a.toString();if(a.match(/^\d*$/)!=null){return window.dhx4.date2str(new Date(parseInt(a)),b)}return a}}return""};window.dhx4.template.maxlength=function(b,a){return String(b).substr(0,a)};window.dhx4.template.number_format=function(e,g,c,a){var b=window.dhx4.template._parseFmt(g,c,a);if(b==false){return e}return window.dhx4.template._getFmtValue(e,b)};window.dhx4.template.lowercase=function(a){if(typeof(a)=="undefined"||a==null){a=""}return String(a).toLowerCase()};window.dhx4.template.uppercase=function(a){if(typeof(a)=="undefined"||a==null){a=""}return String(a).toUpperCase()};window.dhx4.template._parseFmt=function(j,c,a){var e=j.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(e==null||e.length!=4){return false}var b={i_len:false,i_sep:(typeof(c)=="string"?c:","),d_len:false,d_sep:(typeof(a)=="string"?a:"."),s_bef:(typeof(e[1])=="string"?e[1]:""),s_aft:(typeof(e[3])=="string"?e[3]:"")};var h=e[2].split(".");if(h[1]!=null){b.d_len=h[1].length}var g=h[0].split(",");if(g.length>1){b.i_len=g[g.length-1].length}return b};window.dhx4.template._getFmtValue=function(value,fmt){var r=String(value).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(r!=null&&r.length==5){var v0="";if(r[1]!=null){v0+=r[1]}v0+=fmt.s_bef;if(fmt.i_len!==false){var i=0;var v1="";for(var q=r[2].length-1;q>=0;q--){v1=""+r[2].charAt(q)+v1;if(++i==fmt.i_len&&q>0){v1=fmt.i_sep+v1;i=0}}v0+=v1}else{v0+=r[2]}if(fmt.d_len!==false){if(r[4]==null){r[4]=""}while(r[4].length<fmt.d_len){r[4]+="0"}eval("dhx4.temp = new RegExp(/\\d{"+fmt.d_len+"}/);");var t1=(r[4]).match(dhx4.temp);if(t1!=null){v0+=fmt.d_sep+t1}dhx4.temp=t1=null}v0+=fmt.s_aft;return v0}return value}}if(typeof(window.dhx4.dateLang)=="undefined"){window.dhx4.dateLang="en";window.dhx4.dateStrings={en:{monthFullName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortName:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFullName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShortName:["Su","Mo","Tu","We","Th","Fr","Sa"]}};window.dhx4.dateFormat={en:"%Y-%m-%d"};window.dhx4.date2str=function(h,e,a){if(e==null||typeof(e)=="undefined"){e=window.dhx4.dateFormat[window.dhx4.dateLang]}if(a==null||typeof(a)=="undefined"){a=window.dhx4.dateStrings[window.dhx4.dateLang]}if(h instanceof Date){var g=function(j){return(String(j).length==1?"0"+String(j):j)};var b=function(l){switch(l){case"%d":return g(h.getDate());case"%j":return h.getDate();case"%D":return a.dayShortName[h.getDay()];case"%l":return a.dayFullName[h.getDay()];case"%m":return g(h.getMonth()+1);case"%n":return h.getMonth()+1;case"%M":return a.monthShortName[h.getMonth()];case"%F":return a.monthFullName[h.getMonth()];case"%y":return g(h.getYear()%100);case"%Y":return h.getFullYear();case"%g":return(h.getHours()+11)%12+1;case"%h":return g((h.getHours()+11)%12+1);case"%G":return h.getHours();case"%H":return g(h.getHours());case"%i":return g(h.getMinutes());case"%s":return g(h.getSeconds());case"%a":return(h.getHours()>11?"pm":"am");case"%A":return(h.getHours()>11?"PM":"AM");case"%%":return"%";case"%u":return h.getMilliseconds();case"%P":if(window.dhx4.temp_calendar!=null&&window.dhx4.temp_calendar.tz!=null){return window.dhx4.temp_calendar.tz}var o=h.getTimezoneOffset();var n=Math.abs(Math.floor(o/60));var j=Math.abs(o)-n*60;return(o>0?"-":"+")+g(n)+":"+g(j);default:return l}};var c=String(e||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,b)}return(c||String(h))};window.dhx4.str2date=function(h,u,z){if(u==null||typeof(u)=="undefined"){u=window.dhx4.dateFormat[window.dhx4.dateLang]}if(z==null||typeof(z)=="undefined"){z=window.dhx4.dateStrings[window.dhx4.dateLang]}u=u.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&");var y=[];var m=[];u=u.replace(/%[a-z]/gi,function(e){switch(e){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":m.push(e);return"(\\d{2})";case"%D":case"%l":case"%M":case"%F":m.push(e);return"([a-zéûä\u0430-\u044F\u0451]{1,})";case"%j":case"%n":case"%g":case"%G":m.push(e);return"(\\d{1,2})";case"%Y":m.push(e);return"(\\d{4})";case"%a":m.push(e);return"([a|p]m)";case"%A":m.push(e);return"([A|P]M)";case"%u":m.push(e);return"(\\d{1,6})";case"%P":m.push(e);return"([+-]\\d{1,2}:\\d{1,2})"}return e});var A=new RegExp(u,"i");var n=h.match(A);if(n==null||n.length-1!=m.length){return"Invalid Date"}for(var b=1;b<n.length;b++){y.push(n[b])}var c={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7};var o={};var l={};for(var b=0;b<m.length;b++){if(typeof(c[m[b]])!="undefined"){var g=c[m[b]];if(!o[g]){o[g]=[];l[g]=[]}o[g].push(y[b]);l[g].push(m[b])}}y=[];m=[];for(var b=1;b<=7;b++){if(o[b]!=null){for(var t=0;t<o[b].length;t++){y.push(o[b][t]);m.push(l[b][t])}}}var a=new Date();a.setDate(1);a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);var s=function(v,e){for(var r=0;r<e.length;r++){if(e[r].toLowerCase()==v){return r}}return -1};for(var b=0;b<y.length;b++){switch(m[b]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":case"%u":if(!isNaN(y[b])){a[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[m[b]]](Number(y[b])+(m[b]=="%m"||m[b]=="%n"?-1:0))}break;case"%M":case"%F":var j=s(y[b].toLowerCase(),z[{"%M":"monthShortName","%F":"monthFullName"}[m[b]]]);if(j>=0){a.setMonth(j)}break;case"%y":if(!isNaN(y[b])){var x=Number(y[b]);a.setFullYear(x+(x>50?1900:2000))}break;case"%g":case"%h":if(!isNaN(y[b])){var x=Number(y[b]);if(x<=12&&x>=0){a.setHours(x+(s("pm",y)>=0?(x==12?0:12):(x==12?-12:0)))}}break;case"%P":if(window.dhx4.temp_calendar!=null){window.dhx4.temp_calendar.tz=y[b]}break}}return a}}if(typeof(window.dhx4.ajax)=="undefined"){window.dhx4.ajax={cache:false,method:"get",parse:function(a){if(typeof a!=="string"){return a}a=a.replace(/^[\s]+/,"");if(window.DOMParser&&!dhx4.isIE){var b=(new window.DOMParser()).parseFromString(a,"text/xml")}else{if(window.ActiveXObject!==window.undefined){var b=new window.ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a)}}return b},xmltop:function(a,g,c){if(typeof g.status=="undefined"||g.status<400){xml=(!g.responseXML)?dhx4.ajax.parse(g.responseText||g):(g.responseXML||g);if(xml&&xml.documentElement!==null){try{if(!xml.getElementsByTagName("parsererror").length){return xml.getElementsByTagName(a)[0]}}catch(b){}}}if(c!==-1){dhx4.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],c])}return document.createElement("DIV")},xpath:function(c,a){if(!a.nodeName){a=a.responseXML||a}if(dhx4.isIE){try{return a.selectNodes(c)||[]}catch(h){return[]}}else{var g=[];var j;var b=(a.ownerDocument||a).evaluate(c,a,null,XPathResult.ANY_TYPE,null);while(j=b.iterateNext()){g.push(j)}return g}},query:function(a){return dhx4.ajax._call((a.method||"GET"),a.url,a.data||"",(a.async||true),a.callback,null,a.headers)},get:function(a,b){return this._call("GET",a,null,true,b)},getSync:function(a){return this._call("GET",a,null,false)},put:function(b,a,c){return this._call("PUT",b,a,true,c)},del:function(b,a,c){return this._call("DELETE",b,a,true,c)},post:function(b,a,c){if(arguments.length==1){a=""}else{if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a])=="function")){c=a;a=""}else{a=String(a)}}return this._call("POST",b,a,true,c)},postSync:function(b,a){a=(a==null?"":String(a));return this._call("POST",b,a,false)},getLong:function(a,b){this._call("GET",a,null,true,b,{url:a})},postLong:function(b,a,c){if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a]))){c=a;a=""}this._call("POST",b,a,true,c,{url:b,postData:a})},_call:function(b,c,e,l,n,u,h){if(typeof e==="object"){var j=[];for(var o in e){j.push(o+"="+encodeURIComponent(e[o]))}e=j.join("&")}var g=dhx.promise.defer();var s=(window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"));var m=(navigator.userAgent.match(/AppleWebKit/)!=null&&navigator.userAgent.match(/Qt/)!=null&&navigator.userAgent.match(/Safari/)!=null);if(l==true){s.onreadystatechange=function(){if((s.readyState==4)||(m==true&&s.readyState==3)){if(s.status!=200||s.responseText==""){g.reject(s);if(!dhx4.callEvent("onAjaxError",[{xmlDoc:s,filePath:c,async:l}])){return}}window.setTimeout(function(){if(typeof(n)=="function"){try{n.apply(window,[{xmlDoc:s,filePath:c,async:l}])}catch(a){g.reject(a)}g.resolve(s.responseText)}if(u!=null){if(typeof(u.postData)!="undefined"){dhx4.ajax.postLong(u.url,u.postData,n)}else{dhx4.ajax.getLong(u.url,n)}}n=null;s=null},1)}}}if(b=="GET"){c+=this._dhxr(c)}s.open(b,c,l);if(h!=null){for(var r in h){s.setRequestHeader(r,h[r])}}else{if(b=="POST"||b=="PUT"||b=="DELETE"){s.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}else{if(b=="GET"){e=null}}}s.setRequestHeader("X-Requested-With","XMLHttpRequest");s.send(e);if(l!=true){if((s.readyState==4)||(m==true&&s.readyState==3)){if(s.status!=200||s.responseText==""){dhx4.callEvent("onAjaxError",[{xmlDoc:s,filePath:c,async:l}])}}}g.xmlDoc=s;g.filePath=c;g.async=l;return g},_dhxr:function(a,b){if(this.cache!=true){if(a.match(/^[\?\&]$/)==null){a=(a.indexOf("?")>=0?"&":"?")}if(typeof(b)=="undefined"){b=true}return a+"dhxr"+new Date().getTime()+(b==true?"=1":"")}return""}}}if(typeof(window.dhx4._enableDataLoading)=="undefined"){window.dhx4._enableDataLoading=function(j,c,h,g,l){if(l=="clear"){for(var b in j._dhxdataload){j._dhxdataload[b]=null;delete j._dhxdataload[b]}j._loadData=null;j._dhxdataload=null;j.load=null;j.loadStruct=null;j=null;return}j._dhxdataload={initObj:c,xmlToJson:h,xmlRootTag:g,onBeforeXLS:null};j._loadData=function(s,u,v){if(arguments.length==2){v=u;u=null}var r=null;if(arguments.length==3){v=arguments[2]}this.callEvent("onXLS",[]);if(typeof(s)=="string"){var o=s.replace(/^\s{1,}/,"").replace(/\s{1,}$/,"");var y=new RegExp("^<"+this._dhxdataload.xmlRootTag);if(y.test(o.replace(/^<\?xml[^\?]*\?>\s*/,""))){r=dhx4.ajax.parse(s);if(r!=null){r=this[this._dhxdataload.xmlToJson].apply(this,[r])}}if(r==null&&(o.match(/^[\s\S]*{[.\s\S]*}[\s\S]*$/)!=null||o.match(/^[\s\S]*\[[.\s\S]*\][\s\S]*$/)!=null)){r=dhx4.s2j(o)}if(r==null){var n=[];if(typeof(this._dhxdataload.onBeforeXLS)=="function"){var o=this._dhxdataload.onBeforeXLS.apply(this,[s]);if(o!=null&&typeof(o)=="object"){if(o.url!=null){s=o.url}if(o.params!=null){for(var w in o.params){n.push(w+"="+encodeURIComponent(o.params[w]))}}}}var x=this;var m=function(a){var t=null;if((a.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||(a.xmlDoc.responseText.replace(/^\s{1,}/,"")).match(/^</)!=null){t=x[x._dhxdataload.xmlToJson].apply(x,[a.xmlDoc.responseXML])}else{t=dhx4.s2j(a.xmlDoc.responseText)}if(t!=null){x[x._dhxdataload.initObj].apply(x,[t,s])}x.callEvent("onXLE",[]);if(v!=null){if(typeof(v)=="function"){v.apply(x,[])}else{if(typeof(window[v])=="function"){window[v].apply(x,[])}}}m=v=null;t=a=x=null};n=n.join("&")+(typeof(u)=="string"?"&"+u:"");if(dhx4.ajax.method=="post"){return dhx4.ajax.post(s,n,m)}else{if(dhx4.ajax.method=="get"){return dhx4.ajax.get(s+(n.length>0?(s.indexOf("?")>0?"&":"?")+n:""),m)}}return}}else{if(typeof(s.documentElement)=="object"||(typeof(s.tagName)!="undefined"&&typeof(s.getElementsByTagName)!="undefined"&&s.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0)){r=this[this._dhxdataload.xmlToJson].apply(this,[s])}else{r=window.dhx4._copyObj(s)}}if(r!=null){this[this._dhxdataload.initObj].apply(this,[r])}this.callEvent("onXLE",[]);if(v!=null){if(typeof(v)=="function"){v.apply(this,[])}else{if(typeof(window[v])=="function"){window[v].apply(this,[])}}v=null}};if(l!=null){var e={struct:"loadStruct",data:"load"};for(var b in l){if(l[b]==true){j[e[b]]=function(){return this._loadData.apply(this,arguments)}}}}j=null}}if(typeof(window.dhx4._eventable)=="undefined"){window.dhx4._eventable=function(a,b){if(b=="clear"){a.detachAllEvents();a.dhxevs=null;a.attachEvent=null;a.detachEvent=null;a.checkEvent=null;a.callEvent=null;a.detachAllEvents=null;a=null;return}a.dhxevs={data:{}};a.attachEvent=function(c,g){c=String(c).toLowerCase();if(!this.dhxevs.data[c]){this.dhxevs.data[c]={}}var e=window.dhx4.newId();this.dhxevs.data[c][e]=g;return e};a.detachEvent=function(h){for(var e in this.dhxevs.data){var g=0;for(var c in this.dhxevs.data[e]){if(c==h){this.dhxevs.data[e][c]=null;delete this.dhxevs.data[e][c]}else{g++}}if(g==0){this.dhxevs.data[e]=null;delete this.dhxevs.data[e]}}};a.checkEvent=function(c){c=String(c).toLowerCase();return(this.dhxevs.data[c]!=null)};a.callEvent=function(e,h){e=String(e).toLowerCase();if(this.dhxevs.data[e]==null){return true}var g=true;for(var c in this.dhxevs.data[e]){g=this.dhxevs.data[e][c].apply(this,h)&&g}return g};a.detachAllEvents=function(){for(var e in this.dhxevs.data){for(var c in this.dhxevs.data[e]){this.dhxevs.data[e][c]=null;delete this.dhxevs.data[e][c]}this.dhxevs.data[e]=null;delete this.dhxevs.data[e]}};a=null};dhx4._eventable(dhx4)}if(!window.dhtmlxValidation){dhtmlxValidation=function(){};dhtmlxValidation.prototype={isEmpty:function(a){return a==""},isNotEmpty:function(a){return(a instanceof Array?a.length>0:!a=="")},isValidBoolean:function(a){return !!a.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(a){return !!a.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,5})$)/i)},isValidInteger:function(a){return !!a.toString().match(/(^-?\d+$)/)},isValidNumeric:function(a){return !!a.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(a){return !!a.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(b){var a=b.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return a&&!!(a[1]<=9999&&a[2]<=12&&a[3]<=31&&a[4]<=59&&a[5]<=59&&a[6]<=59)||false},isValidDate:function(a){var b=a.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return b&&!!(b[1]<=9999&&b[2]<=12&&b[3]<=31)||false},isValidTime:function(b){var a=b.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return a&&!!(a[1]<=24&&a[2]<=59&&a[3]<=59)||false},isValidIPv4:function(a){var b=a.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return b&&!!(b[1]<=255&&b[2]<=255&&b[3]<=255&&b[4]<=255)||false},isValidCurrency:function(a){return a.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)&&true||false},isValidSSN:function(a){return a.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&true||false},isValidSIN:function(a){return a.toString().match(/^\d{9}$/)&&true||false}};dhtmlxValidation=new dhtmlxValidation()}if(typeof(window.dhtmlx)=="undefined"){window.dhtmlx={extend:function(e,c){for(var g in c){if(!e[g]){e[g]=c[g]}}return e},extend_api:function(a,e,c){var b=window[a];if(!b){return}window[a]=function(j){if(j&&typeof j=="object"&&!j.tagName){var h=b.apply(this,(e._init?e._init(j):arguments));for(var g in dhtmlx){if(e[g]){this[e[g]](dhtmlx[g])}}for(var g in j){if(e[g]){this[e[g]](j[g])}else{if(g.indexOf("on")===0){this.attachEvent(g,j[g])}}}}else{var h=b.apply(this,arguments)}if(e._patch){e._patch(this)}return h||this};window[a].prototype=b.prototype;if(c){dhtmlx.extend(window[a].prototype,c)}},url:function(a){if(a.indexOf("?")!=-1){return"&"}else{return"?"}}}}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop){return window.dhtmlDragAndDrop}this.lastLanding=0;this.dragNode=0;this.dragStartNode=0;this.dragStartObject=0;this.tempDOMU=null;this.tempDOMM=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null;a.dragStarter=null;a.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,b){a.onmousedown=this.preCreateDragCopy;a.dragStarter=b;this.addDragLanding(a,b)};dhtmlDragAndDropObject.prototype.addDragLanding=function(a,b){a.dragLanding=b};dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){if((a||window.event)&&(a||event).button==2){return}if(window.dhtmlDragAndDrop.waitDrag){window.dhtmlDragAndDrop.waitDrag=0;document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU;document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM;return false}if(window.dhtmlDragAndDrop.dragNode){window.dhtmlDragAndDrop.stopDrag(a)}window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=new Date().valueOf();if((a)&&(a.preventDefault)){a.preventDefault();return false}return false};dhtmlDragAndDropObject.prototype.callDrag=function(c){if(!c){c=window.event}dragger=window.dhtmlDragAndDrop;if((new Date()).valueOf()-dragger.downtime<100){return}if(!dragger.dragNode){if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,c);if(!dragger.dragNode){return dragger.stopDrag()}dragger.dragNode.onselectstart=function(){return false};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else{return dragger.stopDrag(c,true)}}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var a=dragger.gldragNode;if(dragger.gldragNode.old){a=dragger.gldragNode.old}a.parentNode.removeChild(a);var b=dragger.dragNode.pWindow;if(a.pWindow&&a.pWindow.dhtmlDragAndDrop.lastLanding){a.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(a.pWindow.dhtmlDragAndDrop.lastLanding)}if(_isIE){var h=document.createElement("Div");h.innerHTML=dragger.dragNode.outerHTML;dragger.dragNode=h.childNodes[0]}else{dragger.dragNode=dragger.dragNode.cloneNode(true)}dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);b.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=c.clientX+15+(dragger.fx?dragger.fx*(-1):0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=c.clientY+3+(dragger.fy?dragger.fy*(-1):0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";if(!c.srcElement){var g=c.target}else{g=c.srcElement}dragger.checkLanding(g,c)};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(g){if(window.name){var c=parent.frames[window.name].frameElement.offsetParent;var e=0;var b=0;while(c){e+=c.offsetLeft;b+=c.offsetTop;c=c.offsetParent}if((parent.dhtmlDragAndDrop)){var a=parent.dhtmlDragAndDrop.calculateFramePosition(1);e+=a.split("_")[0]*1;b+=a.split("_")[1]*1}if(g){return e+"_"+b}else{this.fx=e}this.fy=b}return"0_0"};dhtmlDragAndDropObject.prototype.checkLanding=function(b,a){if((b)&&(b.dragLanding)){if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding)}this.lastLanding=b;this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,a.clientX,a.clientY,a);this.lastLanding_scr=(_isIE?a.srcElement:a.target)}else{if((b)&&(b.tagName!="BODY")){this.checkLanding(b.parentNode,a)}else{if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding,a.clientX,a.clientY,a)}this.lastLanding=0;if(this._onNotFound){this._onNotFound()}}}};dhtmlDragAndDropObject.prototype.stopDrag=function(b,c){dragger=window.dhtmlDragAndDrop;if(!c){dragger.stopFrameRoute();var a=dragger.lastLanding;dragger.lastLanding=null;if(a){a.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,a,(_isIE?event.srcElement:b.target))}}dragger.lastLanding=null;if((dragger.dragNode)&&(dragger.dragNode.parentNode==document.body)){dragger.dragNode.parentNode.removeChild(dragger.dragNode)}dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(c){if(c){window.dhtmlDragAndDrop.stopDrag(1,1)}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.stopFrameRoute(window)}}catch(b){}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.stopFrameRoute(window)}}catch(b){}};dhtmlDragAndDropObject.prototype.initFrameRoute=function(c,g){if(c){window.dhtmlDragAndDrop.preCreateDragCopy();window.dhtmlDragAndDrop.dragStartNode=c.dhtmlDragAndDrop.dragStartNode;window.dhtmlDragAndDrop.dragStartObject=c.dhtmlDragAndDrop.dragStartObject;window.dhtmlDragAndDrop.dragNode=c.dhtmlDragAndDrop.dragNode;window.dhtmlDragAndDrop.gldragNode=c.dhtmlDragAndDrop.dragNode;window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag;window.waitDrag=0;if(((!_isIE)&&(g))&&((!_isFF)||(_FFrv<1.8))){window.dhtmlDragAndDrop.calculateFramePosition()}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.initFrameRoute(window)}}catch(b){}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.initFrameRoute(window,((!c||g)?1:0))}}catch(b){}}};_isFF=false;_isIE=false;_isOpera=false;_isKHTML=false;_isMacOS=false;_isChrome=false;_FFrv=false;_KHTMLrv=false;_OperaRv=false;if(navigator.userAgent.indexOf("Macintosh")!=-1){_isMacOS=true}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){_isChrome=true}if((navigator.userAgent.indexOf("Safari")!=-1)||(navigator.userAgent.indexOf("Konqueror")!=-1)){_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5));if(_KHTMLrv>525){_isFF=true;_FFrv=1.9}else{_isKHTML=true}}else{if(navigator.userAgent.indexOf("Opera")!=-1){_isOpera=true;_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))}else{if(navigator.appName.indexOf("Microsoft")!=-1){_isIE=true;if((navigator.appVersion.indexOf("MSIE 8.0")!=-1||navigator.appVersion.indexOf("MSIE 9.0")!=-1||navigator.appVersion.indexOf("MSIE 10.0")!=-1||document.documentMode>7)&&document.compatMode!="BackCompat"){_isIE=8}}else{if(navigator.appName=="Netscape"&&navigator.userAgent.indexOf("Trident")!=-1){_isIE=8}else{_isFF=true;_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])}}}}if(typeof(window.dhtmlxEvent)=="undefined"){function dhtmlxEvent(b,c,a){if(b.addEventListener){b.addEventListener(c,a,false)}else{if(b.attachEvent){b.attachEvent("on"+c,a)}}}}if(dhtmlxEvent.touchDelay==null){dhtmlxEvent.touchDelay=2000}if(typeof(dhtmlxEvent.initTouch)=="undefined"){dhtmlxEvent.initTouch=function(){var e;var g;var b,a;dhtmlxEvent(document.body,"touchstart",function(h){g=h.touches[0].target;b=h.touches[0].clientX;a=h.touches[0].clientY;e=window.setTimeout(c,dhtmlxEvent.touchDelay)});function c(){if(g){var h=document.createEvent("HTMLEvents");h.initEvent("dblclick",true,true);g.dispatchEvent(h);e=g=null}}dhtmlxEvent(document.body,"touchmove",function(h){if(e){if(Math.abs(h.touches[0].clientX-b)>50||Math.abs(h.touches[0].clientY-a)>50){window.clearTimeout(e);e=g=false}}});dhtmlxEvent(document.body,"touchend",function(h){if(e){window.clearTimeout(e);e=g=false}});dhtmlxEvent.initTouch=function(){}}}(function(b){var c=typeof setImmediate!=="undefined"?setImmediate:function(g){setTimeout(g,0)};function e(h,j){var g=this;g.promise=g;g.state="pending";g.val=null;g.fn=h||null;g.er=j||null;g.next=[]}e.prototype.resolve=function(h){var g=this;if(g.state==="pending"){g.val=h;g.state="resolving";c(function(){g.fire()})}};e.prototype.reject=function(h){var g=this;if(g.state==="pending"){g.val=h;g.state="rejecting";c(function(){g.fire()})}};e.prototype.then=function(h,l){var g=this;var j=new e(h,l);g.next.push(j);if(g.state==="resolved"){j.resolve(g.val)}if(g.state==="rejected"){j.reject(g.val)}return j};e.prototype.fail=function(g){return this.then(null,g)};e.prototype.finish=function(j){var g=this;g.state=j;if(g.state==="resolved"){for(var h=0;h<g.next.length;h++){g.next[h].resolve(g.val)}}if(g.state==="rejected"){for(var h=0;h<g.next.length;h++){g.next[h].reject(g.val)}if(!g.next.length){throw (g.val)}}};e.prototype.thennable=function(m,g,j,r,o){var h=this;o=o||h.val;if(typeof o==="object"&&typeof m==="function"){try{var l=0;m.call(o,function(s){if(l++!==0){return}g(s)},function(s){if(l++!==0){return}j(s)})}catch(n){j(n)}}else{r(o)}};e.prototype.fire=function(){var g=this;var h;try{h=g.val&&g.val.then}catch(j){g.val=j;g.state="rejecting";return g.fire()}g.thennable(h,function(l){g.val=l;g.state="resolving";g.fire()},function(l){g.val=l;g.state="rejecting";g.fire()},function(l){g.val=l;if(g.state==="resolving"&&typeof g.fn==="function"){try{g.val=g.fn.call(undefined,g.val)}catch(m){g.val=m;return g.finish("rejected")}}if(g.state==="rejecting"&&typeof g.er==="function"){try{g.val=g.er.call(undefined,g.val);g.state="resolving"}catch(m){g.val=m;return g.finish("rejected")}}if(g.val===g){g.val=TypeError();return g.finish("rejected")}g.thennable(h,function(n){g.val=n;g.finish("resolved")},function(n){g.val=n;g.finish("rejected")},function(n){g.val=n;g.state==="resolving"?g.finish("resolved"):g.finish("rejected")})})};e.prototype.done=function(){if(this.state="rejected"&&!this.next){throw this.val}return null};e.prototype.nodeify=function(g){if(typeof g==="function"){return this.then(function(j){try{g(null,j)}catch(h){setImmediate(function(){throw h})}return j},function(j){try{g(j)}catch(h){setImmediate(function(){throw h})}return j})}return this};e.prototype.spread=function(g,h){return this.all().then(function(j){return typeof g==="function"&&g.apply(null,j)},h)};e.prototype.all=function(){var g=this;return this.then(function(u){var h=new e();if(!(u instanceof Array)){h.reject(TypeError);return h}var m=0;var t=u.length;function o(){if(++m===t){h.resolve(u)}}for(var r=0,n=u.length;r<n;r++){var v=u[r];var j;try{j=v&&v.then}catch(s){h.reject(s);break}(function(l){g.thennable(j,function(w){u[l]=w;o()},function(w){h.reject(w)},function(){o()},v)})(r)}return h})};var a={all:function(g){var h=new e(null,null);h.resolve(g);return h.all()},defer:function(){return new e(null,null)},fcall:function(){var j=new e();var g=Array.apply([],arguments);var h=g.shift();try{var m=h.apply(null,g);j.resolve(m)}catch(l){j.reject(l)}return j},nfcall:function(){var j=new e();var g=Array.apply([],arguments);var h=g.shift();try{g.push(function(m,n){if(m){return j.reject(m)}return j.resolve(n)});h.apply(null,g)}catch(l){j.reject(l)}return j}};b.promise=a})(dhx);if(!window.dhtmlx){dhtmlx={}}dhtmlx.assert=function(b,a){if(!b){dhtmlx.error(a)}};dhtmlx.assert_enabled=function(){return false};dhtmlx.assert_event=function(h,c){if(!h._event_check){h._event_check={};h._event_check_size={}}for(var b in c){h._event_check[b.toLowerCase()]=c[b];var g=-1;for(var e in c[b]){g++}h._event_check_size[b.toLowerCase()]=g}};dhtmlx.assert_method_info=function(g,b,e,h){var a=[];for(var c=0;c<h.length;c++){a.push(h[c][0]+" : "+h[c][1]+"\n   "+h[c][2].describe()+(h[c][3]?"; optional":""))}return g.name+"."+b+"\n"+e+"\n Arguments:\n - "+a.join("\n - ")};dhtmlx.assert_method=function(c,a){for(var b in a){dhtmlx.assert_method_process(c,b,a[b].descr,a[b].args,(a[b].min||99),a[b].skip)}};dhtmlx.assert_method_process=function(h,b,g,j,c,e){var a=h[b];if(!e){h[b]=function(){if(arguments.length!=j.length&&arguments.length<c){dhtmlx.log("warn","Incorrect count of parameters\n"+h[b].describe()+"\n\nExpecting "+j.length+" but have only "+arguments.length)}else{for(var l=0;l<j.length;l++){if(!j[l][3]&&!j[l][2](arguments[l])){dhtmlx.log("warn","Incorrect method call\n"+h[b].describe()+"\n\nActual value of "+(l+1)+" parameter: {"+(typeof arguments[l])+"} "+arguments[l])}}}return a.apply(this,arguments)}}h[b].describe=function(){return dhtmlx.assert_method_info(h,b,g,j)}};dhtmlx.assert_event_call=function(c,b,a){if(c._event_check){if(!c._event_check[b]){dhtmlx.log("warn","Not expected event call :"+b)}else{if(dhtmlx.isNotDefined(a)){dhtmlx.log("warn","Event without parameters :"+b)}else{if(c._event_check_size[b]!=a.length){dhtmlx.log("warn","Incorrect event call, expected "+c._event_check_size[b]+" parameter(s), but have "+a.length+" parameter(s), for "+b+" event")}}}}};dhtmlx.assert_event_attach=function(b,a){if(b._event_check&&!b._event_check[a]){dhtmlx.log("warn","Unknown event name: "+a)}};dhtmlx.assert_property=function(b,a){if(!b._settings_check){b._settings_check={}}dhtmlx.extend(b._settings_check,a)};dhtmlx.assert_check=function(c,b){if(typeof c=="object"){for(var a in c){dhtmlx.assert_settings(a,c[a],b)}}};dhtmlx.assert_settings=function(l,g,e){e=e||this._settings_check;if(e){if(!e[l]){return dhtmlx.log("warn","Unknown propery: "+l)}var j="";var b="";var a=false;for(var c=0;c<e[l].length;c++){var h=e[l][c];if(typeof h=="string"){continue}if(typeof h=="function"){a=a||h(g)}else{if(typeof h=="object"&&typeof h[1]=="function"){a=a||h[1](g);if(a&&h[2]){dhtmlx.assert_check(g,h[2])}}}if(a){break}}if(!a){dhtmlx.log("warn","Invalid configuration\n"+dhtmlx.assert_info(l,e)+"\nActual value: {"+(typeof g)+"} "+g)}}};dhtmlx.assert_info=function(b,h){var a=h[b];var g="";var e=[];for(var c=0;c<a.length;c++){if(typeof rule=="string"){g=a[c]}else{if(a[c].describe){e.push(a[c].describe())}else{if(a[c][1]&&a[c][1].describe){e.push(a[c][1].describe())}}}}return"Property: "+b+", "+g+" \nExpected value: \n - "+e.join("\n - ")};if(dhtmlx.assert_enabled()){dhtmlx.assert_rule_color=function(a){if(typeof a!="string"){return false}if(a.indexOf("#")!==0){return false}if(a.substr(1).replace(/[0-9A-F]/gi,"")!==""){return false}return true};dhtmlx.assert_rule_color.describe=function(){return"{String} Value must start from # and contain hexadecimal code of color"};dhtmlx.assert_rule_template=function(a){if(typeof a=="function"){return true}if(typeof a=="string"){return true}return false};dhtmlx.assert_rule_template.describe=function(){return"{Function},{String} Value must be a function which accepts data object and return text string, or a sting with optional template markers"};dhtmlx.assert_rule_boolean=function(a){if(typeof a=="boolean"){return true}return false};dhtmlx.assert_rule_boolean.describe=function(){return"{Boolean} true or false"};dhtmlx.assert_rule_object=function(a,b){if(typeof a=="object"){return true}return false};dhtmlx.assert_rule_object.describe=function(){return"{Object} Configuration object"};dhtmlx.assert_rule_string=function(a){if(typeof a=="string"){return true}return false};dhtmlx.assert_rule_string.describe=function(){return"{String} Plain string"};dhtmlx.assert_rule_htmlpt=function(a){return !!dhtmlx.toNode(a)};dhtmlx.assert_rule_htmlpt.describe=function(){return"{Object},{String} HTML node or ID of HTML Node"};dhtmlx.assert_rule_notdocumented=function(a){return false};dhtmlx.assert_rule_notdocumented.describe=function(){return"This options wasn't documented"};dhtmlx.assert_rule_key=function(b){var a=function(c){return b[c]};a.describe=function(){var e=[];for(var c in b){e.push(c)}return"{String} can take one of next values: "+e.join(", ")};return a};dhtmlx.assert_rule_dimension=function(a){if(a*1==a&&!isNaN(a)&&a>=0){return true}return false};dhtmlx.assert_rule_dimension.describe=function(){return"{Integer} value must be a positive number"};dhtmlx.assert_rule_number=function(a){if(typeof a=="number"){return true}return false};dhtmlx.assert_rule_number.describe=function(){return"{Integer} value must be a number"};dhtmlx.assert_rule_function=function(a){if(typeof a=="function"){return true}return false};dhtmlx.assert_rule_function.describe=function(){return"{Function} value must be a custom function"};dhtmlx.assert_rule_any=function(a){return true};dhtmlx.assert_rule_any.describe=function(){return"Any value"};dhtmlx.assert_rule_mix=function(e,c){var g=function(a){if(e(a)||c(a)){return true}return false};g.describe=function(){return e.describe()};return g}}dhtmlx.codebase="./";dhtmlx.copy=function(b){var a=dhtmlx.copy._function;a.prototype=b;return new a()};dhtmlx.copy._function=function(){};dhtmlx.extend=function(b,a){for(var c in a){b[c]=a[c]}if(dhtmlx.assert_enabled()&&a._assert){b._assert();b._assert=null}dhtmlx.assert(b,"Invalid nesting target");dhtmlx.assert(a,"Invalid nesting source");if(a._init){b._init()}return b};dhtmlx.proto_extend=function(){var h=arguments;var c=h[0];var b=[];for(var g=h.length-1;g>0;g--){if(typeof h[g]=="function"){h[g]=h[g].prototype}for(var e in h[g]){if(e=="_init"){b.push(h[g][e])}else{if(!c[e]){c[e]=h[g][e]}}}}if(h[0]._init){b.push(h[0]._init)}c._init=function(){for(var j=0;j<b.length;j++){b[j].apply(this,arguments)}};c.base=h[1];var a=function(j){this._init(j);if(this._parseSettings){this._parseSettings(j,this.defaults)}};a.prototype=c;c=h=null;return a};dhtmlx.bind=function(b,a){return function(){return b.apply(a,arguments)}};dhtmlx.require=function(a){if(!dhtmlx._modules[a]){dhtmlx.assert(dhtmlx.ajax,"load module is required");dhtmlx.exec(dhtmlx.ajax().sync().get(dhtmlx.codebase+a).responseText);dhtmlx._modules[a]=true}};dhtmlx._modules={};dhtmlx.exec=function(code){if(window.execScript){window.execScript(code)}else{window.eval(code)}};dhtmlx.methodPush=function(a,c,b){return function(){var e=false;e=a[c].apply(a,arguments);return e}};dhtmlx.isNotDefined=function(b){return typeof b=="undefined"};dhtmlx.delay=function(e,b,c,a){setTimeout(function(){var g=e.apply(b,c);e=b=c=null;return g},a||1)};dhtmlx.uid=function(){if(!this._seed){this._seed=(new Date).valueOf()}this._seed++;return this._seed};dhtmlx.toNode=function(a){if(typeof a=="string"){return document.getElementById(a)}return a};dhtmlx.toArray=function(a){return dhtmlx.extend((a||[]),dhtmlx.PowerArray)};dhtmlx.toFunctor=function(str){return(typeof(str)=="string")?eval(str):str};dhtmlx._events={};dhtmlx.event=function(e,c,a,b){e=dhtmlx.toNode(e);var g=dhtmlx.uid();dhtmlx._events[g]=[e,c,a];if(b){a=dhtmlx.bind(a,b)}if(e.addEventListener){e.addEventListener(c,a,false)}else{if(e.attachEvent){e.attachEvent("on"+c,a)}}return g};dhtmlx.eventRemove=function(b){if(!b){return}dhtmlx.assert(this._events[b],"Removing non-existing event");var a=dhtmlx._events[b];if(a[0].removeEventListener){a[0].removeEventListener(a[1],a[2],false)}else{if(a[0].detachEvent){a[0].detachEvent("on"+a[1],a[2])}}delete this._events[b]};dhtmlx.log=function(b,c,a){if(window.console&&console.log){b=b.toLowerCase();if(window.console[b]){window.console[b](c||"unknown error")}else{window.console.log(b+": "+c)}if(a){window.console.log(a)}}};dhtmlx.log_full_time=function(a){dhtmlx._start_time_log=new Date();dhtmlx.log("Info","Timing start ["+a+"]");window.setTimeout(function(){var b=new Date();dhtmlx.log("Info","Timing end ["+a+"]:"+(b.valueOf()-dhtmlx._start_time_log.valueOf())/1000+"s")},1)};dhtmlx.log_time=function(a){var c="_start_time_log"+a;if(!dhtmlx[c]){dhtmlx[c]=new Date();dhtmlx.log("Info","Timing start ["+a+"]")}else{var b=new Date();dhtmlx.log("Info","Timing end ["+a+"]:"+(b.valueOf()-dhtmlx[c].valueOf())/1000+"s");dhtmlx[c]=null}};dhtmlx.error=function(b,a){dhtmlx.log("error",b,a)};dhtmlx.EventSystem={_init:function(){this._events={};this._handlers={};this._map={}},block:function(){this._events._block=true},unblock:function(){this._events._block=false},mapEvent:function(a){dhtmlx.extend(this._map,a)},callEvent:function(c,g){if(this._events._block){return true}c=c.toLowerCase();dhtmlx.assert_event_call(this,c,g);var e=this._events[c.toLowerCase()];var a=true;if(dhtmlx.debug){dhtmlx.log("info","["+this.name+"] event:"+c,g)}if(e){for(var b=0;b<e.length;b++){if(e[b].apply(this,(g||[]))===false){a=false}}}if(this._map[c]&&!this._map[c].callEvent(c,g)){a=false}return a},attachEvent:function(b,a,e){b=b.toLowerCase();dhtmlx.assert_event_attach(this,b);e=e||dhtmlx.uid();a=dhtmlx.toFunctor(a);var c=this._events[b]||dhtmlx.toArray();c.push(a);this._events[b]=c;this._handlers[e]={f:a,t:b};return e},detachEvent:function(e){if(this._handlers[e]){var b=this._handlers[e].t;var a=this._handlers[e].f;var c=this._events[b];c.remove(a);delete this._handlers[e]}}};dhtmlx.PowerArray={removeAt:function(b,a){if(b>=0){this.splice(b,(a||1))}},remove:function(a){this.removeAt(this.find(a))},insertAt:function(c,e){if(!e&&e!==0){this.push(c)}else{var a=this.splice(e,(this.length-e));this[e]=c;this.push.apply(this,a)}},find:function(a){for(i=0;i<this.length;i++){if(a==this[i]){return i}}return -1},each:function(a,c){for(var b=0;b<this.length;b++){a.call((c||this),this[b])}},map:function(a,c){for(var b=0;b<this.length;b++){this[b]=a.call((c||this),this[b])}return this}};dhtmlx.env={};if(navigator.userAgent.indexOf("Opera")!=-1){dhtmlx._isOpera=true}else{dhtmlx._isIE=!!document.all;dhtmlx._isFF=!document.all;dhtmlx._isWebKit=(navigator.userAgent.indexOf("KHTML")!=-1);if(navigator.appVersion.indexOf("MSIE 8.0")!=-1&&document.compatMode!="BackCompat"){dhtmlx._isIE=8}if(navigator.appVersion.indexOf("MSIE 9.0")!=-1&&document.compatMode!="BackCompat"){dhtmlx._isIE=9}}dhtmlx.env={};(function(){dhtmlx.env.transform=false;dhtmlx.env.transition=false;var a={};a.names=["transform","transition"];a.transform=["transform","WebkitTransform","MozTransform","oTransform","msTransform"];a.transition=["transition","WebkitTransition","MozTransition","oTransition"];var e=document.createElement("DIV");var c;for(var b=0;b<a.names.length;b++){while(p=a[a.names[b]].pop()){if(typeof e.style[p]!="undefined"){dhtmlx.env[a.names[b]]=true}}}})();dhtmlx.env.transform_prefix=(function(){var a;if(dhtmlx._isOpera){a="-o-"}else{a="";if(dhtmlx._isFF){a="-moz-"}if(dhtmlx._isWebKit){a="-webkit-"}}return a})();dhtmlx.env.svg=(function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")})();dhtmlx.zIndex={drag:10000};dhtmlx.html={create:function(b,a,c){a=a||{};var e=document.createElement(b);for(var g in a){e.setAttribute(g,a[g])}if(a.style){e.style.cssText=a.style}if(a["class"]){e.className=a["class"]}if(c){e.innerHTML=c}return e},getValue:function(a){a=dhtmlx.toNode(a);if(!a){return""}return dhtmlx.isNotDefined(a.value)?a.innerHTML:a.value},remove:function(b){if(b instanceof Array){for(var a=0;a<b.length;a++){this.remove(b[a])}}else{if(b&&b.parentNode){b.parentNode.removeChild(b)}}},insertBefore:function(b,c,a){if(!b){return}if(c){c.parentNode.insertBefore(b,c)}else{a.appendChild(b)}},locate:function(b,g){b=b||event;var a=b.target||b.srcElement;while(a){if(a.getAttribute){var c=a.getAttribute(g);if(c){return c}}a=a.parentNode}return null},offset:function(e){if(e.getBoundingClientRect){var j=e.getBoundingClientRect();var l=document.body;var b=document.documentElement;var a=window.pageYOffset||b.scrollTop||l.scrollTop;var g=window.pageXOffset||b.scrollLeft||l.scrollLeft;var h=b.clientTop||l.clientTop||0;var m=b.clientLeft||l.clientLeft||0;var n=j.top+a-h;var c=j.left+g-m;return{y:Math.round(n),x:Math.round(c)}}else{var n=0,c=0;while(e){n=n+parseInt(e.offsetTop,10);c=c+parseInt(e.offsetLeft,10);e=e.offsetParent}return{y:n,x:c}}},pos:function(a){a=a||event;if(a.pageX||a.pageY){return{x:a.pageX,y:a.pageY}}var b=((dhtmlx._isIE)&&(document.compatMode!="BackCompat"))?document.documentElement:document.body;return{x:a.clientX+b.scrollLeft-b.clientLeft,y:a.clientY+b.scrollTop-b.clientTop}},preventEvent:function(a){if(a&&a.preventDefault){a.preventDefault()}dhtmlx.html.stopEvent(a)},stopEvent:function(a){(a||event).cancelBubble=true;return false},addCss:function(b,a){b.className+=" "+a},removeCss:function(b,a){b.className=b.className.replace(RegExp(a,"g"),"")}};(function(){var a=document.getElementsByTagName("SCRIPT");dhtmlx.assert(a.length,"Can't locate codebase");if(a.length){a=(a[a.length-1].getAttribute("src")||"").split("/");a.splice(a.length-1,1);dhtmlx.codebase=a.slice(0,a.length).join("/")+"/"}})();if(!dhtmlx.ui){dhtmlx.ui={}}dhtmlx.Destruction={_init:function(){dhtmlx.destructors.push(this)},destructor:function(a){this.destructor=function(){};this._htmlmap=null;this._htmlrows=null;if(this._html){document.body.appendChild(this._html)}this._html=null;if(this._obj){this._obj.innerHTML="";this._obj._htmlmap=null}this._obj=this._dataobj=null;this.data=null;this._events=this._handlers={};this.canvases=[];if(this.render){this.render=function(){}}}};dhtmlx.destructors=[];dhtmlx.event(window,"unload",function(){if(dhtmlx.destructors){for(var c=0;c<dhtmlx.destructors.length;c++){dhtmlx.destructors[c].destructor(-1)}dhtmlx.destructors=[]}for(var b in dhtmlx._events){var e=dhtmlx._events[b];if(e[0].removeEventListener){e[0].removeEventListener(e[1],e[2],false)}else{if(e[0].detachEvent){e[0].detachEvent("on"+e[1],e[2])}}delete dhtmlx._events[b]}});dhtmlx.ajax=function(a,b,c){if(arguments.length!==0){var e=new dhtmlx.ajax();if(c){e.master=c}e.get(a,null,b)}if(!this.getXHR){return new dhtmlx.ajax()}return this};dhtmlx.ajax.prototype={getXHR:function(){if(dhtmlx._isIE){return new ActiveXObject("Microsoft.xmlHTTP")}else{return new XMLHttpRequest()}},send:function(g,m,j){var b=this.getXHR();if(typeof j=="function"){j=[j]}if(typeof m=="object"){var h=[];for(var c in m){var l=m[c];if(l===null||l===dhtmlx.undefined){l=""}h.push(c+"="+encodeURIComponent(l))}m=h.join("&")}if(m&&!this.post){g=g+(g.indexOf("?")!=-1?"&":"?")+m;m=null}b.open(this.post?"POST":"GET",g,!this._sync);if(this.post){b.setRequestHeader("Content-type","application/x-www-form-urlencoded")}var e=this;b.onreadystatechange=function(){if(!b.readyState||b.readyState==4){if(j&&e){for(var a=0;a<j.length;a++){if(j[a]){j[a].call((e.master||e),b.responseText,b.responseXML,b)}}}e.master=null;j=e=null}};b.send(m||null);return b},get:function(a,c,b){this.post=false;return this.send(a,c,b)},post:function(a,c,b){this.post=true;return this.send(a,c,b)},sync:function(){this._sync=true;return this}};dhtmlx.AtomDataLoader={_init:function(a){this.data={};if(a){this._settings.datatype=a.datatype||"json";this._after_init.push(this._load_when_ready)}},_load_when_ready:function(){this._ready_for_data=true;if(this._settings.url){this.url_setter(this._settings.url)}if(this._settings.data){this.data_setter(this._settings.data)}},url_setter:function(a){if(!this._ready_for_data){return a}this.load(a,this._settings.datatype);return a},data_setter:function(a){if(!this._ready_for_data){return a}this.parse(a,this._settings.datatype);return true},load:function(a,b){this.callEvent("onXLS",[]);if(typeof b=="string"){this.data.driver=dhtmlx.DataDriver[b];b=arguments[2]}else{this.data.driver=dhtmlx.DataDriver[this._settings.datatype||"xml"]}if(window.dhx4){return dhx4.ajax.get(a,dhtmlx.bind(function(e){var c=e.xmlDoc;var h=c.responseText;var g=c.responseXML;if(this._onLoad){this._onLoad.call(this,h,g,c)}if(b){b.call(this,h,g,c)}},this))}else{dhtmlx.ajax(a,[this._onLoad,b],this)}},parse:function(b,a){this.callEvent("onXLS",[]);this.data.driver=dhtmlx.DataDriver[a||"xml"];this._onLoad(b,null)},_onLoad:function(g,b,a){var c=this.data.driver;var e=c.getRecords(c.toObject(g,b))[0];this.data=(c?c.getDetails(e):g);this.callEvent("onXLE",[])},_check_data_feed:function(b){if(!this._settings.dataFeed||this._ignore_feed||!b){return true}var a=this._settings.dataFeed;if(typeof a=="function"){return a.call(this,(b.id||b),b)}a=a+(a.indexOf("?")==-1?"?":"&")+"action=get&id="+encodeURIComponent(b.id||b);this.callEvent("onXLS",[]);dhtmlx.ajax(a,function(e,c){this._ignore_feed=true;this.setValues(dhtmlx.DataDriver.json.toObject(e)[0]);this._ignore_feed=false;this.callEvent("onXLE",[])},this);return false}};dhtmlx.DataDriver={};dhtmlx.DataDriver.json={toObject:function(data){if(!data){data="[]"}if(typeof data=="string"){eval("dhtmlx.temp="+data);return dhtmlx.temp}return data},getRecords:function(a){if(a&&a.data){a=a.data}if(a&&!(a instanceof Array)){return[a]}return a},getDetails:function(a){return a},getInfo:function(a){return{_size:(a.total_count||0),_from:(a.pos||0),_key:(a.dhx_security)}}};dhtmlx.DataDriver.json_ext={toObject:function(data){if(!data){data="[]"}if(typeof data=="string"){var temp;eval("temp="+data);dhtmlx.temp=[];var header=temp.header;for(var i=0;i<temp.data.length;i++){var item={};for(var j=0;j<header.length;j++){if(typeof(temp.data[i][j])!="undefined"){item[header[j]]=temp.data[i][j]}}dhtmlx.temp.push(item)}return dhtmlx.temp}return data},getRecords:function(a){if(a&&!(a instanceof Array)){return[a]}return a},getDetails:function(a){return a},getInfo:function(a){return{_size:(a.total_count||0),_from:(a.pos||0)}}};dhtmlx.DataDriver.html={toObject:function(b){if(typeof b=="string"){var a=null;if(b.indexOf("<")==-1){a=dhtmlx.toNode(b)}if(!a){a=document.createElement("DIV");a.innerHTML=b}return a.getElementsByTagName(this.tag)}return b},getRecords:function(a){if(a.tagName){return a.childNodes}return a},getDetails:function(a){return dhtmlx.DataDriver.xml.tagToObject(a)},getInfo:function(a){return{_size:0,_from:0}},tag:"LI"};dhtmlx.DataDriver.jsarray={toObject:function(data){if(typeof data=="string"){eval("dhtmlx.temp="+data);return dhtmlx.temp}return data},getRecords:function(a){return a},getDetails:function(c){var a={};for(var b=0;b<c.length;b++){a["data"+b]=c[b]}return a},getInfo:function(a){return{_size:0,_from:0}}};dhtmlx.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(c){c=this.stringToArray(c);var a={};for(var b=0;b<c.length;b++){a["data"+b]=c[b]}return a},getInfo:function(a){return{_size:0,_from:0}},stringToArray:function(b){b=b.split(this.cell);for(var a=0;a<b.length;a++){b[a]=b[a].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"")}return b},row:"\n",cell:","};dhtmlx.DataDriver.xml={toObject:function(b,a){if(a&&(a=this.checkResponse(b,a))){return a}if(typeof b=="string"){return this.fromString(b)}return b},getRecords:function(a){return this.xpath(a,this.records)},records:"/*/item",getDetails:function(a){return this.tagToObject(a,{})},getInfo:function(a){return{_size:(a.documentElement.getAttribute("total_count")||0),_from:(a.documentElement.getAttribute("pos")||0),_key:(a.documentElement.getAttribute("dhx_security"))}},xpath:function(g,n){if(window.XPathResult){var c=g;if(g.nodeName.indexOf("document")==-1){g=g.ownerDocument}var l=[];var b=g.evaluate(n,c,null,XPathResult.ANY_TYPE,null);var m=b.iterateNext();while(m){l.push(m);m=b.iterateNext()}return l}else{var j=true;try{if(typeof(g.selectNodes)=="undefined"){j=false}}catch(h){}if(j){return g.selectNodes(n)}else{var a=n.split("/").pop();return g.getElementsByTagName(a)}}},tagToObject:function(e,n){n=n||{};var h=false;var c=e.childNodes;var m={};for(var l=0;l<c.length;l++){if(c[l].nodeType==1){var j=c[l].tagName;if(typeof n[j]!="undefined"){if(!(n[j] instanceof Array)){n[j]=[n[j]]}n[j].push(this.tagToObject(c[l],{}))}else{n[c[l].tagName]=this.tagToObject(c[l],{})}h=true}}var g=e.attributes;if(g&&g.length){for(var l=0;l<g.length;l++){n[g[l].name]=g[l].value}h=true}if(!h){return this.nodeValue(e)}n.value=this.nodeValue(e);return n},nodeValue:function(a){if(a.firstChild){return a.firstChild.wholeText||a.firstChild.data}return""},fromString:function(b){if(window.DOMParser&&!dhtmlx._isIE){return(new DOMParser()).parseFromString(b,"text/xml")}if(window.ActiveXObject){var a=new ActiveXObject("Microsoft.xmlDOM");a.loadXML(b);return a}dhtmlx.error("Load from xml string is not supported")},checkResponse:function(e,c){if(c&&(c.firstChild&&c.firstChild.tagName!="parsererror")){return c}var b=this.fromString(e.replace(/^[\s]+/,""));if(b){return b}dhtmlx.error("xml can't be parsed",e)}};dhtmlx.DataLoader={_init:function(a){a=a||"";this.name="DataStore";this.data=(a.datastore)||(new dhtmlx.DataStore());this._readyHandler=this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._call_onready,this))},load:function(a,b){dhtmlx.AtomDataLoader.load.apply(this,arguments);if(!this.data.feed){this.data.feed=function(e,c){if(this._load_count){return this._load_count=[e,c]}else{this._load_count=true}this.load(a+((a.indexOf("?")==-1)?"?":"&")+"posStart="+e+"&count="+c,function(){var g=this._load_count;this._load_count=false;if(typeof g=="object"){this.data.feed.apply(this,g)}})}}},_onLoad:function(c,b,a){this.data._parse(this.data.driver.toObject(c,b));this.callEvent("onXLE",[]);if(this._readyHandler){this.data.detachEvent(this._readyHandler);this._readyHandler=null}},dataFeed_setter:function(a){this.data.attachEvent("onBeforeFilter",dhtmlx.bind(function(j,h){if(this._settings.dataFeed){var g={};if(!j&&!g){return}if(typeof j=="function"){if(!h){return}j(h,g)}else{g={text:h}}this.clearAll();var b=this._settings.dataFeed;if(typeof b=="function"){return b.call(this,h,g)}var e=[];for(var c in g){e.push("dhx_filter["+c+"]="+encodeURIComponent(g[c]))}this.load(b+(b.indexOf("?")<0?"?":"&")+e.join("&"),this._settings.datatype);return false}},this));return a},_call_onready:function(){if(this._settings.ready){var a=dhtmlx.toFunctor(this._settings.ready);if(a&&a.call){a.apply(this,arguments)}}}};dhtmlx.DataStore=function(){this.name="DataStore";dhtmlx.extend(this,dhtmlx.EventSystem);this.setDriver("xml");this.pull={};this.order=dhtmlx.toArray()};dhtmlx.DataStore.prototype={setDriver:function(a){dhtmlx.assert(dhtmlx.DataDriver[a],"incorrect DataDriver");this.driver=dhtmlx.DataDriver[a]},_parse:function(g){this.callEvent("onParse",[this.driver,g]);if(this._filter_order){this.filter()}var h=this.driver.getInfo(g);if(h._key){dhtmlx.security_key=h._key}var e=this.driver.getRecords(g);var m=(h._from||0)*1;if(m===0&&this.order[0]){m=this.order.length}var b=0;for(var c=0;c<e.length;c++){var a=this.driver.getDetails(e[c]);var l=this.id(a);if(!this.pull[l]){this.order[b+m]=l;b++}this.pull[l]=a;if(this.extraParser){this.extraParser(a)}if(this._scheme){if(this._scheme.$init){this._scheme.$update(a)}else{if(this._scheme.$update){this._scheme.$update(a)}}}}for(var c=0;c<h._size;c++){if(!this.order[c]){var l=dhtmlx.uid();var a={id:l,$template:"loading"};this.pull[l]=a;this.order[c]=l}}this.callEvent("onStoreLoad",[this.driver,g]);this.refresh()},id:function(a){return a.id||(a.id=dhtmlx.uid())},changeId:function(b,a){dhtmlx.assert(this.pull[b],"Can't change id, for non existing item: "+b);this.pull[a]=this.pull[b];this.pull[a].id=a;this.order[this.order.find(b)]=a;if(this._filter_order){this._filter_order[this._filter_order.find(b)]=a}this.callEvent("onIdChange",[b,a]);if(this._render_change_id){this._render_change_id(b,a)}},get:function(a){return this.item(a)},set:function(b,a){return this.update(b,a)},item:function(a){return this.pull[a]},update:function(b,a){if(this._scheme&&this._scheme.$update){this._scheme.$update(a)}if(this.callEvent("onBeforeUpdate",[b,a])===false){return false}this.pull[b]=a;this.refresh(b)},refresh:function(a){if(this._skip_refresh){return}if(a){this.callEvent("onStoreUpdated",[a,this.pull[a],"update"])}else{this.callEvent("onStoreUpdated",[null,null,null])}},silent:function(a){this._skip_refresh=true;a.call(this);this._skip_refresh=false},getRange:function(e,c){if(e){e=this.indexById(e)}else{e=this.startOffset||0}if(c){c=this.indexById(c)}else{c=Math.min((this.endOffset||Infinity),(this.dataCount()-1));if(c<0){c=0}}if(this.min){e=this.min}if(this.max){c=this.max}if(e>c){var b=c;c=e;e=b}return this.getIndexRange(e,c)},getIndexRange:function(e,c){c=Math.min((c||Infinity),this.dataCount()-1);var a=dhtmlx.toArray();for(var b=(e||0);b<=c;b++){a.push(this.item(this.order[b]))}return a},dataCount:function(){return this.order.length},exists:function(a){return !!(this.pull[a])},move:function(a,e){if(a<0||e<0){dhtmlx.error("DataStore::move","Incorrect indexes");return}var c=this.idByIndex(a);var b=this.item(c);this.order.removeAt(a);this.order.insertAt(c,Math.min(this.order.length,e));this.callEvent("onStoreUpdated",[c,b,"move"])},scheme:function(a){this._scheme=a},sync:function(g,e,a){if(typeof e!="function"){a=e;e=null}if(dhtmlx.debug_bind){this.debug_sync_master=g;dhtmlx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id)}var c=g;if(g.name!="DataStore"){g=g.data}var b=dhtmlx.bind(function(l,h,j){if(j!="update"||e){l=null}if(!l){this.order=dhtmlx.toArray([].concat(g.order));this._filter_order=null;this.pull=g.pull;if(e){this.silent(e)}if(this._on_sync){this._on_sync()}}if(dhtmlx.debug_bind){dhtmlx.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id)}if(!a){this.refresh(l)}else{a=false}},this);g.attachEvent("onStoreUpdated",b);this.feed=function(j,h){c.loadNext(h,j)};b()},add:function(g,a){if(this._scheme){g=g||{};for(var b in this._scheme){g[b]=g[b]||this._scheme[b]}if(this._scheme){if(this._scheme.$init){this._scheme.$update(g)}else{if(this._scheme.$update){this._scheme.$update(g)}}}}var h=this.id(g);var e=this.dataCount();if(dhtmlx.isNotDefined(a)||a<0){a=e}if(a>e){dhtmlx.log("Warning","DataStore:add","Index of out of bounds");a=Math.min(this.order.length,a)}if(this.callEvent("onBeforeAdd",[h,g,a])===false){return false}if(this.exists(h)){return dhtmlx.error("Not unique ID")}this.pull[h]=g;this.order.insertAt(h,a);if(this._filter_order){var c=this._filter_order.length;if(!a&&this.order.length){c=0}this._filter_order.insertAt(h,c)}this.callEvent("onafterAdd",[h,a]);this.callEvent("onStoreUpdated",[h,g,"add"]);return h},remove:function(c){if(c instanceof Array){for(var a=0;a<c.length;a++){this.remove(c[a])}return}if(this.callEvent("onBeforeDelete",[c])===false){return false}if(!this.exists(c)){return dhtmlx.error("Not existing ID",c)}var b=this.item(c);this.order.remove(c);if(this._filter_order){this._filter_order.remove(c)}delete this.pull[c];this.callEvent("onafterdelete",[c]);this.callEvent("onStoreUpdated",[c,b,"delete"])},clearAll:function(){this.pull={};this.order=dhtmlx.toArray();this.feed=null;this._filter_order=null;this.callEvent("onClearAll",[]);this.refresh()},idByIndex:function(a){if(a>=this.order.length||a<0){dhtmlx.log("Warning","DataStore::idByIndex Incorrect index")}return this.order[a]},indexById:function(b){var a=this.order.find(b);return a},next:function(b,a){return this.order[this.indexById(b)+(a||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(b,a){return this.order[this.indexById(b)-(a||1)]},sort:function(h,b,a){var c=h;if(typeof h=="function"){c={as:h,dir:b}}else{if(typeof h=="string"){c={by:h,dir:b,as:a}}}var g=[c.by,c.dir,c.as];if(!this.callEvent("onbeforesort",g)){return}if(this.order.length){var j=dhtmlx.sort.create(c);var e=this.getRange(this.first(),this.last());e.sort(j);this.order=e.map(function(l){return this.id(l)},this)}this.refresh();this.callEvent("onaftersort",g)},filter:function(g,e){if(!this.callEvent("onBeforeFilter",[g,e])){return}if(this._filter_order){this.order=this._filter_order;delete this._filter_order}if(!this.order.length){return}if(g){var b=g;e=e||"";if(typeof g=="string"){g=dhtmlx.Template.fromHTML(g);e=e.toString().toLowerCase();b=function(l,j){return g(l).toLowerCase().indexOf(j)!=-1}}var c=dhtmlx.toArray();for(var a=0;a<this.order.length;a++){var h=this.order[a];if(b(this.item(h),e)){c.push(h)}}this._filter_order=this.order;this.order=c}this.refresh();this.callEvent("onAfterFilter",[])},each:function(c,b){for(var a=0;a<this.order.length;a++){c.call((b||this),this.item(this.order[a]))}},provideApi:function(e,b){this.debug_bind_master=e;if(b){this.mapEvent({onbeforesort:e,onaftersort:e,onbeforeadd:e,onafteradd:e,onbeforedelete:e,onafterdelete:e,onbeforeupdate:e})}var c=["get","set","sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll","first","last","serialize"];for(var a=0;a<c.length;a++){e[c[a]]=dhtmlx.methodPush(this,c[a])}if(dhtmlx.assert_enabled()){this.assert_event(e)}},serialize:function(){var c=this.order;var a=[];for(var b=0;b<c.length;b++){a.push(this.pull[c[b]])}return a}};dhtmlx.sort={create:function(a){return dhtmlx.sort.dir(a.dir,dhtmlx.sort.by(a.by,a.as))},as:{"int":function(e,c){e=e*1;c=c*1;return e>c?1:(e<c?-1:0)},string_strict:function(e,c){e=e.toString();c=c.toString();return e>c?1:(e<c?-1:0)},string:function(e,c){e=e.toString().toLowerCase();c=c.toString().toLowerCase();return e>c?1:(e<c?-1:0)}},by:function(b,a){if(!b){return a}if(typeof a!="function"){a=dhtmlx.sort.as[a||"string"]}b=dhtmlx.Template.fromHTML(b);return function(e,c){return a(b(e),b(c))}},dir:function(b,a){if(b=="asc"){return a}return function(e,c){return a(e,c)*-1}}};dhtmlx.KeyEvents={_init:function(){dhtmlx.event(this._obj,"keypress",this._onKeyPress,this)},_onKeyPress:function(b){b=b||event;var a=b.which||b.keyCode;this.callEvent((this._edit_id?"onEditKeyPress":"onKeyPress"),[a,b.ctrlKey,b.shiftKey,b])}};dhtmlx.MouseEvents={_init:function(){if(this.on_click){dhtmlx.event(this._obj,"click",this._onClick,this);dhtmlx.event(this._obj,"contextmenu",this._onContext,this)}if(this.on_dblclick){dhtmlx.event(this._obj,"dblclick",this._onDblClick,this)}if(this.on_mouse_move){dhtmlx.event(this._obj,"mousemove",this._onMouse,this);dhtmlx.event(this._obj,(dhtmlx._isIE?"mouseleave":"mouseout"),this._onMouse,this)}},_onClick:function(a){return this._mouseEvent(a,this.on_click,"ItemClick")},_onDblClick:function(a){return this._mouseEvent(a,this.on_dblclick,"ItemDblClick")},_onContext:function(a){var b=dhtmlx.html.locate(a,this._id);if(b&&!this.callEvent("onBeforeContextMenu",[b,a])){return dhtmlx.html.preventEvent(a)}},_onMouse:function(a){if(dhtmlx._isIE){a=document.createEventObject(event)}if(this._mouse_move_timer){window.clearTimeout(this._mouse_move_timer)}this.callEvent("onMouseMoving",[a]);this._mouse_move_timer=window.setTimeout(dhtmlx.bind(function(){if(a.type=="mousemove"){this._onMouseMove(a)}else{this._onMouseOut(a)}},this),500)},_onMouseMove:function(a){if(!this._mouseEvent(a,this.on_mouse_move,"MouseMove")){this.callEvent("onMouseOut",[a||event])}},_onMouseOut:function(a){this.callEvent("onMouseOut",[a||event])},_mouseEvent:function(j,h,b){j=j||event;var a=j.target||j.srcElement;var c="";var l=null;var g=false;while(a&&a.parentNode){if(!g&&a.getAttribute){l=a.getAttribute(this._id);if(l){if(a.getAttribute("userdata")){this.callEvent("onLocateData",[l,a,j])}if(!this.callEvent("on"+b,[l,j,a])){return}g=true}}c=a.className;if(c){c=c.split(" ");c=c[0]||c[1];if(h[c]){return h[c].call(this,j,l||dhtmlx.html.locate(j,this._id),a)}}a=a.parentNode}return g}};dhtmlx.Settings={_init:function(){this._settings=this.config={}},define:function(b,a){if(typeof b=="object"){return this._parseSeetingColl(b)}return this._define(b,a)},_define:function(b,a){dhtmlx.assert_settings.call(this,b,a);var c=this[b+"_setter"];return this._settings[b]=c?c.call(this,a):a},_parseSeetingColl:function(c){if(c){for(var b in c){this._define(b,c[b])}}},_parseSettings:function(c,a){var b=dhtmlx.extend({},a);if(typeof c=="object"&&!c.tagName){dhtmlx.extend(b,c)}this._parseSeetingColl(b)},_mergeSettings:function(a,c){for(var b in c){switch(typeof a[b]){case"object":a[b]=this._mergeSettings((a[b]||{}),c[b]);break;case"undefined":a[b]=c[b];break;default:break}}return a},_parseContainer:function(b,a,c){if(typeof b=="object"&&!b.tagName){b=b.container}this._obj=this.$view=dhtmlx.toNode(b);if(!this._obj&&c){this._obj=c(b)}dhtmlx.assert(this._obj,"Incorrect html container");this._obj.className+=" "+a;this._obj.onselectstart=function(){return false};this._dataobj=this._obj},_set_type:function(a){if(typeof a=="object"){return this.type_setter(a)}dhtmlx.assert(this.types,"RenderStack :: Types are not defined");dhtmlx.assert(this.types[a],"RenderStack :: Inccorect type name",a);this.type=dhtmlx.extend({},this.types[a]);this.customize()},customize:function(a){if(a){dhtmlx.extend(this.type,a)}this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type));this.type._item_end=this.template_item_end(this.type);this.render()},type_setter:function(a){this._set_type(typeof a=="object"?dhtmlx.Type.add(this,a):a);return a},template_setter:function(a){return this.type_setter({template:a})},css_setter:function(a){this._obj.className+=" "+a;return a}};dhtmlx.Template={_cache:{},empty:function(){return""},setter:function(a){return dhtmlx.Template.fromHTML(a)},obj_setter:function(b){var a=dhtmlx.Template.setter(b);var c=this;return function(){return a.apply(c,arguments)}},fromHTML:function(a){if(typeof a=="function"){return a}if(this._cache[a]){return this._cache[a]}a=(a||"").toString();a=a.replace(/[\r\n]+/g,"\\n");a=a.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');a=a.replace(/\{common\.([^}\(]*)\}/g,'"+common.$1+"');a=a.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1(obj):"")+"');a=a.replace(/\{obj\.([^}]*)\}/g,'"+obj.$1+"');a=a.replace(/#([a-z0-9_]+)#/gi,'"+obj.$1+"');a=a.replace(/\{obj\}/g,'"+obj+"');a=a.replace(/\{-obj/g,"{obj");a=a.replace(/\{-common/g,"{common");a='return "'+a+'";';return this._cache[a]=Function("obj","common",a)}};dhtmlx.Type={add:function(c,b){if(!c.types&&c.prototype.types){c=c.prototype}if(dhtmlx.assert_enabled()){this.assert_event(b)}var a=b.name||"default";this._template(b);this._template(b,"edit");this._template(b,"loading");c.types[a]=dhtmlx.extend(dhtmlx.extend({},(c.types[a]||this._default)),b);return a},_default:{css:"default",template:function(){return""},template_edit:function(){return""},template_loading:function(){return"..."},width:150,height:80,margin:5,padding:0},_template:function(c,a){a="template"+(a?("_"+a):"");var b=c[a];if(b&&(typeof b=="string")){if(b.indexOf("->")!=-1){b=b.split("->");switch(b[0]){case"html":b=dhtmlx.html.getValue(b[1]).replace(/\"/g,'\\"');break;case"http":b=new dhtmlx.ajax().sync().get(b[1],{uid:(new Date()).valueOf()}).responseText;break;default:break}}c[a]=dhtmlx.Template.fromHTML(b)}}};dhtmlx.SingleRender={_init:function(){},_toHTML:function(a){return this.type._item_start(a,this.type)+this.type.template(a,this.type)+this.type._item_end},render:function(){if(!this.callEvent||this.callEvent("onBeforeRender",[this.data])){if(this.data){this._dataobj.innerHTML=this._toHTML(this.data)}if(this.callEvent){this.callEvent("onAfterRender",[])}}}};dhtmlx.ui.Tooltip=function(a){this.name="Tooltip";if(dhtmlx.assert_enabled()){this._assert()}if(typeof a=="string"){a={template:a}}dhtmlx.extend(this,dhtmlx.Settings);dhtmlx.extend(this,dhtmlx.SingleRender);this._parseSettings(a,{type:"default",dy:0,dx:20});this._dataobj=this._obj=document.createElement("DIV");this._obj.className="dhx_tooltip";dhtmlx.html.insertBefore(this._obj,document.body.firstChild)};dhtmlx.ui.Tooltip.prototype={show:function(a,b){if(this._disabled){return}if(this.data!=a){this.data=a;this.render(a)}this._obj.style.top=b.y+this._settings.dy+"px";this._obj.style.left=b.x+this._settings.dx+"px";this._obj.style.display="block"},hide:function(){this.data=null;this._obj.style.display="none"},disable:function(){this._disabled=true},enable:function(){this._disabled=false},types:{"default":dhtmlx.Template.fromHTML("{obj.id}")},template_item_start:dhtmlx.Template.empty,template_item_end:dhtmlx.Template.empty};dhtmlx.AutoTooltip={tooltip_setter:function(b){var a=new dhtmlx.ui.Tooltip(b);this.attachEvent("onMouseMove",function(g,c){a.show(this.get(g),dhtmlx.html.pos(c))});this.attachEvent("onMouseOut",function(g,c){a.hide()});this.attachEvent("onMouseMoving",function(g,c){a.hide()});return a}};dhtmlx.compat=function(a,b){if(dhtmlx.compat[a]){dhtmlx.compat[a](b)}};if(!dhtmlx.attaches){dhtmlx.attaches={}}dhtmlx.attaches.attachAbstract=function(b,a){var g=document.createElement("DIV");g.id="CustomObject_"+dhtmlx.uid();g.style.width="100%";g.style.height="100%";g.cmp="grid";document.body.appendChild(g);this.attachObject(g.id);a.container=g.id;var e=this.vs[this.av];e.grid=new window[b](a);e.gridId=g.id;e.gridObj=g;e.grid.setSizes=function(){if(this.resize){this.resize()}else{this.render()}};var c="_viewRestore";return this.vs[this[c]()].grid};dhtmlx.attaches.attachDataView=function(a){return this.attachAbstract("dhtmlXDataView",a)};dhtmlx.attaches.attachChart=function(a){return this.attachAbstract("dhtmlXChart",a)};dhtmlx.compat.layout=function(){};function dhtmlXCellObject(c,a){this.cell=document.createElement("DIV");this.cell.className="dhx_cell"+(a||"");this._idd=c;this._isCell=true;this.conf={borders:true,idx:{},css:a||"",idx_data:{cont:"dhx_cell_cont",pr1:"dhx_cell_progress_bar",pr2:"dhx_cell_progress_img",pr3:"dhx_cell_progress_svg",menu:"dhx_cell_menu",toolbar:"dhx_cell_toolbar",ribbon:"dhx_cell_ribbon",sb:"dhx_cell_statusbar",cover:"dhx_cell_cover"},ofs_nodes:{t:{},b:{}}};this.dataNodes={};this.views={};var b=document.createElement("DIV");b.className="dhx_cell_cont"+this.conf.css;this.cell.appendChild(b);b=null;this._updateIdx=function(){for(var e in this.conf.idx){this.conf.idx[e]=null;delete this.conf.idx[e]}for(var j=0;j<this.cell.childNodes.length;j++){var g=this.cell.childNodes[j].className;for(var e in this.conf.idx_data){var h=new RegExp(this.conf.idx_data[e]);if(g.match(h)!=null){this.conf.idx[e]=j}}}this.callEvent("_onIdxUpdated",[])};this._adjustAttached=function(){for(var e in this.dataNodes){if(this.dataNodes[e]!=null&&typeof(this.dataNodes[e].setSizes)=="function"){this.dataNodes[e].setSizes()}}if(this.dataObj!=null&&typeof(this.dataObj.setSizes)=="function"){if(this.dataType=="layout"&&typeof(window.dhtmlXLayoutCell)=="function"&&this instanceof window.dhtmlXLayoutCell&&this.dataObj._getMainInst()!=this.layout._getMainInst()){this.dataObj.setSizes();return}this.dataObj.setSizes.apply(this.dataObj,arguments)}};this._setSize=function(s,o,t,l,m,n,g,j){if(this.conf.size==null){this.conf.size={}}if(j==null){j={}}var u={left:"x",top:"y",width:"w",height:"h"};this.conf.size.x=s;this.conf.size.y=o;this.conf.size.w=Math.max(t,0);this.conf.size.h=Math.max(l,0);for(var r in u){var e=(j[r]||r);this.cell.style[e]=this.conf.size[u[r]]+"px"}this.callEvent("_onSetSize",[]);if(n!==true){this._adjustCont(m,g)}else{this._adjustAttached(m)}this._adjustProgress()};this._adjustCont=function(m,j){var l=this.cell.childNodes[this.conf.idx.cont];if(typeof(window.dhtmlXLayoutCell)=="function"&&this instanceof window.dhtmlXLayoutCell&&this.conf.collapsed==true){l.style.left=l.style.top="0px";l.style.width=l.style.height="200px";l=null;return}var h=0;for(var e in this.conf.ofs_nodes.t){var g=this.conf.ofs_nodes.t[e];h+=(g=="func"?this[e]():(g==true?this.cell.childNodes[this.conf.idx[e]].offsetHeight:0))}var n=0;for(var e in this.conf.ofs_nodes.b){var g=this.conf.ofs_nodes.b[e];n+=(g=="func"?this[e]():(g==true?this.cell.childNodes[this.conf.idx[e]].offsetHeight:0))}l.style.left="0px";l.style.top=h+"px";if(this.conf.cells_cont==null){this.conf.cells_cont={};l.style.width=this.cell.offsetWidth+"px";l.style.height=Math.max(this.cell.offsetHeight-h-n,0)+"px";this.conf.cells_cont.w=parseInt(l.style.width)-l.offsetWidth;this.conf.cells_cont.h=parseInt(l.style.height)-l.offsetHeight}l.style.left="0px";l.style.top=h+"px";l.style.width=Math.max(this.cell.offsetWidth+this.conf.cells_cont.w,0)+"px";l.style.height=Math.max(this.conf.size.h-h-n+this.conf.cells_cont.h,0)+"px";l=null;this._adjustAttached(m);if(j=="expand"&&this.dataType=="editor"&&this.dataObj!=null){this.dataObj._prepareContent(true)}};this._mtbUpdBorder=function(){var g=["menu","toolbar","ribbon"];for(var j=0;j<g.length;j++){if(this.conf.idx[g[j]]!=null){var l=this.cell.childNodes[this.conf.idx[g[j]]];var h="dhx_cell_"+g[j]+"_no_borders";var e="dhx_cell_"+g[j]+"_def";l.className=l.className.replace(new RegExp(this.conf.borders?h:e),this.conf.borders?e:h);l=null}}};this._resetSizeState=function(){this.conf.cells_cont=null};this.conf.view="def";this.conf.views_loaded={};this.conf.views_loaded[this.conf.view]=true;this._viewSave=function(h){this.views[h]={borders:this.conf.borders,ofs_nodes:{t:{},b:{}},url_data:this.conf.url_data,dataType:this.dataType,dataObj:this.dataObj,cellCont:[],dataNodes:{},dataNodesCont:{}};var j=this.cell.childNodes[this.conf.idx.cont];while(j.childNodes.length>0){this.views[h].cellCont.push(j.firstChild);j.removeChild(j.firstChild)}j=null;this.dataType=null;this.dataObj=null;this.conf.url_data=null;for(var g in this.dataNodes){for(var e in this.conf.ofs_nodes){if(typeof(this.conf.ofs_nodes[e][g])!="undefined"){this.views[h].ofs_nodes[e][g]=this.conf.ofs_nodes[e][g];this.conf.ofs_nodes[e][g]=null;delete this.conf.ofs_nodes[e][g]}}this.views[h].dataNodesCont[g]=this.cell.childNodes[this.conf.idx[g]];this.cell.removeChild(this.cell.childNodes[this.conf.idx[g]]);this.views[h].dataNodes[g]=this.dataNodes[g];this.dataNodes[g]=null;delete this.dataNodes[g];this._updateIdx()}this.callEvent("_onViewSave",[h])};this._viewRestore=function(h){if(this.views[h]==null){return}this.dataObj=this.views[h].dataObj;this.dataType=this.views[h].dataType;this.conf.url_data=this.views[h].url_data;for(var j=0;j<this.views[h].cellCont.length;j++){this.cell.childNodes[this.conf.idx.cont].appendChild(this.views[h].cellCont[j])}for(var g in this.views[h].dataNodes){this.dataNodes[g]=this.views[h].dataNodes[g];if(g=="menu"){this.cell.insertBefore(this.views[h].dataNodesCont[g],this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont])}if(g=="toolbar"){this.cell.insertBefore(this.views[h].dataNodesCont[g],this.cell.childNodes[this.conf.idx.cont])}if(g=="ribbon"){this.cell.insertBefore(this.views[h].dataNodesCont[g],this.cell.childNodes[this.conf.idx.cont])}if(g=="sb"){this.cell.appendChild(this.views[h].dataNodesCont[g])}this._updateIdx()}for(var g in this.views[h].ofs_nodes){for(var e in this.views[h].ofs_nodes[g]){this.conf.ofs_nodes[g][e]=this.views[h].ofs_nodes[g][e]}}if(this.conf.borders!=this.views[h].borders){this[this.views[h].borders?"_showBorders":"_hideBorders"](true)}if(this.dataType=="url"&&this.conf.url_data!=null&&this.conf.url_data.ajax==false&&this.conf.url_data.post_data!=null){this.reloadURL()}this.callEvent("_onViewRestore",[h]);this._viewDelete(h)};this._viewDelete=function(h){if(this.views[h]==null){return}this.views[h].borders=null;for(var g in this.views[h].ofs_nodes){for(var e in this.views[h].ofs_nodes[g]){this.views[h].ofs_nodes[g][e]=null}this.views[h].ofs_nodes[g]=null}this.views[h].dataType=null;this.views[h].dataObj=null;this.views[h].url_data=null;for(var j=0;j<this.views[h].cellCont.length;j++){this.views[h].cellCont[j]=null}this.views[h].cellCont=null;for(var g in this.views[h].dataNodes){this.views[h].dataNodes[g]=null;this.views[h].dataNodesCont[g]=null}this.views[h].dataNodes=this.views[h].dataNodesCont=null;this.views[h]=null;delete this.views[h]};window.dhx4._eventable(this);this._updateIdx();return this}dhtmlXCellObject.prototype.showView=function(a){if(this.conf.view==a){return false}this._viewSave(this.conf.view);this._viewRestore(a);this._updateIdx();this._adjustCont();this.conf.view=a;var b=(typeof(this.conf.views_loaded[this.conf.view])=="undefined");this.conf.views_loaded[this.conf.view]=true;return b};dhtmlXCellObject.prototype.getViewName=function(){return this.conf.view};dhtmlXCellObject.prototype.unloadView=function(e){if(e==this.conf.view){var g=this.conf.unloading;this.conf.unloading=true;if(typeof(this.detachMenu)=="function"){this.detachMenu()}if(typeof(this.detachToolbar)=="function"){this.detachToolbar()}if(typeof(this.detachRibbon)=="function"){this.detachRibbon()}this.detachStatusBar();this._detachObject(null,true);this.conf.unloading=g;if(!this.conf.unloading){this._adjustCont(this._idd)}return}if(this.views[e]==null){return}var c=this.views[e];for(var b in c.dataNodes){if(typeof(c.dataNodes[b].unload)=="function"){c.dataNodes[b].unload()}c.dataNodes[b]=null;c.dataNodesCont[b]=null}if(c.dataType=="url"){if(c.cellCont!=null&&c.cellCont[0]!="null"){this._detachURLEvents(c.cellCont[0])}}else{if(c.dataObj!=null){if(typeof(c.dataObj.unload)=="function"){c.dataObj.unload()}else{if(typeof(c.dataObj.destructor)=="function"){c.dataObj.destructor()}}c.dataObj=null}}c=null;this._viewDelete(e);if(typeof(this.conf.views_loaded[e])!="undefined"){delete this.conf.views_loaded[e]}};dhtmlXCellObject.prototype.getId=function(){return this._idd};dhtmlXCellObject.prototype.progressOn=function(){if(this.conf.progress==true){return}this.conf.progress=true;var b=document.createElement("DIV");b.className=this.conf.idx_data.pr1;var a=document.createElement("DIV");if(this.conf.skin=="material"&&(window.dhx4.isFF||window.dhx4.isChrome||window.dhx4.isOpera||window.dhx4.isEdge)){a.className=this.conf.idx_data.pr3;a.innerHTML='<svg class="dhx_cell_prsvg" viewBox="25 25 50 50"><circle class="dhx_cell_prcircle" cx="50" cy="50" r="20"/></svg>'}else{a.className=this.conf.idx_data.pr2}if(this.conf.idx.cover!=null){this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.cover])}else{this.cell.appendChild(a)}this.cell.insertBefore(b,a);b=a=null;this._updateIdx();this._adjustProgress()};dhtmlXCellObject.prototype.progressOff=function(){if(this.conf.progress!=true){return}for(var b in {pr3:3,pr2:2,pr1:1}){var c=this.cell.childNodes[this.conf.idx[b]];if(c!=null){c.parentNode.removeChild(c)}c=null}this.conf.progress=false;this._updateIdx()};dhtmlXCellObject.prototype._adjustProgress=function(){if(this.conf.idx.pr1==null){return}if(!this.conf.pr){this.conf.pr={}}var b=this.cell.childNodes[this.conf.idx.pr1];var a=this.cell.childNodes[this.conf.idx.pr2]||this.cell.childNodes[this.conf.idx.pr3];if(!this.conf.pr.ofs){a.style.width=b.offsetWidth+"px";a.style.height=b.offsetHeight+"px";this.conf.pr.ofs={w:a.offsetWidth-a.clientWidth,h:a.offsetHeight-a.clientHeight}}a.style.width=b.offsetWidth-this.conf.pr.ofs.w+"px";a.style.height=b.offsetHeight-this.conf.pr.ofs.h+"px";b=a=null};dhtmlXCellObject.prototype._showCellCover=function(){if(this.conf.cover==true){return}this.conf.cover=true;var a=document.createElement("DIV");a.className=this.conf.idx_data.cover;this.cell.appendChild(a);a=null;this._updateIdx()};dhtmlXCellObject.prototype._hideCellCover=function(){if(this.conf.cover!=true){return}this.cell.removeChild(this.cell.childNodes[this.conf.idx.cover]);this._updateIdx();this.conf.cover=false};dhtmlXCellObject.prototype._showBorders=function(a){if(this.conf.borders){return}this.conf.borders=true;this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css;this.conf.cells_cont=null;this._mtbUpdBorder();this.callEvent("_onBorderChange",[true]);if(a!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._hideBorders=function(a){if(!this.conf.borders){return}this.conf.borders=false;this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css+" dhx_cell_cont_no_borders";this.conf.cells_cont=null;this._mtbUpdBorder();this.callEvent("_onBorderChange",[false]);if(a!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._getWidth=function(){return this.cell.offsetWidth};dhtmlXCellObject.prototype._getHeight=function(){return this.cell.offsetHeight};dhtmlXCellObject.prototype.showInnerScroll=function(){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto"};dhtmlXCellObject.prototype._unload=function(){this.conf.unloading=true;this.callEvent("_onCellUnload",[]);this.progressOff();this.unloadView(this.conf.view);this.dataNodes=null;this.cell.parentNode.removeChild(this.cell);this.cell=null;window.dhx4._eventable(this,"clear");for(var b in this.views){this.unloadView(b)}this.conf=null;for(var b in this){this[b]=null}};dhtmlXCellObject.prototype.attachObject=function(e,c){if(window.dhx4.s2b(c)&&!(typeof(window.dhtmlXWindowsCell)=="function"&&this instanceof window.dhtmlXWindowsCell)){c=false}if(typeof(e)=="string"){e=document.getElementById(e)}if(e.parentNode==this.cell.childNodes[this.conf.idx.cont]){e=null;return}if(c){e.style.display="";var a=e.offsetWidth;var b=e.offsetHeight}this._attachObject(e);this.dataType="obj";e.style.display="";e=null;if(c){this._adjustByCont(a,b)}};dhtmlXCellObject.prototype.appendObject=function(a){if(typeof(a)=="string"){a=document.getElementById(a)}if(a.parentNode==this.cell.childNodes[this.conf.idx.cont]){a=null;return}if(!this.conf.append_mode){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto";this.conf.append_mode=true}this._attachObject(a,null,null,true);this.dataType="obj";a.style.display="";a=null};dhtmlXCellObject.prototype.detachObject=function(b,a){this._detachObject(null,b,a)};dhtmlXCellObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sb};dhtmlXCellObject.prototype.getAttachedObject=function(){if(this.dataType=="obj"||this.dataType=="url"||this.dataType=="url-ajax"){return this.cell.childNodes[this.conf.idx.cont].firstChild}else{return this.dataObj}};dhtmlXCellObject.prototype.attachURL=function(b,r,c){if(c==true){c={}}var g=(typeof(c)!="undefined"&&c!=false&&c!=null);if(this.conf.url_data==null){this.conf.url_data={}}this.conf.url_data.url=b;this.conf.url_data.ajax=(r==true);this.conf.url_data.post_data=(c==true?{}:(c||null));if(this.conf.url_data.xml_doc!=null){try{this.conf.url_data.xml_doc.xmlDoc.abort()}catch(l){}this.conf.url_data.xml_doc.xmlDoc=null;this.conf.url_data.xml_doc=null}if(r==true){var o=this;if(g){var h="";for(var n in c){h+="&"+encodeURIComponent(n)+"="+encodeURIComponent(c[n])}this.conf.url_data.xml_doc=dhx4.ajax.post(b,h,function(a){if(o.attachHTMLString!=null&&typeof(a.xmlDoc.responseText)=="string"){o.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>");if(typeof(o._doOnFrameContentLoaded)=="function"){o._doOnFrameContentLoaded()}o.dataType="url-ajax"}o=a=null})}else{this.conf.url_data.xml_doc=dhx4.ajax.get(b,function(a){if(o.attachHTMLString!=null&&typeof(a.xmlDoc.responseText)=="string"){o.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>");if(typeof(o._doOnFrameContentLoaded)=="function"){o._doOnFrameContentLoaded()}o.dataType="url-ajax"}o=a=null})}}else{if(this.dataType=="url"){var j=this.getFrame()}else{var j=document.createElement("IFRAME");j.frameBorder=0;j.border=0;j.style.width="100%";j.style.height="100%";j.style.position="relative";this._attachObject(j);this.dataType="url";this._attachURLEvents()}if(g){var m=(typeof(this.conf.url_data.post_ifr)=="undefined");this.conf.url_data.post_ifr=true;if(m){this._attachURLEvents()}j.src="about:blank"}else{j.src=b+window.dhx4.ajax._dhxr(b)}j=null}j=null};dhtmlXCellObject.prototype.reloadURL=function(){if(!(this.dataType=="url"||this.dataType=="url-ajax")){return}if(this.conf.url_data==null){return}this.attachURL(this.conf.url_data.url,this.conf.url_data.ajax,this.conf.url_data.post_data)};dhtmlXCellObject.prototype.attachHTMLString=function(str){this._attachObject(null,null,str);var z=str.match(/<script[^>]*>[^\f]*?<\/script>/g)||[];for(var i=0;i<z.length;i++){var s=z[i].replace(/<([\/]{0,1})script[^>]*>/gi,"");if(s){if(window.execScript){window.execScript(s)}else{window.eval(s)}}}};dhtmlXCellObject.prototype.attachScheduler=function(a,j,b,e){e=e||window.scheduler;var g=false;if(b){var h=document.getElementById(b);if(h){g=true}}if(!g){var c=b||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>';var h=document.createElement("DIV");h.id="dhxSchedObj_"+new Date().getTime();h.style.width="100%";h.style.height="100%";h.style.position="relative";h.style.overflow="hidden";h.className="dhx_cal_container";h.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+c+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>'}this._attachObject(h);this.dataType="scheduler";this.dataObj=e;this.dataObj.setSizes=function(){this.update_view()};e.init(h.id,a,j);h=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachMap=function(a){var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";this._attachObject(b);if(!a){a={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP}}this.dataType="maps";this.dataObj=new google.maps.Map(b,a);this.dataObj.setSizes=function(){google.maps.event.trigger(this,"resize")};b=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype._createNode_sb=function(l,e,j,a,g){if(typeof(g)!="undefined"){l=g}else{var b=e||{};var m=(typeof(b.text)=="string"&&b.text.length>0?b.text:"&nbsp;");var c=(typeof(b.height)=="number"?b.height:false);var l=document.createElement("DIV");l.className="dhx_cell_statusbar_def";l.innerHTML="<div class='"+(b.paging==true?"dhx_cell_statusbar_paging":"dhx_cell_statusbar_text")+"'>"+m+"</div>";if(c!=false){l.firstChild.style.height=l.firstChild.style.lineHeight=c+"px"}}if(this.conf.idx.pr1!=null){this.cell.insertBefore(l,this.cell.childNodes[this.conf.idx.pr1])}else{this.cell.appendChild(l)}this.conf.ofs_nodes.b.sb=true;this._updateIdx();this._adjustCont(this._idd);return l};dhtmlXCellObject.prototype.attachStatusBar=function(a){if(this.dataNodes.sb){return}if(a!=null&&window.dhx4.s2b(a.paging)==true){a.height=null}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)=="function"&&this instanceof window.dhtmlXWindowsCell){this.cell.childNodes[this.conf.idx.cont].className+=" dhx_cell_statusbar_attached"}this.dataNodes.sb=this._attachObject("sb",a);this.dataNodes.sb.setText=function(b){this.childNodes[0].innerHTML=b};this.dataNodes.sb.getText=function(){return this.childNodes[0].innerHTML};this.dataNodes.sb.onselectstart=function(b){return false};return this.dataNodes.sb};dhtmlXCellObject.prototype.detachStatusBar=function(){if(!this.dataNodes.sb){return}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)=="function"&&this instanceof window.dhtmlXWindowsCell){this.cell.childNodes[this.conf.idx.cont].className=this.cell.childNodes[this.conf.idx.cont].className.replace(/\s{0,}dhx_cell_statusbar_attached/,"")}this.dataNodes.sb.setText=this.dataNodes.sb.getText=this.dataNodes.sb.onselectstart=null;this.dataNodes.sb=null;delete this.dataNodes.sb;this._detachObject("sb")};dhtmlXCellObject.prototype.showStatusBar=function(){this._mtbShowHide("sb","")};dhtmlXCellObject.prototype.hideStatusBar=function(){this._mtbShowHide("sb","none")};dhtmlXCellObject.prototype._mtbShowHide=function(b,a){if(!this.dataNodes[b]){return}this.cell.childNodes[this.conf.idx[b]].style.display=a;this._adjustCont()};dhtmlXCellObject.prototype.getFrame=dhtmlXCellObject.prototype._getFrame=function(){if(this.dataType!="url"){return null}return this.cell.childNodes[this.conf.idx.cont].firstChild};dhtmlXCellObject.prototype._attachURLEvents=function(){if(this.dataType!="url"){return}var c=this;var b=this._idd;var a=this.cell.childNodes[this.conf.idx.cont].firstChild;if(typeof(this._doOnFrameMouseDown)!="function"){this._doOnFrameMouseDown=function(g){c.callEvent("_onContentMouseDown",[b,g||event])}}if(typeof(window.addEventListener)=="function"){a.onload=function(){try{if(typeof(c._doOnFrameMouseDown)=="function"){this.contentWindow.document.body.addEventListener("mousedown",c._doOnFrameMouseDown,false)}}catch(g){}try{if(typeof(c._doOnFrameContentLoaded)=="function"){c._doOnFrameContentLoaded()}}catch(g){}}}else{a.onreadystatechange=function(g){if(this.readyState=="complete"){try{if(typeof(c._doOnFrameMouseDown)=="function"){this.contentWindow.document.body.attachEvent("onmousedown",c._doOnFrameMouseDown)}}catch(h){}try{if(typeof(c._doOnFrameContentLoaded)=="function"){c._doOnFrameContentLoaded()}}catch(h){}}}}};dhtmlXCellObject.prototype._doOnFrameContentLoaded=function(){if(this.conf.url_data.post_ifr==true){var h=this.getFrame().contentWindow.document;var g=h.createElement("FORM");g.method="POST";g.action=this.conf.url_data.url;h.body.appendChild(g);var c={};if(window.dhx4.ajax.cache!=true){c["dhxr"+new Date().getTime()]="1"}for(var b in this.conf.url_data.post_data){c[b]=this.conf.url_data.post_data[b]}for(var b in c){var e=h.createElement("INPUT");e.type="hidden";e.name=b;e.value=c[b];g.appendChild(e);e=null}this.conf.url_data.post_ifr=false;g.submit()}else{this.callEvent("_onContentLoaded",[this._idd])}};dhtmlXCellObject.prototype._detachURLEvents=function(a){if(a==null){if(this.dataType!="url"){return}a=this.cell.childNodes[this.conf.idx.cont].firstChild}if(!a){return}if(typeof(window.addEventListener)=="function"){a.onload=null;try{a.contentWindow.document.body.removeEventListener("mousedown",this._doOnFrameMouseDown,false)}catch(b){}}else{a.onreadystatechange=null;try{a.contentWindow.document.body.detachEvent("onmousedown",this._doOnFrameMouseDown)}catch(b){}}a=null};dhtmlXCellObject.prototype._attachObject=function(g,b,e,a,c){if(typeof(g)=="string"&&{menu:1,toolbar:1,ribbon:1,sb:1}[g]==1){return this["_createNode_"+g].apply(this,arguments)}if(a!=true){this._detachObject(null,true,null)}if(typeof(e)=="string"){this.cell.childNodes[this.conf.idx.cont].innerHTML=e}else{this.cell.childNodes[this.conf.idx.cont].appendChild(g)}g=null};dhtmlXCellObject.prototype._detachObject=function(j,b,a){this.callEvent("_onBeforeContentDetach",[]);if(j=="menu"||j=="toolbar"||j=="ribbon"||j=="sb"){var h=this.cell.childNodes[this.conf.idx[j]];h.parentNode.removeChild(h);h=null;this.conf.ofs_nodes[j=="sb"?"b":"t"][j]=false;this._updateIdx();if(!this.conf.unloading){this._adjustCont(this._idd)}return}if(b==true){a=false}else{if(typeof(a)=="undefined"){a=document.body}else{if(typeof(a)=="string"){a=document.getElementById(a)}}}if(a===false){if(this.conf.unloading==true&&String(this.dataType).match(/ajax/)!=null){if(this.conf.url_data!=null&&this.conf.url_data.xml_doc!=null){try{this.conf.url_data.xml_doc.xmlDoc.abort()}catch(g){}this.conf.url_data.xml_doc.xmlDoc=null;this.conf.url_data.xml_doc=null}}if(this.dataType=="url"){this._detachURLEvents()}else{if(this.dataObj!=null){if(typeof(this.dataObj.unload)=="function"){this.dataObj.unload()}else{if(typeof(this.dataObj.destructor)=="function"){this.dataObj.destructor()}}}}}var h=this.cell.childNodes[this.conf.idx.cont];while(h.childNodes.length>0){if(a===false){h.removeChild(h.lastChild)}else{h.firstChild.style.display="none";a.appendChild(h.firstChild)}}if(this.conf.append_mode){h.style.overflow="";this.conf.append_mode=false}var c=(this.dataType=="tabbar");this.dataObj=null;this.dataType=null;a=h=null;if(this.conf.unloading!=true&&c){this.showHeader(true);this._showBorders()}};dhtmlXCellObject.prototype._attachFromCell=function(b){this.detachObject(true);var e="layout";if(typeof(window.dhtmlXWindowsCell)=="function"&&this instanceof window.dhtmlXWindowsCell){e="window"}if(typeof(window.dhtmlXWindowsCell)=="function"&&b instanceof window.dhtmlXWindowsCell&&b.wins.w[b._idd].conf.parked==true){b.wins._winCellSetOpacity(b._idd,"open",false)}if(typeof(window.dhtmlXAccordionCell)=="function"&&b instanceof window.dhtmlXAccordionCell&&b.conf.opened==false){b._cellSetOpacity("open",false)}for(var c in b.dataNodes){this._attachObject(c,null,null,null,b.cell.childNodes[b.conf.idx[c]]);this.dataNodes[c]=b.dataNodes[c];b.dataNodes[c]=null;b.conf.ofs_nodes[c=="sb"?"b":"t"][c]=false;b._updateIdx()}this._mtbUpdBorder();if(b.dataType!=null&&b.dataObj!=null){this.dataType=b.dataType;this.dataObj=b.dataObj;while(b.cell.childNodes[b.conf.idx.cont].childNodes.length>0){this.cell.childNodes[this.conf.idx.cont].appendChild(b.cell.childNodes[b.conf.idx.cont].firstChild)}b.dataType=null;b.dataObj=null;if(this.dataType=="grid"){if(e=="window"&&this.conf.skin=="dhx_skyblue"){this.dataObj.entBox.style.border="1px solid #a4bed4";this.dataObj._sizeFix=0}else{this.dataObj.entBox.style.border="0px solid white";this.dataObj._sizeFix=2}}}else{while(b.cell.childNodes[b.conf.idx.cont].childNodes.length>0){this.cell.childNodes[this.conf.idx.cont].appendChild(b.cell.childNodes[b.conf.idx.cont].firstChild)}}this.conf.view=b.conf.view;b.conf.view="def";for(var c in b.views){this.views[c]=b.views[c];b.views[c]=null;delete b.views[c]}b._updateIdx();b._adjustCont();this._updateIdx();this._adjustCont();if(b.conf.progress==true){b.progressOff();this.progressOn()}else{this.progressOff()}if(e=="window"&&this.wins.w[this._idd].conf.parked){this.wins._winCellSetOpacity(this._idd,"close",false)}};function dhtmlXCellTop(g,b){if(arguments.length==0||typeof(g)=="undefined"){return}var a=this;this.dataNodes={};this.conf.ofs={t:0,b:0,l:0,r:0};this.conf.ofs_nodes={t:{},b:{}};this.conf.progress=false;this.conf.fs_mode=false;this.conf.fs_tm=null;this.conf.fs_resize=false;if(g==document.body){this.conf.fs_mode=true;this.base=g;if(this.base==document.body){var c={dhx_skyblue:{t:2,b:2,l:2,r:2},dhx_web:{t:8,b:8,l:8,r:8},dhx_terrace:{t:9,b:9,l:8,r:8},material:{t:9,b:9,l:8,r:8}};this.conf.ofs=(c[this.conf.skin]!=null?c[this.conf.skin]:c.dhx_skyblue)}}else{this.base=(typeof(g)=="string"?document.getElementById(g):g)}this.base.className+=" "+this.conf.css+"_base_"+this.conf.skin;this.cont=document.createElement("DIV");this.cont.className=this.conf.css+"_cont";this.base.appendChild(this.cont);if(b!=null){this.setOffsets(b,false)}else{if(this.base._ofs!=null){this.setOffsets(this.base._ofs,false);this.base._ofs=null;try{delete this.base._ofs}catch(h){}}}this._adjustCont=function(){var l=this.conf.ofs.t;for(var j in this.conf.ofs_nodes.t){l+=(this.conf.ofs_nodes.t[j]==true?this.dataNodes[j].offsetHeight:0)}var e=this.conf.ofs.b;for(var j in this.conf.ofs_nodes.b){e+=(this.conf.ofs_nodes.b[j]==true?this.dataNodes[j].offsetHeight:0)}this.cont.style.left=this.conf.ofs.l+"px";this.cont.style.width=this.base.clientWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.cont.style.top=l+"px";this.cont.style.height=this.base.clientHeight-l-e+"px"};this._setBaseSkin=function(e){this.base.className=this.base.className.replace(new RegExp(this.conf.css+"_base_"+this.conf.skin,"gi"),this.conf.css+"_base_"+e)};this._initFSResize=function(){if(this.conf.fs_resize==true){return}this._doOnResizeStart=function(){window.clearTimeout(a.conf.fs_tm);a.conf.fs_tm=window.setTimeout(a._doOnResizeEnd,200)};this._doOnResizeEnd=function(){a.setSizes()};if(typeof(window.addEventListener)=="function"){window.addEventListener("resize",this._doOnResizeStart,false)}else{window.attachEvent("onresize",this._doOnResizeStart)}this.conf.fs_resize=true};if(this.conf.fs_mode==true){this._initFSResize()}this._unloadTop=function(){this._mtbUnload();this.detachHeader();this.detachFooter();if(this.conf.fs_mode==true){if(typeof(window.addEventListener)=="function"){window.removeEventListener("resize",this._doOnResizeStart,false)}else{window.detachEvent("onresize",this._doOnResizeStart)}}this.base.removeChild(this.cont);var e=new RegExp("s{0,}"+this.conf.css+"_base_"+this.conf.skin,"gi");this.base.className=this.base.className.replace(e,"");this.cont=this.base=null;a=null};g=null}dhtmlXCellTop.prototype.setOffsets=function(h,g){var e=false;for(var b in h){var c=b.charAt(0);if(typeof(this.conf.ofs[c])!="undefined"&&!isNaN(h[b])){this.conf.ofs[c]=parseInt(h[b]);e=true}}if(g!==false&&typeof(this.setSizes)=="function"&&e==true){this.setSizes()}};dhtmlXCellTop.prototype.attachMenu=function(a){if(this.dataNodes.menu!=null){return}this.dataNodes.menuObj=document.createElement("DIV");this.dataNodes.menuObj.className="dhxcelltop_menu";this.base.insertBefore(this.dataNodes.menuObj,this.dataNodes.toolbarObj||this.dataNodes.ribbonObj||this.cont);if(typeof(a)!="object"||a==null){a={}}a.skin=this.conf.skin;a.parent=this.dataNodes.menuObj;this.dataNodes.menu=new dhtmlXMenuObject(a);this.dataNodes.menuEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.menuObj.style.display=="none"){return}if(this.conf.ofs_menu==null){this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.conf.ofs_menu={w:this.dataNodes.menuObj.offsetWidth-parseInt(this.dataNodes.menuObj.style.width)}}this.dataNodes.menuObj.style.left=this.conf.ofs.l+"px";this.dataNodes.menuObj.style.marginTop=(this.dataNodes.haObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r-this.conf.ofs_menu.w+"px"});this.conf.ofs_nodes.t.menuObj=true;this.setSizes();a.parnt=null;a=null;return this.dataNodes.menu};dhtmlXCellTop.prototype.detachMenu=function(){if(this.dataNodes.menu==null){return}this.dataNodes.menu.unload();this.dataNodes.menu=null;this.dataNodes.menuObj.parentNode.removeChild(this.dataNodes.menuObj);this.dataNodes.menuObj=null;this.detachEvent(this.dataNodes.menuEv);this.dataNodes.menuEv=null;delete this.dataNodes.menu;delete this.dataNodes.menuObj;delete this.dataNodes.menuEv;this.conf.ofs_nodes.t.menuObj=false;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachToolbar=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.dataNodes.toolbarObj=document.createElement("DIV");this.dataNodes.toolbarObj.className="dhxcelltop_toolbar";this.base.insertBefore(this.dataNodes.toolbarObj,this.cont);this.dataNodes.toolbarObj.appendChild(document.createElement("DIV"));if(typeof(a)!="object"||a==null){a={}}a.skin=this.conf.skin;a.parent=this.dataNodes.toolbarObj.firstChild;this.dataNodes.toolbar=new dhtmlXToolbarObject(a);this.dataNodes.toolbarEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.toolbarObj.style.display=="none"){return}this.dataNodes.toolbarObj.style.left=this.conf.ofs.l+"px";this.dataNodes.toolbarObj.style.marginTop=(this.dataNodes.haObj!=null||this.dataNodes.menuObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.toolbarObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.dataNodes.toolbar._masterCell=this;this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell.setSizes()});this.conf.ofs_nodes.t.toolbarObj=true;this.setSizes();a.parnt=null;a=null;return this.dataNodes.toolbar};dhtmlXCellTop.prototype.detachToolbar=function(){if(this.dataNodes.toolbar==null){return}this.dataNodes.toolbar._masterCell=null;this.dataNodes.toolbar.unload();this.dataNodes.toolbar=null;this.dataNodes.toolbarObj.parentNode.removeChild(this.dataNodes.toolbarObj);this.dataNodes.toolbarObj=null;this.detachEvent(this.dataNodes.toolbarEv);this.dataNodes.toolbarEv=null;this.conf.ofs_nodes.t.toolbarObj=false;delete this.dataNodes.toolbar;delete this.dataNodes.toolbarObj;delete this.dataNodes.toolbarEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachRibbon=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.dataNodes.ribbonObj=document.createElement("DIV");this.dataNodes.ribbonObj.className="dhxcelltop_ribbon";this.base.insertBefore(this.dataNodes.ribbonObj,this.cont);this.dataNodes.ribbonObj.appendChild(document.createElement("DIV"));if(typeof(a)!="object"||a==null){a={}}a.skin=this.conf.skin;a.parent=this.dataNodes.ribbonObj.firstChild;this.dataNodes.ribbon=new dhtmlXRibbon(a);this.dataNodes.ribbonEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.ribbonObj.style.display=="none"){return}this.dataNodes.ribbonObj.style.left=this.conf.ofs.l+"px";this.dataNodes.ribbonObj.style.marginTop=(this.dataNodes.haObj!=null||this.dataNodes.menuObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.ribbonObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.dataNodes.ribbon.setSizes()});this.conf.ofs_nodes.t.ribbonObj=true;var b=this;this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){b.setSizes()});this.setSizes();a.parnt=null;a=null;return this.dataNodes.ribbon};dhtmlXCellTop.prototype.detachRibbon=function(){if(this.dataNodes.ribbon==null){return}this.dataNodes.ribbon.unload();this.dataNodes.ribbon=null;this.dataNodes.ribbonObj.parentNode.removeChild(this.dataNodes.ribbonObj);this.dataNodes.ribbonObj=null;this.detachEvent(this.dataNodes.ribbonEv);this.dataNodes.ribbonEv=null;this.conf.ofs_nodes.t.ribbonObj=false;delete this.dataNodes.ribbon;delete this.dataNodes.ribbonObj;delete this.dataNodes.ribbonEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachStatusBar=function(a){if(this.dataNodes.sbObj){return}if(typeof(a)=="undefined"){a={}}this.dataNodes.sbObj=document.createElement("DIV");this.dataNodes.sbObj.className="dhxcelltop_statusbar";if(this.cont.nextSibling!=null){this.base.insertBefore(this.dataNodes.sbObj,this.cont.nextSibling)}else{this.base.appendChild(this.dataNodes.sbObj)}this.dataNodes.sbObj.innerHTML="<div class='dhxcont_statusbar'>"+(typeof(a.text)=="string"&&a.text.length>0?a.text:"&nbsp;")+"</div>";if(typeof(a.height)=="number"){this.dataNodes.sbObj.firstChild.style.height=this.dataNodes.sbObj.firstChild.style.lineHeight=a.height+"px"}this.dataNodes.sbObj.setText=function(b){this.childNodes[0].innerHTML=b};this.dataNodes.sbObj.getText=function(){return this.childNodes[0].innerHTML};this.dataNodes.sbObj.onselectstart=function(b){return false};this.dataNodes.sbEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.sbObj.style.display=="none"){return}this.dataNodes.sbObj.style.left=this.conf.ofs.l+"px";this.dataNodes.sbObj.style.bottom=(this.dataNodes.faObj!=null?this.dataNodes.faObj.offsetHeight:0)+this.conf.ofs.t+"px";this.dataNodes.sbObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.conf.ofs_nodes.b.sbObj=true;this.setSizes();return this.dataNodes.sbObj};dhtmlXCellTop.prototype.detachStatusBar=function(){if(!this.dataNodes.sbObj){return}this.dataNodes.sbObj.setText=this.dataNodes.sbObj.getText=this.dataNodes.sbObj.onselectstart=null;this.dataNodes.sbObj.parentNode.removeChild(this.dataNodes.sbObj);this.dataNodes.sbObj=null;this.detachEvent(this.dataNodes.sbEv);this.dataNodes.sbEv=null;this.conf.ofs_nodes.b.sbObj=false;delete this.dataNodes.sb;delete this.dataNodes.sbObj;delete this.dataNodes.sbEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.showMenu=function(){this._mtbShowHide("menuObj","")};dhtmlXCellTop.prototype.hideMenu=function(){this._mtbShowHide("menuObj","none")};dhtmlXCellTop.prototype.showToolbar=function(){this._mtbShowHide("toolbarObj","")};dhtmlXCellTop.prototype.hideToolbar=function(){this._mtbShowHide("toolbarObj","none")};dhtmlXCellTop.prototype.showRibbon=function(){this._mtbShowHide("ribbonObj","")};dhtmlXCellTop.prototype.hideRibbon=function(){this._mtbShowHide("ribbonObj","none")};dhtmlXCellTop.prototype.showStatusBar=function(){this._mtbShowHide("sbObj","")};dhtmlXCellTop.prototype.hideStatusBar=function(){this._mtbShowHide("sbObj","none")};dhtmlXCellTop.prototype._mtbShowHide=function(b,a){if(this.dataNodes[b]==null){return}this.dataNodes[b].style.display=a;this.setSizes()};dhtmlXCellTop.prototype._mtbUnload=function(b,a){this.detachMenu();this.detachToolbar();this.detachStatusBar();this.detachRibbon()};dhtmlXCellTop.prototype.getAttachedMenu=function(){return this.dataNodes.menu};dhtmlXCellTop.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar};dhtmlXCellTop.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon};dhtmlXCellTop.prototype.getAttachedStatusBar=function(){return this.dataNodes.sbObj};dhtmlXCellTop.prototype.progressOn=function(){if(this.conf.progress){return}this.conf.progress=true;var b=document.createElement("DIV");b.className="dhxcelltop_progress";this.base.appendChild(b);var a=document.createElement("DIV");if(this.conf.skin=="material"&&(window.dhx4.isFF||window.dhx4.isChrome||window.dhx4.isOpera||window.dhx4.isEdge)){a.className="dhxcelltop_progress_svg";a.innerHTML='<svg class="dhx_cell_prsvg" viewBox="25 25 50 50"><circle class="dhx_cell_prcircle" cx="50" cy="50" r="20"/></svg>'}else{var a=document.createElement("DIV");a.className="dhxcelltop_progress_img"}this.base.appendChild(a);b=a=null};dhtmlXCellTop.prototype.progressOff=function(){if(!this.conf.progress){return}var e={dhxcelltop_progress:true,dhxcelltop_progress_img:true,dhxcelltop_progress_svg:true};for(var c=0;c<this.base.childNodes.length;c++){if(typeof(this.base.childNodes[c].className)!="undefined"&&e[this.base.childNodes[c].className]==true){e[this.base.childNodes[c].className]=this.base.childNodes[c]}}for(var b in e){if(e[b]!=true){this.base.removeChild(e[b])}e[b]=null}this.conf.progress=false;e=null};dhtmlXCellTop.prototype.attachHeader=function(b,a){if(this.dataNodes.haObj!=null){return}if(typeof(b)!="object"){b=document.getElementById(b)}this.dataNodes.haObj=document.createElement("DIV");this.dataNodes.haObj.className="dhxcelltop_hdr";this.dataNodes.haObj.style.height=(a||b.offsetHeight)+"px";this.base.insertBefore(this.dataNodes.haObj,this.dataNodes.menuObj||this.dataNodes.toolbarObj||this.cont);this.dataNodes.haObj.appendChild(b);b.style.visibility="visible";b=null;this.dataNodes.haEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.haObj.style.left=this.conf.ofs.l+"px";this.dataNodes.haObj.style.marginTop=this.conf.ofs.t+"px";this.dataNodes.haObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.conf.ofs_nodes.t.haObj=true;this.setSizes()};dhtmlXCellTop.prototype.detachHeader=function(){if(!this.dataNodes.haObj){return}while(this.dataNodes.haObj.childNodes.length>0){this.dataNodes.haObj.lastChild.style.visibility="hidden";document.body.appendChild(this.dataNodes.haObj.lastChild)}this.dataNodes.haObj.parentNode.removeChild(this.dataNodes.haObj);this.dataNodes.haObj=null;this.detachEvent(this.dataNodes.haEv);this.dataNodes.haEv=null;this.conf.ofs_nodes.t.haObj=false;delete this.dataNodes.haEv;delete this.dataNodes.haObj;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachFooter=function(c,a){if(this.dataNodes.faObj!=null){return}if(typeof(c)!="object"){c=document.getElementById(c)}this.dataNodes.faObj=document.createElement("DIV");this.dataNodes.faObj.className="dhxcelltop_ftr";this.dataNodes.faObj.style.height=(a||c.offsetHeight)+"px";var b=(this.dataNodes.sbObj||this.cont);if(this.base.lastChild==b){this.base.appendChild(this.dataNodes.faObj)}else{this.base.insertBefore(this.dataNodes.faObj,b.nextSibling)}this.dataNodes.faEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.faObj.style.left=this.conf.ofs.l+"px";this.dataNodes.faObj.style.bottom=this.conf.ofs.b+"px";this.dataNodes.faObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.dataNodes.faObj.appendChild(c);c.style.visibility="visible";b=c=null;this.conf.ofs_nodes.b.faObj=true;this.setSizes()};dhtmlXCellTop.prototype.detachFooter=function(){if(!this.dataNodes.faObj){return}while(this.dataNodes.faObj.childNodes.length>0){this.dataNodes.faObj.lastChild.style.visibility="hidden";document.body.appendChild(this.dataNodes.faObj.lastChild)}this.dataNodes.faObj.parentNode.removeChild(this.dataNodes.faObj);this.dataNodes.faObj=null;this.detachEvent(this.dataNodes.faEv);this.dataNodes.faEv=null;this.conf.ofs_nodes.b.faObj=false;delete this.dataNodes.faEv;delete this.dataNodes.faObj;if(!this.conf.unloading){this.setSizes()}};function dhtmlXCalendarObject(h,o){this.i={};var c=null;if(typeof(h)=="string"){var e=document.getElementById(h)}else{var e=h}if(e&&typeof(e)=="object"&&e.tagName&&String(e.tagName).toLowerCase()!="input"){c=e}e=null;if(typeof(h)!="object"||!h.length){h=[h]}for(var b=0;b<h.length;b++){if(typeof(h[b])=="string"){h[b]=(document.getElementById(h[b])||null)}if(h[b]!=null&&h[b].tagName&&String(h[b].tagName).toLowerCase()=="input"){this.i[window.dhx4.newId()]={input:h[b]}}else{if(!(h[b] instanceof Array)&&h[b] instanceof Object&&(h[b].input!=null||h[b].button!=null)){if(h[b].input!=null&&typeof(h[b].input)=="string"){h[b].input=document.getElementById(h[b].input)}if(h[b].button!=null&&typeof(h[b].button)=="string"){h[b].button=document.getElementById(h[b].button)}this.i[window.dhx4.newId()]=h[b]}}h[b]=null}this.conf={skin:(o||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhtmlxcalendar")||"material"),zi:window.dhx4.newId(),touch:!window.dhx4.isIE,time:true,today:false,ws_first:true};this.setSkin=function(r,a){if(this.conf.skin==r&&!a){return}this.conf.skin=r;this.base.className="dhtmlxcalendar_"+this.conf.skin;this._ifrSize()};this.base=document.createElement("DIV");this.base.style.display="none";this.base.appendChild(document.createElement("DIV"));if(c!=null){this._hasParent=true;c.appendChild(this.base);c=null}else{document.body.appendChild(this.base)}this.setParent=function(a){if(this._hasParent){if(typeof(a)=="object"){a.appendChild(this.base)}else{if(typeof(a)=="string"){document.getElementById(a).appendChild(this.base)}}}};this.setSkin(this.conf.skin,true);this.base.onclick=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}a.cancelBubble=true};this.base.onmousedown=function(){return false};if(this.conf.touch){this.base.ontouchstart=this.base.onclick}this.loadUserLanguage=function(t){if(!this.langData[t]){return}this.lang=t;this.setWeekStartDay(this.langData[this.lang].weekstart);this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d");if(this.msCont){var s=0;for(var r=0;r<this.msCont.childNodes.length;r++){for(var a=0;a<this.msCont.childNodes[r].childNodes.length;a++){this.msCont.childNodes[r].childNodes[a].innerHTML=this.langData[this.lang].monthesSNames[s++]}}}this.contTime.childNodes[0].childNodes[0].childNodes[5].innerHTML=this.langData[this.lang].today;this.contTime.childNodes[0].childNodes[0].childNodes[4].innerHTML=this.langData[this.lang].clear};this.contMonth=document.createElement("DIV");this.contMonth.className="dhtmlxcalendar_month_cont";this.contMonth.onselectstart=function(a){a=a||event;a.cancelBubble=true;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};this.base.firstChild.appendChild(this.contMonth);var j=document.createElement("UL");j.className="dhtmlxcalendar_line";this.contMonth.appendChild(j);var n=document.createElement("LI");n.className="dhtmlxcalendar_cell dhtmlxcalendar_month_hdr";n.innerHTML="<div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left\";'></div><span></span><div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right\";'></div>";j.appendChild(n);var g=this;n.onclick=function(u){u=u||event;if(u.type=="touchstart"&&u.preventDefault!=null){u.preventDefault()}var r=(u.target||u.srcElement);if(r.className&&r.className.indexOf("dhtmlxcalendar_month_arrow")===0){g._hideSelector();var s=(r.parentNode.firstChild==r?-1:1);var a=new Date(g._activeMonth);g._drawMonth(new Date(g._activeMonth.getFullYear(),g._activeMonth.getMonth()+s,1,0,0,0,0));g._evOnArrowClick([a,new Date(g._activeMonth)]);return}if(r.className&&r.className=="dhtmlxcalendar_month_label_month"){u.cancelBubble=true;g._showSelector("month",Math.round(r.offsetLeft+r.offsetWidth/2),r.offsetTop+r.offsetHeight+2,"selector_month",true);return}if(r.className&&r.className=="dhtmlxcalendar_month_label_year"){u.cancelBubble=true;g._showSelector("year",Math.round(r.offsetLeft+r.offsetWidth/2),r.offsetTop+r.offsetHeight+2,"selector_year",true);return}g._hideSelector()};if(this.conf.touch==true){n.ontouchstart=n.onclick}this.contDays=document.createElement("DIV");this.contDays.className="dhtmlxcalendar_days_cont";this.base.firstChild.appendChild(this.contDays);this.setWeekStartDay=function(a){if(a==0){a=7}this._wStart=Math.min(Math.max((isNaN(a)?1:a),1),7);this._drawDaysOfWeek()};this._drawDaysOfWeek=function(){if(this.contDays.childNodes.length==0){var t=document.createElement("UL");t.className="dhtmlxcalendar_line";this.contDays.appendChild(t)}else{var t=this.contDays.firstChild}var r=this._wStart;var s=this.langData[this.lang].daysSNames;s.push(String(this.langData[this.lang].daysSNames[0]).valueOf());for(var u=0;u<8;u++){if(t.childNodes[u]==null){var a=document.createElement("LI");t.appendChild(a)}else{var a=t.childNodes[u]}if(u==0){a.className="dhtmlxcalendar_cell_wn";a.innerHTML="<div class='dhtmlxcalendar_label'>"+(this.langData[this.lang].weekname||"w")+"</div>"}else{a.className="dhtmlxcalendar_cell"+(r>=6?" dhtmlxcalendar_day_weekday_cell":"")+(u==1?"_first":"");a.innerHTML=s[r];if(++r>7){r=1}}}if(this._activeMonth!=null){this._drawMonth(this._activeMonth)}};this._wStart=this.langData[this.lang].weekstart;this.setWeekStartDay(this._wStart);this.contDates=document.createElement("DIV");this.contDates.className="dhtmlxcalendar_dates_cont";this.base.firstChild.appendChild(this.contDates);this.contDates.onclick=function(w){w=w||event;if(w.type=="touchstart"&&w.preventDefault!=null){w.preventDefault()}var r=(w.target||w.srcElement);if(r.parentNode!=null&&r.parentNode._date!=null){r=r.parentNode}if(r._date!=null&&!r._css_dis){var u=g._activeDate.getHours();var s=g._activeDate.getMinutes();var v=r._date;if(g.checkEvent("onBeforeChange")){if(!g.callEvent("onBeforeChange",[new Date(r._date.getFullYear(),r._date.getMonth(),r._date.getDate(),u,s)])){return}}if(g._activeDateCell!=null){g._activeDateCell._css_date=false;g._updateCellStyle(g._activeDateCell._q,g._activeDateCell._w)}var a=(g._activeDate.getFullYear()+"_"+g._activeDate.getMonth()!=v.getFullYear()+"_"+v.getMonth());g._nullDate=false;g._activeDate=new Date(v.getFullYear(),v.getMonth(),v.getDate(),u,s);g._activeDateCell=r;g._activeDateCell._css_date=true;g._activeDateCell._css_hover=false;g._updateCellStyle(g._activeDateCell._q,g._activeDateCell._w);if(a){g._drawMonth(g._activeDate)}g._updateInp();if(!g._hasParent){if(w.type=="touchstart"){window.setTimeout(function(){g._hide()},400)}else{g._hide()}}g._evOnClick([new Date(g._activeDate.getTime())]);g._doOnSelectorChange(true)}};if(this.conf.touch==true){this.contDates.ontouchstart=this.contDates.onclick}this.contDates.onmouseover=function(r){r=r||event;var a=(r.target||r.srcElement);if(a.parentNode!=null&&a.parentNode._date!=null){a=a.parentNode}if(a._date!=null){if(g._lastHover==a||a._css_hover){return}a._css_hover=true;g._updateCellStyle(a._q,a._w);g._lastHover=a;g._evOnMouseOver([new Date(a._date.getFullYear(),a._date.getMonth(),a._date.getDate(),0,0,0,0),r]);a=null}};this.contDates.onmouseout=function(a){g._clearDayHover(a||event)};this._lastHover=null;this._clearDayHover=function(a){if(!this._lastHover){return}this._lastHover._css_hover=false;this._updateCellStyle(this._lastHover._q,this._lastHover._w);if(a!=null){g._evOnMouseOut([new Date(this._lastHover._date.getFullYear(),this._lastHover._date.getMonth(),this._lastHover._date.getDate(),0,0,0,0),a])}this._lastHover=null};for(var b=0;b<6;b++){var j=document.createElement("UL");j.className="dhtmlxcalendar_line";this.contDates.appendChild(j);for(var m=0;m<=7;m++){var n=document.createElement("LI");if(m==0){n.className="dhtmlxcalendar_cell_wn"}else{n.className="dhtmlxcalendar_cell"}j.appendChild(n)}}this.contTime=document.createElement("DIV");this.contTime.className="dhtmlxcalendar_time_cont";this.contTime.style.display="none";this.base.firstChild.appendChild(this.contTime);this.showTime=function(){if(this.conf.time!=true){this.conf.time=true;this._adjustTimeCont()}};this.hideTime=function(){if(this.conf.time==true){this.conf.time=false;this._adjustTimeCont()}};this.showToday=function(){if(this.conf.today!=true){this.conf.today=true;this._adjustTimeCont()}};this.hideToday=function(){if(this.conf.today==true){this.conf.today=false;this._adjustTimeCont()}};this._adjustTimeCont=function(){var a="";if(this.conf.time==true){a+="_time"}if(this.conf.today==true){a+="_today"}if(a==""){this.contTime.style.display="none"}else{this.contTime.className="dhtmlxcalendar_time_cont dhtmlxcalendar_mode"+a;this.contTime.style.display=""}this._ifrSize()};this._adjustTimeCont();var j=document.createElement("UL");j.className="dhtmlxcalendar_line";this.contTime.appendChild(j);var n=document.createElement("LI");n.className="dhtmlxcalendar_cell dhtmlxcalendar_time_hdr";n.innerHTML="<div class='dhtmlxcalendar_time_img'></div><span class='dhtmlxcalendar_label_hours'></span><span class='dhtmlxcalendar_label_colon'>:</span><span class='dhtmlxcalendar_label_minutes'></span><span class='dhtmlxcalendar_label_clear'>"+this.langData[this.lang].clear+"</span><span class='dhtmlxcalendar_label_today'>"+this.langData[this.lang].today+"</span>";j.appendChild(n);n.onclick=function(s){s=s||event;if(s.type=="touchstart"&&s.preventDefault!=null){s.preventDefault()}var a=(s.target||s.srcElement);if(a.tagName!=null&&a.tagName.toLowerCase()=="span"&&a._par==true&&a.parentNode!=null){a=a.parentNode}if(a.className&&a.className=="dhtmlxcalendar_label_hours"){s.cancelBubble=true;var r=g.contMonth.offsetHeight+g.contDays.offsetHeight+g.contDates.offsetHeight+a.offsetTop;g._showSelector("hours",Math.round(a.offsetLeft+a.offsetWidth/2),r-2,"selector_hours",true);return}if(a.className&&a.className=="dhtmlxcalendar_label_minutes"){s.cancelBubble=true;if(g._minutesInterval==1){var u=g.getFormatedDate("%i");a.innerHTML="<span class='dhtmlxcalendar_selected_date'>"+u.charAt(0)+"</span>"+u.charAt(1);a.firstChild._par=true;g._selectorMode=1}var r=g.contMonth.offsetHeight+g.contDays.offsetHeight+g.contDates.offsetHeight+a.offsetTop;g._showSelector("minutes",Math.round(a.offsetLeft+a.offsetWidth/2),r-2,"selector_minutes",true);return}g._hideSelector();if(a.className&&a.className=="dhtmlxcalendar_label_today"){var u=new Date();u=new Date(u.getFullYear(),u.getMonth(),u.getDate(),g._activeDate.getHours(),g._activeDate.getMinutes(),g._activeDate.getSeconds(),g._activeDate.getMilliseconds());g.setDate(u);g._updateInp();g.callEvent("onButtonClick",[u])}if(a.className&&a.className=="dhtmlxcalendar_label_clear"){g._nullDate=true;g._drawMonth(new Date());g._updateInp();g.callEvent("onButtonClick",[null])}};if(this.conf.touch==true){n.ontouchstart=n.onclick}this._activeMonth=null;this._activeDate=new Date();this._activeDateCell=null;this.setDate=function(r){window.dhx4.temp_calendar={tz:null};this._nullDate=(typeof(r)=="undefined"||r===""||!r);if(!(r instanceof Date)){r=this._strToDate(String(r||""));if(r=="Invalid Date"){r=new Date()}else{this.conf.tz=window.dhx4.temp_calendar.tz}window.dhx4.temp_calendar=null}if(this.conf.tz==null){this.conf.tz=window.dhx4.date2str(r,"%P")}var a=r.getTime();if(this._isOutOfRange(a)){return}this._activeDate=new Date(a);this._drawMonth(this._nullDate?new Date():this._activeDate);this._updateVisibleHours();this._updateVisibleMinutes()};this.getDate=function(s){if(this._nullDate){return null}var a=new Date(this._activeDate.getTime());if(s){window.dhx4.temp_calendar={tz:this.conf.tz};var r=this._dateToStr(a);window.dhx4.temp_calendar=null;return r}return a};this._drawMonth=function(A){if(!(A instanceof Date)){return}if(isNaN(A.getFullYear())){A=new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),1,0,0,0,0)}this._activeMonth=new Date(A.getFullYear(),A.getMonth(),1,0,0,0,0);this._activeDateCell=null;var y=new Date(this._activeMonth.getTime());var s=y.getDay();var E=s-this._wStart;if(E<0){E=E+7}y.setDate(y.getDate()-E);var I=A.getMonth();var J=new Date(this._activeDate.getFullYear(),this._activeDate.getMonth(),this._activeDate.getDate(),0,0,0,0).getTime();var v=0;for(var r=0;r<6;r++){var z=this._wStart;for(var H=0;H<=7;H++){if(H==0){var F=this.getWeekNumber(new Date(y.getFullYear(),y.getMonth(),y.getDate()+v,0,0,0,0));if(F>=52&&this.conf.ws_first==true&&this._activeMonth.getMonth()==0){var u=this.getWeekNumber(new Date(y.getFullYear(),y.getMonth(),y.getDate()+v+7,0,0,0,0));if(u<F&&u>1){F=1}}else{if(F>52&&this._activeMonth.getMonth()==11){var u=this.getWeekNumber(new Date(y.getFullYear()+1,0,1));if(u==1){F=1}}}this.contDates.childNodes[r].childNodes[H].innerHTML="<div class='dhtmlxcalendar_label'>"+F+"</div>"}else{var a=new Date(y.getFullYear(),y.getMonth(),y.getDate()+v,0,0,0,0);if(a.getHours()!=0){var x=(a.getHours()>12?24-a.getHours():a.getHours());a.setTime(a.getTime()+60*60*1000*x)}var D=a.getDay();var t=a.getTime();var C="dhtmlxcalendar_label";if(this._tipData[t]!=null){if(this._tipData[t].usePopup&&typeof(window.dhtmlXPopup)=="function"){this.contDates.childNodes[r].childNodes[H].removeAttribute("title");this._initTooltipPopup()}else{this.contDates.childNodes[r].childNodes[H].setAttribute("title",this._tipData[t].text)}if(this._tipData[t].showIcon){C+=" dhtmlxcalendar_label_title"}}else{this.contDates.childNodes[r].childNodes[H].removeAttribute("title")}this.contDates.childNodes[r].childNodes[H].innerHTML="<div class='"+C+"'>"+a.getDate()+"</div>";this.contDates.childNodes[r].childNodes[H]._date=new Date(t);this.contDates.childNodes[r].childNodes[H]._q=r;this.contDates.childNodes[r].childNodes[H]._w=H;this.contDates.childNodes[r].childNodes[H]._css_month=(a.getMonth()==I);this.contDates.childNodes[r].childNodes[H]._css_date=(!this._nullDate&&t==J);this.contDates.childNodes[r].childNodes[H]._css_weekend=(z>=6);this.contDates.childNodes[r].childNodes[H]._css_dis=this._isOutOfRange(t);this.contDates.childNodes[r].childNodes[H]._css_holiday=(this._holidays[t]==true);this._updateCellStyle(r,H);if(t==J){this._activeDateCell=this.contDates.childNodes[r].childNodes[H]}if(++z>7){z=1}v++}}}this.contMonth.firstChild.firstChild.childNodes[1].innerHTML=this._buildMonthHdr(A)};this._updateCellStyle=function(v,a){var u=this.contDates.childNodes[v].childNodes[a];var t="dhtmlxcalendar_cell dhtmlxcalendar_cell";t+=(u._css_month?"_month":"");t+=(u._css_date?"_date":"");t+=(u._css_weekend?"_weekend":"");t+=(u._css_holiday?"_holiday":"");t+=(u._css_dis?"_dis":"");t+=(u._css_hover&&!u._css_dis?"_hover":"");u.className=t;u=null};this._minutesInterval=5;this._initSelector=function(y,t){if(!this._selCover){this._selCover=document.createElement("DIV");this._selCover.className="dhtmlxcalendar_selector_cover";this.base.firstChild.appendChild(this._selCover)}if(!this._sel){this._sel=document.createElement("DIV");this._sel.className="dhtmlxcalendar_selector_obj";this.base.firstChild.appendChild(this._sel);this._sel.appendChild(document.createElement("TABLE"));this._sel.firstChild.className="dhtmlxcalendar_selector_table";this._sel.firstChild.cellSpacing=0;this._sel.firstChild.cellPadding=0;this._sel.firstChild.border=0;this._sel.firstChild.appendChild(document.createElement("TBODY"));this._sel.firstChild.firstChild.appendChild(document.createElement("TR"));this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD"));this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD"));this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD"));this._sel.firstChild.firstChild.firstChild.childNodes[0].className="dhtmlxcalendar_selector_cell_left";this._sel.firstChild.firstChild.firstChild.childNodes[1].className="dhtmlxcalendar_selector_cell_middle";this._sel.firstChild.firstChild.firstChild.childNodes[2].className="dhtmlxcalendar_selector_cell_right";this._sel.firstChild.firstChild.firstChild.childNodes[0].innerHTML="&nbsp;";this._sel.firstChild.firstChild.firstChild.childNodes[2].innerHTML="&nbsp;";this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_left dhtmlxcalendar_selector_cell_left_hover"};this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_left"};this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_right dhtmlxcalendar_selector_cell_right_hover"};this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_right"};this._sel.onmouseover=function(C){C=C||event;var w=(C.target||C.srcElement);if(w._cell===true){if(g._selHover!=w){g._clearSelHover()}if(String(w.className).match(/^\s{0,}dhtmlxcalendar_selector_cell\s{0,}$/gi)!=null){w.className+=" dhtmlxcalendar_selector_cell_hover";g._selHover=w}}};this._sel.onmouseout=function(){g._clearSelHover()};this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick=function(w){w=w||event;if(w.type=="touchstart"&&w.preventDefault!=null){w.preventDefault()}w.cancelBubble=true;g._scrollYears(-1)};this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick=function(w){w=w||event;if(w.type=="touchstart"&&w.preventDefault!=null){w.preventDefault()}w.cancelBubble=true;g._scrollYears(1)};if(this.conf.touch==true){this._sel.firstChild.firstChild.firstChild.childNodes[0].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick;this._sel.firstChild.firstChild.firstChild.childNodes[2].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick}this._sel._ta={};this._selHover=null;this._sel.appendChild(document.createElement("DIV"));this._sel.lastChild.className="dhtmlxcalendar_selector_obj_arrow"}if(this._sel._ta[y]==true){return}if(y=="month"){this._msCells={};this.msCont=document.createElement("DIV");this.msCont.className="dhtmlxcalendar_area_"+t;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.msCont);var r=0;for(var a=0;a<4;a++){var x=document.createElement("UL");x.className="dhtmlxcalendar_selector_line";this.msCont.appendChild(x);for(var z=0;z<3;z++){var A=document.createElement("LI");A.innerHTML=this.langData[this.lang].monthesSNames[r];A.className="dhtmlxcalendar_selector_cell";x.appendChild(A);A._month=r;A._cell=true;this._msCells[r++]=A}}this.msCont.onclick=function(C){C=C||event;if(C.type=="touchstart"&&C.preventDefault!=null){C.preventDefault()}C.cancelBubble=true;var w=(C.target||C.srcElement);if(w._month!=null){g._hideSelector();g._updateActiveMonth();g._drawMonth(new Date(g._activeMonth.getFullYear(),w._month,1,0,0,0,0));g._doOnSelectorChange()}};if(this.conf.touch==true){this.msCont.ontouchstart=this.msCont.onclick}}if(y=="year"){this._ysCells={};this.ysCont=document.createElement("DIV");this.ysCont.className="dhtmlxcalendar_area_"+t;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.ysCont);for(var a=0;a<4;a++){var x=document.createElement("UL");x.className="dhtmlxcalendar_selector_line";this.ysCont.appendChild(x);for(var z=0;z<3;z++){var A=document.createElement("LI");A.className="dhtmlxcalendar_selector_cell";A._cell=true;x.appendChild(A)}}this.ysCont.onclick=function(C){C=C||event;if(C.type=="touchstart"&&C.preventDefault!=null){C.preventDefault()}C.cancelBubble=true;var w=(C.target||C.srcElement);if(w._year!=null){g._hideSelector();g._drawMonth(new Date(w._year,g._activeMonth.getMonth(),1,0,0,0,0));g._doOnSelectorChange()}};if(this.conf.touch==true){this.ysCont.ontouchstart=this.ysCont.onclick}}if(y=="hours"){this._hsCells={};this.hsCont=document.createElement("DIV");this.hsCont.className="dhtmlxcalendar_area_"+t;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.hsCont);var r=0;for(var a=0;a<4;a++){var x=document.createElement("UL");x.className="dhtmlxcalendar_selector_line";this.hsCont.appendChild(x);for(var z=0;z<6;z++){var A=document.createElement("LI");A.innerHTML=this._fixLength(r,2);A.className="dhtmlxcalendar_selector_cell";x.appendChild(A);A._hours=r;A._cell=true;this._hsCells[r++]=A}}this.hsCont.onclick=function(C){C=C||event;if(C.type=="touchstart"&&C.preventDefault!=null){C.preventDefault()}C.cancelBubble=true;var w=(C.target||C.srcElement);if(w._hours!=null){g._hideSelector();g._activeDate.setHours(w._hours);g._updateActiveHours();g._updateVisibleHours();g._doOnSelectorChange();g.callEvent("onTimeChange",[new Date(g._activeDate.getTime())])}};if(this.conf.touch==true){this.hsCont.ontouchstart=this.hsCont.onclick}}if(y=="minutes"){var v=4;var s=3;var u=2;if(this._minutesInterval==1){if(this._selectorMode==1){v=2;s=3;u=1}else{v=2;s=5;u=1;t+="5"}}if(this._minutesInterval==10){v=2}if(this._minutesInterval==15){v=1;s=4;t+="4"}this._rsCells={};this.rsCont=document.createElement("DIV");this.rsCont.className="dhtmlxcalendar_area_"+t;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.rsCont);var r=0;for(var a=0;a<v;a++){var x=document.createElement("UL");x.className="dhtmlxcalendar_selector_line";this.rsCont.appendChild(x);for(var z=0;z<s;z++){var A=document.createElement("LI");A.innerHTML=(u>1?this._fixLength(r,u):r);A.className="dhtmlxcalendar_selector_cell";x.appendChild(A);A._minutes=r;A._cell=true;this._rsCells[r]=A;r+=this._minutesInterval}}this.rsCont.onclick=function(D){D=D||event;if(D.type=="touchstart"&&D.preventDefault!=null){D.preventDefault()}D.cancelBubble=true;var C=(D.target||D.srcElement);if(C._minutes!=null){if(g._minutesInterval==1){var w=g.getFormatedDate("%i");if(g._selectorMode==1){w=C._minutes.toString()+w.charAt(1)}else{w=w.charAt(0)+C._minutes.toString()}g._activeDate.setMinutes(Number(w));g.callEvent("onTimeChange",[new Date(g._activeDate.getTime())]);g._hideSelector();if(g._selectorMode==1){g._updateVisibleMinutes(true);g._selectorMode=2;g._showSelector("minutes",g._sel._x,g._sel._y,"selector_minutes",true);g._updateActiveMinutes();return}else{g._selectorMode=1}}else{g._hideSelector();g._activeDate.setMinutes(C._minutes);g._updateActiveMinutes();g.callEvent("onTimeChange",[new Date(g._activeDate.getTime())])}g._updateVisibleMinutes();g._doOnSelectorChange()}};if(this.conf.touch==true){this.rsCont.ontouchstart=this.rsCont.onclick}}this._sel._ta[y]=true};this._showSelector=function(u,r,v,t,a){if(a===true&&this._sel!=null&&this._isSelectorVisible()&&u==this._sel._t){this._hideSelector();return}if(this.conf.skin=="dhx_terrace"){r+=12}if(!this._sel||!this._sel._ta[u]){this._initSelector(u,t)}if(u!=this._sel._t&&this._sel._t=="minutes"&&this._minutesInterval==1){this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i")}this._sel._x=r;this._sel._y=v;this._sel.style.visibility="hidden";this._sel.style.display="";this._selCover.style.width=this.base.offsetWidth-2+"px";this._selCover.style.top=this.contMonth.offsetHeight+"px";this._selCover.style.height=this.contDates.offsetHeight+this.contDays.offsetHeight-1+"px";this._selCover.style.display="";this._sel._t=u;this._sel.className="dhtmlxcalendar_selector_obj dhtmlxcalendar_"+t+(u=="hours"&&this.conf.today==true?"2":"");this._sel.childNodes[0].firstChild.firstChild.childNodes[0].style.display=this._sel.childNodes[0].firstChild.firstChild.childNodes[2].style.display=(u=="year"?"":"none");var s=Math.max(0,r-Math.round(this._sel.offsetWidth/2));if(s+this._sel.offsetWidth>this._sel.parentNode.offsetWidth){s=this._sel.parentNode.offsetWidth-this._sel.offsetWidth}this._sel.style.left=s+"px";if(u=="hours"||u=="minutes"){this._sel.style.top=v-this._sel.offsetHeight+"px"}else{this._sel.style.top=v+"px"}this._sel.childNodes[1].style.width=this._sel.childNodes[0].offsetWidth+"px";this._sel.style.visibility="visible";this._doOnSelectorShow(u)};this._doOnSelectorShow=function(a){if(a=="month"){this._updateActiveMonth()}if(a=="year"){this._updateYearsList(this._activeMonth)}if(a=="hours"){this._updateActiveHours()}if(a=="minutes"){this._updateActiveMinutes()}};this._hideSelector=function(a){if(!this._sel){return}this._sel.style.display="none";this._sel.style.visible="hidden";this._selCover.style.display="none";if(this._sel._t=="minutes"&&this._minutesInterval==1){this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i");this._unloadSelector("minutes")}};this._isSelectorVisible=function(){if(!this._sel){return false}return(this._sel.style.display!="none")};this._doOnSelectorChange=function(a){this.callEvent("onChange",[new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),this._activeDate.getDate(),this._activeDate.getHours(),this._activeDate.getMinutes(),this._activeDate.getSeconds()),a===true])};this._clearSelHover=function(){if(!this._selHover){return}this._selHover.className=String(this._selHover.className.replace(/dhtmlxcalendar_selector_cell_hover/gi,""));this._selHover=null};this._unloadSelector=function(s){if(!this._sel){return}if(!this._sel._ta[s]){return}if(s=="month"){this.msCont.onclick=this.msCont.ontouchstart=null;this._msActive=null;for(var r in this._msCells){this._msCells[r]._cell=null;this._msCells[r]._month=null;this._msCells[r].parentNode.removeChild(this._msCells[r]);this._msCells[r]=null}this._msCells=null;while(this.msCont.childNodes.length>0){this.msCont.removeChild(this.msCont.lastChild)}this.msCont.parentNode.removeChild(this.msCont);this.msCont=null}if(s=="year"){this.ysCont.onclick=this.ysCont.ontouchstart=null;for(var r in this._ysCells){this._ysCells[r]._cell=null;this._ysCells[r]._year=null;this._ysCells[r].parentNode.removeChild(this._ysCells[r]);this._ysCells[r]=null}this._ysCells=null;while(this.ysCont.childNodes.length>0){this.ysCont.removeChild(this.ysCont.lastChild)}this.ysCont.parentNode.removeChild(this.ysCont);this.ysCont=null}if(s=="hours"){this.hsCont.onclick=this.hsCont.ontouchstart=null;this._hsActive=null;for(var r in this._hsCells){this._hsCells[r]._cell=null;this._hsCells[r]._hours=null;this._hsCells[r].parentNode.removeChild(this._hsCells[r]);this._hsCells[r]=null}this._hsCells=null;while(this.hsCont.childNodes.length>0){this.hsCont.removeChild(this.hsCont.lastChild)}this.hsCont.parentNode.removeChild(this.hsCont);this.hsCont=null}if(s=="minutes"){this.rsCont.onclick=this.rsCont.ontouchstart=null;this._rsActive=null;for(var r in this._rsCells){this._rsCells[r]._cell=null;this._rsCells[r]._minutes=null;this._rsCells[r].parentNode.removeChild(this._rsCells[r]);this._rsCells[r]=null}this._rsCells=null;while(this.rsCont.childNodes.length>0){this.rsCont.removeChild(this.rsCont.lastChild)}this.rsCont.parentNode.removeChild(this.rsCont);this.rsCont=null}this._sel._ta[s]=null};this.setMinutesInterval=function(a){if(!(a==1||a==5||a==10||a==15)){return}this._minutesInterval=a;this._unloadSelector("minutes")};this._updateActiveMonth=function(){if(typeof(this._msActive)!="undefined"&&typeof(this._msCells[this._msActive])!="undefined"){this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell"}this._msActive=this._activeMonth.getMonth();this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateActiveYear=function(){var a=this._activeMonth.getFullYear();if(this._ysCells[a]){this._ysCells[a].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"}};this._updateYearsList=function(v){for(var s in this._ysCells){this._ysCells[s]=null;delete this._ysCells[s]}var t=12*Math.floor(v.getFullYear()/12);for(var u=0;u<4;u++){for(var r=0;r<3;r++){this.ysCont.childNodes[u].childNodes[r].innerHTML=t;this.ysCont.childNodes[u].childNodes[r]._year=t;this.ysCont.childNodes[u].childNodes[r].className="dhtmlxcalendar_selector_cell";this._ysCells[t++]=this.ysCont.childNodes[u].childNodes[r]}}this._updateActiveYear()};this._scrollYears=function(a){var s=(a<0?this.ysCont.firstChild.firstChild._year:this.ysCont.lastChild.lastChild._year)+a;var r=new Date(s,this._activeMonth.getMonth(),1,0,0,0,0);this._updateYearsList(r)};this._updateActiveHours=function(){if(typeof(this._hsActive)!="undefined"&&typeof(this._hsCells[this._hsActive])!="undefined"){this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell"}this._hsActive=this._activeDate.getHours();this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateVisibleHours=function(){this.contTime.firstChild.firstChild.childNodes[1].innerHTML=this._fixLength(this._activeDate.getHours(),2)};this._updateActiveMinutes=function(){if(this._rsActive!=null&&typeof(this._rsActive)!="undefined"&&typeof(this._rsCells[this._rsActive])!="undefined"){this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell"}if(this._minutesInterval==1){this._rsActive=(this.getFormatedDate("%i").toString()).charAt(this._selectorMode==1?0:1)}else{this._rsActive=this._activeDate.getMinutes()}if(typeof(this._rsCells[this._rsActive])!="undefined"){this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"}};this._updateVisibleMinutes=function(r){var a=this._fixLength(this._activeDate.getMinutes(),2).toString();if(r==true){a=a.charAt(0)+"<span class='dhtmlxcalendar_selected_date'>"+a.charAt(1)+"</span>"}this.contTime.firstChild.firstChild.childNodes[3].innerHTML=a;if(r==true){this.contTime.firstChild.firstChild.childNodes[3].lastChild._par=true}};this._fixLength=function(a,s){while(String(a).length<s){a="0"+String(a)}return a};this._dateFormat="";this._dateFormatRE=null;this.setDateFormat=function(u){var t={};if(this._strToDate!=null){for(var r in this.i){if(this.i[r].input!=null&&this.i[r].input.value.length>0){var v=this._strToDate(this.i[r].input.value,this._dateFormat||this.langData[this.lang].dateformat||"%Y-%m-%d");if(v instanceof Date){t[r]=v}}}}this._dateFormat=u;var s=String(this._dateFormat).replace(/%[a-zA-Z]+/g,function(a){var w=a.replace(/%/,"");switch(w){case"n":case"h":case"j":case"g":case"G":return"\\d{1,2}";case"m":case"d":case"H":case"i":case"s":case"y":return"\\d{2}";case"Y":return"\\d{4}";case"M":return"("+g.langData[g.lang].monthesSNames.join("|").toLowerCase()+"){1,}";case"F":return"("+g.langData[g.lang].monthesFNames.join("|").toLowerCase()+"){1,}";case"D":return"[a-z]{2}";case"a":case"A":return"AM|PM";case"u":return"\\d{1,6}";case"P":return"[\\+\\-]\\d{1,2}\\:\\d{1,2}"}return a});this._dateFormatRE=new RegExp(s,"i");for(var r in t){this.i[r].input.value=this._dateToStr(t[r])}t=null};this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d");this._updateDateStr=function(s){if(!this._dateFormatRE||!s.match(this._dateFormatRE)){return}if(s==this.getFormatedDate()){return}var a=this._strToDate(s);if(!(a instanceof Date)){return}if(this.checkEvent("onBeforeChange")){if(!this.callEvent("onBeforeChange",[new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds())])){this._updateInp();return}}this._nullDate=false;this._activeDate=a;this._drawMonth(this._nullDate?new Date():this._activeDate);this._updateVisibleMinutes();this._updateVisibleHours();if(this._sel&&this._isSelectorVisible()){this._doOnSelectorShow(this._sel._t)}this._doOnSelectorChange(true)};this.showMonth=function(a){if(typeof(a)=="string"){a=this._strToDate(a)}if(!(a instanceof Date)){return}this._drawMonth(a)};this.setFormatedDate=function(u,v,r,t){var s=this._strToDate(v,u);if(t){return s}this.setDate(s)};this.getFormatedDate=function(r,a){if(!(a&&a instanceof Date)){if(this._nullDate){return""}a=new Date(this._activeDate)}return this._dateToStr(a,r)};this.getWeekNumber=function(s){if(typeof(s)=="string"){s=this._strToDate(s)}if(!(s instanceof Date)){return"Invalid Date"}var r=s.getDay();if(r===0){r=7}var t=new Date(s.valueOf());t.setDate(s.getDate()+(4-r));var a=t.getFullYear();var u=Math.round((t.getTime()-new Date(a,0,1).getTime())/86400000);return 1+Math.floor(u/7)};this.showWeekNumbers=function(){this.base.firstChild.className="dhtmlxcalendar_wn"};this.hideWeekNumbers=function(){this.base.firstChild.className=""};this.show=function(t){if(!t&&this._hasParent){this._show();return}if(typeof(t)=="string"){var s=document.getElementById(t);if(s!=null&&typeof(s._dhtmlxcalendar_uid)!="undefined"&&this.i[s._dhtmlxcalendar_uid]!=null){this._show(s._dhtmlxcalendar_uid);return}}if(typeof(t)=="object"&&typeof(t._dhtmlxcalendar_uid)!="undefined"&&this.i[t._dhtmlxcalendar_uid]==t){this._show(t._dhtmlxcalendar_uid);return}if(typeof(t)=="undefined"){for(var r in this.i){if(!t){t=r}}}if(!t){return}this._show(t)};this.hide=function(){if(this._isVisible()){this._hide()}};this.isVisible=function(){return this._isVisible()};this._activeInp=null;this.pos="bottom";this.setPosition=function(a,r){this._px=null;this._py=null;if(a=="right"||a=="bottom"){this.pos=a}else{this.pos="int";if(typeof(a)!="undefined"&&!isNaN(a)){this.base.style.left=a+"px";this._px=a}if(typeof(r)!="undefined"&&!isNaN(r)){this.base.style.top=r+"px";this._py=r}this._ifrSize()}};this._show=function(w,r){if(r===true&&this._activeInp==w&&this._isVisible()){this._hide();return}this.base.style.visibility="hidden";this.base.style.display="";if(!w){if(this._px!=null&&this._py!=null){this.base.style.left=this._px+"px";this.base.style.top=this._py+"px"}else{this.base.style.left="0px";this.base.style.top="0px"}}else{if(this.base.className.indexOf("dhtmlxcalendar_in_input")==-1){this.base.className+=" dhtmlxcalendar_in_input"}var s=(this.i[w].input||this.i[w].button);var y=window.dhx4.screenDim();var v={top:window.dhx4.absTop(s),left:window.dhx4.absLeft(s)};if(this.pos=="right"){this.base.style.left=v.left+s.offsetWidth+"px";this.base.style.top=Math.min(v.top,y.bottom-this.base.offsetHeight)+"px"}else{if(this.pos=="bottom"){var u=v.top+s.offsetHeight+1;if(u+this.base.offsetHeight>y.bottom){var t=v.top-this.base.offsetHeight;if(t>=-20){u=t}}var a=v.left;if(a+this.base.offsetWidth>y.right){a=Math.max(0,v.left+s.offsetWidth-this.base.offsetWidth)}this.base.style.left=a+"px";this.base.style.top=u+"px"}else{this.base.style.left=(this._px||0)+"px";this.base.style.top=(this._py||0)+"px"}}this._activeInp=w;s=null}this._hideSelector();this.base.style.visibility="visible";this.base.style.zIndex=window.dhx4.zim.reserve(this.conf.zi);this._ifrSize();if(this._ifr){this._ifr.style.display=""}this.callEvent("onShow",[])};this._hide=function(){if(this._lastHover!=null){this._clearDayHover()}this._hideSelector();this.base.style.display="none";window.dhx4.zim.clear(this.conf.zi);if(this.base.className.indexOf("dhtmlxcalendar_in_input")>=0){this.base.className=this.base.className.replace(/\s{0,}dhtmlxcalendar_in_input/gi,"")}this._activeInp=null;if(this._ifr){this._ifr.style.display="none"}this.callEvent("onHide",[])};this._isVisible=function(){return(this.base.style.display!="none")};this._rangeActive=false;this._rangeFrom=null;this._rangeTo=null;this._rangeSet={};this.setInsensitiveDays=function(s){var a=this._extractDates(s);for(var r=0;r<a.length;r++){this._rangeSet[new Date(a[r].getFullYear(),a[r].getMonth(),a[r].getDate(),0,0,0,0).getTime()]=true}this._drawMonth(this._activeMonth)};this.clearInsensitiveDays=function(){this._clearRangeSet();this._drawMonth(this._activeMonth)};this._holidays={};this.setHolidays=function(s){if(s==null){this._clearHolidays()}else{if(s!=null){var a=this._extractDates(s);for(var u=0;u<a.length;u++){this._holidays[new Date(a[u].getFullYear(),a[u].getMonth(),a[u].getDate(),0,0,0,0).getTime()]=true}}}this._drawMonth(this._activeMonth)};this._extractDates=function(u){if(typeof(u)=="string"||u instanceof Date){u=[u]}var s=[];for(var v=0;v<u.length;v++){if(typeof(u[v])=="string"){var x=u[v].split(",");for(var a=0;a<x.length;a++){s.push(this._strToDate(x[a]))}}else{if(u[v] instanceof Date){s.push(u[v])}}}return s};this._clearRange=function(){this._rangeActive=false;this._rangeType=null;this._rangeFrom=null;this._rangeTo=null};this._clearRangeSet=function(){for(var r in this._rangeSet){this._rangeSet[r]=null;delete this._rangeSet[r]}};this._clearHolidays=function(){for(var r in this._holidays){this._holidays[r]=null;delete this._holidays[r]}};this._isOutOfRange=function(r){if(this._rangeSet[r]==true){return true}if(this._rangeActive){if(this._rangeType=="in"&&(r<this._rangeFrom||r>this._rangeTo)){return true}if(this._rangeType=="out"&&(r>=this._rangeFrom&&r<=this._rangeTo)){return true}if(this._rangeType=="from"&&r<this._rangeFrom){return true}if(this._rangeType=="to"&&r>this._rangeTo){return true}}var a=new Date(r);if(this._rangeWeek){if(this._rangeWeekData[a.getDay()]===true){return true}}if(this._rangeMonth){if(this._rangeMonthData[a.getDate()]===true){return true}}if(this._rangeYear){if(this._rangeYearData[a.getMonth()+"_"+a.getDate()]===true){return true}}return false};this.clearSensitiveRange=function(){this._clearRange();this._drawMonth(this._activeMonth)};this.setSensitiveRange=function(t,s,a){var r=false;if(t!=null&&s!=null){if(!(t instanceof Date)){t=this._strToDate(t)}if(!(s instanceof Date)){s=this._strToDate(s)}if(t.getTime()>s.getTime()){return}this._rangeFrom=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime();this._rangeTo=new Date(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0,0).getTime();this._rangeActive=true;this._rangeType="in";r=true}if(!r&&t!=null&&s==null){if(!(t instanceof Date)){t=this._strToDate(t)}this._rangeFrom=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime();this._rangeTo=null;if(a===true){this._rangeFrom++}this._rangeActive=true;this._rangeType="from";r=true}if(!r&&t==null&&s!=null){if(!(s instanceof Date)){s=this._strToDate(s)}this._rangeFrom=null;this._rangeTo=new Date(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0,0).getTime();if(a===true){this._rangeTo--}this._rangeActive=true;this._rangeType="to";r=true}if(r){this._drawMonth(this._activeMonth)}};this.setInsensitiveRange=function(r,a){if(r!=null&&a!=null){if(!(r instanceof Date)){r=this._strToDate(r)}if(!(a instanceof Date)){a=this._strToDate(a)}if(r.getTime()>a.getTime()){return}this._rangeFrom=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0).getTime();this._rangeTo=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0).getTime();this._rangeActive=true;this._rangeType="out";this._drawMonth(this._activeMonth);return}if(r!=null&&a==null){this.setSensitiveRange(null,r,true);return}if(r==null&&a!=null){this.setSensitiveRange(a,null,true);return}};this.disableDays=function(w,v){if(w=="week"){if(typeof(v)!="object"&&typeof(v.length)=="undefined"){v=[v]}if(!this._rangeWeekData){this._rangeWeekData={}}for(var r in this._rangeWeekData){this._rangeWeekData[r]=false;delete this._rangeWeekData[r]}for(var u=0;u<v.length;u++){this._rangeWeekData[v[u]]=true;if(v[u]==7){this._rangeWeekData[0]=true}}this._rangeWeek=true}if(w=="month"){if(typeof(v)!="object"&&typeof(v.length)=="undefined"){v=[v]}if(!this._rangeMonthData){this._rangeMonthData={}}for(var r in this._rangeMonthData){this._rangeMonthData[r]=false;delete this._rangeMonthData[r]}for(var u=0;u<v.length;u++){this._rangeMonthData[v[u]]=true}this._rangeMonth=true}if(w=="year"){var s=this._extractDates(v);if(!this._rangeYearData){this._rangeYearData={}}for(var r in this._rangeYearData){this._rangeYearData[r]=false;delete this._rangeYearData[r]}for(var u=0;u<s.length;u++){this._rangeYearData[s[u].getMonth()+"_"+s[u].getDate()]=true}this._rangeYear=true}this._drawMonth(this._activeMonth)};this.enableDays=function(a){if(a=="week"){this._rangeWeek=false}if(a=="month"){this._rangeMonth=false}if(a=="year"){this._rangeYear=false}this._drawMonth(this._activeMonth)};this._tipData={};this._tipTM=null;this._tipTMTime=400;this._tipEvs=false;this._tipPopup=null;this._tipCellDate=null;this._tipCellDim=null;this.setTooltip=function(s,w,x,a){var u=this._extractDates(s);for(var v=0;v<u.length;v++){var r=new Date(u[v].getFullYear(),u[v].getMonth(),u[v].getDate(),0,0,0,0).getTime();this._tipData[r]={text:w,showIcon:x,usePopup:a}}this._drawMonth(this._activeMonth)};this.clearTooltip=function(r){var s=this._extractDates(r);for(var u=0;u<s.length;u++){var a=new Date(s[u].getFullYear(),s[u].getMonth(),s[u].getDate(),0,0,0,0).getTime();this._tipData[a]=null;delete this._tipData[a]}this._drawMonth(this._activeMonth)};this._initTooltipPopup=function(){if(this._tipEvs){return}this.attachEvent("onMouseOver",function(r){var a=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0).getTime();if(this._tipData[a]!=null){if(this._tipTM){window.clearTimeout(this._tipTM)}this._tipCellDate=r;this._tipCellDim=this.getCellDimension(r);this._tipText=this._tipData[a].text;this._tipTM=window.setTimeout(this._showTooltipPopup,this._tipTMTime)}});this.attachEvent("onMouseOut",this._hideTooltipPopup);this._tipEvs=true};this._showTooltipPopup=function(t,a,u,r,s){if(!g._tipPopup){g._tipPopup=new dhtmlXPopup({mode:"top"})}g._tipPopup.attachHTML(g._tipText);g._tipPopup.show(g._tipCellDim.x,g._tipCellDim.y,g._tipCellDim.w,g._tipCellDim.h);g.callEvent("onPopupShow",[g._tipCellDate])};this._hideTooltipPopup=function(){if(this._tipTM){window.clearTimeout(this._tipTM)}if(this._tipPopup!=null&&this._tipPopup.isVisible()){this._tipPopup.hide();this.callEvent("onPopupHide",[this._tipCellDate])}};this.getPopup=function(){return this._tipPopup};this.getCellDimension=function(s){if(typeof(s)=="string"){s=this._strToDate(s)}if(!(s instanceof Date)){return null}var u=new Date(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0,0).getTime();var r=null;for(var v=0;v<this.contDates.childNodes.length;v++){for(var a=0;a<this.contDates.childNodes[v].childNodes.length;a++){var x=this.contDates.childNodes[v].childNodes[a];if(x._date!=null&&x._date.getTime()==u){r={x:window.dhx4.absLeft(x),y:window.dhx4.absTop(x),w:x.offsetWidth,h:x.offsetHeight}}x=null}}return r};this._updateFromInput=function(a){if(this._nullInInput&&((a.value).replace(/\s/g,"")).length==0){if(this.checkEvent("onBeforeChange")){if(!this.callEvent("onBeforeChange",[null])){this._updateInp();return}}this.setDate(null)}else{this._updateDateStr(a.value)}a=null};this._doOnClick=function(r){r=r||event;var a=(r.target||r.srcElement);if(a._dhtmlxcalendar_uid&&a._dhtmlxcalendar_uid!=g._activeInp&&g._isVisible()&&g._activeInp){g._hide();return}if(!a._dhtmlxcalendar_uid||!g.i[a._dhtmlxcalendar_uid]){if(g._isSelectorVisible()){g._hideSelector()}else{if(!g._hasParent&&g._isVisible()){g._hide()}}}};this._doOnKeyDown=function(a){a=a||event;if(a.keyCode==27||a.keyCode==13){if(g._isSelectorVisible()){g._hideSelector()}else{if(g._isVisible()&&!g._hasParent){g._hide()}}}};this._doOnInpClick=function(r){r=r||event;if(r.type=="touchstart"&&r.preventDefault!=null){r.preventDefault()}var a=(r.target||r.srcElement);if(!a._dhtmlxcalendar_uid){return}if(!g._listenerEnabled){g._updateFromInput(a)}g._show(a._dhtmlxcalendar_uid,true)};this._doOnInpKeyUp=function(r){r=r||event;var a=(r.target||r.srcElement);if(r.keyCode==13||!a._dhtmlxcalendar_uid){return}if(!g._listenerEnabled){g._updateFromInput(a)}};this._doOnBtnClick=function(r){r=r||event;if(r.type=="touchstart"&&r.preventDefault!=null){r.preventDefault()}var a=(r.target||r.srcElement);if(!a._dhtmlxcalendar_uid){return}if(g.i[a._dhtmlxcalendar_uid].input!=null){g._updateFromInput(g.i[a._dhtmlxcalendar_uid].input)}g._show(a._dhtmlxcalendar_uid,true)};this._doOnUnload=function(){if(g&&g.unload){g.unload()}};if(typeof(window.addEventListener)=="function"){document.body.addEventListener("click",g._doOnClick,false);window.addEventListener("keydown",g._doOnKeyDown,false);window.addEventListener("unload",g._doOnUnload,false);if(this.conf.touch==true){document.body.addEventListener("touchstart",g._doOnClick,false)}}else{document.body.attachEvent("onclick",g._doOnClick);document.body.attachEvent("onkeydown",g._doOnKeyDown);window.attachEvent("onunload",g._doOnUnload)}this.attachObj=function(s){var r=window.dhx4.newId();if(typeof(s)=="string"){this.i[r]={input:document.getElementById(s)}}else{if(typeof(s.tagName)!="undefined"){this.i[r]={input:s}}else{if(typeof(s)=="object"&&(s.input!=null||s.button!=null)){this.i[r]={};if(s.input!=null){this.i[r].input=(typeof(s.input)=="string"?document.getElementById(s.input):s.input)}if(s.button!=null){this.i[r].button=(typeof(s.button)=="string"?document.getElementById(s.button):s.button)}}}}this._attachEventsToObject(r);return r};this.detachObj=function(t){var s=null;if(this.i[t]!=null){s=t}else{if(typeof(t)=="string"){t=document.getElementById(t);s=t._dhtmlxcalendar_uid}else{if(typeof(t.tagName)!="undefined"){s=t._dhtmlxcalendar_uid}else{if(typeof(t)=="object"&&(t.input!=null||t.button!=null)){if(s==null&&t.input!=null){s=(typeof(t.input)=="string"?document.getElementById(t.input):t.input)._dhtmlxcalendar_uid}if(s==null&&t.button!=null){s=(typeof(t.button)=="string"?document.getElementById(t.button):t.button)._dhtmlxcalendar_uid}}}}}if(s!=null&&this.i[s]!=null){this._detachEventsFromObject(s);for(var r in this.i[r]){this.i[s][r]._dhtmlxcalendar_uid=null;this.i[s][r]=null;delete this.i[s][r]}this.i[s]=null;delete this.i[s];return true}return false};this._attachEventsToObject=function(r){if(this.i[r].button!=null){this.i[r].button._dhtmlxcalendar_uid=r;if(typeof(window.addEventListener)=="function"){this.i[r].button.addEventListener("click",g._doOnBtnClick,false);if(this.conf.touch==true){this.i[r].button.addEventListener("touchstart",g._doOnBtnClick,false)}}else{this.i[r].button.attachEvent("onclick",g._doOnBtnClick)}}else{if(this.i[r].input!=null){this.i[r].input._dhtmlxcalendar_uid=r;if(typeof(window.addEventListener)=="function"){this.i[r].input.addEventListener("click",g._doOnInpClick,false);this.i[r].input.addEventListener("keyup",g._doOnInpKeyUp,false);if(this.conf.touch==true){this.i[r].input.addEventListener("touchstart",g._doOnInpClick,false)}}else{this.i[r].input.attachEvent("onclick",g._doOnInpClick);this.i[r].input.attachEvent("onkeyup",g._doOnInpKeyUp)}}}};this._detachEventsFromObject=function(r){if(this.i[r].button!=null){if(typeof(window.addEventListener)=="function"){this.i[r].button.removeEventListener("click",g._doOnBtnClick,false);if(this.conf.touch==true){this.i[r].button.removeEventListener("touchstart",g._doOnBtnClick,false)}}else{this.i[r].button.detachEvent("onclick",g._doOnBtnClick)}}else{if(this.i[r].input!=null){if(typeof(window.addEventListener)=="function"){this.i[r].input.removeEventListener("click",g._doOnInpClick,false);this.i[r].input.removeEventListener("keyup",g._doOnInpKeyUp,false);if(this.conf.touch==true){this.i[r].input.removeEventListener("touchstart",g._doOnInpClick,false)}}else{this.i[r].input.detachEvent("onclick",g._doOnInpClick);this.i[r].input.detachEvent("onkeyup",g._doOnInpKeyUp)}}}};this._updateInp=function(){if(this.i!=null&&this._activeInp!=null&&this.i[this._activeInp]!=null&&this.i[this._activeInp].input!=null){this.i[this._activeInp].input.value=this.getFormatedDate()}};this.enableListener=function(a){if(!a){return}if(typeof(window.addEventListener)=="function"){a.addEventListener("focus",g._listenerEvFocus,false);a.addEventListener("blur",g._listenerEvBlur,false)}else{a.attachEvent("onfocus",g._listenerEvFocus);a.attachEvent("onblur",g._listenerEvBlur)}a=null};this.disableListener=function(a){if(!a){return}a._f0=false;if(this._tmListener){window.clearTimeout(this._tmListener)}if(typeof(window.addEventListener)=="function"){a.removeEventListener("focus",g._listenerEvFocus,false);a.removeEventListener("blur",g._listenerEvBlur,false)}else{a.detachEvent("onfocus",g._listenerEvFocus);a.detachEvent("onblur",g._listenerEvBlur)}a=null};this._startListener=function(a){if(this._tmListener){window.clearTimeout(this._tmListener)}if(typeof(a._v1)=="undefined"){a._v1=a.value}if(a._v1!=a.value){this._updateFromInput(a);a._v1=a.value}if(a._f0){this._tmListener=window.setTimeout(function(){g._startListener(a)},100)}};this._listenerEvFocus=function(r){r=r||event;var a=r.target||r.srcElement;a._f0=true;g._startListener(a);a=null};this._listenerEvBlur=function(r){r=r||event;var a=r.target||r.srcElement;a._f0=false;a=null};for(var l in this.i){this._attachEventsToObject(l)}window.dhx4._eventable(this);this._evOnArrowClick=function(a){return this.callEvent("onArrowClick",a)};this._evOnClick=function(a){return this.callEvent("onClick",a)};this._evOnMouseOut=function(a){return this.callEvent("onMouseOut",a)};this._evOnMouseOver=function(a){return this.callEvent("onMouseOver",a)};this.unload=function(){this._activeDate=null;this._activeDateCell=null;this._activeInp=null;this._activeMonth=null;this._dateFormat=null;this._dateFormatRE=null;this._lastHover=null;if(this._tmListener){window.clearTimeout(this._tmListener)}this._tmListener=null;if(typeof(window.addEventListener)=="function"){document.body.removeEventListener("click",g._doOnClick,false);window.removeEventListener("keydown",g._doOnKeyDown,false);window.removeEventListener("unload",g._doOnUnload,false);if(this.conf.touch==true){document.body.removeEventListener("touchstart",g._doOnClick,false)}}else{document.body.detachEvent("onclick",g._doOnClick);document.body.detachEvent("onkeydown",g._doOnKeyDown);window.detachEvent("onunload",g._doOnKeyDown)}this._doOnClick=null;this._doOnKeyDown=null;this._doOnUnload=null;for(var r in this.i){this.i[r]._dhtmlxcalendar_uid=null;this._detachEventsFromObject(r);this.disableListener(this.i[r].input);this.i[r]=null;delete this.i[r]}this.i=null;this._doOnInpClick=null;this._doOnInpKeyUp=null;window.dhx4._eventable(this,"clear");this.contMonth.onselectstart=null;this.contMonth.firstChild.firstChild.onclick=null;this.contMonth.firstChild.firstChild.ontouchstart=null;this.contMonth.firstChild.firstChild.firstChild.onmouseover=null;this.contMonth.firstChild.firstChild.firstChild.onmouseout=null;this.contMonth.firstChild.firstChild.lastChild.onmouseover=null;this.contMonth.firstChild.firstChild.lastChild.onmouseout=null;while(this.contMonth.firstChild.firstChild.childNodes.length>0){this.contMonth.firstChild.firstChild.removeChild(this.contMonth.firstChild.firstChild.lastChild)}this.contMonth.firstChild.removeChild(this.contMonth.firstChild.firstChild);this.contMonth.removeChild(this.contMonth.firstChild);this.contMonth.parentNode.removeChild(this.contMonth);this.contMonth=null;while(this.contDays.firstChild.childNodes.length>0){this.contDays.firstChild.removeChild(this.contDays.firstChild.lastChild)}this.contDays.removeChild(this.contDays.firstChild);this.contDays.parentNode.removeChild(this.contDays);this.contDays=null;this.contDates.onclick=null;this.contDates.ontouchstart=null;this.contDates.onmouseover=null;this.contDates.onmouseout=null;while(this.contDates.childNodes.length>0){while(this.contDates.lastChild.childNodes.length>0){this.contDates.lastChild.lastChild._css_date=null;this.contDates.lastChild.lastChild._css_month=null;this.contDates.lastChild.lastChild._css_weekend=null;this.contDates.lastChild.lastChild._css_hover=null;this.contDates.lastChild.lastChild._date=null;this.contDates.lastChild.lastChild._q=null;this.contDates.lastChild.lastChild._w=null;this.contDates.lastChild.removeChild(this.contDates.lastChild.lastChild)}this.contDates.removeChild(this.contDates.lastChild)}this.contDates.parentNode.removeChild(this.contDates);this.contDates=null;this.contTime.firstChild.firstChild.onclick=null;this.contTime.firstChild.firstChild.ontouchstart=null;while(this.contTime.firstChild.firstChild.childNodes.length>0){this.contTime.firstChild.firstChild.removeChild(this.contTime.firstChild.firstChild.lastChild)}this.contTime.firstChild.removeChild(this.contTime.firstChild.firstChild);this.contTime.removeChild(this.contTime.firstChild);this.contTime.parentNode.removeChild(this.contTime);this.contTime=null;this._lastHover=null;this._unloadSelector("month");this._unloadSelector("year");this._unloadSelector("hours");this._unloadSelector("minutes");if(this._selCover){this._selCover.parentNode.removeChild(this._selCover);this._selCover=null}if(this._sel){for(var r in this._sel._ta){this._sel._ta[r]=null}this._sel._ta=null;this._sel._t=null;this._sel.onmouseover=null;this._sel.onmouseout=null;while(this._sel.firstChild.firstChild.firstChild.childNodes.length>0){this._sel.firstChild.firstChild.firstChild.lastChild.onclick=null;this._sel.firstChild.firstChild.firstChild.lastChild.onmouseover=null;this._sel.firstChild.firstChild.firstChild.lastChild.onmouseout=null;this._sel.firstChild.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild.lastChild)}this._sel.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild);this._sel.firstChild.removeChild(this._sel.firstChild.firstChild);while(this._sel.childNodes.length>0){this._sel.removeChild(this._sel.lastChild)}this._sel.parentNode.removeChild(this._sel);this._sel=null}this.base.onclick=null;this.base.onmousedown=null;this.base.ontouchstart=null;this.base.onmouseout=null;this.base.parentNode.removeChild(this.base);this.base=null;this._clearDayHover=null;this._clearSelHover=null;this._doOnSelectorChange=null;this._doOnSelectorShow=null;this._drawMonth=null;this._fixLength=null;this._ifrSize=null;this._hide=null;this._hideSelector=null;this._initSelector=null;this._isSelectorVisible=null;this._isVisible=null;this._scrollYears=null;this._show=null;this._showSelector=null;this._strToDate=null;this._updateActiveHours=null;this._updateActiveMinutes=null;this._updateActiveMonth=null;this._updateActiveYear=null;this._updateCellStyle=null;this._updateDateStr=null;this._updateVisibleHours=null;this._updateVisibleMinutes=null;this._updateYearsList=null;this.enableIframe=null;this.hide=null;this.hideTime=null;this.setDate=null;this.setDateFormat=null;this.setYearsRange=null;this.show=null;this.showTime=null;this.unload=null;if(this._tipPopup!=null){this._tipPopup.unload();this._tipPopup=null}for(var r in this){delete this[r]}r=g=null};this.setDate(this._activeDate);return this}dhtmlXCalendarObject.prototype.lang="en";dhtmlXCalendarObject.prototype.langData={en:{dateformat:"%Y-%m-%d",hdrformat:"%F %Y",monthesFNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthesSNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysFNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysSNames:["Su","Mo","Tu","We","Th","Fr","Sa"],weekstart:1,weekname:"w",today:"Today",clear:"Clear"}};dhtmlXCalendarObject.prototype._buildMonthHdr=function(g){var b=this;var e=function(h){return(String(h).length==1?"0"+String(h):h)};var a=function(h,j){return"<span class='dhtmlxcalendar_month_label_"+h+"'>"+j+"</span>"};var c=String(this.langData[this.lang].hdrformat||("%F %Y")).replace(/%[a-z]/gi,function(h){switch(h){case"%m":return a("month",e(g.getMonth()+1));case"%n":return a("month",g.getMonth()+1);case"%M":return a("month",b.langData[b.lang].monthesSNames[g.getMonth()]);case"%F":return a("month",b.langData[b.lang].monthesFNames[g.getMonth()]);case"%y":return a("year",e(g.getYear()%100));case"%Y":return a("year",g.getFullYear());case"%%":return"%";default:return h}});b=e=a=null;return c};dhtmlXCalendarObject.prototype.enableIframe=function(a){if(a==true){if(!this._ifr){this._ifr=document.createElement("IFRAME");this._ifr.frameBorder=0;this._ifr.border=0;this._ifr.setAttribute("src","javascript:false;");this._ifr.className="dhtmlxcalendar_ifr";this._ifr.onload=function(){this.onload=null;this.contentWindow.document.open("text/html","replace");this.contentWindow.document.write("<html><head><style>html,body{width:100%;height:100%;overflow:hidden;margin:0px;}</style></head><body</body></html>")};this.base.parentNode.insertBefore(this._ifr,this.base);this._ifrSize()}}else{if(this._ifr){this._ifr.parentNode.removeChild(this._ifr);this._ifr=null}}};dhtmlXCalendarObject.prototype._ifrSize=function(){if(this._ifr){this._ifr.style.left=this.base.style.left;this._ifr.style.top=this.base.style.top;this._ifr.style.width=this.base.offsetWidth+"px";this._ifr.style.height=this.base.offsetHeight+"px"}};dhtmlxCalendarObject=dhtmlXCalendarObject;dhtmlXCalendarObject.prototype._dateStrings=function(){var a=this.langData[this.lang];return{monthFullName:a.monthesFNames,monthShortName:a.monthesSNames,dayFullName:a.daysFNames,dayShortName:a.daysSNames}};dhtmlXCalendarObject.prototype._strToDate=function(b,a){return window.dhx4.str2date(b,a||this._dateFormat,this._dateStrings())};dhtmlXCalendarObject.prototype._dateToStr=function(b,a){return window.dhx4.date2str(b,a||this._dateFormat,this._dateStrings())};window.dhtmlxDblCalendarObject=window.dhtmlXDoubleCalendarObject=window.dhtmlXDoubleCalendar=function(b){var a=this;this.leftCalendar=new dhtmlXCalendarObject(b);this.leftCalendar.hideTime();this.rightCalendar=new dhtmlXCalendarObject(b);this.rightCalendar.hideTime();this.leftCalendar.attachEvent("onClick",function(c){a._updateRange("rightCalendar",c,null);a._evOnClick(["left",c])});this.rightCalendar.attachEvent("onClick",function(c){a._updateRange("leftCalendar",null,c);a._evOnClick(["right",c])});this.leftCalendar.attachEvent("onBeforeChange",function(c){return a._evOnBeforeChange(["left",c])});this.rightCalendar.attachEvent("onBeforeChange",function(c){return a._evOnBeforeChange(["right",c])});this.show=function(){this.leftCalendar.show();this.rightCalendar.base.style.marginLeft=this.leftCalendar.base.offsetWidth-1+"px";this.rightCalendar.show()};this.hide=function(){this.leftCalendar.hide();this.rightCalendar.hide()};this.setDateFormat=function(c){this.leftCalendar.setDateFormat(c);this.rightCalendar.setDateFormat(c)};this.setDates=function(e,c){if(e!=null){this.leftCalendar.setDate(e)}if(c!=null){this.rightCalendar.setDate(c)}this._updateRange()};this._updateRange=function(c,g,e){if(arguments.length==3){(c=="leftCalendar"?this.leftCalendar:this.rightCalendar).setSensitiveRange(g,e)}else{this.leftCalendar.setSensitiveRange(null,this.rightCalendar.getDate());this.rightCalendar.setSensitiveRange(this.leftCalendar.getDate(),null)}};this.getFormatedDate=function(){return this.leftCalendar.getFormatedDate.apply(this.leftCalendar,arguments)};this.unload=function(){window.dhx4._eventable(this,"clear");this.leftCalendar.unload();this.rightCalendar.unload();this.leftCalendar=this.rightCalendar=null;this._updateRange=null;this._evOnClick=null;this._evOnBeforeChange=null;this.show=null;this.hide=null;this.setDateFormat=null;this.setDates=null;this.getFormatedDate=null;this.unload=null;a=null};this._evOnClick=function(c){return this.callEvent("onClick",c)};this._evOnBeforeChange=function(c){return this.callEvent("onBeforeChange",c)};window.dhx4._eventable(this);return this};function dhtmlXCombo(h,n,c,l,g){var j=this;var e=null;var o=null;if(typeof(h)=="object"&&!h.tagName){e=h;h=e.parent;c=e.width;n=e.name;l=e.mode;o=e.skin}this.cont=(typeof(h)=="string"?document.getElementById(h):h);this.conf={skin:null,form_name:n||"dhxcombo",combo_width:(parseInt(c)||this.cont.offsetWidth||120)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0),combo_image:false,combo_focus:false,opts_type:(typeof(l)=="string"&&typeof(this.modes[l])!="undefined"?l:"option"),opts_count:8,opts_count_min:3,opts_width:null,item_h:null,list_zi_id:window.dhx4.newId(),allow_free_text:true,allow_empty_value:true,free_text_empty:false,enabled:true,btn_left:((window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&typeof(window.addEventListener)=="undefined"?1:0),ro_mode:false,ro_text:"",ro_tm:null,ro_tm_time:750,img_path:"",img_def:"",img_def_dis:true,template:{header:true,input:"#text#",option:"#text#"},f_func:null,f_mode:false,f_url:false,f_cache:false,f_cache_data:{},f_dyn:false,f_dyn_end:false,f_mask:"",f_ac:true,f_ac_text:"",f_server_tm:null,f_server_last:"",f_loading:false,s_tm:null,s_time:200,s_mode:"select",last_hover:null,last_selected:null,last_match:null,last_text:"",last_value:"",tm_hover:null,tm_confirm_blur:null,clear_click:false,clear_blur:false,clear_bsp:false,clear_key:false,i_ofs:23,sp:{dhx_skyblue:{list_ofs:1,hdr_ofs:1,scr_ofs:1},dhx_web:{list_ofs:0,hdr_ofs:1,scr_ofs:0},dhx_terrace:{list_ofs:1,hdr_ofs:1,scr_ofs:1},material:{list_ofs:0,hdr_ofs:1,scr_ofs:1}},col_w:null};this.conf.combo_image=(this.modes[this.conf.opts_type].image==true);this.t={};this.base=document.createElement("DIV");this.base.style.width=this.conf.combo_width+"px";this.base.innerHTML="<input type='text' class='dhxcombo_input' style='width:"+(this.conf.combo_width-(this.conf.i_ofs+1)-(this.conf.combo_image?this.conf.i_ofs:0))+"px;"+(this.conf.combo_image?"margin-left:"+this.conf.i_ofs+"px;":"")+"' autocomplete='off'><input type='hidden' value=''><input type='hidden' value='false'><div class='dhxcombo_select_button'><div class='dhxcombo_select_img'></div></div>"+(this.conf.combo_image?"<div class='dhxcombo_top_image'>"+this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled)+"</div>":"");this.cont.appendChild(this.base);this.list=document.createElement("DIV");this.list._listId=window.dhx4.newId();this.list.style.display="none";document.body.insertBefore(this.list,document.body.firstChild);this._doOnListScroll=function(){if(j.conf.s_tm!=null){window.clearTimeout(j.conf.s_tm)}j.conf.s_tm=window.setTimeout(j._doOnListScrollAction,j.conf.s_time)};this._doOnListScrollAction=function(){j.conf.s_tm=null;if(j.conf.s_mode=="scroll"&&j.list.scrollHeight-j.list.scrollTop-10<j.list.clientHeight){j._subloadRequest()}};if(typeof(window.addEventListener)=="function"){this.list.addEventListener("scroll",this._doOnListScroll,false)}else{this.list.attachEvent("onscroll",this._doOnListScroll)}this.setSkin(o||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcombo")||"material");this._updateTopImage=function(a){if(!this.conf.combo_image){return}if(a!=null){this.base.lastChild.innerHTML=this.t[a].obj.getTopImage(this.t[a].item,this.conf.enabled)}else{this.base.lastChild.innerHTML=this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled)}};this._filterOpts=function(y){if(this.conf.f_server_tm){window.clearTimeout(this.conf.f_server_tm)}var v=String(this.base.firstChild.value).replace(new RegExp(this._fixRE(this.conf.f_ac_text)+"$","i"),"");if(this.conf.f_server_last==v.toLowerCase()){this._checkForMatch();return}if(this.conf.f_url!=null&&this.checkEvent("onDynXLS")){this.conf.f_server_last=v.toLowerCase();this.callEvent("onDynXLS",[v]);return}if(this.conf.f_url!=null){if(v.length==0){this.conf.f_server_last=v.toLowerCase();this.clearAll();return}if(this.conf.f_cache==true&&this.conf.f_cache_data[v]!=null){this.clearAll();this.conf.f_server_last=v.toLowerCase();for(var u=0;u<this.conf.f_cache_data[v].data.length;u++){this.load(this.conf.f_cache_data[v].data[u])}if(this.conf.f_dyn){this.conf.f_dyn_end=this.conf.f_cache_data[v].dyn_end;this.conf.f_mask=this.conf.f_cache_data[v].mask}if(y!==true){this._showList(true);this._checkForMatch()}}else{this.conf.f_server_tm=window.setTimeout(function(){j.conf.f_server_last=v.toLowerCase();j.conf.f_mask=v;var r="mask="+encodeURIComponent(v);if(j.conf.f_dyn){r+="&pos=0";j.conf.f_dyn_end=false}var a=function(E){if(j.conf.f_cache){if(!j.conf.f_cache_data[v]){j.conf.f_cache_data[v]={data:[],dyn_end:false,mask:v}}j.conf.f_cache_data[v].data.push(E.xmlDoc.responseXML)}j.clearAll();j.load(E.xmlDoc.responseText);var D=(j.base.offsetWidth>0&&j.base.offsetHeight>0);if(D==true&&j.conf.enabled==true&&j.conf.combo_focus==true&&y!==true){if(j.conf.f_ac&&j.conf.f_mode=="start"&&j.conf.clear_bsp==false&&j.list.firstChild!=null){var t=j.list.firstChild._optId;var F=String(j.t[t].obj.getText(j.list.firstChild,true));if(v==j.base.firstChild.value&&String(F).toLowerCase().indexOf(String(v).toLowerCase())===0){j.base.firstChild.value=F;j.conf.f_ac_text=F.substr(v.length);j._selectRange(v.length,F.length)}}j._showList(true);j._checkForMatch()}a=null};if(window.dhx4.ajax.method=="post"){window.dhx4.ajax.post(j.conf.f_url,r,a)}else{if(window.dhx4.ajax.method=="get"){window.dhx4.ajax.get(j.conf.f_url+(String(j.conf.f_url).indexOf("?")>=0?"&":"?")+r,a)}}},200)}}else{this.conf.f_server_last=v.toLowerCase();var s=(v.length==0?true:new RegExp((this.conf.f_mode=="start"?"^":"")+this._fixRE(v),"i"));var w=null;for(var z in this.t){var C=false;if(s!==true){if(this.conf.f_func!=null){var x=this._getOption(this.t[z].item._optId,u);C=(this.conf.f_func.apply(window,[v,x])==true)}else{var A=this.t[z].obj.getText(this.t[z].item,true);C=(s.test(A)==true)}}if(s===true||C==true){this.t[z].item.style.display="";if(w==null&&v.length>0){w=String(this.t[z].obj.getText(this.t[z].item,true))}}else{this.t[z].item.style.display="none"}}if(this.conf.f_ac&&this.conf.f_mode=="start"&&this.conf.clear_bsp==false&&w!=null){this.conf.f_ac_text=w.replace(new RegExp("^"+v,"i"),"");this.base.firstChild.value=w;this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)}if(this.conf.f_mode=="between"&&this.conf.clear_bsp==true){this._checkForMatch(true)}if(y!==true){this._showList(true);this._checkForMatch()}}};this._searchRO=function(r){if(this.conf.ro_tm){window.clearTimeout(this.conf.ro_tm)}this.conf.ro_text+=r;this._showList();for(var t=0;t<this.list.childNodes.length;t++){var a=this.list.childNodes[t]._optId;var u=String(this.t[a].obj.getText(this.list.childNodes[t],true)).toLowerCase();if(u.indexOf(this.conf.ro_text)===0){this._setSelected(a,true,true);this._confirmSelect("script",false);break}}this.conf.ro_tm=window.setTimeout(function(){j.conf.ro_text=""},this.conf.ro_tm_time)};this._fixRE=function(a){return String(a).replace(/[\\\^\$\*\+\?\.\(\)\|\{\}\[\]]/gi,"\\$&")};this._initObj=function(a){if(typeof(a.template)!="undefined"){this.setTemplate(a.template)}if(a.add!=true&&this.conf.f_loading!=true){this.clearAll(false)}this.addOption(a.options)};this._xmlToObj=function(M,u,s){var y={add:false,options:[]};var F=(u==true?M:M.getElementsByTagName("complete"));if(F.length>0){if(window.dhx4.s2b(F[0].getAttribute("add"))==true){y.add=true}var E=F[0].childNodes;for(var C=0;C<E.length;C++){if(typeof(E[C].tagName)!="undefined"){if(String(E[C].tagName).toLowerCase()=="template"){var L={};for(var x=0;x<E[C].childNodes.length;x++){var D=E[C].childNodes[x];if(D.tagName!=null){var H=D.tagName;if(typeof(this.conf.template[H])!="undefined"){L[H]=window.dhx4._xmlNodeValue(D)}if(H=="columns"){for(var J=0;J<D.childNodes.length;J++){var v=D.childNodes[J];if(v.tagName!=null&&v.tagName=="column"){var A={};for(var K in {width:1,css:1,header:1,option:1}){if(v.getAttribute(K)!=null){A[K]=v.getAttribute(K)}}for(var K in {header:1,option:1}){var I=v.getElementsByTagName(K);if(I[0]!=null&&I[0].firstChild!=null){A[K]=window.dhx4._xmlNodeValue(I[0])}}if(L.columns==null){L.columns=[]}L.columns.push(A)}v=null}}}D=null}this.setTemplate(L)}if(String(E[C].tagName).toLowerCase()=="option"){var z=false;if(u==true){z=(y.options.length==s)}else{z=window.dhx4.s2b(E[C].getAttribute("selected"))}var r={value:E[C].getAttribute("value"),text:window.dhx4._xmlNodeValue(E[C]),selected:z,checked:window.dhx4.s2b(E[C].getAttribute("checked"))};for(var K in {img:1,img_dis:1,img_src:1,img_src_dis:1,css:1}){if(E[C].getAttribute(K)!=null){r[K]=E[C].getAttribute(K)}}for(var x=0;x<E[C].childNodes.length;x++){if(E[C].childNodes[x].tagName!=null&&String(E[C].childNodes[x].tagName).toLowerCase()=="text"){r.text={};var D=E[C].childNodes[x];for(var J=0;J<D.childNodes.length;J++){if(D.childNodes[J].tagName!=null){r.text[D.childNodes[J].tagName]=window.dhx4._xmlNodeValue(D.childNodes[J])}}}}y.options.push(r)}}}F=E=null}return y};window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","complete",{data:true});window.dhx4._eventable(this);this._getNearItem=function(s,r){var a=null;while(s!=null){s=s[r<0?"previousSibling":"nextSibling"];if(a==null&&s!=null&&s.style.display==""&&s._optId!=null){a=s;s=null}}return a};this.setName(this.conf.form_name);this._doOnListMouseMove=function(r){r=r||event;var a=r.target||r.srcElement;while(a!=null&&a!=this){if(typeof(a._optId)!="undefined"){if(j.conf.tm_hover){window.clearTimeout(j.conf.tm_hover)}j._setSelected(a._optId,false,false,true)}a=a.parentNode}a=null};this._doOnListMouseDown=function(a){a=a||event;a.cancelBubble=true;j.conf.clear_click=true;window.setTimeout(function(){j.base.firstChild.focus()},1)};this._doOnListMouseUp=function(u){u=u||event;if(u.button!=j.conf.btn_left){return}var a=u.target||u.srcElement;while(a!=null&&a!=this){if(typeof(a._optId)!="undefined"){var s=true;if(typeof(j.t[a._optId].obj.optionClick)=="function"&&j.t[a._optId].obj.optionClick(a,u,j)!==true){s=false}if(s){j._setSelected(a._optId,null,true);j._confirmSelect("click")}}a=a.parentNode}a=null};this._doOnListMouseOut=function(a){if(j.conf.tm_hover){window.clearTimeout(j.conf.tm_hover)}j.conf.tm_hover=window.setTimeout(function(){var r=j.conf.last_match||j.conf.last_selected;if(j.conf.last_match==null&&j.t[r]!=null){if(j.base.firstChild.value!=j.t[r].obj.getText(j.t[r].item,true)){r=null}}j._setSelected(r,null,true,true)},1)};this._doOnBaseMouseDown=function(v){if(!j.conf.enabled){return}j.conf.clear_click=true;v=v||event;if(v.button!=j.conf.btn_left){return}var r=v.target||v.srcElement;if(r!=this.firstChild){window.setTimeout(function(){j.base.firstChild.focus()},1);var u=r;while(u!=this&&u!=null){if(u==this.lastChild){if(typeof(j.modes[j.conf.opts_type].topImageClick)=="function"){var s=(j.conf.last_hover||j.conf.last_selected);var a=(s!=null?j.t[s].item:null);if(j.modes[j.conf.opts_type].topImageClick(a,j)!==true){s=a=null;return}}u=null}else{u=u.parentNode}}}if(j._isListVisible()){j._hideList()}else{if(r!=this.firstChild){j.conf.clear_blur=true}j._showList();j._setSelected(j.conf.last_selected,true,true)}r=null};this._doOnBodyMouseDown=function(){if(j.conf.clear_click){j.conf.clear_click=false;return}j._confirmSelect("blur")};this._doOnInputFocus=function(){j.conf.clear_blur=false;if(j.conf.tm_confirm_blur){window.clearTimeout(j.conf.tm_confirm_blur)}if(j.conf.combo_focus==false){j.conf.combo_focus=true;if(j.conf.skin=="material"&&j.base.className.match(/dhxcombo_actv/)==null){j.base.className+=" dhxcombo_actv"}j.callEvent("onFocus",[])}};this._doOnInputBlur=function(){if(j.conf.clear_blur==true){j.conf.clear_blur=false;return}if(j.conf.tm_confirm_blur){window.clearTimeout(j.conf.tm_confirm_blur)}j.conf.tm_confirm_blur=window.setTimeout(function(){if(j.conf.clear_click==false){j._confirmSelect("blur");j.conf.combo_focus=false;if(j.conf.skin=="material"&&j.base.className.match(/dhxcombo_actv/)!=null){j.base.className=j.base.className.replace(/\s*dhxcombo_actv/gi,"")}j.callEvent("onBlur",[])}},20)};this._doOnInputKeyUp=function(a){a=a||event;if(j.conf.f_mode!=false){j.conf.clear_bsp=(a.keyCode==8||a.keyCode==46);j._filterOpts();return}else{j._checkForMatch()}};this._doOnInputKeyDown=function(a){a=a||event;if((a.keyCode==38||a.keyCode==40)&&!a.ctrlKey&&!a.shiftKey&&!a.altKey){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}a.cancelBubble=true;j._keyOnUpDown(a.keyCode==38?-1:1)}if(a.keyCode==113){if(!j._isListVisible()){j._showList();if(j.base.firstChild.value==j.conf.last_text){j._setSelected(j.conf.last_selected,true,true);j.base.firstChild.value=j.conf.last_text;j.conf.f_server_last=j.base.firstChild.value.toLowerCase()}else{j.conf.f_server_last=j.base.firstChild.value.toLowerCase();if(j.conf.f_mode==false){j._checkForMatch()}}}else{}}if(a.keyCode==27){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}a.cancelBubble=true;j._cancelSelect()}if(a.keyCode==13){if(a.preventDefault){a.preventDefault()}j._confirmSelect("kbd")}if(j.conf.ro_mode==true&&((a.keyCode>=48&&a.keyCode<=57)||(a.keyCode>=65&&a.keyCode<=90))){j._searchRO(String.fromCharCode(a.keyCode).toLowerCase());a.cancelBubble=true}j.conf.clear_key=true;j.callEvent("onKeyPressed",[a.keyCode||a.charCode])};this._doOnInputKeyPress=function(a){if(j.conf.clear_key){j.conf.clear_key=false;return}a=a||event;j.callEvent("onKeyPressed",[a.keyCode||a.charCode])};this._keyOnUpDown=function(a){var r=null;if(this.conf.last_hover){r=this.t[this.conf.last_hover].item}else{if(this.conf.last_selected){r=this.t[this.conf.last_selected].item}}if(!r&&this._getListVisibleCount()==0){return}if(r!=null&&r.style.display!=""){r=null}this._showList();if(r!=null){if(this.t[r._optId].obj.isSelected(r)){r=this._getNearItem(r,a)}}else{r=this.list.firstChild;if(r.style.display!=""){r=this._getNearItem(r,1)}}if(r==null){return}this._setSelected(r._optId,true,true);if(this.conf.f_mode==false){this.base.firstChild.value=this.t[r._optId].obj.getText(r,true)}else{var s=String(this.t[r._optId].obj.getText(r,true));if(this.conf.f_mode=="start"&&this.conf.f_ac==true){if(s.toLowerCase().indexOf(this.conf.f_server_last)===0){this.conf.f_ac_text=s.substring(this.conf.f_server_last.length,s.length);this.base.firstChild.value=s;this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)}else{this.base.firstChild.value=s;this.conf.f_server_last=this.base.firstChild.value.toLowerCase();this._selectRange(0,this.base.firstChild.value.length)}}else{this.base.firstChild.value=s;this.conf.f_server_last=this.base.firstChild.value.toLowerCase()}}r=null};this.conf.evs_nodes=[{node:document.body,evs:{mousedown:"_doOnBodyMouseDown"}},{node:this.base,evs:{mousedown:"_doOnBaseMouseDown"}},{node:this.base.firstChild,evs:{keyup:"_doOnInputKeyUp",keydown:"_doOnInputKeyDown",keypress:"_doOnInputKeyPress",focus:"_doOnInputFocus",blur:"_doOnInputBlur"}},{node:this.list,evs:{mousemove:"_doOnListMouseMove",mousedown:"_doOnListMouseDown",mouseup:"_doOnListMouseUp",mouseout:"_doOnListMouseOut"}}];for(var b=0;b<this.conf.evs_nodes.length;b++){for(var m in this.conf.evs_nodes[b].evs){if(typeof(window.addEventListener)=="function"){this.conf.evs_nodes[b].node.addEventListener(m,this[this.conf.evs_nodes[b].evs[m]],false)}else{this.conf.evs_nodes[b].node.attachEvent("on"+m,this[this.conf.evs_nodes[b].evs[m]])}}}this.unload=function(){this.clearAll();this.t=null;for(var s=0;s<this.conf.evs_nodes.length;s++){for(var r in this.conf.evs_nodes[s].evs){if(typeof(window.addEventListener)=="function"){this.conf.evs_nodes[s].node.removeEventListener(r,this[this.conf.evs_nodes[s].evs[r]],false)}else{this.conf.evs_nodes[s].node.detachEvent("on"+r,this[this.conf.evs_nodes[s].evs[r]])}this.conf.evs_nodes[s].evs[r]=null;delete this.conf.evs_nodes[s].evs[r]}this.conf.evs_nodes[s].node=null;this.conf.evs_nodes[s].evs=null;delete this.conf.evs_nodes[s].node;delete this.conf.evs_nodes[s].evs;this.conf.evs_nodes[s]=null}window.dhx4._eventable(this,"clear");window.dhx4._enableDataLoading(this,null,null,null,"clear");this._mcDetachHeader();this.DOMelem_input=this.DOMelem_button=this.DOMlist=this.DOMelem=this.DOMParent=null;for(var r in this.conf){this.conf[r]=null;delete this.conf[r]}this.conf=null;if(typeof(window.addEventListener)=="function"){this.list.removeEventListener("scroll",this._doOnListScroll,false)}else{this.list.detachEvent("onscroll",this._doOnListScroll)}this.base.parentNode.removeChild(this.base);this.list.parentNode.removeChild(this.list);this.base=this.list=this.cont=null;this.modes=null;for(var r in this){if(typeof(this[r])=="function"){this[r]=null}}j=null};this.DOMelem_input=this.base.firstChild;this.DOMelem_button=this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)];this.DOMlist=this.list;this.DOMelem=this.base;this.DOMParent=h;h=null;if(e!=null){if(e.filter!=null){if(typeof(e.filter)=="string"){this.enableFilteringMode(true,e.filter,window.dhx4.s2b(e.filter_cache),window.dhx4.s2b(e.filter_sub_load))}else{this.enableFilteringMode(true)}}if(e.image_path!=null){this.setImagePath(e.image_path)}if(e.default_image!=null||e.default_image_dis!=null){this.setDefaultImage(e.default_image,e.default_image_dis)}if(e.items||e.options){this.addOption(e.items||e.options)}if(e.xml||e.json){this.load(e.xml||e.json)}if(typeof(e.readonly)!="undefined"){this.readonly(e.readonly)}e=null}return this}function dhtmlXComboFromSelect(c){if(typeof(c)=="string"){c=document.getElementById(c)}var b=c.offsetWidth;var n=c.getAttribute("name")||null;var e=document.createElement("SPAN");c.parentNode.insertBefore(e,c);var h=c.getAttribute("mode")||c.getAttribute("opt_type")||"option";var g=new dhtmlXCombo(e,n,b,h);e=null;var l=c.getAttribute("imagePath");if(l){g.setImagePath(l)}var m=c.getAttribute("defaultImage");var j=c.getAttribute("defaultImageDis");if(window.dhx4.s2b(j)==true){j=true}if(m!=null||j!=null){g.setDefaultImage(m,j)}var a=g._xmlToObj([c],true,c.selectedIndex);if(a.options.length>0){g.addOption(a.options)}a=null;c.parentNode.removeChild(c);c=null;return g}dhtmlXCombo.prototype.setName=function(a){this.conf.form_name=a;this.base.childNodes[1].name=a;this.base.childNodes[2].name=a.replace(/(\[.*)?$/,"_new_value$1")};dhtmlXCombo.prototype.readonly=function(a){if(window.dhx4.s2b(a)){this.base.firstChild.setAttribute("readOnly","true");this.conf.ro_mode=true}else{this.base.firstChild.removeAttribute("readOnly");this.conf.ro_mode=false}};dhtmlXCombo.prototype.setPlaceholder=function(a){if(typeof(a)=="undefined"||a==null){a=""}this.base.firstChild.setAttribute("placeholder",String(a))};dhtmlXCombo.prototype.setTemplate=function(c){for(var b in c){if(typeof(this.conf.template[b])!="undefined"){if(b=="header"){this.conf.template[b]=window.dhx4.s2b(c[b])}else{this.conf.template[b]=String(c[b])}}}if(c.columns!=null){this._mcMakeTemplate(c.columns)}else{this._mcDetachHeader()}for(var b in this.t){this.t[b].obj.setText(this.t[b].item,this.t[b].item._conf.text)}this._confirmSelect("template")};dhtmlXCombo.prototype.setSkin=function(a){if(a==this.conf.skin){return}this.conf.skin=a;this.base.className="dhxcombo_"+this.conf.skin+(this.conf.enabled?"":" dhxcombo_disabled");this.list.className="dhxcombolist_"+this.conf.skin+(this.hdr!=null?" dhxcombolist_multicolumn":"");if(this.hdr!=null){this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr"}this.conf.i_ofs=(a=="material"?26:23);this._adjustBase()};dhtmlXCombo.prototype.getInput=function(){return this.base.firstChild};dhtmlXCombo.prototype.getButton=function(){return this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)]};dhtmlXCombo.prototype.getList=function(){return this.list};dhtmlXCombo.prototype.getBase=function(){return this.base};dhtmlXCombo.prototype.getParent=function(){return this.DOMParent};dhtmlXCombo.prototype.forEachOption=function(a){for(var b=0;b<this.list.childNodes.length;b++){a.apply(window,[this._getOption(this.list.childNodes[b]._optId,b)])}};dhtmlXCombo.prototype.setFocus=function(){if(this.conf.enabled){this.base.firstChild.focus()}};dhtmlXCombo.prototype.setFontSize=function(a,b){if(a!=null){this.base.firstChild.style.fontSize=a}if(b!=null){this.list.style.fontSize=b}};dhtmlXCombo.prototype.getOption=function(g){var h=null;var c=null;for(var e=0;e<this.list.childNodes.length;e++){if(h==null){var b=this.list.childNodes[e]._optId;if(this.t[b].obj.getValue(this.t[b].item)==g){h=b;c=e}}}return(h==null?null:this._getOption(h,c))};dhtmlXCombo.prototype.getOptionByIndex=function(a){if(a<0){return null}if(this.list.childNodes[a]==null){return null}return this._getOption(this.list.childNodes[a]._optId,a)};dhtmlXCombo.prototype.getOptionByLabel=function(g){var h=null;var c=null;for(var e=0;e<this.list.childNodes.length;e++){if(h==null){var b=this.list.childNodes[e]._optId;if(this.t[b].obj.getText(this.t[b].item,true)==g){h=b;c=e}}}return(h==null?null:this._getOption(h,c))};dhtmlXCombo.prototype.getSelectedIndex=function(){return this._getOptionProp(this.conf.last_selected,"index",-1)};dhtmlXCombo.prototype.getSelectedText=function(){return this._getOptionProp(this.conf.last_selected,"text","")};dhtmlXCombo.prototype.getSelectedValue=function(){return this._getOptionProp(this.conf.temp_selected||this.conf.last_selected,"value",null)};dhtmlXCombo.prototype.getActualValue=function(){return this.base.childNodes[1].value};dhtmlXCombo.prototype.getComboText=function(){return this.base.childNodes[0].value};dhtmlXCombo.prototype.getIndexByValue=function(b){var a=this.getOption(b);return(a!=null?a.index:-1)};dhtmlXCombo.prototype.setComboText=function(a){if(this.conf.allow_free_text!=true){return}this.unSelectOption();this.conf.last_text=this.base.firstChild.value=a;this.conf.f_server_last=this.base.firstChild.value.toLowerCase()};dhtmlXCombo.prototype.setComboValue=function(b){var a=this.getOption(b);if(a!=null){this.selectOption(a.index)}else{this.conf.last_value=b;this.base.childNodes[1].value=this.conf.last_value;this.base.childNodes[2].value="true"}};dhtmlXCombo.prototype.selectOption=function(b,c,a){if(b<0||b>=this.list.childNodes.length){return}var e=this.list.childNodes[b]._optId;this._setSelected(e,this._isListVisible(),true);this._confirmSelect("script")};dhtmlXCombo.prototype.unSelectOption=function(){if(this.conf.last_hover!=null){this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,false);this.conf.last_hover=null}this.base.firstChild.value="";if(this.conf.f_mode!=false){this._filterOpts(true)}this._hideList();this._updateTopImage(null);this._confirmSelect("script")};dhtmlXCombo.prototype.confirmValue=function(){this._confirmSelect("script")};dhtmlXCombo.prototype.enable=function(a){a=(typeof(a)=="undefined"?true:window.dhx4.s2b(a));if(this.conf.enabled==a){return}this.conf.enabled=a;if(a){this.base.className="dhxcombo_"+this.conf.skin;this.base.firstChild.removeAttribute("disabled")}else{this._hideList();this.base.className="dhxcombo_"+this.conf.skin+" dhxcombo_disabled";this.base.firstChild.setAttribute("disabled","true")}this._updateTopImage(this.conf.last_selected)};dhtmlXCombo.prototype.disable=function(a){a=(typeof(a)=="undefined"?true:window.dhx4.s2b(a));this.enable(!a)};dhtmlXCombo.prototype.isEnabled=function(){return(this.conf.enabled==true)};dhtmlXCombo.prototype.show=function(a){if(typeof(a)=="undefined"){a=true}else{a=window.dhx4.s2b(a)}this.base.style.display=(a==true?"":"none")};dhtmlXCombo.prototype.hide=function(a){if(typeof(a)=="undefined"){a=true}this.show(!a)};dhtmlXCombo.prototype.isVisible=function(){return(this.base.style.display=="")};dhtmlXCombo.prototype.setFilterHandler=function(a){if(typeof(a)=="function"){this.conf.f_func=a;this.conf.f_mode=true;this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null}else{if(typeof(a)=="string"&&typeof(window[a])=="function"){this.conf.f_func=window[a];this.conf.f_mode=true;this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null}else{this.conf.f_func=null}}};dhtmlXCombo.prototype.enableFilteringMode=function(e,b,a,c){if(e==true||e=="between"){this.conf.f_mode=(e==true?"start":"between");if(b){this.conf.f_url=b;this.conf.f_cache=window.dhx4.s2b(a);this.conf.f_dyn=window.dhx4.s2b(c)}else{this.conf.f_url=null;this.conf.f_cache=false;this.conf.f_dyn=false}}else{this.conf.f_mode=false;this.conf.f_url=null;this.conf.f_cache=false;this.conf.f_dyn=false}};dhtmlXCombo.prototype.filter=function(c,a){for(var e=0;e<this.list.childNodes.length;e++){var b=c.apply(window,[this._getOption(this.list.childNodes[e]._optId,e)]);this.list.childNodes[e].style.display=(b===true?"":"none")}if(typeof(a)=="undefined"||a==true){this._showList(true)}};dhtmlXCombo.prototype.sort=function(c){var a=[];for(var b=0;b<this.list.childNodes.length;b++){var e=this.list.childNodes[b]._optId;a.push([e,this._getOption(e,b)])}if(c=="asc"||c=="desc"){k=true;a.sort(function(h,g){h=h[1].text_option.toLowerCase();g=g[1].text_option.toLowerCase();var j=(c=="asc"?1:-1);return(h>g?j:-1*j)})}else{if(typeof(c)=="function"||typeof(window[c])=="function"){if(typeof(window[c])=="function"){c=window[c]}a.sort(function(h,g){return c.apply(window,[h[1],g[1]])})}}while(this.list.childNodes.length>0){this.list.removeChild(this.list.lastChild)}for(var b=0;b<a.length;b++){this.list.appendChild(this.t[a[b][0]].item)}};dhtmlXCombo.prototype.enableAutocomplete=function(a){if(typeof(a)=="undefined"){a=true}else{a=window.dhx4.s2b(a)}this.conf.f_ac=a};dhtmlXCombo.prototype.disableAutocomplete=function(a){if(typeof(a)=="undefined"){a=true}else{a=window.dhx4.s2b(a)}this.enableAutocomplete(!a)};dhtmlXCombo.prototype.allowFreeText=function(b,a){this.conf.allow_free_text=(typeof(b)=="undefined"?true:window.dhx4.s2b(b));this.conf.free_text_empty=(typeof(a)=="undefined"?false:window.dhx4.s2b(a))};dhtmlXCombo.prototype._checkForMatch=function(e){var a=window.dhx4.trim(this.base.firstChild.value).toLowerCase();var g=null;var b=this.list.firstChild;while(b!=null){if(b.style.display==""&&b._optId!=null){var c=window.dhx4.trim(this.t[b._optId].obj.getText(b,true)).toLowerCase();if(a==c){g=b._optId;b=null}}if(b!=null){b=b.nextSibling}}if(this.conf.last_match==null){if(g!=null){this._setSelected(g,true,true);this.conf.last_match=g}else{if(this.conf.f_mode!="between"||e==true){this._setSelected(null,true,true);this.conf.last_match=null}}}else{if(g!=null){if(g!=this.conf.last_match){this._setSelected(g,true,true);this.conf.last_match=g}}else{this._setSelected(null,true,true);this.conf.last_match=null}}};dhtmlXCombo.prototype._selectRange=function(b,a){if(this.conf.combo_focus==true){window.dhx4.selectTextRange(this.base.firstChild,b,a)}};dhtmlXCombo.prototype.openSelect=function(){if(!this._isListVisible()){this._showList()}};dhtmlXCombo.prototype.closeAll=function(){this._hideList()};dhtmlXCombo.prototype._showList=function(a){if(this._getListVisibleCount()==0){if(a&&this._isListVisible()){this._hideList()}return}if(this._isListVisible()){this._checkListHeight();return}this.list.style.zIndex=window.dhx4.zim.reserve(this.conf.list_zi_id);if(this.hdr!=null&&this.conf.template.header==true){this.hdr.style.zIndex=Number(this.list.style.zIndex)+1}this.list.style.visibility="hidden";this.list.style.display="";if(this.hdr!=null&&this.conf.template.header==true){this.hdr.style.visibility=this.list.style.visibility;this.hdr.style.display=this.list.style.display}var b=(this.hdr!=null&&this.conf.template.header==true?this.hdr.offsetHeight:0);this.list.style.width=Math.max(this.conf.opts_width||this.conf.col_w||0,this.conf.combo_width)+"px";this.list.style.top=window.dhx4.absTop(this.base)+b+this.base.offsetHeight-1+"px";this.list.style.left=window.dhx4.absLeft(this.base)+"px";if(this.hdr!=null&&this.conf.template.header==true){this.hdr.style.width=this.list.style.width;this.hdr.style.left=this.list.style.left;this.hdr.style.top=parseInt(this.list.style.top)-b+"px"}this._checkListHeight();this.list.style.visibility="visible";if(this.hdr!=null&&this.conf.template.header==true){this.hdr.style.visibility="visible"}this.callEvent("onOpen",[])};dhtmlXCombo.prototype._hideList=function(){if(!this._isListVisible()){return}window.dhx4.zim.clear(this.conf.list_zi_id);this.list.style.display="none";if(this.hdr!=null&&this.conf.template.header==true){this.hdr.style.display="none"}this.conf.clear_click=false;this.callEvent("onClose",[])};dhtmlXCombo.prototype._isListVisible=function(){return(this.list.style.display=="")};dhtmlXCombo.prototype._getListVisibleCount=function(){var a=0;for(var b=0;b<this.list.childNodes.length;b++){a+=(this.list.childNodes[b].style.display==""?1:0)}return a};dhtmlXCombo.prototype._checkListHeight=function(){if(!this._isListVisible()){return}if(this.conf.item_h==null){var n=this.list.firstChild;while(n!=null){if(n.style.display==""){this.conf.item_h=n.offsetHeight+(this.hdr!=null?-1:0);n=null}else{n=n.nextSibling}}n=null}var o=window.dhx4.screenDim();var j=window.dhx4.absTop(this.base);var b=this.base.offsetHeight;var a=(this.hdr!=null&&this.conf.template.header==true?this.hdr.offsetHeight:0);var c=Math.max(0,Math.floor((j-a-o.top)/this.conf.item_h));var m=Math.max(0,Math.floor((o.bottom-(j+b+a))/this.conf.item_h));var r=this._getListVisibleCount();if(m<Math.min(this.conf.opts_count_min,r)&&c>m){m=null}var l=Math.min((m==null?c:m),this.conf.opts_count,r);var e=(l<r?(l*this.conf.item_h)+"px":"");var g=this.conf.sp[this.conf.skin][this.hdr!=null&&this.conf.template.header==true?"hdr_ofs":"list_ofs"];this.list.style.height=e;this.list.style.top=(m==null?j-this.list.offsetHeight+g:j+b+a-g)+"px";if(this.hdr!=null&&this.conf.template.header==true){this.hdr.style.top=(m==null?j-a-this.list.offsetHeight+g:j+b-g)+"px"}};dhtmlXCombo.prototype._scrollToItem=function(g){var e=this.t[g].item.offsetTop;var c=e+this.t[g].item.offsetHeight;var b=this.list.scrollTop;var a=b+this.list.clientHeight;if(e<b){this.list.scrollTop=e+(this.hdr!=null&&this.conf.template.header==true?1:0)}else{if(c>a){this.list.scrollTop=c-this.list.clientHeight+(this.hdr!=null&&this.conf.template.header==true?-this.conf.sp[this.conf.skin].scr_ofs:0)}}};dhtmlXCombo.prototype._setSelected=function(e,c,b,a){this.conf.temp_selected=null;if(b){this._updateTopImage(e)}if(e!=null&&this.conf.last_hover==e){if(c){this._scrollToItem(e)}return}if(this.conf.last_hover!=null){this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,false);this.conf.last_hover=null;if(e==null){this.callEvent("onSelectionChange",[])}}if(e!=null){this.t[e].obj.setSelected(this.t[e].item,true);this.conf.last_hover=e;if(a!=true){this.conf.temp_selected=e;this.callEvent("onSelectionChange",[])}if(this.conf.s_mode=="select"&&this.t[e].item==this.t[e].item.parentNode.lastChild){this._subloadRequest()}if(c){this._scrollToItem(e)}}};dhtmlXCombo.prototype._subloadRequest=function(){if(this.conf.f_url!=null&&this.conf.f_dyn==true&&this.conf.f_dyn_end==false){var c="mask="+encodeURIComponent(this.conf.f_mask)+"&pos="+this.list.childNodes.length;var a=this;var b=function(g){if(a.conf.f_cache){a.conf.f_cache_data[a.conf.f_mask].data.push(g.xmlDoc.responseXML)}var e=a.list.childNodes.length;a.conf.f_loading=true;a.load(g.xmlDoc.responseXML);a.conf.f_loading=false;if(e==a.list.childNodes.length){a.conf.f_dyn_end=true;if(a.conf.f_cache){a.conf.f_cache_data[a.conf.f_mask].dyn_end=true}}b=a=null};if(window.dhx4.ajax.method=="post"){window.dhx4.ajax.post(this.conf.f_url,c,b)}else{if(window.dhx4.ajax.method=="get"){window.dhx4.ajax.get(this.conf.f_url+(String(this.conf.f_url).indexOf("?")>=0?"&":"?")+c,b)}}}};dhtmlXCombo.prototype.addOption=function(h,j,b,a,e){var c=null;if(!(h instanceof Array)){var l=this._renderOption({value:h,text:j,css:b,img:a});if(c==null&&window.dhx4.s2b(e)==true){c=l}}else{for(var g=0;g<h.length;g++){if(typeof(h[g])=="undefined"){continue}if(h[g] instanceof Array){l=this._renderOption({value:h[g][0],text:h[g][1],css:h[g][2],img:h[g][3]});if(c==null&&window.dhx4.s2b(h[g][4])==true){c=l}}else{var l=this._renderOption(h[g]);if(c==null&&window.dhx4.s2b(h[g].selected)==true){c=l}}}}if(c!=null){this._setSelected(c,this._isListVisible(),true);this._confirmSelect("onInit")}};dhtmlXCombo.prototype.updateOption=function(a,c,b,e){var g=this._getOptionId(a);if(g==null){return}this.t[g].obj.update(this.t[g].item,{value:c,text:b,css:e});if(this.conf.last_selected==g){this.conf.last_text=this.base.firstChild.value=this.t[g].obj.getText(this.t[g].item,true);this.conf.f_server_last=this.base.firstChild.value.toLowerCase()}};dhtmlXCombo.prototype.deleteOption=function(e){for(var b in this.t){var c=this.t[b].obj.getValue(this.t[b].item);if(c==e){this._removeOption(b)}}if(this._isListVisible()){this._showList(true)}};dhtmlXCombo.prototype.clearAll=function(b){b=(typeof(b)=="undefined"?true:window.dhx4.s2b(b));for(var c in this.t){this._removeOption(c)}if(this.conf.tm_hover){window.clearTimeout(this.conf.tm_hover)}this.conf.last_hover=null;this.conf.last_selected=null;this.list.scrollTop=0;if(b==true){this._hideList()}};dhtmlXCombo.prototype._renderOption=function(e){var g=window.dhx4.newId();var c=document.createElement("DIV");c._optId=g;c._tpl=this.conf.template;if(typeof(e.img)=="undefined"&&typeof(e.img_src)!="undefined"){e.img=e.img_src;delete e.img_src}if(typeof(e.img_dis)=="undefined"&&typeof(e.img_src_dis)!="undefined"){e.img_dis=e.img_src_dis;delete e.img_src_dis}e.img_path=this.conf.img_path;e.img_def=this.conf.img_def;e.img_def_dis=this.conf.img_def_dis;this.list.appendChild(c);var b=(this._isListVisible()&&window.dhx4.isFF==true);if(b==true){var a=this.list.scrollTop;this.list.scrollTop-=1}if(this.hdr!=null){e.multicol=true}this.t[c._optId]={obj:this.modes[this.conf.opts_type].render(c,e),item:c,conf:{type:this.conf.opts_type}};c=null;if(b==true){this.list.scrollTop+=1}return g};dhtmlXCombo.prototype._removeOption=function(a){this.t[a].obj.destruct(this.t[a].item);this.t[a].obj=null;this.t[a].item.parentNode.removeChild(this.t[a].item);this.t[a].item=null;this.t[a].conf=null;this.t[a]=null;delete this.t[a];if(this.conf.last_hover==a){this.conf.last_hover=null}if(this.conf.last_selected==a){this.conf.last_selected=null;this._confirmSelect("onDelete")}};dhtmlXCombo.prototype._confirmSelect=function(c,a){var b=false;if(typeof(a)=="undefined"){a=true}if(this.conf.f_server_tm){window.clearTimeout(this.conf.f_server_tm)}if(this.conf.last_hover!=null){b=b||(this.conf.last_value!=this._getOptionValue(this.conf.last_hover));this.conf.last_match=this.conf.last_selected=this.conf.last_hover;this.conf.last_value=this._getOptionValue(this.conf.last_selected);this.conf.last_text=this.base.firstChild.value=this.t[this.conf.last_selected].obj.getText(this.t[this.conf.last_selected].item,true);this.conf.f_server_last=this.base.firstChild.value.toLowerCase();this.base.childNodes[1].value=this.conf.last_value;this.base.childNodes[2].value="false"}else{if(this.conf.allow_free_text||(this.base.firstChild.value==""&&this.conf.allow_empty_value)){b=b||(this.conf.last_text!=this.base.firstChild.value);this.conf.last_match=this.conf.last_value=this.conf.last_selected=null;this.conf.last_text=this.base.firstChild.value;this.conf.f_server_last=this.base.firstChild.value.toLowerCase();this.base.childNodes[1].value=this.conf.last_text;this.base.childNodes[2].value="true"}else{if(c!="template"){this._cancelSelect(true);this._updateTopImage(this.conf.last_selected);return}}}if(this.conf.f_ac&&this.conf.f_mode=="start"){this.conf.f_ac_text="";if(c!="blur"){this._selectRange(this.base.firstChild.value.length,this.base.firstChild.value.length)}}if(a){this._hideList()}if(b==true&&c!="onInit"&&c!="onDelete"){this.callEvent("onSelectionChange",[]);this.callEvent("onChange",[this.conf.last_value,this.conf.last_text])}};dhtmlXCombo.prototype._cancelSelect=function(a){this._hideList();if(a==true&&this.conf.allow_free_text==false&&this.conf.free_text_empty==true){this.conf.f_server_last=this.conf.last_match=this.conf.last_value=this.conf.last_selected=null;this.base.childNodes[1].value=this.conf.last_text=this.base.firstChild.value="";this.base.childNodes[2].value="false"}else{this.base.firstChild.value=this.conf.last_text}if(this.conf.f_mode!=false){this._filterOpts(true)}};dhtmlXCombo.prototype._getOption=function(j,e){if(!this.t[j]){return null}if(typeof(e)=="undefined"){e=-1}if(e<0){for(var h=0;h<this.list.childNodes.length;h++){if(e<0&&this.list.childNodes[h]._optId==j){e=h}}}var g={value:this.t[j].obj.getValue(this.t[j].item),text:this.t[j].obj.getText(this.t[j].item),text_input:this.t[j].obj.getText(this.t[j].item,true),text_option:this.t[j].obj.getText(this.t[j].item,null,true),css:this.t[j].obj.getCss(this.t[j].item),selected:(j==this.conf.last_selected),index:e};if(typeof(this.t[j].obj.getExtraData)=="function"){var c=this.t[j].obj.getExtraData(this.t[j].item);for(var b in c){if(typeof(g[b])=="undefined"){g[b]=c[b]}}}return g};dhtmlXCombo.prototype._getOptionProp=function(e,c,b){if(e!=null){var a=this._getOption(e);if(a!=null){return a[c]}}return b};dhtmlXCombo.prototype._getOptionId=function(b){var e=null;for(var a=0;a<this.list.childNodes.length;a++){if(e==null){var c=this.list.childNodes[a]._optId;if(b==this.t[c].obj.getValue(this.t[c].item)){e=c}}}return e};dhtmlXCombo.prototype._getOptionValue=function(a){return this._getOptionProp(a,"value",null)};dhtmlXCombo.prototype.setSize=function(a){this.conf.combo_width=parseInt(a)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0);this.base.style.width=Math.max(0,this.conf.combo_width)+"px";this._adjustBase();if(this._isListVisible()){this._hideList();this._showList()}};dhtmlXCombo.prototype._adjustBase=function(){this.base.firstChild.style.width=Math.max(0,(this.conf.combo_width-(this.conf.i_ofs+1)-(this.conf.combo_image?this.conf.i_ofs:0)))+"px";this.base.firstChild.style.marginLeft=(this.conf.combo_image?this.conf.i_ofs+"px":"0px")};dhtmlXCombo.prototype.setOptionWidth=function(a){this.conf.opts_width=(parseInt(a)||null)};dhtmlXCombo.prototype.setOptionIndex=function(c,a){if(isNaN(a)||a<0){return}var e=this.getOption(c);if(e==null){return}if(a==e.index){return}var b=this.list.childNodes[e.index];b.parentNode.removeChild(b);if(this.list.childNodes[a]!=null){this.list.insertBefore(b,this.list.childNodes[a])}else{this.list.appendChild(b)}b=null};dhtmlXCombo.prototype.getOptionsCount=function(){return this.list.childNodes.length};dhtmlXCombo.prototype._mcMakeTemplate=function(m){var g="";var e="";this.conf.col_w=0;for(var j=0;j<m.length;j++){var a=Number(parseInt(m[j].width)||50);var c=(m[j].css||"");var l=(j==0&&window.dhx4.isIE6==true?"_first":"");e+="<div class='dhxcombo_cell"+l+" "+c+"' style='width:"+a+"px;'><div class='dhxcombo_cell_text'>"+(m[j].option||"&nbsp;")+"</div></div>";g+="<div class='dhxcombo_hdrcell"+l+" "+c+"' style='width:"+a+"px;'><div class='dhxcombo_hdrcell_text'>"+(m[j].header||"&nbsp;")+"</div></div>";this.conf.col_w+=a+1}var a=500;var b=document.createElement("DIV");b.style.position="absolute";b.style.top="10px";b.style.left=-a*2+"px";b.style.width=a+"px";b.style.height="50px";b.style.overflowY="scroll";b.innerHTML="<div>&nbsp;</div>";document.body.appendChild(b);this.conf.col_w+=a-b.firstChild.offsetWidth+10;b.parentNode.removeChild(b);b=null;this.conf.template.option=e;this._mcAttachHeader(g);this.list.className+=" dhxcombolist_multicolumn"};dhtmlXCombo.prototype._mcAttachHeader=function(a){if(this.hdr==null){this.hdr=document.createElement("DIV");this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr";this.hdr.style.display="none";this.list.parentNode.insertBefore(this.hdr,this.list);if(typeof(window.addEventListener)=="function"){this.hdr.addEventListener("mousedown",this._doOnListMouseDown,false)}else{this.hdr.attachEvent("onmousedown",this._doOnListMouseDown)}if(this.conf.opts_type=="checkbox"&&this.conf.combo_image==true){this.conf.combo_image=false;if(this.base.lastChild.className.match(/dhxcombo_top_image/)!=null){this.base.removeChild(this.base.lastChild)}this._adjustBase()}}this.hdr.innerHTML="<div class='dhxcombo_hdrtext'>"+a+"</div>"};dhtmlXCombo.prototype._mcDetachHeader=function(){if(this.hdr!=null){if(typeof(window.addEventListener)=="function"){this.hdr.removeEventListener("mousedown",this._doOnListMouseDown,false)}else{this.hdr.detachEvent("onmousedown",this._doOnListMouseDown)}this.hdr.parentNode.removeChild(this.hdr);this.hdr=null}this.conf.col_w=null;this.conf.item_h=null};dhtmlXCombo.prototype.modes={};dhtmlXCombo.prototype.doWithItem=function(a,j,g,c){var h=(a>=0&&a<this.list.childNodes.length?this.list.childNodes[a]._optId:null);if(h==null){return null}if(typeof(this.t[h].obj[j])!="function"){return null}var e=[this.t[h].item];for(var b=2;b<arguments.length;b++){e.push(arguments[b])}return this.t[h].obj[j].apply(this.t[h].obj,e)};function dhtmlXComboExtend(e,c){for(var b in dhtmlXCombo.prototype.modes[c]){if(typeof(dhtmlXCombo.prototype.modes[e][b])=="undefined"){dhtmlXCombo.prototype.modes[e][b]=dhtmlXCombo.prototype.modes[c][b]}}}dhtmlXCombo.prototype.modes.option={image:false,html:false,option_css:"dhxcombo_option_text",render:function(a,b){a._conf={value:b.value,css:""};a.className="dhxcombo_option";a.innerHTML="<div class='"+this.option_css+"'>&nbsp;</div>";if(b.css!=null){a.lastChild.style.cssText=b.css;a._conf.css=b.css}this.setText(a,b.text);return this},destruct:function(a){a._conf=null},update:function(a,b){a._conf.value=b.value;a._conf.css=b.css;a.lastChild.style.cssText=b.css;this.setText(a,b.text)},setText:function(c,e,b){c._conf.text=e;var a=(typeof(e)=="object"?window.dhx4.template(c._tpl.option,this.replaceHtml(c._conf.text,b),true):window.dhx4.trim(this.replaceHtml(c._conf.text,b)||""));c.lastChild.innerHTML=(a.length==0?"&nbsp;":a)},getText:function(c,a,b){if(window.dhx4.s2b(a)&&typeof(c._conf.text)=="object"){return window.dhx4.template(c._tpl.input,c._conf.text,true)}if(window.dhx4.s2b(b)&&typeof(c._conf.text)=="object"){return window.dhx4.template(c._tpl.option,c._conf.text,true)}return c._conf.text},getValue:function(a){return a._conf.value},getCss:function(a){return a._conf.css},setSelected:function(a,b){a.className="dhxcombo_option"+(b?" dhxcombo_option_selected":"")},isSelected:function(a){return String(a.className).indexOf("dhxcombo_option_selected")>=0},getExtraData:function(a){return{type:"option"}},replaceHtml:function(g,e){if(this.html==true){return g}if(typeof(e)=="undefined"||e==null){e={}}if(typeof(g)=="object"){var c={};for(var b in g){c[b]=(e[b]==true?g[b]:this.replaceHtml(g[b]))}}else{var c=(g||"").replace(/[\<\>\&\s]/g,function(a){switch(a){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case" ":return"&nbsp;"}return a})}return c}};dhtmlXCombo.prototype.modes.checkbox={image:true,html:false,image_css:"dhxcombo_checkbox dhxcombo_chbx_#state#",option_css:"dhxcombo_option_text dhxcombo_option_text_chbx",render:function(b,c){if(this.image_css_regexp==null){this.image_css_regexp=new RegExp(this.image_css.replace("#state#","\\d*"))}b._conf={value:c.value,css:"",checked:window.dhx4.s2b(c.checked)};b.className="dhxcombo_option";var a={};if(c.multicol==true){c.text.checkbox="<div class='"+String(this.image_css).replace("#state#",(b._conf.checked?"1":"0"))+"'></div>&nbsp;";a.checkbox=true;b.innerHTML="<div class='"+dhtmlXCombo.prototype.modes.option.option_css+"'></div>"}else{b.innerHTML="<div class='"+String(this.image_css).replace("#state#",(b._conf.checked?"1":"0"))+"'></div><div class='"+this.option_css+"'>&nbsp;</div>"}if(c.css!=null){b.lastChild.style.cssText+=c.css;b._conf.css=c.css}this.setText(b,c.text,a);return this},setChecked:function(b,c){b._conf.checked=window.dhx4.s2b(c);var a=String(this.image_css).replace("#state#",(b._conf.checked?"1":"0"));this._changeChbxCss(b.childNodes,a)},_changeChbxCss:function(a,b){for(var c=0;c<a.length;c++){if(a[c].tagName!=null&&a[c].className!=null&&a[c].className.match(this.image_css_regexp)!=null){a[c].className=b}else{if(a[c].childNodes.length>0){this._changeChbxCss(a[c].childNodes,b)}}}},isChecked:function(a){return(a._conf.checked==true)},getExtraData:function(a){return{type:"checkbox",checked:a._conf.checked}},optionClick:function(g,e,h){var c=true;var b=(e.target||e.srcElement);while(c==true&&b!=null&&b!=g&&b.className!=null){if(b.className.match(this.image_css_regexp)!=null){var a=[g._conf.value,!g._conf.checked];if(h.callEvent("onBeforeCheck",a)===true){this.setChecked(g,!this.isChecked(g));h.callEvent("onCheck",a)}c=false;a=null}else{b=b.parentNode}}b=h=g=null;return c},getTopImage:function(b,a){return""},topImageClick:function(a,b){return true}};dhtmlXComboExtend("checkbox","option");dhtmlXCombo.prototype.setChecked=function(a,b){this.doWithItem(a,"setChecked",b)};dhtmlXCombo.prototype.getChecked=function(a){var b=[];for(var c=0;c<this.list.childNodes.length;c++){if(this.isChecked(c)){b.push(this._getOptionProp(this.list.childNodes[c]._optId,"value",""))}}return b};dhtmlXCombo.prototype.isChecked=function(a){return this.doWithItem(a,"isChecked")};dhtmlXCombo.prototype.modes.image={image:true,html:false,image_css:"dhxcombo_image",option_css:"dhxcombo_option_text dhxcombo_option_text_image",render:function(a,b){a._conf={value:b.value,css:""};a.className="dhxcombo_option";a.innerHTML="<div class='"+this.image_css+"'></div><div class='"+this.option_css+"'>&nbsp;</div>";if(b.css!=null){a.lastChild.style.cssText+=b.css;a._conf.css=b.css}this.setText(a,b.text);this.setImage(a,b.img,b.img_dis,b.img_path,b.img_def,b.img_def_dis);return this},update:function(a,b){a._conf.value=b.value;a._conf.css=b.css;a.lastChild.style.cssText=b.css;this.setText(a,b.text);this.setImage(a,b.img,b.img_dis,b.img_path,b.img_def,b.img_def_dis)},setImage:function(c,a,g,h,e,b){if(a!=null&&a.length>0){a=h+a}else{if(e!=null&&e.length>0){a=h+e}else{a=null}}if(g!=null&&g.length>0){g=h+g}else{if(b!=null&&b.length>0){g=h+b}else{if(b==true){g=a}else{g=null}}}c._conf.img=a;c._conf.img_dis=g;c.firstChild.style.backgroundImage=(a!=null?"url("+a+")":"none")},getExtraData:function(a){return{type:"image"}},getTopImage:function(e,c){var b=(c?"img":"img_dis");if(e!=null&&e._conf[b]!=null){return"<div class='"+this.image_css+"' style='background-image:url("+e._conf[b]+");'></div>"}return""}};dhtmlXComboExtend("image","option");dhtmlXCombo.prototype.setDefaultImage=function(a,b){if(a!=null){this.conf.img_def=a}if(b!=null){this.conf.img_def_dis=b}};dhtmlXCombo.prototype.setImagePath=function(a){this.conf.img_path=a};function dhtmlXColorPicker(j){if(!(this instanceof window.dhtmlXColorPicker)){return new dhtmlXColorPicker(j)}dhx4._eventable(this);var g=this,e=undefined,h=null,c,a,b;this._nodes=[];this.activeNode=null;this._inputListenerId=null;this.base=null;this._globalNode=null;this.memory=null;this.skin=null;this.conf={cp_id:dhx4.newId(),x:0,y:0,c:0,indent:2,position:"right",customColors:false,selectedColor:null,hide:false,hideOnSelect:false,lang:"en",closeable:true};this.value={red:-1,blue:-1,green:-1,hue:-1,sat:-1,lum:-1};this._initMoveSelection=function(l){l=l||event;if(typeof(window.addEventListener)=="function"){g._controllerNodes.colorArea.addEventListener("mousemove",g._setMoveSelection,false);document.body.addEventListener("mouseup",g._cleanMoveSelection,false)}else{g._controllerNodes.colorArea.attachEvent("onmousemove",g._setMoveSelection);document.body.attachEvent("onmouseup",g._cleanMoveSelection)}g._setMoveSelection(l,g._controllerNodes.colorArea);return false};this._cleanMoveSelection=function(){if(typeof(window.removeEventListener)=="function"){g._controllerNodes.colorArea.removeEventListener("mousemove",g._setMoveSelection,false);document.body.removeEventListener("mouseup",g._cleanMoveSelection,false)}else{g._controllerNodes.colorArea.detachEvent("onmousemove",g._setMoveSelection);document.body.detachEvent("onmouseup",g._cleanMoveSelection)}return false};this._setMoveSelection=function(l){l=l||event;var m=g._getOffsetPosition(l,g._controllerNodes.colorArea);if(g._controllerNodes.fr_cover){setTimeout(function(){g._setColorAreaXY(m.x,m.y);g._setColorByXYC()},0)}else{g._setColorAreaXY(m.x,m.y);g._setColorByXYC()}return false};this._initMoveContrast=function(l){l=l||event;if(typeof(window.addEventListener)=="function"){document.body.addEventListener("mousemove",g._setMoveContrast,false);document.body.addEventListener("mouseup",g._cleanMoveContrast,false)}else{document.body.attachEvent("onmousemove",g._setMoveContrast);document.body.attachEvent("onmouseup",g._cleanMoveContrast)}g._setMoveContrast(l,g._controllerNodes.contrastArea)};this._cleanMoveContrast=function(){if(typeof(window.removeEventListener)=="function"){document.body.removeEventListener("mousemove",g._setMoveContrast,false);document.body.removeEventListener("mouseup",g._cleanMoveContrast,false)}else{document.body.detachEvent("onmousemove",g._setMoveContrast);document.body.detachEvent("onmouseup",g._cleanMoveContrast)}};this._setMoveContrast=function(l){l=l||event;var m=g._getOffsetPosition(l,g._controllerNodes.contrastArea);g._setContrastY(m.y);g._setColorByXYC(true)};this._doOnSelectColor=function(){var l=g.colorAIP.rgb2hex({r:g.value.red,g:g.value.green,b:g.value.blue});if(g.activeNode!=null){if(g.activeNode.valueCont){g.activeNode.valueCont.value=l}if(g.activeNode.valueColor){g.activeNode.valueColor.style.backgroundColor=l}}if(g.base._dhx_remove||g.conf.hideOnSelect){g.hide()}g.callEvent("onSelect",[l,((g.activeNode)?g.activeNode.node:null)])};this._doOnCancel=function(){if(g.callEvent("onCancel",[((g.activeNode)?g.activeNode.node:null)])==true&&g.conf.closeable==true){g.hide()}};this._doOnFocusByInput=function(){var m=(this!=window)?this:event.srcElement;var l=(g.activeNode&&g.activeNode.valueCont&&g.activeNode.valueCont==m)?g.activeNode:g._getNodeByValueCont(m);g.activeNode=l;if(l&&l==g.activeNode){g._initListenerInput()}};this._doOnBlurByInput=function(){var m=(this!=window)?this:event.srcElement;var l=(g.activeNode&&g.activeNode.valueCont&&g.activeNode.valueCont==m)?g.activeNode:g._getNodeByValueCont(m);if(l&&l==g.activeNode){g._removeListenerInput()}};this._doOnClickByNode=function(m){m=m||event;var l=(this!=window)?this:event.srcElement;g.activeNode=(g.activeNode.node!=l)?g._getNodeByElement(l):g.activeNode;if(!g.isVisible()){g.show()}};this.saveColor=function(){g.memory.setValue(g.value)};this._onSelectMemoryEl=function(m){var l;g._refreshCoordinatesByHSL(m.value.hue,m.value.sat,m.value.lum);for(l in m.value){g.value[l]=m.value[l]}g._refreshContrast();g._refreshInputValues();g._refreshColorValue()};this._doOnClickByBody=function(n){n=n||event;var l=true,m=n.target||n.srcElement;if(g._isBaseNode(m)){l=false}if(l&&g.activeNode&&(g.activeNode.node==m||g.activeNode.valueCont==m)){l=false}if(l){g.hide()}};this._doOnChangeHSL=function(){var n=parseInt(g._controllerNodes.hue.value),m=parseInt(g._controllerNodes.sat.value),l=parseInt(g._controllerNodes.lum.value),o;if(isNaN(n)||n>359||n<0){g._controllerNodes.hue.value=g.value.hue}else{g.value.hue=n}if(isNaN(m)||m>100||m<0){g._controllerNodes.sat.value=g.value.sat}else{g.value.sat=m}if(isNaN(l)||l>100||l<0){g._controllerNodes.lum.value=g.value.lum}else{g.value.lum=l}o=g.colorAIP.hsl2rgb(g.value.hue,g.value.sat/100,g.value.lum/100);g.value.red=Math.round(255*o.r);g.value.green=Math.round(255*o.g);g.value.blue=Math.round(255*o.b);g._refreshCoordinatesByHSL(g.value.hue,g.value.sat,g.value.lum);g._refreshContrast();g._refreshInputValues();g._refreshColorValue()};this._doOnChangeRGB=function(){var o=parseInt(g._controllerNodes.red.value),n=parseInt(g._controllerNodes.green.value),l=parseInt(g._controllerNodes.blue.value),m;if(isNaN(o)||o>255||o<0){g._controllerNodes.red.value=g.value.red}else{g.value.red=o}if(isNaN(n)||n>255||n<0){g._controllerNodes.green.value=g.value.green}else{g.value.green=n}if(isNaN(l)||l>255||l<0){g._controllerNodes.blue.value=g.value.blue}else{g.value.blue=l}m=g.colorAIP.rgb2hsl(g.value.red/255,g.value.green/255,g.value.blue/255);g.value.hue=Math.round(m.h);g.value.sat=Math.round(m.s*100);g.value.lum=Math.round(m.l*100);g._refreshCoordinatesByHSL(g.value.hue,g.value.sat,g.value.lum);g._refreshContrast();g._refreshInputValues();g._refreshColorValue()};this._doOnChangeHSV=function(){g._controllerNodes.hsv.value=g.setColor(g._controllerNodes.hsv.value)};this._checkType=function(m){var l;if(m instanceof Array){l=g._checkType(m[0]);switch(l){case"string":return"array_string";break;case"input":case"textarea":return"array_input";break;case"object":return"array_object";break;default:return undefined}}else{if(m==undefined){return null}else{if(typeof(m)=="string"){return"string"}else{if(m.tagName&&m.tagName.toLowerCase()=="input"){return"input"}else{if(m.tagName&&m.tagName.toLowerCase()=="textarea"){return"textarea"}else{if(m.tagName){return"container"}else{if(typeof(m)=="object"){return"object"}else{return undefined}}}}}}}};this._initByObject=function(l){if(l.parent&&l.parent.tagName){g.base=l.parent}else{if(typeof(l.parent)=="string"){g.base=document.getElementById(l.parent)}else{g.base=document.createElement("div");g.base._dhx_remove=true}}if(l.color){g.conf.selectedColor=l.color}if(typeof(l.closeable)!="undefined"){this.conf.closeable=dhx4.s2b(l.closeable)}if(l.custom_colors){this._tempInitCC=function(){var o,n;this.initMemoryColors();this.conf.customColors=true;if(l.custom_colors instanceof Array){n=l.custom_colors.length;for(o=0;o<n;o++){this.setCustomColors(l.custom_colors[o])}}if(this.base.parentNode){this.showMemory()}delete this._tempInitCC}}if(l.hide){g.conf.hide=true}if(l.input){g._addNode(l.input,l.target_color,l.target_value)}var m=l.skin||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcolorpicker")||"material";g.setSkin(m);if(l.colors){g.initMemoryColors();g.conf.customColors=true}if(l.link){g._addNode(l.link)}};this.unload=function(){var o,m,n;if(this.isVisible()){this.hide()}this.destructMemory();m=this._nodes.length;for(o=0;o<m;o++){this._detachEventsFromNode(this._nodes[o]);for(n in this._nodes[o]){this._nodes[o][n]=null}delete this._nodes[o]}this._nodes=null;if(!this.base._dhx_remove){this.base.className=this.base.className.replace(/\s?dhtmlxcp_\S*/,"")}else{delete this.base._dhx_remove}if(typeof(window.addEventListener)=="function"){this._controllerNodes.colorArea.removeEventListener("mousedown",this._initMoveSelection,false);this._controllerNodes.colorArea.removeEventListener("dblclick",this._doOnSelectColor,false);this._controllerNodes.contrastArea.removeEventListener("mousedown",this._initMoveContrast,false);this._controllerNodes.button_save.removeEventListener("click",this._doOnSelectColor,false);this._controllerNodes.button_cancel.removeEventListener("click",this._doOnCancel,false);this._controllerNodes.hue.removeEventListener("change",this._doOnChangeHSL,false);this._controllerNodes.sat.removeEventListener("change",this._doOnChangeHSL,false);this._controllerNodes.lum.removeEventListener("change",this._doOnChangeHSL,false);this._controllerNodes.red.removeEventListener("change",this._doOnChangeRGB,false);this._controllerNodes.green.removeEventListener("change",this._doOnChangeRGB,false);this._controllerNodes.blue.removeEventListener("change",this._doOnChangeRGB,false);this._controllerNodes.hsv.removeEventListener("change",this._doOnChangeHSV,false)}else{this._controllerNodes.colorArea.detachEvent("onmousedown",this._initMoveSelection);this._controllerNodes.colorArea.detachEvent("ondblclick",this._doOnSelectColor);this._controllerNodes.contrastArea.detachEvent("onmousedown",this._initMoveContrast);this._controllerNodes.button_save.detachEvent("onclick",this._doOnSelectColor);this._controllerNodes.button_cancel.detachEvent("onclick",this._doOnCancel);this._controllerNodes.hue.detachEvent("onchange",this._doOnChangeHSL);this._controllerNodes.sat.detachEvent("onchange",this._doOnChangeHSL);this._controllerNodes.lum.detachEvent("onchange",this._doOnChangeHSL);this._controllerNodes.red.detachEvent("onchange",this._doOnChangeRGB);this._controllerNodes.green.detachEvent("onchange",this._doOnChangeRGB);this._controllerNodes.blue.detachEvent("onchange",this._doOnChangeRGB);this._controllerNodes.hsv.detachEvent("onchange",this._doOnChangeHSV)}if(this._controllerNodes.fr_cover){if(this._controllerNodes.fr_cover.parentNode){this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover)}delete this._controllerNodes.fr_cover}dhx4.zim.clear(this.conf.cp_id);dhx4._eventable(this,"clear");for(n in this){this[n]=null}g=null,h=null,b=null};e=this._checkType(j);switch(e){case"object":g._initByObject(j);break;case"input":case"textarea":g._initByObject({});this._addNode(j);break;case"string":h=document.getElementById(j);return new dhtmlXColorPicker(h);break;case"container":g._initByObject({parent:j});break;case null:g._initByObject({});break;case"array_string":case"array_input":g._initByObject({});a=j.length;for(c=0;c<a;c++){this._addNode(j[c])}break;case"array_object":g._initByObject({});a=j.length;for(c=0;c<a;c++){b=this._addNode(j[c].input,j[c].target_color,j[c].target_value).conf;b.customColors=(j[c].custom_colors!=undefined)?dhx4.s2b(j[c].custom_colors):b.customColors;b.selectedColor=(j[c].color!=undefined)?j[c].color:b.selectedColor}break}this.base.innerHTML="<div class='dhxcp_g_area'><div class='dhxcp_sub_area'><div class='dhxcp_g_color_area'><div class='dhxcp_color_selector'><div class='dhxcp_v_line'></div><div class='dhxcp_h_line'></div></div><div class='dhxcp_contrast_area'><div class='dhxcp_h_line'></div></div></div><div class='dhxcp_g_input_area'><div class='dhxcp_value_cont'><div class='dhxcp_value_color'></div><input type='text' class='dhxcp_value'/></div><table class='dhxcp_inputs_cont' cellpadding='0' cellspacing='0' border='0'><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelHue+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelRed+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelSat+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelGreen+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelLum+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelBlue+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr></table></div><div class='dhxcp_g_memory_area'></div><div class='dhxcp_buttons_area'><button class='dhx_button_save'>"+this.i18n[this.conf.lang].btnSelect+"</button><button class='dhx_button_cancel'>"+this.i18n[this.conf.lang].btnCancel+"</button></div></div>";"</div>";this._globalNode=this.base.firstChild;this._controllerNodes={colorArea:this._globalNode.firstChild.firstChild.firstChild,v_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[0],h_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[1],contrastArea:this._globalNode.firstChild.firstChild.childNodes[1],contrast_line:this._globalNode.firstChild.firstChild.childNodes[1].firstChild,color:this._globalNode.firstChild.childNodes[1].childNodes[0].firstChild,hsv:this._globalNode.firstChild.childNodes[1].childNodes[0].childNodes[1],hue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[1].firstChild,sat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[1].firstChild,lum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[1].firstChild,red:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[3].firstChild,green:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[3].firstChild,blue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[3].firstChild,memory_block:this._globalNode.firstChild.childNodes[2],button_save:this._globalNode.firstChild.childNodes[3].firstChild,button_cancel:this._globalNode.firstChild.childNodes[3].childNodes[1]};this._labelNodes={labelHue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].firstChild,labelSat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].firstChild,labelLum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].firstChild,labelRed:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[2],labelGreen:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[2],labelBlue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[2],btnAddColor:null,btnSelect:this._globalNode.firstChild.childNodes[3].firstChild,btnCancel:this._globalNode.firstChild.childNodes[3].childNodes[1]};if(typeof(this._tempInitCC)=="function"){this._tempInitCC()}if(typeof(window.addEventListener)=="function"){this._controllerNodes.colorArea.addEventListener("mousedown",this._initMoveSelection,false);this._controllerNodes.colorArea.addEventListener("dblclick",this._doOnSelectColor,false);this._controllerNodes.contrastArea.addEventListener("mousedown",this._initMoveContrast,false);this._controllerNodes.button_save.addEventListener("click",this._doOnSelectColor,false);this._controllerNodes.button_cancel.addEventListener("click",this._doOnCancel,false);this._controllerNodes.hue.addEventListener("change",this._doOnChangeHSL,false);this._controllerNodes.sat.addEventListener("change",this._doOnChangeHSL,false);this._controllerNodes.lum.addEventListener("change",this._doOnChangeHSL,false);this._controllerNodes.red.addEventListener("change",this._doOnChangeRGB,false);this._controllerNodes.green.addEventListener("change",this._doOnChangeRGB,false);this._controllerNodes.blue.addEventListener("change",this._doOnChangeRGB,false);this._controllerNodes.hsv.addEventListener("change",this._doOnChangeHSV,false)}else{this._controllerNodes.colorArea.attachEvent("onmousedown",this._initMoveSelection);this._controllerNodes.colorArea.attachEvent("ondblclick",this._doOnSelectColor);this._controllerNodes.contrastArea.attachEvent("onmousedown",this._initMoveContrast);this._controllerNodes.button_save.attachEvent("onclick",this._doOnSelectColor);this._controllerNodes.button_cancel.attachEvent("onclick",this._doOnCancel);this._controllerNodes.hue.attachEvent("onchange",this._doOnChangeHSL);this._controllerNodes.sat.attachEvent("onchange",this._doOnChangeHSL);this._controllerNodes.lum.attachEvent("onchange",this._doOnChangeHSL);this._controllerNodes.red.attachEvent("onchange",this._doOnChangeRGB);this._controllerNodes.green.attachEvent("onchange",this._doOnChangeRGB);this._controllerNodes.blue.attachEvent("onchange",this._doOnChangeRGB);this._controllerNodes.hsv.attachEvent("onchange",this._doOnChangeHSV)}this.setColor(this.conf.selectedColor||"#ffffff");if(this._nodes.length){for(var c=0;c<this._nodes.length;c++){this._attachEventsToNode(this._nodes[c])}}if(this.conf.hide){this.hide()}if(typeof(this._cpInitFRM)=="function"){this._cpInitFRM()}}dhtmlXColorPicker.prototype.linkTo=function(b,c,e){if(arguments.length==1){c=e=b}var a;b=b||null;e=e||null;if(typeof(c)=="string"){c=document.getElementById(c)}a=this._addNode(c,b,e);if(a){this._attachEventsToNode(a)}return a};dhtmlXColorPicker.prototype._isBaseNode=function(a){if(a==this.base){return true}if(a.parentElement==document.body){return false}else{if(!a.parentElement){return false}else{return this._isBaseNode(a.parentElement)}}};dhtmlXColorPicker.prototype._hasInput=function(c){var b,a,e=false;a=this._nodes.length;for(b=0;b<a;b++){if(this._nodes[b].valueCont==c){e=true;break}}return e};dhtmlXColorPicker.prototype._findNodesByArray=function(g){var c,a,b,e=[];a=g.length;for(c=0;c<a;c++){if(typeof(g[c])=="string"){b=document.getElementById(g[c])}else{b=g[c]}if(b){this._addNode(b)}}};dhtmlXColorPicker.prototype._addNode=function(g,j,h){var b,e,c,a;if(typeof(g)=="string"){b=document.getElementById(g)}else{b=g}if(typeof(j)=="string"){j=document.getElementById(j)}if(typeof(h)=="string"){h=document.getElementById(h)}if(!b){return null}if(dhx4.s2b(b.getAttribute("colorbox"))){e=document.createElement("div");e.style.width=b.offsetWidth+"px";e.style.height=b.offsetHeight+"px";b.style.width=b.offsetWidth-(b.offsetHeight+8)+"px";b.parentNode.insertBefore(e,b);e.style.position="relative";c=document.createElement("div");e.appendChild(b);e.appendChild(c);c.className="dhxcp_colorBox";b.className+=" dhxcp_colorInput";c.style.width=c.style.height=b.offsetHeight+"px"}a={node:b,valueColor:(j!=undefined)?j:c||b,valueCont:(h!=undefined)?h:b,conf:{customColors:(b.getAttribute("customcolors")!=null)?dhx4.s2b(b.getAttribute("customcolors")):null,selectedColor:b.getAttribute("selectedcolor")}};this._nodes.push(a);if(!this.activeNode){this.activeNode=a}return a};dhtmlXColorPicker.prototype.getNode=function(c){var a=null,b=null;if(typeof(c)=="string"){a=document.getElementById(c)}else{a=c}if(a.tagName!=undefined){b=this._getNodeByElement(a)}return b};dhtmlXColorPicker.prototype._getNodeByElement=function(c){var e=null,b,a;a=this._nodes.length;for(b=0;b<a;b++){if(this._nodes[b].node==c){e=this._nodes[b]}}return e};dhtmlXColorPicker.prototype._getNodeByValueCont=function(c){var e=null,b,a;a=this._nodes.length;for(b=0;b<a;b++){if(this._nodes[b].valueCont&&this._nodes[b].valueCont==c){e=this._nodes[b]}}return e};dhtmlXColorPicker.prototype.initMemoryColors=function(){var b=this;this._controllerNodes.memory_block.innerHTML="<div class='dhxcp_memory_button_cont'><button class='dhxcp_save_to_memory'><div class='dhxcp_label_bm'>"+this.i18n[this.conf.lang].btnAddColor+"</div></button></div><div class='dhxcp_memory_els_cont'><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a></div>";this.memory=new this.Memory(this._controllerNodes.memory_block.childNodes[1]);this.memory.onSelect=this._onSelectMemoryEl;this.memory.onSave=function(e){var c=b.colorAIP.rgb2hex({r:e.red,g:e.green,b:e.blue});b.callEvent("onSaveColor",[c])};var a=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=this._controllerNodes.memory_block.childNodes[0].firstChild.firstChild;if(typeof(window.addEventListener)=="function"){a.addEventListener("click",this.saveColor,false)}else{a.attachEvent("onclick",this.saveColor)}};dhtmlXColorPicker.prototype._refreshCoordinatesByHSL=function(j,g,b){var a,e,c;a=Math.round((this.configColorArea.maxX-this.configColorArea.minX)*j/359)+this.configColorArea.minX;e=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-b)/100)+this.configColorArea.minY;c=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-g)/100)+this.configColorArea.minY;this._setColorAreaXY(a,e);this._setContrastY(c)};dhtmlXColorPicker.prototype._parseColor=function(c){if(c instanceof Array){var b={r:parseInt(c[0]),g:parseInt(c[1]),b:parseInt(c[2])}}else{if(typeof(c)=="string"){c=c.replace(/\s/g,"");if(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i.test(c)){var a=c.match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i);var b={r:parseInt(a[1]),g:parseInt(a[2]),b:parseInt(a[3])}}else{var b=this.colorAIP.hex2rgb(c)}}}return b};dhtmlXColorPicker.prototype.setColor=function(h){var b=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue});var c=this._parseColor(h);var g=(c instanceof Object);g=g&&(0<=c.r&&c.r<=255);g=g&&(0<=c.g&&c.g<=255);g=g&&(0<=c.b&&c.b<=255);if(!g){return b}var e=this.colorAIP.rgb2hex({r:c.r,g:c.g,b:c.b});if(e==b){return b}this.value.red=c.r;this.value.green=c.g;this.value.blue=c.b;var a=this.colorAIP.rgb2hsl(c.r/255,c.g/255,c.b/255);this.value.hue=Math.round(a.h);this.value.sat=Math.round(a.s*100);this.value.lum=Math.round(a.l*100);this._refreshCoordinatesByHSL(this.value.hue,this.value.sat,this.value.lum);this._refreshContrast();this._refreshInputValues();this._refreshColorValue();return e};dhtmlXColorPicker.prototype.getSelectedColor=function(){return[this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue}),[this.value.red,this.value.green,this.value.blue],[this.value.hue,this.value.sat,this.value.lum]]};dhtmlXColorPicker.prototype._attachEventsToNode=function(a){if(typeof(window.addEventListener)=="function"){a.node.addEventListener("click",this._doOnClickByNode,false)}else{a.node.attachEvent("onclick",this._doOnClickByNode)}if(a.valueCont&&a.valueCont.tagName.toLowerCase()=="input"){if(typeof(window.addEventListener)=="function"){a.valueCont.addEventListener("focus",this._doOnFocusByInput,false);a.valueCont.addEventListener("blur",this._doOnBlurByInput,false)}else{a.valueCont.attachEvent("onfocus",this._doOnFocusByInput);a.valueCont.attachEvent("onblur",this._doOnBlurByInput)}}};dhtmlXColorPicker.prototype._detachEventsFromNode=function(a){if(typeof(window.addEventListener)=="function"){a.node.removeEventListener("click",this._doOnClickByNode,false)}else{a.node.detachEvent("onclick",this._doOnClickByNode)}if(a.valueCont&&a.valueCont.tagName.toLowerCase()=="input"){if(typeof(window.addEventListener)=="function"){a.valueCont.removeEventListener("focus",this._doOnFocusByInput,false);a.valueCont.removeEventListener("blur",this._doOnBlurByInput,false)}else{a.valueCont.detachEvent("onfocus",this._doOnFocusByInput);a.valueCont.detachEvent("onblur",this._doOnBlurByInput)}}};dhtmlXColorPicker.prototype.show=function(b){var a=false;if(b!=undefined){this.activeNode=this.getNode(b)||this.activeNode}if(this.activeNode&&this.activeNode.valueCont&&this.activeNode.valueCont.value){this.setColor(this.activeNode.valueCont.value)}if(this.activeNode){a=(this.activeNode.conf.customColors!=null?this.activeNode.conf.customColors:this.conf.customColors);this.setColor(this.activeNode.conf.selectedColor)}else{a=this.conf.customColors}if(a){this.showMemory()}else{this.hideMemory()}if(this.base._dhx_remove){this.base.firstChild.style.zIndex=dhx4.zim.reserve(this.conf.cp_id);this.base.style.visibility="hidden";if(document.body.firstChild){document.body.insertBefore(this.base,document.body.firstChild)}else{document.body.appendChild(this.base)}this._refreshPosition();this.base.style.visibility="visible";if(typeof(window.addEventListener)=="function"){document.body.addEventListener("mousedown",this._doOnClickByBody,false)}else{document.body.attachEvent("onmousedown",this._doOnClickByBody)}}else{this.base.appendChild(this._globalNode)}if(this._controllerNodes.fr_cover){this.base.insertBefore(this._controllerNodes.fr_cover,this._globalNode)}this.callEvent("onShow",[((this.activeNode)?this.activeNode.node:null)])};dhtmlXColorPicker.prototype.setPosition=function(b,g){var e=null;var a=parseInt(b);var c=parseInt(g);if(isNaN(a)){e=({right:"right",bottom:"bottom"}[b.toLowerCase()]?b:null)}if(this.base._dhx_remove){if(e==null){}else{this.conf.position=e;this._refreshPosition(e)}}else{if(isNaN(a)||isNaN(c)){}else{this._globalNode.style.left=a+"px";this._globalNode.style.top=c+"px";if(this._controllerNodes.fr_cover){this._controllerNodes.fr_cover.style.left=this._globalNode.style.left;this._controllerNodes.fr_cover.style.top=this._globalNode.style.top}}}};dhtmlXColorPicker.prototype._initListenerInput=function(){var a=this;this._inputListenerId=this._inputListenerId||setInterval(function(){a._refreshValueByInput()},70)};dhtmlXColorPicker.prototype._removeListenerInput=function(){if(this._inputListenerId){clearInterval(this._inputListenerId);this._inputListenerId=null}};dhtmlXColorPicker.prototype._refreshValueByInput=function(){var b=this.activeNode.valueCont.value,a=this.getSelectedColor()[0];if(this._inputListenerId){if(/^#[\da-f]{6}$/i.test(b)&&b!=a){this.setColor(b);this.callEvent("onSelect",[b,this.activeNode.node])}}};dhtmlXColorPicker.prototype._refreshPosition=function(b){if(this.activeNode==null){return}var l=dhx4.absTop(this.activeNode.node);var a=dhx4.absLeft(this.activeNode.node);var e=dhx4.screenDim();var c=this._globalNode.offsetWidth;var g=this._globalNode.offsetHeight;var j=0;b=b||this.conf.position;switch(b){case"bottom":var j=l+this.activeNode.node.offsetHeight+this.conf.indent;var h=a;if(h+c>e.left+e.right){h=a+this.activeNode.node.offsetWidth-c}if(h<e.left){h=a}if(j+g>e.top+e.bottom){j=l-g-this.conf.indent}if(j-e.top<0){j=e.top+this.conf.indent}this._globalNode.style.top=j+"px";this._globalNode.style.left=h+"px";break;default:var h=a+this.activeNode.node.offsetWidth+this.conf.indent;j=l;if(b=="right"){if(h+c>e.left+e.right){h=a-c-this.conf.indent}if(h<e.left){h=a+this.activeNode.node.offsetWidth+this.conf.indent}}if(e.bottom-(j+g)<=0){j=l+this.activeNode.node.offsetHeight-g}if(j-e.top<0){j=e.top+this.conf.indent}this._globalNode.style.left=h+"px";this._globalNode.style.top=j+"px"}if(this._controllerNodes.fr_cover){this._controllerNodes.fr_cover.style.left=this._globalNode.style.left;this._controllerNodes.fr_cover.style.top=this._globalNode.style.top}};dhtmlXColorPicker.prototype.isVisible=function(){var a=false;if(this.base._dhx_remove){a=this.base.parentNode==document.body}else{a=this._globalNode.parentNode==this.base}return a};dhtmlXColorPicker.prototype.hide=function(){if(this.base._dhx_remove){if(this.base.parentNode){this.base.parentNode.removeChild(this.base);dhx4.zim.clear(this.conf.cp_id);if(typeof(window.addEventListener)=="function"){document.body.removeEventListener("mousedown",this._doOnClickByBody,false)}else{document.body.detachEvent("onmousedown",this._doOnClickByBody)}}}else{if(this.isVisible()==false){return}this.base.removeChild(this._globalNode)}if(this._controllerNodes.fr_cover&&this._controllerNodes.fr_cover.parentNode){this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover)}if(this.callEvent!=undefined){this.callEvent("onHide",[((this.activeNode)?this.activeNode.node:null)])}};dhtmlXColorPicker.prototype.configColorArea={minX:1,maxX:209,minY:1,maxY:119};dhtmlXColorPicker.prototype._skinCollection={dhx_skyblue:true,dhx_web:true,dhx_terrace:true,material:true};dhtmlXColorPicker.prototype.i18n={en:{labelHue:"Hue",labelSat:"Sat",labelLum:"Lum",labelRed:"Red",labelGreen:"Green",labelBlue:"Blue",btnAddColor:"Save the color",btnSelect:"Select",btnCancel:"Cancel"}};dhtmlXColorPicker.prototype.loadUserLanguage=function(a){if(typeof(this._mergeLangModules)=="function"){this._mergeLangModules()}this.conf.lang=a;this._refreshLanguage()};dhtmlXColorPicker.prototype._refreshLanguage=function(){var a,b=this.i18n[this.conf.lang];for(a in b){if(this._labelNodes[a]){this._labelNodes[a].innerHTML=b[a]}}};dhtmlXColorPicker.prototype._setColorAreaXY=function(a,c){var b=this.configColorArea;a=parseInt(a);if(b.minX>a){this.conf.x=b.minX}else{if(a>b.maxX){this.conf.x=b.maxX}else{if(!isNaN(a)){this.conf.x=a}}}c=parseInt(c);if(b.minY>c){this.conf.y=b.minY}else{if(c>b.maxY){this.conf.y=b.maxY}else{if(!isNaN(c)){this.conf.y=c}}}this._refreshLines()};dhtmlXColorPicker.prototype._setColorByXYC=function(b){b=b||false;this.value.hue=Math.round((359*(this.conf.x-this.configColorArea.minX))/(this.configColorArea.maxX-this.configColorArea.minX));this.value.lum=Math.round(100-(100*(this.conf.y-this.configColorArea.minY))/(this.configColorArea.maxY-this.configColorArea.minY));this.value.sat=Math.round(100-(100*(this.conf.c-this.configColorArea.minY))/(this.configColorArea.maxY-this.configColorArea.minY));var a=this.colorAIP.hsl2rgb(this.value.hue,this.value.sat/100,this.value.lum/100);this.value.red=Math.round(255*a.r);this.value.green=Math.round(255*a.g);this.value.blue=Math.round(255*a.b);if(!b){this._refreshContrast()}this._refreshInputValues();this._refreshColorValue()};dhtmlXColorPicker.prototype._setContrastY=function(b){var a=this.configColorArea;b=parseInt(b);if(!isNaN(b)){this.conf.c=Math.min(Math.max(a.minY,b),a.maxY)}this._refreshContrastLine()};dhtmlXColorPicker.prototype._refreshInputValues=function(){this._controllerNodes.hue.value=this.value.hue;this._controllerNodes.sat.value=this.value.sat;this._controllerNodes.lum.value=this.value.lum;this._controllerNodes.red.value=this.value.red;this._controllerNodes.green.value=this.value.green;this._controllerNodes.blue.value=this.value.blue};dhtmlXColorPicker.prototype._refreshColorValue=function(){this._controllerNodes.color.style.backgroundColor="rgb("+[this.value.red,this.value.green,this.value.blue].join(", ")+")";var a=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue});this._controllerNodes.hsv.value=a;this.callEvent("onChange",[a])};dhtmlXColorPicker.prototype._refreshContrast=function(){var e=this.colorAIP.hsl2rgb(this.value.hue,0,this.value.lum/100);var g=this.colorAIP.hsl2rgb(this.value.hue,1,this.value.lum/100);var c=this._checkIeVersion();if(c&&c<=9){var j=this._controllerNodes.contrastArea.firstChild;if(j==this._controllerNodes.contrast_line){j=document.createElement("div");j.className+="dhxcp_ie_gradient";this._controllerNodes.contrastArea.appendChild(j);this._controllerNodes.contrastArea.appendChild(this._controllerNodes.contrast_line)}var b=this.colorAIP.rgb2hex({r:Math.round(255*e.r),g:Math.round(255*e.g),b:Math.round(255*e.b)});var a=this.colorAIP.rgb2hex({r:Math.round(255*g.r),g:Math.round(255*g.g),b:Math.round(255*g.b)});j.style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+a+"', endColorstr='"+b+"', GradientType=0)"}else{e=[Math.round(255*e.r),Math.round(255*e.g),Math.round(255*e.b)];g=[Math.round(255*g.r),Math.round(255*g.g),Math.round(255*g.b)];var h="linear-gradient(rgb("+g.join(",")+"), rgb("+e.join(",")+"))";if(window.dhx4.isKHTML==true&&navigator.userAgent.match(/Windows/gi)!=null){h="-webkit-"+h}this._controllerNodes.contrastArea.style.backgroundImage=h}};dhtmlXColorPicker.prototype._refreshLines=function(){this._controllerNodes.v_line.style.left=this.conf.x+"px";this._controllerNodes.h_line.style.top=this.conf.y+"px"};dhtmlXColorPicker.prototype._refreshContrastLine=function(){this._controllerNodes.contrast_line.style.top=this.conf.c+"px"};dhtmlXColorPicker.prototype._getOffsetPosition=function(g,a){var b={x:NaN,y:NaN},c=g.target||g.srcElement;if(c==a){b.x=(g.offsetX!=undefined)?g.offsetX:g.layerX;b.y=(g.offsetY!=undefined)?g.offsetY:g.layerY}else{if(c==this._controllerNodes.v_line){b.y=(g.offsetY!=undefined)?g.offsetY:g.layerY}else{b.x=(g.offsetX!=undefined)?g.offsetX:g.layerX}}return b};dhtmlXColorPicker.prototype.colorAIP={hex2rgb:function(b){var a=b.match(/^(#)([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);if(a!=null){return{r:parseInt("0x"+a[2]),g:parseInt("0x"+a[3]),b:parseInt("0x"+a[4])}}else{return null}},rgb2hex:function(h){var e=parseInt(h.r),c=parseInt(h.g),a=parseInt(h.b);e=e||0,c=c||0,a=a||0;return"#"+((e)?((e<16)?"0"+e.toString(16):e.toString(16)):"00")+((c)?((c<16)?"0"+c.toString(16):c.toString(16)):"00")+((a)?((a<16)?"0"+a.toString(16):a.toString(16)):"00")},rgb2hsl:function(n,m,e){var l,j,c;var a=Math.max(n,m,e),h=Math.min(n,m,e);c=0.5*(a+h);if(a==h){l=0}else{if(a==n){l=60*(m-e)/(a-h);if(m<e){l+=360}}else{if(a==m){l=60*(e-n)/(a-h)+120}else{l=60*(n-m)/(a-h)+240}}}if(c==0||a==h){j=0}else{if(c<=0.5){j=0.5*(a-h)/c}else{j=0.5*(a-h)/(1-c)}}return{h:l,s:j,l:c}},hsl2rgb:function(m,c,j){var g,h,l;var b=[],a=[];if(j<=0.5){g=j*(1+c)}else{g=j+c-(j*c)}h=2*j-g;l=m/360;b.push(l+1/3);b.push(l);b.push(l-1/3);for(var e=0;e<3;e++){if(b[e]<0){b[e]+=1}else{if(b[e]>1){b[e]-=1}}if(b[e]<1/6){a.push(h+(g-h)*6*b[e])}else{if(b[e]<0.5){a.push(g)}else{if(b[e]<2/3){a.push(h+(g-h)*(2/3-b[e])*6)}else{a.push(h)}}}}return{r:a[0],g:a[1],b:a[2]}}};dhtmlXColorPicker.prototype._checkIeVersion=function(){var a;var b=navigator.userAgent.match(/(MSIE)\s(\d\.\d)/i);a=(b&&b[2])?parseInt(b[2]):null;return a};dhtmlXColorPicker.prototype.setCustomColors=function(){if(this.memory==null){this.initMemoryColors();this.conf.customColors=true}var e,c,h,b,g,a;c=arguments.length;for(e=0;e<c;e++){if(arguments[e] instanceof Array){h=this._rgb2value(arguments[e][0],arguments[e][1],arguments[e][2]);this.memory.setValue(h,null,false);continue}else{if(typeof(arguments[e])=="string"){b=arguments[e].match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i);if(b instanceof Array){h=this._rgb2value(b[1],b[2],b[3]);this.memory.setValue(h,null,false);continue}b=arguments[e].match(/(#[\da-f]{6})/ig);if(b instanceof Array){a=b.length;for(g=0;g<a;g++){h=this._hex2value(b[g]);this.memory.setValue(h,null,false)}}}}}};dhtmlXColorPicker.prototype.getCustomColors=function(){var b=[];if(this.memory!=null&&this.conf.customColors==true){for(var c=0;c<this.memory.controllers.length;c++){var a=this.memory.controllers[c].value;b.push(this.colorAIP.rgb2hex({r:a.red,g:a.green,b:a.blue}))}}return b};dhtmlXColorPicker.prototype._rgb2value=function(h,e,a){var c=this.colorAIP.rgb2hsl(h/255,e/255,a/255);return{red:h,green:e,blue:a,hue:Math.round(c.h),sat:Math.round(c.s*100),lum:Math.round(c.l*100)}};dhtmlXColorPicker.prototype._hex2value=function(c){var b,a;b=this.colorAIP.hex2rgb(c);a=this.colorAIP.rgb2hsl(b.r/255,b.g/255,b.b/255);return{red:b.r,green:b.g,blue:b.b,hue:Math.round(a.h),sat:Math.round(a.s*100),lum:Math.round(a.l*100)}};dhtmlXColorPicker.prototype.showMemory=function(){if(this.memory==null){this.initMemoryColors()}if(!this._globalNode.className.match(/dhxcp_add_memory/)){this._globalNode.className+=" dhxcp_add_memory"}this.conf.customColors=true};dhtmlXColorPicker.prototype.hideMemory=function(){if(this.memory!=null){this._globalNode.className=this._globalNode.className.replace(/\sdhxcp_add_memory/,"")}this.conf.customColors=false};dhtmlXColorPicker.prototype.setSkin=function(g){if(this._skinCollection[g]!=true){return}var e="dhtmlxcp_"+(this.skin||"dummy");this.base.className=this.base.className.replace(new RegExp(e),"");this.base.className+=" dhtmlxcp_"+g;this.skin=g;if(this.skin=="material"){var c={labelHue:"H",labelSat:"S",labelLum:"L",labelRed:"R",labelGreen:"G",labelBlue:"B"};for(var b in c){this.i18n.en[b]=c[b]}}if(this.base.className.match(/dhxcp_shadow/)==null&&!(dhx4.isIE6||dhx4.isIE7||dhx4.isIE8)){this.base.className+=" dhxcp_shadow"}};dhtmlXColorPicker.prototype.hideOnSelect=function(a){a=dhx4.s2b(a);this.conf.hideOnSelect=a};dhtmlXColorPicker.prototype._indexOf=function(a,e){var c,b,g=-1;b=a.length;for(c=b;c>=0;c--){if(a[c]==e){g=c;break}}return g};dhtmlXColorPicker.prototype.destructMemory=function(){if(this.memory==null){return}this.hideMemory();var a=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=null;if(typeof(window.addEventListener)=="function"){a.removeEventListener("click",this.saveColor,false)}else{a.detachEvent("onclick",this.saveColor)}this.memory.remove();this._controllerNodes.memory_block.innerHTML="";this.memory=null};dhtmlXColorPicker.prototype.Memory=function(c){var b=this,a=null,e={red:255,blue:255,green:255,hue:0,sat:0,lum:100};this.select=function(){var h=(this!=window)?this:event.srcElement;var g=g||h.dhxpc_memory;if(a!=null){b.unSelect()}a=g;g.domElement.className+=" dhxcp_memory_el_select";if(typeof(b.onSelect)=="function"){b.onSelect(g)}};this.onSelect=null;this.onSave=null;this._createMemoryController=function(g){var h={domElement:g,value:dhx4._copyObj(e)};g.dhxpc_memory=h;if(typeof(window.addEventListener)=="function"){g.addEventListener("click",b.select,false)}else{g.attachEvent("onclick",b.select)}return h};this._findMemoryControllers=function(n){var j=n.getElementsByTagName("a"),h,g,m=[];g=j.length;for(h=0;h<g;h++){m.push(this._createMemoryController(j[h]))}return m};this.controllers=this._findMemoryControllers(c);this.unSelect=function(){if(a){a.domElement.className=a.domElement.className.replace(/\s.*$/i,"")}a=null};this.setActiveNext=function(){var h=null,g;if(a==null){a=this.controllers[0]}else{h=this.getIndex(a);g=this.controllers.length;this.unSelect();a=(h+1<g)?this.controllers[h+1]:this.controllers[0]}a.domElement.className+=" dhxcp_memory_el_next";return a};this.setValue=function(h,g,j){a=g||a;if(a==null){a=this.controllers[0]}a.value.red=h.red;a.value.blue=h.blue;a.value.green=h.green;a.value.hue=h.hue;a.value.sat=h.sat;a.value.lum=h.lum;a.domElement.style.backgroundColor="rgb("+[h.red,h.green,h.blue].join(", ")+")";this.setActiveNext();if((j!=false)&&(typeof(this.onSave)=="function")){this.onSave(h)}};this.clean=function(){var g=this.controllers.length,j;for(var h=0;h<g;h++){j=this.controllers[h];j.value=dhx4._copyObj(e);j.domElement.style.backgroundColor="rgb("+[e.red,e.green,e.blue].join(", ")+")"}this.unSelect();a=this.controllers[0]};this.getIndex=function(j){var h,g,m=-1;g=this.controllers.length;for(h=0;h<g;h++){if(this.controllers[h]==j){m=h;break}}return m};this.remove=function(){var h,g;g=this.controllers.length;for(h=0;h<g;h++){if(typeof(window.addEventListener)=="function"){this.controllers[h].domElement.removeEventListener("click",this.select,false)}else{this.controllers[h].domElement.detachEvent("onclick",this.select)}delete this.controllers[h].domElement.dhxpc_memory}delete this.onSelect;delete this.controllers;delete this.onSave}};if(window.dhx4.isIE6){dhtmlXColorPicker.prototype._cpInitFRM=function(){var a;if(!this._controllerNodes.fr_cover){a=document.createElement("IFRAME");a.className="dhxcp_frm";a.border=0;a.frameBorder=0;this._controllerNodes.fr_cover=a}if(!this.base._dhx_remove){this.base.insertBefore(a,this._globalNode)}}}function dhtmlXPopup(c){var e=this;this.conf=c||{};c=null;this.mode=(this.conf.mode||"bottom");this.conf.zi=window.dhx4.newId();this.conf.context=(this.conf.context==null?true:window.dhx4.s2b(this.conf.context));this.conf.IE6_display_fix=(this.conf.IE6_display_fix==null?false:window.dhx4.s2b(this.conf.IE6_display_fix));this.conf.last_p_click=this.conf.last_body_click=null;this.p=document.createElement("DIV");this.p.style.display="none";this.p.innerHTML="<div class='dhx_popup_area"+(window.dhx4.isIE?" dhx_popup_area_ie":"")+"'><table cellspacing='0' cellpadding='0' border='0' class='dhx_popup_table'><tbody></tbody></table></div><div class='dhx_popup_arrow dhx_popup_arrow_"+this.mode+"'></div>";document.body.appendChild(this.p);this.p.oncontextmenu=function(a){if(e.conf.context==false){a=a||event;a.returnValue=false;return false}};this.skinParams={dhx_terrace:{t0:19,t1:9,t2:19,t3:9},dhx_skyblue:{t0:12,t1:9,t2:12,t3:9},dhx_web:{t0:12,t1:9,t2:12,t3:9},material:{t0:19,t1:9,t2:19,t3:9}};this.p.ontouchstart=this.p.onclick=function(h){h=h||event;var g=(e.conf.last_p_click!=null&&e.conf.last_p_click!=h.type);e.conf.last_p_click=h.type;if(g==true){return}e._clearClick=true;if(e._nodeObj!=null){e.callEvent("onContentClick",[]);return true}var a=(h.target||h.srcElement);var j=null;while(a!=e.p&&a!=null){if(typeof(a._idd)!="undefined"&&!a._isSeparator){j=a._idd;a=null}else{a=a.parentNode}}a=null;if(j!=null){e.callEvent("onClick",[j]);if(e!=null&&e.isVisible!=null&&e.isVisible()&&e.callEvent("onBeforeHide",["select",h,j])===true){h.cancelBubble=true;e.hide()}}};this.separator="DHXSEP_"+window.dhx4.newId();this.tpl=[];this._setTemplate=function(a){this.tpl=a.split(",")};this.show=function(g){var a=null;if(arguments.length==1){if(!g){g=this.conf.id[0]}else{if(!this._idExists(g)){return}}if(this.conf.toolbar){a=this.conf.toolbar._getItemDim(g)}if(this.conf.ribbon){a=this.conf.ribbon._getItemDim(g)}if(this.conf.form){a=this.conf.form._getItemDim(g)}}else{if(arguments.length==4){this._clearClick=true;a={left:arguments[0],top:arguments[1],width:arguments[2],height:arguments[3]};g=null}}if(!a){return}this.p.style.visibility="hidden";this.p.style.display="";this._setPos(a);this.p.style.zIndex=window.dhx4.zim.reserve(this.conf.zi);this.p.style.visibility="visible";this._lastId=g;this.callEvent("onShow",[g])};this._setPos=function(F,l){var u=F.left;var r=F.top;var z=F.width;var J=F.height;this._posData={left:u,top:r,width:z,height:J};var L=window.dhx4.screenDim();var D=l||this.mode;if(typeof(l)=="undefined"){l=false}var N={top:(r-this.p.offsetHeight)-L.top,bottom:L.bottom-(r+J+this.p.offsetHeight),left:u-this.p.offsetWidth-L.left,right:L.right-(u+z+this.p.offsetWidth)};if(!l&&N[D]<0){var H=this._getAvailPos(D,N);if(H!==false){this._setPos(F,H);return}}if(D=="top"||D=="bottom"){var A=this.skinParams[this.conf.skin].t2;var v=this.skinParams[this.conf.skin].t3;var o=Math.round(this.p.offsetWidth/2);var a=Math.round(this.p.lastChild.offsetWidth/2);if(u<L.left){var K=Math.min(u+z,L.left);z=u+z-K;u=K}if(u+z>L.right){z=L.right-u}var s=Math.round(u+z/2);var j=s-o;var I=s-A-a;var n=s+a+A-this.p.offsetWidth;if(j<L.left-v){j=Math.min(L.left-v,I)}else{if(j+this.p.offsetWidth>L.right+v){j=Math.max(n,L.right+v-this.p.offsetWidth)}}this.p.style.left=j+"px";this.p.style.top=(D=="top"?r-this.p.offsetHeight:r+J)+"px";s=s-j-a;this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+D;this.p.lastChild.style.top=(D=="top"?this.p.offsetHeight-this.p.lastChild.offsetHeight:0)+"px";this.p.lastChild.style.left=s+"px"}if(D=="left"||D=="right"){var A=this.skinParams[this.conf.skin].t0;var v=this.skinParams[this.conf.skin].t1;var m=Math.round(this.p.offsetHeight/2);var P=Math.round(this.p.lastChild.offsetHeight/2);if(r<L.top){var g=Math.min(r+J,L.top);J=r+J-g;r=g}if(r+J>L.bottom){J=L.bottom-r}var s=Math.round(r+J/2);var E=s-m;var O=s-A-P;var M=s+P+A-this.p.offsetHeight;if(E<L.top-v){E=Math.min(L.top-v,O)}else{if(E+this.p.offsetHeight>L.bottom+v){E=Math.max(M,L.bottom+v-this.p.offsetHeight)}}this.p.style.left=(D=="left"?u-this.p.offsetWidth:u+z)+"px";this.p.style.top=E+"px";s=s-E-P;this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+D;this.p.lastChild.style.left=(D=="left"?this.p.offsetWidth-this.p.lastChild.offsetWidth:0)+"px";this.p.lastChild.style.top=s+"px"}if(this._IEDisp&&this._nodeId!=null){var C=document.getElementById(this._nodeId);if(this.conf.IE6_display_fix==true){C.style.visibility="hidden"}window.setTimeout(function(){C.style.visibility="visible";C=null},1)}};this._getAvailPos=function(n,m){var h={top:["bottom","right","left"],bottom:["top","right","left"],left:["right","bottom","top"],right:["left","bottom","top"]};var j=null;for(var l=0;l<h[n].length;l++){if(j==null&&m[h[n][l]]>0){j=h[n][l]}}if(j==null){j="bottom";for(var g in m){if(m[g]>m[j]){j=g}}}if(j==n){return false}return j};this._repaint=function(){if(this.isVisible()){this._setPos(this._posData)}};this.clear=function(){if(this._nodeObj){if(window.dhx4.isIE&&typeof(window.dhtmlXLayoutObject)=="function"&&this._nodeObj instanceof window.dhtmlXLayoutObject){this.p.onmousedown=null}if(this._nodeObj.unload){this._nodeObj.unload()}else{if(this._nodeObj.destruct){this._nodeObj.destruct()}}this._nodeObj=this._nodeId=null;if(this._nodeObjEv!=null){for(var g=0;g<this._nodeObjEv.length;g++){this.detachEvent(this._nodeObjEv[g])}this._nodeObjEv=null}}if(this._IEHoverInited){this._IEHoverClear()}var a=this.p.firstChild.firstChild.firstChild;while(a.childNodes.length>0){a.removeChild(a.lastChild)}a=null;this.itemData={}};this.hide=function(){if(this.p.style.display!="none"){this.p.style.display="none";window.dhx4.zim.clear(this.conf.zi);var a=this._lastId;this._lastId=null;this.callEvent("onHide",[a]);this.conf.last_p_click=this.conf.last_body_click=null}};this.isVisible=function(){return(this.p.style.display=="")};this.itemData={};this.getItemData=function(a){if(!a){return this.itemData}if(this.itemData[a]){return this.itemData[a]}return{}};this.setSkin=function(a){this.conf.skin=a;this.p.className="dhx_popup_"+this.conf.skin;if(this._nodeObj!=null&&typeof(this._nodeObj.setSkin)=="function"){this._nodeObj.setSkin(this.conf.skin)}this._repaint()};this.attachList=function(h,n){this._setTemplate(h);this.clear();var j=this.p.firstChild.firstChild.firstChild;for(var m=0;m<n.length;m++){var l=document.createElement("TR");if(n[m]!=this.separator){if(typeof(n[m].id)=="undefined"||n[m].id==null){l._idd=window.dhx4.newId();while(this.itemData[l._idd]!=null){l._idd=window.dhx4.newId()}}else{l._idd=n[m].id}this.itemData[l._idd]=n[m]}j.appendChild(l);if(n[m]==this.separator){l.className="dhx_popup_sep";l._isSeparator=true;var o=document.createElement("TD");o.className="dhx_popup_sep";o.colSpan=this.tpl.length;o.innerHTML="<div class='dhx_popup_sep'>&nbsp;</div>";l.appendChild(o);o=null}else{for(var a=0;a<this.tpl.length;a++){var g="dhx_popup_td";if(this._IEFirstLast&&(this.tpl.length==1||a==0||a==this.tpl.length-1)){if(this.tpl.length==1){g+=" dhx_popup_td_single"}else{g+=(a==0?" dhx_popup_td_first":" dhx_popup_td_last")}}var o=document.createElement("TD");o.className=g;o.innerHTML=n[m][this.tpl[a]]||"&nbsp;";l.appendChild(o);o=null}if(this._IEHover){l._IEHover=true;if(!this._IEHoverInited){this._IEHoverInit()}}}l=null}j=null;this._repaint()};this._attachNode=function(j,h){this.clear();this._nodeId="dhxpopup_node_"+window.dhx4.newId();var a=this.p.firstChild.firstChild.firstChild;var g=document.createElement("TR");g.className="dhxnode";a.appendChild(g);var l=document.createElement("TD");l.className="dhx_popup_td";l.innerHTML="<div id='"+this._nodeId+"' style='position:relative;'></div>";if(h.width){l.firstChild.style.width=h.width+"px"}if(h.height){l.firstChild.style.height=h.height+"px"}g.appendChild(l);l=g=a=null;if(typeof(this["_attach_init_"+j])=="function"){this["_attach_init_"+j](h);this._enableIEVFix()}this._repaint();return this._nodeObj};this.unload=function(){if(typeof(window.addEventListener)=="function"){window.removeEventListener("touchstart",this._doOnClick,false);window.removeEventListener("click",this._doOnClick,false);window.removeEventListener("keyup",this._doOnKeyUp,false);window.removeEventListener("unload",this._doOnUnload,false)}else{document.body.detachEvent("onclick",this._doOnClick,false);document.body.detachEvent("onkeyup",this._doOnKeyUp,false);document.body.detachEvent("onunload",this._doOnUnload,false)}window.dhx4.detachEvent(this.conf.ev_grid_click);this.clear();if(this.conf.toolbarEvent!=null&&this.conf.toolbar!=null){if(this.conf.toolbar.detachEvent!=null){this.conf.toolbar.detachEvent(this.conf.toolbarEvent)}else{this.conf.toolbar._getItemDim=null}}if(this.conf.ribbonEvent!=null&&this.conf.ribbon!=null){if(this.conf.ribbon.detachEvent!=null){this.conf.ribbon.detachEvent(this.conf.ribbonEvent)}else{this.conf.ribbon._getItemDim=null}}if(this.conf.slider!=null){for(var h=0;h<this.conf.slider_events.length;h++){this.conf.slider.detachEvent(this.conf.slider_events[h])}this.conf.slider_events=null;this._sliderShow=this._sliderHide=null;this.conf.slider=null}window.dhx4._eventable(this,"clear");this.p.onclick=this.p.ontouchstart=this.p.oncontextmenu=null;this.p.parentNode.removeChild(this.p);this.p=null;for(var g in this.conf){this.conf[g]=null}for(var g in this){this[g]=null}e=null};window.dhx4._eventable(this);this._doOnClick=function(n){n=n||event;var a=(e.conf.last_body_click!=null&&e.conf.last_body_click!=n.type);e.conf.last_body_click=n.type;if(a==true){return}if(e._clearClick==true){e._clearClick=false;return}if(e.conf.form!=null){var h;var o=(n.target||n.srcElement);if((o.tagName||"").toLowerCase()=="option"){o=o.parentNode}if(o.className!=null&&o.className.search("dhxform")>=0){if(o.parentNode!=null&&o.parentNode.parentNode!=null&&o.parentNode.parentNode._idd!=null){h=o.parentNode.parentNode._idd;if(o.parentNode.parentNode._type=="ra"){h=[o.parentNode.parentNode._group,o.parentNode.parentNode._value]}}}else{var l=true;var m=false;while(l&&!m){var j=(o.className||"").toLowerCase();if(j.length>0){m=(j=="dhxform_btn"||j.search(/dhxeditor_inside/gi)>=0||j=="dhxcombo_input"||j.search(/dhxcombolist/gi)>=0)}o=o.parentNode;l=(o!=null)}if(m){return}}o=null;if(h!=null&&e._idExists(h)){return}}if(typeof(window.dhtmlXForm)=="function"&&e._nodeObj instanceof window.dhtmlXForm){var s={};var j=0;var g=e._nodeObj;g.forEachItem(function(r){if(g.getItemType(r)=="combo"){s[g.getCombo(r).list._listId]=true;j++}});g=null;if(j>0){var o=(n.target||n.srcElement);var l=true;var m=false;while(l==true&&m!=true){var j=(o.className||"").toLowerCase();if(j.length>0&&j.search(/^dhxcombolist/gi)>=0&&o._listId!=null&&s[o._listId]==true){m=true;o=null}else{o=o.parentNode;l=(o!=null)}}if(m==true){return}}}if(e.isVisible()&&e.callEvent("onBeforeHide",["click",n])===true){e.hide()}};this._doOnKeyUp=function(a){a=a||event;if(a.keyCode==27){if(e.isVisible()&&e.callEvent("onBeforeHide",["esc",a])===true){e.hide()}}};this._doOnUnload=function(){e.unload()};if(typeof(window.addEventListener)=="function"){window.addEventListener("touchstart",this._doOnClick,false);window.addEventListener("click",this._doOnClick,false);window.addEventListener("keyup",this._doOnKeyUp,false);window.addEventListener("unload",this._doOnUnload,false)}else{document.body.attachEvent("onclick",this._doOnClick,false);document.body.attachEvent("onkeyup",this._doOnKeyUp,false);document.body.attachEvent("onunload",this._doOnUnload,false)}this.conf.ev_grid_click=window.dhx4.attachEvent("_onGridClick",function(g,a){if(e.p.contains(a.entBox)){}else{e._clearClick=false;e._doOnClick(g)}a=null});this._findGrid=function(g,a){var h=false;if(typeof(window.dhtmlXTabBar)=="function"&&g instanceof window.dhtmlXTabBar){g.forEachTab(function(j){var l=j.getAttachedObject();if(h==false&&l!=null){h=h||(l==a)||this._findGrid(l);l=null}})}if(typeof(window.dhtmlXForm)=="function"&&g instanceof window.dhtmlXForm){g.forEachItem(function(j){if(h!=true&&g.getItemType(j)=="container"&&a.entBox==g.getContainer(j)){h=true}})}g=null;return h};this._idExists=function(h){var a=false;for(var g=0;g<this.conf.id.length;g++){if(this.conf.id[g] instanceof Array){a=a||(this.conf.id[g][0]==h[0]&&this.conf.id[g][1]==h[1])}else{a=a||this.conf.id[g]==h}}return a};this._IEDisp=(window.dhx4.isIE6||document.compatMode!="CSS1Compat");this._IEHover=(window.dhx4.isIE6==true);if(this._IEHover){this._IEHoverInit=function(){this.p.onmouseover=function(){var a=event.srcElement;while(a!=this&&a._IEHover!=true){a=a.parentNode}if(a._IEHover){if(e._IEHoverTM){window.clearTimeout(e._IEHoverTM)}if(e._lastIEHover==a){return}e._IEHoverRender(a);a=null}};this.p.onmouseout=function(){if(e._IEHoverTM){window.clearTimeout(e._IEHoverTM)}e._IEHoverTM=window.setTimeout(function(){e._IEHoverRender(null)},1)};this._IEHoverRender=function(a){if(this._lastIEHover!=null){if(this._lastIEHover.className.search(/tr_hover/gi)>=0){this._lastIEHover.className=this._lastIEHover.className.replace(/\s{0,}tr_hover/gi,"");this._lastIEHover=null}}if(a!=null&&a.className.search(/tr_hover/gi)<0){a.className+=" tr_hover";e._lastIEHover=a}};this._IEHoverInited=true};this._IEHoverClear=function(){this.p.onmouseover=null;this.p.onmouseout=null;this._IEHoverInited=false}}this._IEFirstLast=(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8);this._enableIEVFix=function(){if(window.dhx4.isIE6||window.dhx4.isIE7){var g=this.attachEvent("onHide",function(){document.getElementById(this._nodeId).style.visibility="hidden"});var a=this.attachEvent("onShow",function(){document.getElementById(this._nodeId).style.visibility="visible"});if(this._nodeObjEv==null){this._nodeObjEv=[]}this._nodeObjEv.push(g,a)}};if(typeof(window.dhtmlXToolbarObject)=="function"&&this.conf.toolbar!=null&&this.conf.toolbar instanceof window.dhtmlXToolbarObject&&this.conf.id!=null){if(!(this.conf.id instanceof Array)){this.conf.id=[this.conf.id]}this.skinParent=this.conf.toolbar.conf.skin;this._doOnToolbarClick=function(g){for(var a=0;a<e.conf.id.length;a++){if(g==e.conf.id[a]){if(g!=e._lastId){e.show(g);e._clearClick=true}}}};if(typeof(dhtmlXToolbarObject.prototype._getItemDim)=="undefined"){dhtmlXToolbarObject.prototype._getItemDim=function(h){var a=this.objPull[this.idPrefix+h];var g={left:window.dhx4.absLeft(a.obj),top:window.dhx4.absTop(a.obj),width:a.obj.offsetWidth+(a.arw?a.arw.offsetWidth:0),height:a.obj.offsetHeight};a=null;return g}}this.conf.toolbarEvent=this.conf.toolbar.attachEvent("onClick",this._doOnToolbarClick)}if(typeof(window.dhtmlXRibbon)=="function"&&this.conf.ribbon!=null&&this.conf.ribbon instanceof window.dhtmlXRibbon&&this.conf.id!=null){if(!(this.conf.id instanceof Array)){this.conf.id=[this.conf.id]}this.skinParent=this.conf.ribbon.conf.skin;this._doOnRibbonClick=function(g){for(var a=0;a<e.conf.id.length;a++){if(g==e.conf.id[a]){if(g!=e._lastId){e.show(g);e._clearClick=true}}}};if(typeof(dhtmlXRibbon.prototype._getItemDim)=="undefined"){dhtmlXRibbon.prototype._getItemDim=function(h){var a=this._items[h].base;var g={left:window.dhx4.absLeft(a),top:window.dhx4.absTop(a),width:a.offsetWidth,height:a.offsetHeight};a=null;return g}}this.conf.ribbonEvent=this.conf.ribbon.attachEvent("_showPopup",this._doOnRibbonClick)}if(typeof(window.dhtmlXForm)=="function"&&this.conf.form!=null&&this.conf.form instanceof window.dhtmlXForm&&this.conf.id!=null){if(!(this.conf.id instanceof Array)){this.conf.id=[this.conf.id]}if(!this.conf.mode){this.mode="right"}this.skinParent=this.conf.form.skin;if(typeof(dhtmlXForm.prototype._getItemDim)=="undefined"){dhtmlXForm.prototype._getItemDim=function(a,g){return this.doWithItem(a,"_getDim")};for(var b in dhtmlXForm.prototype.items){dhtmlXForm.prototype.items[b]._getDim=function(g){var a=g;if({ta:true,pw:true,se:true,tp:true,fl:true,calendar:true,colorpicker:1,editor:true,container:true}[g._type]){a=g.childNodes[g._ll?1:0].childNodes[0]}if({ch:true,ra:true,btn2state:true}[g._type]){a=g.childNodes[g._ll?1:0].childNodes[1]}if({bt:true,lb:true,fs:true}[g._type]){a=g.firstChild}if({combo:true}[g._type]){a=g._combo.DOMParent.firstChild}if({image:true}[g._type]){a=g.childNodes[g._ll?1:0].lastChild}if({bl:true}[g._type]){a=g.firstChild.firstChild.firstChild}var h={left:window.dhx4.absLeft(a),top:window.dhx4.absTop(a),width:a.offsetWidth,height:a.offsetHeight};a=null;return h}}}}if(typeof(window.dhtmlXSlider)=="function"&&this.conf.slider!=null&&this.conf.slider instanceof window.dhtmlXSlider){if(!this.conf.mode){this.mode="top"}this.conf.slider_tm=null;this._sliderShow=function(){if(e.conf.slider_tm){window.clearTimeout(e.conf.slider_tm)}var a=e.conf.slider._r_actv;if(a!=null){var g={left:window.dhx4.absLeft(a),top:window.dhx4.absTop(a),width:a.offsetWidth,height:a.offsetHeight};e.show(g.left,g.top,g.width,g.height);a=null}};this._sliderHide=function(){e.conf.slider_tm=window.setTimeout(function(){e.hide()},200)};this.conf.slider_events=[this.conf.slider.attachEvent("onMouseDown",this._sliderShow),this.conf.slider.attachEvent("onMouseUp",this._sliderHide),this.conf.slider.attachEvent("onChange",this._sliderShow)]}this.setSkin(this.skinParent||this.conf.skin||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_popup")||"material");return this}dhtmlXPopup.prototype.attachObject=function(a){return this._attachNode("object",{obj:a})};dhtmlXPopup.prototype._attach_init_object=function(a){this._nodeObj=(typeof(a.obj)=="string"?document.getElementById(a.obj):a.obj);a.obj=null;document.getElementById(this._nodeId).appendChild(this._nodeObj);this._nodeObj.style.display="";this._nodeObj.style.visibility="visible"};dhtmlXPopup.prototype.attachHTML=function(a){return this._attachNode("html",{html:a})};dhtmlXPopup.prototype._attach_init_html=function(a){document.getElementById(this._nodeId).innerHTML=a.html;this._nodeObj={text:a.html}};dhtmlXPopup.prototype.attachForm=function(b,a){return this._attachNode("form",{struct:b,width:a})};dhtmlXPopup.prototype._attach_init_form=function(b){var a=this;this._nodeObj=new dhtmlXForm(this._nodeId,b.struct);this._nodeObj.setSkin(this.conf.skin);this._nodeObj.attachEvent("_onBeforeEditorAccess",function(){a._clearClick=true});if(this.conf.editorEv!=null&&this.checkEvent(this.conf.editorEv)==false){this.conf.editorEv=null}if(dhtmlXForm.prototype.items.editor!=null&&this.conf.editorEv==null){this.conf.editorEv=this.attachEvent("onShow",function(){var g=dhtmlXForm.prototype.items.editor.editor;for(var c in g){var h=g[c].base;var e=false;while(h!=null){if(h==this.p){e=true;h=null}else{h=h.parentNode}}h=null;if(e==true){g[c].cell.conf.cells_cont=null;g[c].setSizes()}}g=null;this.detachEvent(this.conf.editorEv);this.conf.editorEv=null});if(this._nodeObjEv==null){this._nodeObjEv=[]}this._nodeObjEv.push(this.conf.editorEv)}};dhtmlXPopup.prototype.attachCalendar=function(a){return this._attachNode("calendar",a||{})};dhtmlXPopup.prototype._attach_init_calendar=function(a){if(a["double"]==true){this._nodeObj=new dhtmlXDoubleCalendarObject(this._nodeId);this._nodeObj.leftCalendar.setSkin(this.conf.skin);this._nodeObj.rightCalendar.setSkin(this.conf.skin)}else{this._nodeObj=new dhtmlXCalendarObject(this._nodeId);this._nodeObj.setSkin(this.conf.skin)}this._nodeObj.show()};dhtmlXPopup.prototype.attachGrid=function(b,a){return this._attachNode("grid",{width:b||400,height:a||200})};dhtmlXPopup.prototype._attach_init_grid=function(){this._nodeObj=new dhtmlXGridObject(this._nodeId);this._nodeObj.setSkin(this.conf.skin)};dhtmlXPopup.prototype.attachTree=function(c,b,a){return this._attachNode("tree",{width:c||400,height:b||200,rootId:a||0})};dhtmlXPopup.prototype._attach_init_tree=function(a){this._nodeObj=new dhtmlXTreeObject(this._nodeId,"100%","100%",(a.rootId))};dhtmlXPopup.prototype.attachLayout=function(b,a,c){return this._attachNode("layout",{width:b||400,height:a||200,pattern:c||"3L"})};dhtmlXPopup.prototype._attach_init_layout=function(a){this._nodeObj=new dhtmlXLayoutObject(this._nodeId,a.pattern,this.conf.skin)};dhtmlXPopup.prototype.attachAccordion=function(c,a,b){return this._attachNode("accordion",{width:c||400,height:a||200,conf:b||{}})};dhtmlXPopup.prototype._attach_init_accordion=function(a){a.conf.parent=this._nodeId;a.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXAccordion(a.conf)};dhtmlXPopup.prototype.attachTabbar=function(c,a,b){if(typeof(b)=="string"){b={mode:b}}else{if(typeof(b)!="object"||b==null){b={}}}return this._attachNode("tabbar",{width:c||400,height:a||200,conf:b})};dhtmlXPopup.prototype._attach_init_tabbar=function(a){a.conf.parent=this._nodeId;a.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXTabBar(a.conf)};dhtmlXPopup.prototype.attachSidebar=function(c,a,b){if(b==null){b={}}return this._attachNode("sidebar",{width:c||400,height:a||200,conf:b})};dhtmlXPopup.prototype._attach_init_sidebar=function(a){a.conf.parent=this._nodeId;a.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXSideBar(a.conf)};dhtmlXPopup.prototype.attachEditor=function(c,a,b){return this._attachNode("editor",{width:c||400,height:a||200,conf:b||{}})};dhtmlXPopup.prototype._attach_init_editor=function(b){document.getElementById(this._nodeId).className="dhxeditor_"+this.conf.skin;b.conf.parent=this._nodeId;if(b.conf.skin==null){b.conf.skin=this.conf.skin}this._nodeObj=new dhtmlXEditor(b.conf);var a=this.attachEvent("onShow",function(){if(this._nodeObj instanceof window.dhtmlXEditor){this._nodeObj.setSizes()}});if(this._nodeObjEv==null){this._nodeObjEv=[]}this._nodeObjEv.push(a)};dhtmlXPopup.prototype.attachColorPicker=function(a){if(typeof(a)!="object"||a==null){a={}}return this._attachNode("colorpicker",{conf:a})};dhtmlXPopup.prototype._attach_init_colorpicker=function(a){a.conf.skin=this.conf.skin;a.conf.parent=this._nodeId;this._nodeObj=new dhtmlXColorPicker(a.conf)};dhtmlXPopup.prototype.attachCarousel=function(c,a,b){if(b==null){b={}}return this._attachNode("carousel",{width:c||400,height:a||300,conf:b})};dhtmlXPopup.prototype._attach_init_carousel=function(a){a.conf.parent=this._nodeId;a.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXCarousel(a.conf)};dhtmlXPopup.prototype.attachTreeView=function(c,a,b){if(b==null){b={}}return this._attachNode("treeview",{width:c||400,height:a||300,conf:b})};dhtmlXPopup.prototype._attach_init_treeview=function(a){a.conf.parent=this._nodeId;a.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXTreeView(a.conf);this._nodeObj.base.className+=" dhxtreeview_with_border";var b=this.attachEvent("onShow",function(){if(this._nodeObj instanceof window.dhtmlXTreeView){this._nodeObj.setSizes()}});if(this._nodeObjEv==null){this._nodeObjEv=[]}this._nodeObjEv.push(b)};dhtmlXPopup.prototype.setDimension=function(a,b){if(this._nodeId==null||(a==null&&b==null)){return}var c=document.getElementById(this._nodeId);if(a!=null){c.style.width=a+"px"}if(b!=null){c.style.height=b+"px"}this._repaint();if(this._nodeObj!=null&&typeof(this._nodeObj.setSizes)=="function"){this._nodeObj.setSizes()}c=null};function dhtmlXRibbon(e){var c=this,b,a;this.conf={type:"ribbon",icons_path:(e&&e.icons_path)?e.icons_path:"",icons_css:(e&&e.iconsset=="awesome"),arrows_mode:(e&&e.arrows_mode)?e.arrows_mode:null,skin:"dhx_skyblue"};this._eventHandlers={};this._base=null;this._items={};this._tabbar=null;this.childIds=[];if(typeof(e)=="string"){a=e}else{if(e&&e.tagName){a=e}else{if(e&&e.parent){if(e.parent.tagName||typeof(e.parent)=="string"){a=e.parent}}}}this._doOnHighlight0=function(l){l=l||event;var j=l.target||l.srcElement;var g=c._findItemByNode(j);var h=c._items[g._dhx_ribbonId];if(h.conf.disable){return}if(c.items[h.type]&&typeof(c.items[h.type].mouseover)=="function"){if(c.items[h.type].mouseover(h,c,l)!=true){return false}}if(!/dhxrb_highlight0/.test(g.className)){g.className+=" dhxrb_highlight0"}};this._doOffHighlight0=function(l){l=l||event;var j=l.target||l.srcElement;var g=c._findItemByNode(j);var h=c._items[g._dhx_ribbonId];if(h.conf.disable){return}if(c.items[h.type]&&typeof(c.items[h.type].mouseout)=="function"){if(c.items[h.type].mouseout(h,c,l)!=true){return false}}if(/dhxrb_highlight1/.test(g.className)){g.className=g.className.replace(/\s?dhxrb_highlight1/,"")}if(/dhxrb_highlight0/.test(g.className)){g.className=g.className.replace(/\s?dhxrb_highlight0/,"")}};this._doOnHighlight1=function(l){l=l||event;var j=l.target||l.srcElement;var g=c._findItemByNode(j);var h=c._items[g._dhx_ribbonId];if(h.conf.disable){return}c.callEvent("_showPopup",[h.id]);if(c.items[h.type]&&typeof(c.items[h.type].mousedown)=="function"){if(c.items[h.type].mousedown(h,c,l)!=true){return false}}if(!/dhxrb_highlight1/.test(g.className)){g.className+=" dhxrb_highlight1"}};this._doOffHighlight1=function(l){l=l||event;var j=l.target||l.srcElement;var g=c._findItemByNode(j);var h=c._items[g._dhx_ribbonId];if(h.conf.disable){return}if(c.items[h.type]&&typeof(c.items[h.type].mouseup)=="function"){if(c.items[h.type].mouseup(h,c,l)!=true){return false}}if(/dhxrb_highlight1/.test(g.className)){g.className=g.className.replace(/\s?dhxrb_highlight1/,"")}};this._doOnClick=function(l){l=l||event;var j=l.target||l.srcElement;var g=c._findItemByNode(j);var h=c._items[g._dhx_ribbonId];if(h.conf.disable){return}if(c.items[h.type]&&typeof(c.items[h.type].click)=="function"){c.items[h.type].click(h,c,l)}};this._doOnFocus=function(l){l=l||event;var j=l.target||l.srcElement;var g=c._findItemByNode(j);var h=c._items[g._dhx_ribbonId];if(h.conf.disable){return}c.callEvent("_showPopup",[h.id]);if(c.items[h.type]&&typeof(c.items[h.type].focus)=="function"){c.items[h.type].focus(h,c,l)}};this._doOnBlur=function(l){l=l||event;var j=l.target||l.srcElement;var g=c._findItemByNode(j);var h=c._items[g._dhx_ribbonId];if(h.conf.disable){return}if(c.items[h.type]&&typeof(c.items[h.type].blur)=="function"){c.items[h.type].blur(h,c,l)}};this._doOnChange=function(l){l=l||event;var j=l.target||l.srcElement;var g=c._findItemByNode(j);var h=c._items[g._dhx_ribbonId];if(h.conf.disable){return}if(c.items[h.type]&&typeof(c.items[h.type].change)=="function"){c.items[h.type].change(h,c,l)}};this._doOnKeydown=function(l){l=l||event;var j=l.target||l.srcElement;var g=c._findItemByNode(j);var h=c._items[g._dhx_ribbonId];if(h.conf.disable){return}if(c.items[h.type]&&typeof(c.items[h.type].keydown)=="function"){c.items[h.type].keydown(h,c,l)}};this._tabCustomApi={enable:function(l,h){var g=null;h=h||false;if(h!=true){g=c._items[this._idd];for(var j=0;j<g.childIds.length;j++){c.enable(g.childIds[j])}}return c._tabOriginalApi.enable.apply(this,[l])},disable:function(l,h){var g=null;if(h!=false){g=c._items[this._idd];for(var j=0;j<g.childIds.length;j++){c.disable(g.childIds[j])}}return c._tabOriginalApi.disable.apply(this,[l])},close:function(j){var h=c._items[this._idd];c._removeTab(h);c._tabOriginalApi.close.apply(this,[j]);for(var g in c._tabOriginalApi){this[g]=null}}};this._attachEventTabbar=function(){this._tabbar.attachEvent("onSelect",function(){return c.callEvent("onSelect",arguments)});this._tabbar.attachEvent("onTabClick",function(){return c.callEvent("onTabClick",arguments)});this._tabbar.attachEvent("onTabClose",function(){return c.callEvent("onTabClose",arguments)})};if(typeof(a)=="string"){this._base=document.getElementById(a)}else{if(a&&a.tagName){this._base=a}else{this._base=document.createElement("div");this._base._dhx_remove=true;if(document.body.firstChild){document.body.insertBefore(this._base,document.body.firstChild)}else{document.body.appendChild(this._base)}}}b=dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||dhx4.skinDetect("dhtmlxribbon")||"material";if(typeof(e)=="object"&&e.skin){b=e.skin}this.setSkin(b);dhx4._eventable(this);dhx4._enableDataLoading(this,"_renderData","_xmlToJson","ribbon",{struct:true});this.attachEvent("_onHeightChanged",function(){this.conf.inited=true});this._base.className+=" dhxrb_without_tabbar";this._base.innerHTML="<div class='dhxrb_background_area'></div>";if(e!=null){if(e.json){this.loadStruct(e.json,e.onload)}else{if(e.xml){this.loadStruct(e.xml,e.onload)}}this._renderData(e)}this.unload=function(){var h=[];for(var j=0;j<this.childIds.length;j++){h.push(this.childIds[j])}dhx4._enableDataLoading(this,null,null,null,"clear");dhx4._eventable(this,"clear");for(var j=0;j<h.length;j++){if(this._items[h[j]].type=="tab"){this.tabs(h[j]).close(false)}else{this.removeItem(h[j])}}if(this._tabbar){this._tabbar.unload();this._tabbar=null}this._base.innerHTML="";if(this._base._dhx_remove){this._base.parentNode.removeChild(this._base)}else{this._base.className=this._base.className.replace(/\s?(dhtmlx|dhxrb)(\S*)/ig,"")}for(var g in this){this[g]=null}c=null}}dhtmlXRibbon.prototype.setSizes=function(){if(this._tabbar!=null&&typeof(this.setSizes)=="function"){this._tabbar.setSizes()}};dhtmlXRibbon.prototype._renderData=function(b){var a=this._base.firstChild;if(b!=null){this.conf.icons_path=b.icons_path||this.conf.icons_path;this.conf.icons_css=this.conf.icons_css||(b.iconset=="awesome");if(b.tabs instanceof Array){this._base.className=this._base.className.replace(/\s?dhxrb_without_tabbar/i,"");a.className="dhxrb_with_tabbar";this._tabbar=new dhtmlXTabBar(a);this._attachEventTabbar();this._tabbar.setSkin(this.conf.skin);if(this.conf.arrows_mode!=null){this._tabbar.setArrowsMode(this.conf.arrows_mode)}this.childIds=this._appendTabs(b.tabs)}else{if(b.items instanceof Array){if(!/\s?dhxrb_without_tabbar/i.test(this._base.className)){this._base.className+=" dhxrb_without_tabbar"}if(/\s?dhxrb_background_area/i.test(a.className)){a.className="dhxrb_background_area"}a.innerHTML="<div class='dhxrb_g_area'></div>";this.childIds=this._appendBlocks(b.items,a.firstChild)}}this.callEvent("_onHeightChanged",[])}};dhtmlXRibbon.prototype._xmlToJson=function(b){var a=b.lastChild||null,e={},c=[];if(a&&a.tagName=="ribbon"){c=this._convertXmlNodeListIntoObject(a.childNodes)}if(c[0]&&c[0].type&&c[0].type.toLowerCase()=="block"){e.items=c}else{e.tabs=c}return e};dhtmlXRibbon.prototype._convertXmlNodeListIntoObject=function(b){var c,a,g=[],e;a=b.length;for(c=0;c<a;c++){e=this._covertXmlNodeToObject(b[c]);if(e){g.push(e)}}return g};dhtmlXRibbon.prototype._covertXmlNodeToObject=function(e){if(!e||!e.tagName||!(e.tagName.toLowerCase()=="item"||e.tagName.toLowerCase()=="tab")){return null}var c,a,b=e.attributes,g={};a=b.length;for(c=0;c<a;c++){switch(b[c].name){case"isbig":g.isbig=dhx4.s2b(b[c].value);break;case"state":g.state=dhx4.s2b(b[c].value);break;default:g[b[c].name]=b[c].value}}if(e.childNodes.length){if(e.getAttribute("type")=="buttonCombo"||e.getAttribute("type")=="buttonSelect"){g.data=e}else{if(e.tagName.toLowerCase()=="tab"){g.items=this._convertXmlNodeListIntoObject(e.childNodes)}else{g.list=this._convertXmlNodeListIntoObject(e.childNodes)}}}return g};dhtmlXRibbon.prototype._appendTabs=function(g){var b,a,c,e=[];a=g.length;for(b=0;b<a;b++){c=this._addTab(g[b]);if(g[b].items instanceof Array){c.childIds=this._appendBlocks(g[b].items,c.base,c)}e.push(c.id)}return e};dhtmlXRibbon.prototype._addTab=function(c){var a,e;var b={conf:{active:false,text:"",width:null,position:null,disable:false},base:document.createElement("div"),type:"tab",childIds:[]};for(a in c){if(a=="items"){continue}b.conf[a]=c[a]}if(!c.id){b.id=dhx4.newId()}else{b.id=c.id}while(this._items[b.id]){b.id=dhx4.newId()}this._tabbar.addTab(b.id,b.conf.text,b.conf.width,b.conf.position,b.conf.active);b.base.className="dhxrb_g_area";b.base._dhx_ribbonId=b.id;this.tabs(b.id).attachObject(b.base);this._changeApiForTab(this.tabs(b.id));this._items[b.id]=b;return b};dhtmlXRibbon.prototype._changeApiForTab=function(b){var a;for(a in this._tabOriginalApi){this._tabOriginalApi[a]=this._tabOriginalApi[a]||b[a];b[a]=this._tabCustomApi[a]}};dhtmlXRibbon.prototype._tabOriginalApi={enable:null,disable:null,close:null};dhtmlXRibbon.prototype._appendBlocks=function(a,o,c){var h,e,j,g,m,b,n=[];c=c||null;e=a.length;for(h=0;h<e;h++){if(typeof(a[h])=="object"&&a[h].type=="block"){j=this._addBlock(a[h],o);if(a[h].list&&(a[h].list instanceof Array)){g=a[h].list;m=g.length;for(b=0;b<m;b++){this._addItem(j.id,null,null,g[b])}}if(c!=null){j.parentId=c.id}if(j.conf.disable){this.disable(j.id)}n.push(j.id)}}return n};dhtmlXRibbon.prototype._addBlock=function(g,e){var c,a,h,b;h={conf:{text:"",text_pos:"bottom",type:"block",mode:"cols",disable:false},type:"block",childIds:[],base:document.createElement("div"),contForItems:document.createElement("div"),contForText:document.createElement("div")};for(b in g){if(b=="list"||b=="type"||b=="id"){continue}h.conf[b]=g[b]}if(!g.id){h.id=dhx4.newId()}else{h.id=g.id}while(this._items[h.id]){h.id=dhx4.newId()}h.base.className="dhxrb_block_base";e.appendChild(h.base);h.contForItems.className="dhxrb_block_items";h.contForText.className="dhxrb_block_label";h.base.appendChild(h.contForItems);if(h.conf.text){h.contForText.innerHTML=h.conf.text;if(h.conf.text_pos=="top"){h.base.insertBefore(h.contForText,h.contForItems)}else{h.base.appendChild(h.contForText)}}h.base._dhx_ribbonId=h.id;this._items[h.id]=h;return h};dhtmlXRibbon.prototype._addItem=function(c,b,m,j){var g=this._items[c],a,h,o=null,l=this,e;if(j.type!="newLevel"&&!this.items[j.type]){return null}if(j.type=="newLevel"){this._addNewLevel(g)}else{if(g.type=="group"){a=document.createElement("div");a.className="dhxrb_in_group";g.base.appendChild(a)}else{if(j.isbig){a=document.createElement("div");a.className="dhxrb_big_button";g.contForItems.appendChild(a)}else{h=this._getContainerForSmallItem(g);a=document.createElement("div");a.className=(g.conf.mode=="rows")?"dhxrb_in_row":"dhxrb_3rows_button";h.appendChild(a)}}}if(a){this._attachEventForItem(a);e={icons_path:j.icons_path||this.conf.icons_path,icons_css:this.conf.icons_css,skin:this.conf.skin};for(var n in j){e[n]=j[n]}if(!e.id){e.id=dhx4.newId()}while(this._items[e.id]){e.id=dhx4.newId()}o=(this.items[e.type]&&this.items[e.type].render)?this.items[e.type].render(a,e):null}if(o!=null){this._items[o.id]=o;o.parentId=g.id;g.childIds.push(o.id);a._dhx_ribbonId=o.id;if(e.onclick&&(typeof(e.onclick)=="function")){this._eventHandlers[o.id]=this._eventHandlers[o.id]||{};this._eventHandlers[o.id]["onclick"]=e.onclick}o.callEvent=function(){l.callEvent.apply(l,arguments)};o._callHandler=function(){l._callHandler.apply(l,arguments)};if(this.items[e.type]&&typeof(this.items[e.type].callAfterInit)=="function"){this.items[e.type].callAfterInit.apply(this,[o])}}return o};dhtmlXRibbon.prototype._callHandler=function(b,a){if(this._eventHandlers[b]&&this._eventHandlers[b].onclick){this._eventHandlers[b].onclick.apply(this,a)}};dhtmlXRibbon.prototype.items={};dhtmlXRibbon.prototype.items.button={render:function(b,a){var e,g;g={base:b,id:a.id,type:a.type,conf:{text:"",text_pos:(a.isbig)?"bottom":"right",img:null,imgdis:null,isbig:false,disable:false,skin:a.skin,icons_css:a.icons_css}};for(e in a){if(e=="id"||e=="onclick"||e=="type"){continue}g.conf[e]=a[e]}if(g.conf.icons_css==true){var c="<i class='"+g.conf.icons_path+(g.conf.img||"")+"'></i>"}else{var c="<img class='dhxrb_image"+((g.conf.img)?"'":" dhxrb_invisible'")+" src='"+((g.conf.img)?g.conf.icons_path+g.conf.img:"")+"' />"}b.innerHTML=c+"<div class='dhxrb_label_button'>"+g.conf.text+"</div>";if(typeof(this.afterRender)=="function"){this.afterRender(g)}if(g.conf.disable){this.disable(g)}return g},getText:function(a){return a.conf.text},setText:function(b,c){var a=b.base.childNodes[1];b.conf.text=c;a.innerHTML=c},setImage:function(b,a){b.conf.img=a;if(b.conf.disable==false){b.base.childNodes[0][b.conf.icons_css?"className":"src"]=b.conf.icons_path+b.conf.img}},setImageDis:function(b,a){b.conf.imgdis=a;if(b.conf.disable==true){b.base.childNodes[0][b.conf.icons_css?"className":"src"]=b.conf.icons_path+b.conf.imgdis}},mousedown:function(a,c,b){return true},click:function(a,c,b){if(b.button!=0){return false}c._callHandler(a.id,[a.id]);a.callEvent("onClick",[a.id]);return false},disable:function(b){var c=b.base.childNodes[0],a=b.base.childNodes[1];if(b.conf.imgdis){c[b.conf.icons_css?"className":"src"]=b.conf.icons_path+b.conf.imgdis;if(/\s?dhxrb_invisible/i.test(c.className)){c.className=c.className.replace(/\s?dhxrb_invisible/i,"")}}if(!/\s?dhxrb_disable_text_style/i.test(a.className)){a.className+=" dhxrb_disable_text_style"}return true},enable:function(b){var c=b.base.childNodes[0],a=b.base.childNodes[1];if(b.conf.img){c[b.conf.icons_css?"className":"src"]=b.conf.icons_path+b.conf.img}else{if(!/\s?dhxrb_invisible/i.test(c.className)){c.className+=" dhxrb_invisible"}}if(/\s?dhxrb_disable_text_style/i.test(a.className)){a.className=a.className.replace(/\s?dhxrb_disable_text_style/i,"")}return true}};dhtmlXRibbon.prototype.items.buttonTwoState={click:function(a,c,b){return false},afterRender:function(a){if(a.conf.state){this.setState(a,a.conf.state)}},mouseover:function(a){if(!/dhxrb_highlight0/.test(a.base.className)){a.base.className+=" dhxrb_highlight0"}return false},mouseout:function(a){if(/dhxrb_highlight0/.test(a.base.className)){a.base.className=a.base.className.replace(/\s?dhxrb_highlight0/,"")}return false},mousedown:function(a,c,b){c._callHandler(a.id,[a.id,!a.conf.state]);this.setState(a,!a.conf.state,true);return false},mouseup:function(a){return false},setState:function(a,b,c){c=c||false;b=dhx4.s2b(b);if(b){if(!/dhxrb_highlight1/.test(a.base.className)){a.base.className+=" dhxrb_highlight1"}}else{if(/dhxrb_highlight1/.test(a.base.className)){a.base.className=a.base.className.replace(/\s?dhxrb_highlight1/,"")}}a.conf.state=b;if(c){a.callEvent("onStateChange",[a.id,a.conf.state])}},getState:function(a){return(a.conf.state==true)}};dhtmlXRibbon.prototype.items.buttonSegment={click:function(a,c,b){return false},mousedown:function(a,c,b){this.setState(a,c,true);return false},callAfterInit:function(a){if(a.conf.state||dhtmlXRibbon.prototype.items.buttonSegment._getSelectedNeighbor(a,this)==null){if(a.conf.state){a.conf.state=false}dhtmlXRibbon.prototype.items.buttonSegment.setState(a,this,false)}},afterRender:function(){},setState:function(a,g,e){e=e||false;var c=null,b=dhx4.s2b(a.conf.state);if(b==false){c=this._getSelectedNeighbor(a,g);if(c!=null){this._unSelect(c)}if(!/dhxrb_highlight1/.test(a.base.className)){a.base.className+=" dhxrb_highlight1"}a.conf.state=true;if(e){g._callHandler(a.id,[a.id,(c?c.id:null)]);g.callEvent("onStateChange",[a.id,(c?c.id:null)])}}},remove:function(c,j){var g=dhx4.s2b(c.conf.state),h=null,a=0,b=j._items[c.parentId],e;if(g){while(b.childIds[a]&&h==null){e=j._items[b.childIds[a]];if(e.type=="buttonSegment"&&e!=c){h=e}a++}if(h){this.setState(h,j)}}},_unSelect:function(a){var b=dhx4.s2b(a.conf.state);if(b){if(/dhxrb_highlight1/.test(a.base.className)){a.base.className=a.base.className.replace(/\s?dhxrb_highlight1/,"")}a.conf.state=false}},_getSelectedNeighbor:function(e,j){var c=j._items[e.parentId],b,a,h,g=null;a=c.childIds.length;for(b=0;b<a;b++){h=j._items[c.childIds[b]];if(h.type=="buttonSegment"&&h.conf.state){g=h;break}}return g}};dhtmlXRibbon.prototype.items.buttonSelect={itemCollection:[],_isAttachedEventInWindow:false,afterRender:function(b){var a=b.base.childNodes[1];a.innerHTML+="<span class='dhxrb_arrow'>&nbsp;</span>";b.menu=null;this.itemCollection.push(b);this._attachEventToWindow();a=null},setText:function(a,c){var b=a.base.childNodes[1].lastChild;a.conf.text=c;a.base.childNodes[1].innerHTML=c;a.base.childNodes[1].appendChild(b)},setOptionText:function(a,c,b){if(a.menu!=null){a.menu.setItemText(c,b)}else{this._loopThroughItems(a.conf.items,c,b,false)}},getOptionText:function(a,b){if(a.menu!=null){return a.menu.getItemText(b)}return this._loopThroughItems(a.conf.items,b,null,true)},_loopThroughItems:function(a,h,g,e){for(var c=0;c<a.length;c++){if(a[c].id==h){if(e!=true){a[c].text=g;return true}else{return a[c].text}}if(a[c].items!=null){var b=this._loopThroughItems(a[c].items,h,g,e);if(b!=null){return b}}}return null},_attachEventToWindow:function(){if(this._isAttachedEventInWindow==false){if(typeof(window.addEventListener)=="function"){document.body.addEventListener("mousedown",this._hideAllMenus,false)}else{document.body.attachEvent("onmousedown",this._hideAllMenus)}this._isAttachedEventInWindow=true}},_detachEventFromWindow:function(){if(typeof(window.addEventListener)=="function"){document.body.removeEventListener("mousedown",this._hideAllMenus,false)}else{document.body.detachEvent("onmousedown",this._hideAllMenus)}this._isAttachedEventInWindow=false},_hideAllMenus:function(h){h=h||event;var c=h.target||h.srcElement;var a=true;while(c!=null&&a==true){if(c.className!=null&&/SubLevelArea_Polygon/i.test(c.className)){a=false}else{c=c.parentNode}}if(a==false){return}var b=dhtmlXRibbon.prototype.items.buttonSelect.itemCollection;for(var j in b){var g=b[j];if(g.menu instanceof dhtmlXMenuObject){if(g._skipHiding){g._skipHiding=false}else{dhtmlXRibbon.prototype.items.buttonSelect.hideMenu(g)}}}},mousedown:function(a,c,b){a._skipHiding=true;this.showMenu(a);return false},mouseup:function(a){return false},click:function(){},setState:function(){},showMenu:function(b){var a=dhx4.absLeft(b.base),c=dhx4.absTop(b.base)+b.base.offsetHeight;if(!(b.menu instanceof dhtmlXMenuObject)){b.menu=new dhtmlXMenuObject({parent:b.base,icons_path:b.conf.icons_path,context:true,items:b.conf.items,skin:b.conf.skin});if(b.conf.data){b.menu.loadStruct(b.conf.data);delete b.conf.data}b.menu.setAutoHideMode(false);b.menu.attachEvent("onHide",function(e){if(e==null){dhtmlXRibbon.prototype.items.buttonSelect._doOnHideMenu(b)}});b.menu.attachEvent("onShow",function(e){if(e==null){dhtmlXRibbon.prototype.items.buttonSelect._doOnShowMenu(b)}});b.menu.attachEvent("onClick",function(e){b.callEvent("onClick",[e,b.id])});b.base.oncontextmenu=function(){return false};dhtmlXRibbon.prototype.items.buttonSelect.showMenu(b)}else{b.menu.showContextMenu(a,c)}},hideMenu:function(a){if(a.menu instanceof dhtmlXMenuObject){a.menu.hideContextMenu()}},remove:function(b){var c,a;if(b.menu instanceof dhtmlXMenuObject){b.menu.unload();b.menu=null}b.base.oncontextmenu=null;c=dhtmlXRibbon.prototype._indexOf(dhtmlXRibbon.prototype.items.buttonSelect.itemCollection,b);if(c!=-1){dhtmlXRibbon.prototype.items.buttonSelect.itemCollection.splice(c,1)}if(dhtmlXRibbon.prototype.items.buttonSelect.itemCollection.length==0){this._detachEventFromWindow()}},setSkin:function(a,b){if(a.menu instanceof dhtmlXMenuObject){a.menu.setSkin(b)}},_doOnHideMenu:function(a){if(a._skipHiding){a._skipHiding=false}else{if(/dhxrb_highlight1/.test(a.base.className)){a.base.className=a.base.className.replace(/\s?dhxrb_highlight1/,"")}}},_doOnShowMenu:function(a){if(!/dhxrb_highlight1/.test(a.base.className)){a.base.className+=" dhxrb_highlight1"}}};dhtmlXRibbon.prototype.items.group={render:function(b,a){var c,e;e={base:b,id:a.id,type:a.type,conf:{disable:false,skin:a.skin},childIds:[]};b.className="dhxrb_group";for(c in a){if(c=="id"||c=="onclick"||c=="type"){continue}e.conf[c]=a[c]}return e},callAfterInit:function(g){this._detachEventFromItem(g.base);var e,a,h=g.conf.list,j,c,b;a=(h)?h.length:0;for(e=0;e<a;e++){j=this._addItem(g.id,null,null,h[e]);if(j==null){continue}c=j.base.childNodes[1];if(c&&!c.innerHTML&&!/\s?dhxrb_label_hide/i.test(c.className)){c.className+=" dhxrb_label_hide"}}dhtmlXRibbon.prototype.items.group.normalize(g);if(g.conf.disable){this.disable(g.id)}h=undefined},normalize:function(j){var a=j.base.children;var c=a.length,b=false,m=0;var e,h;for(var g=0;g<c;g++){if(!/dhxrb_separator_group/i.test(a[g].className)){if(/dhxrb_item_hide/i.test(a[g].className)){m++;continue}}if((Math.ceil((g-m)/2)-Math.floor((g-m)/2))==0){if(/dhxrb_separator_group/i.test(a[g].className)){a[g].parentNode.removeChild(a[g]);b=true;break}}else{if(!/dhxrb_separator_group/i.test(a[g].className)){e=document.createElement("div");e.className="dhxrb_separator_groupp";j.base.insertBefore(e,a[g]);b=true;break}}}if(b){this.normalize(j)}else{h=j.base.lastChild;if(h&&/dhxrb_separator_group/i.test(h.className)){h.parentNode.removeChild(h)}}},hideChild:function(b,e){var a=dhtmlXRibbon.prototype._indexOf(b.base.children,e.base);if(a==0){a++}else{if(a!=-1){a--}else{return}}var c=b.base.children[a];if(c&&/dhxrb_separator_group/i.test(c.className)){c.parentNode.removeChild(c)}},showChild:function(a){this.normalize(a)}};dhtmlXRibbon.prototype.items.input={render:function(b,a){var c,e;e={base:b,id:a.id,type:a.type,conf:{text:"",text_pos:(a.isbig)?"bottom":"right",img:null,imgdis:null,isbig:false,disable:false,skin:a.skin,value:""}};for(c in a){if(c=="id"||c=="onclick"||c=="type"){continue}e.conf[c]=a[c]}b.innerHTML="<input type='text' class='dhxrb_input'><div class='dhxrb_label_button'>"+e.conf.text+"</div>";if(typeof(this.afterRender)=="function"){this.afterRender(e)}if(e.conf.disable){this.disable(e)}if(e.conf.width){this.setWidth(e,e.conf.width)}if(e.conf.value){this.setValue(e,e.conf.value)}return e},callAfterInit:function(b){var a=b.base.childNodes[0];this._detachEventFromItem(b.base);this._attachEventsToInput(a)},setText:dhtmlXRibbon.prototype.items.button.setText,getText:dhtmlXRibbon.prototype.items.button.getText,change:function(b){var a=b.base.childNodes[0];b.conf.value=a.value},keydown:function(b,g,c){if(c.keyCode==13){var a=b.base.childNodes[0];b.conf.value=a.value;g.callEvent("onEnter",[b.id,b.conf.value])}},remove:function(b,c){var a=b.base.childNodes[0];c._detachEventsFromInput(a)},getValue:function(b){var a=b.base.childNodes[0],c;c=a.value;a=undefined;return c},setValue:function(b,c){var a=b.base.childNodes[0],c;a.value=c;b.conf.value=c},setWidth:function(b,c){var a=b.base.childNodes[0];a.style.width=parseInt(c)+"px"},disable:function(c){var b=c.base.childNodes[0],a=c.base.childNodes[1];b.disabled=true;if(!/\s?dhxrb_disable_text_style/i.test(a.className)){a.className+=" dhxrb_disable_text_style"}return true},enable:function(c){var b=c.base.childNodes[0],a=c.base.childNodes[1];b.disabled=false;if(/\s?dhxrb_disable_text_style/i.test(a.className)){a.className=a.className.replace(/\s?dhxrb_disable_text_style/i,"")}return true},getInput:function(a){return a.base.childNodes[0]}};dhtmlXRibbon.prototype.getInput=function(b){var a=this._items[b];if(a==null||a.type!="input"){return null}return this.items[a.type].getInput(a)};dhtmlXRibbon.prototype.items.checkbox={render:function(b,a){var c,e;e={base:b,id:a.id,type:a.type,conf:{text:"",text_pos:(a.isbig)?"bottom":"right",disable:false,checked:false}};for(c in a){if(c=="id"||c=="onclick"||c=="type"){continue}e.conf[c]=a[c]}b.innerHTML="<div class='dhxrb_checkbox'></div><div class='dhxrb_label_checkbox'>"+e.conf.text+"</div>";if(typeof(this.afterRender)=="function"){this.afterRender(e)}if(e.conf.checked){this.check(e)}return e},callAfterInit:function(a){if(a.conf.disable){this.disable(a.id)}},setText:dhtmlXRibbon.prototype.items.button.setText,getText:dhtmlXRibbon.prototype.items.button.getText,mousedown:function(a){return false},mouseup:function(a){return false},click:function(a,c,b){if(b.button!=0){return false}if(a.type=="checkbox"){if(a.conf.checked){this.uncheck(a,true)}else{this.check(a,true)}}},check:function(a,b){b=b||false;if(a.type!="checkbox"){return}a.conf.checked=true;if(!/\s?dhxrb_checked/i.test(a.base.className)){a.base.className+=" dhxrb_checked"}if(b){a.callEvent("onCheck",[a.id,a.conf.checked])}},uncheck:function(a,b){b=b||false;if(a.type!="checkbox"){return}a.conf.checked=false;if(/\s?dhxrb_checked/i.test(a.base.className)){a.base.className=a.base.className.replace(/\s?dhxrb_checked/i,"")}if(b){a.callEvent("onCheck",[a.id,a.conf.checked])}},isChecked:function(a){if(a.type!="checkbox"){return false}return(a.conf.checked==true)},disable:function(a){return true},enable:function(a){return true}};dhtmlXRibbon.prototype.items.text={render:function(a,e){var c={base:a,id:e.id,type:e.type,conf:{text:""}};for(var b in e){if(b=="id"||b=="type"){continue}c.conf[b]=e[b]}a.innerHTML="<div class='dhxrb_item_text'>"+c.conf.text+"</div>";if(typeof(this.afterRender)=="function"){this.afterRender(c)}return c},callAfterInit:function(a){this._detachEventFromItem(a.base)},getText:function(a){return a.conf.text},setText:function(a,b){a.conf.text=b;a.base.firstChild.innerHTML=a.conf.text}};dhtmlXRibbon.prototype.items.buttonCombo={render:function(a,b){var c,e,g={};e={base:a,id:b.id,type:b.type,conf:{text:"",text_pos:"right",width:140,skin:b.skin,callEvent:true,mode:b.comboType,image_path:b.comboImagePath,default_image:b.comboDefaultImage,default_image_dis:b.comboDefaultImageDis}};for(c in b){if(c=="id"||c=="onclick"||c=="type"){continue}e.conf[c]=b[c]}for(c in e.conf){if(c=="text"||c=="text_pos"||c=="disable"||c=="data"){continue}g[c]=e.conf[c]}e.base.className+=" dhxrb_buttoncombo_cont";e.base.innerHTML="<div class='dhxrb_buttoncombo'></div><div class='dhxrb_label_button'>"+e.conf.text+"</div>";g.parent=e.base.firstChild;e.combo=new dhtmlXCombo(g);e.combo.setSkin(g.skin);e.combo.attachEvent("onChange",function(h,j){e._callHandler(e.id,[h,j]);if(e.conf.callEvent==true){e.callEvent("onSelectOption",[e.id,h,j])}e.conf.callEvent=true});if(e.conf.data){e.combo.load(e.conf.data);delete e.conf.data}if(typeof(this.afterRender)=="function"){this.afterRender(e)}if(e.conf.disable){this.disable(e)}return e},callAfterInit:function(a){this._detachEventFromItem(a.base)},disable:function(b){var a=b.base.lastChild;if(b.combo instanceof dhtmlXCombo){b.combo.disable()}if(!/\s?dhxrb_disable_text_style/i.test(a.className)){a.className+=" dhxrb_disable_text_style"}return true},enable:function(b){var a=b.base.lastChild;if(b.combo instanceof dhtmlXCombo){b.combo.enable()}if(/\s?dhxrb_disable_text_style/i.test(a.className)){a.className=a.className.replace(/\s?dhxrb_disable_text_style/i,"")}return true},remove:function(a){if(a.combo instanceof dhtmlXCombo){a.combo.unload();a.combo=null}},getValue:function(a){var b=null;if(a.combo instanceof dhtmlXCombo){b=a.combo.getSelectedValue()}return b},setValue:function(a,b,c){if(a.combo instanceof dhtmlXCombo){a.conf.callEvent=c;a.combo.setComboValue(b);a.conf.callEvent=true}},setSkin:function(a,b){if(a.combo instanceof dhtmlXCombo){a.combo.setSkin(b)}}};dhtmlXRibbon.prototype.items.slider={render:function(a,g){var c,e,b={};e={base:a,id:g.id,type:g.type,conf:{text:"",text_pos:"right",size:150,vertical:false,min:0,max:99,value:0,step:1,margin:10,disabled:false,enableTooltip:false}};for(c in g){if(c=="id"||c=="onclick"||c=="type"){continue}e.conf[c]=g[c]}for(c in e.conf){if(c=="text"||c=="text_pos"||c=="isbig"){continue}b[c]=e.conf[c]}e.base.innerHTML="<center><div class='dhxrb_slider'></div></center><div class='dhxrb_label_button'>"+e.conf.text+"</div>";b.parent=e.base.firstChild.firstChild;e.slider=new dhtmlXSlider(b);if(typeof(this.afterRender)=="function"){this.afterRender(e)}if(e.conf.disable){this.disable(e)}e.slider.attachEvent("onChange",function(h){e._callHandler(e.id,[h]);e.callEvent("onValueChange",[e.id,h])});return e},callAfterInit:function(a){this._detachEventFromItem(a.base)},setSkin:function(a,b){if(a.slider instanceof dhtmlXSlider){a.slider.setSkin(b)}},disable:function(b){var a=b.base.childNodes[1];if(b.slider instanceof dhtmlXSlider){b.slider.disable()}if(!/\s?dhxrb_disable_text_style/i.test(a.className)){a.className+=" dhxrb_disable_text_style"}return true},enable:function(b){var a=b.base.childNodes[1];if(b.slider instanceof dhtmlXSlider){b.slider.enable()}if(/\s?dhxrb_disable_text_style/i.test(a.className)){a.className=a.className.replace(/\s?dhxrb_disable_text_style/i,"")}return true},remove:function(a){if(a.slider instanceof dhtmlXSlider){a.slider.unload();a.slider=null}},getValue:function(a){var b=null;if(a.slider instanceof dhtmlXSlider){b=a.slider.getValue()}return b},setValue:function(a,b){if(a.slider instanceof dhtmlXSlider){a.slider.setValue(b)}}};dhtmlXRibbon.prototype.items._extends=function(c,b){var a;for(a in b){c[a]=c[a]||b[a]}return c};dhtmlXRibbon.prototype._addNewLevel=function(c){var b,a;if(c.conf.mode=="rows"){b=c.contForItems.lastChild;if(b&&/dhxrb_block_rows/i.test(b.className)&&(b.childNodes.length<3)){a=document.createElement("div");a.className="dhxrb_block_row";b.appendChild(a)}else{b=document.createElement("div");b.className="dhxrb_block_rows";c.contForItems.appendChild(b);a=document.createElement("div");a.className="dhxrb_block_row";b.appendChild(a)}}else{var a=document.createElement("div");a.className="dhxrb_3rows_block";c.contForItems.appendChild(a)}};dhtmlXRibbon.prototype._attachEventForItem=function(a){if(typeof(window.addEventListener)=="function"){a.addEventListener("mouseover",this._doOnHighlight0,false);a.addEventListener("mouseout",this._doOffHighlight0,false);a.addEventListener("mousedown",this._doOnHighlight1,false);a.addEventListener("mouseup",this._doOffHighlight1,false);a.addEventListener("click",this._doOnClick,false)}else{a.attachEvent("onmouseover",this._doOnHighlight0);a.attachEvent("onmouseout",this._doOffHighlight0);a.attachEvent("onmousedown",this._doOnHighlight1);a.attachEvent("onmouseup",this._doOffHighlight1);a.attachEvent("onclick",this._doOnClick)}};dhtmlXRibbon.prototype._detachEventFromItem=function(a){if(typeof(window.addEventListener)=="function"){a.removeEventListener("mouseover",this._doOnHighlight0,false);a.removeEventListener("mouseout",this._doOffHighlight0,false);a.removeEventListener("mousedown",this._doOnHighlight1,false);a.removeEventListener("mouseup",this._doOffHighlight1,false);a.removeEventListener("click",this._doOnClick,false)}else{a.detachEvent("onmouseover",this._doOnHighlight0);a.detachEvent("onmouseout",this._doOffHighlight0);a.detachEvent("onmousedown",this._doOnHighlight1);a.detachEvent("onmouseup",this._doOffHighlight1);a.detachEvent("onclick",this._doOnClick)}};dhtmlXRibbon.prototype._attachEventsToInput=function(a){if(typeof(window.addEventListener)=="function"){a.addEventListener("focus",this._doOnFocus,false);a.addEventListener("blur",this._doOnBlur,false);a.addEventListener("change",this._doOnChange,false);a.addEventListener("keydown",this._doOnKeydown,false)}else{a.attachEvent("onfocus",this._doOnFocus);a.attachEvent("onblur",this._doOnBlur);a.attachEvent("onchange",this._doOnChange);a.attachEvent("onkeydown",this._doOnKeydown)}};dhtmlXRibbon.prototype._detachEventsFromInput=function(a){if(typeof(window.addEventListener)=="function"){a.removeEventListener("focus",this._doOnFocus,false);a.removeEventListener("blur",this._doOnBlur,false);a.removeEventListener("change",this._doOnChange,false);a.removeEventListener("keydown",this._doOnKeydown,false)}else{a.detachEvent("onfocus",this._doOnFocus);a.detachEvent("onblur",this._doOnBlur);a.detachEvent("onchange",this._doOnChange);a.detachEvent("onkeydown",this._doOnKeydown)}};dhtmlXRibbon.prototype._getContainerForSmallItem=function(c){var b=c.contForItems.lastChild,a=null;if(c.conf.mode=="rows"){if(b&&/\s?dhxrb_block_rows/i.test(b.className)){a=b.lastChild;if(!a){a=document.createElement("div");a.className="dhxrb_block_row";b.appendChild(a)}}else{b=document.createElement("div");b.className="dhxrb_block_rows";c.contForItems.appendChild(b);a=document.createElement("div");a.className="dhxrb_block_row";b.appendChild(a)}}else{if(b&&/dhxrb_3rows_block/i.test(b.className)&&(b.childNodes.length<3)){a=b}else{a=document.createElement("div");a.className="dhxrb_3rows_block";c.contForItems.appendChild(a)}}return a};dhtmlXRibbon.prototype._findItemByNode=function(a){while(a&&!a._dhx_ribbonId){a=a.parentNode}return a};dhtmlXRibbon.prototype._indexOf=function(a,e){var c,b;b=a.length;for(c=0;c<b;c++){if(a[c]==e){return c}}return -1};dhtmlXRibbon.prototype._removeItem=function(c){var a,e=-1,b=this._items[c.parentId];if(c.type=="group"){this._removeGroup(c);return}delete this._items[c.id];a=c.base.parentNode;this._detachEventFromItem(c.base);a.removeChild(c.base);if(b.type=="block"){if(a!=b.contForItems&&a.childNodes.length==0){a.parentNode.removeChild(a)}}else{if(b.type=="group"){dhtmlXRibbon.prototype.items.group.normalize(b)}}e=this._indexOf(b.childIds,c.id);if(e!=-1){b.childIds.splice(e,1)}if(this.items[c.type]&&(typeof(this.items[c.type].remove)=="function")){this.items[c.type].remove(c,this)}};dhtmlXRibbon.prototype._removeGroup=function(e){var b=[],h,c=this._items[e.parentId],a=e.base.parentNode;for(var g=0;g<e.childIds.length;g++){b.push(this._items[e.childIds[g]])}for(var g=0;g<b.length;g++){this._removeItem(b[g])}delete this._items[e.id];if(e.base.parentNode){a.removeChild(e.base)}if(a.childNodes.length==0){a.parentNode.removeChild(a)}h=this._indexOf(c.childIds,e.id);if(h!=-1){c.childIds.splice(h,1)}if(this.items[e.type]&&(typeof(this.items[e.type].remove)=="function")){this.items[e.type].remove(e)}};dhtmlXRibbon.prototype._removeBlock=function(g){var a=[],e,b;for(var c=0;c<g.childIds.length;c++){a.push(this._items[g.childIds[c]])}for(var c=0;c<a.length;c++){this._removeItem(a[c])}delete this._items[g.id];g.base.parentNode.removeChild(g.base);if(g.parentId){b=this._items[g.parentId]}else{b=this}e=this._indexOf(b.childIds,g.id);if(e!=-1){b.childIds.splice(e,1)}};dhtmlXRibbon.prototype._removeTab=function(b,a){var g=[],e;for(var c=0;c<b.childIds.length;c++){g.push(this._items[b.childIds[c]])}for(var c=0;c<g.length;c++){this._removeBlock(g[c])}delete this._items[b.id];e=this._indexOf(this.childIds,b.id);if(e!=-1){this.childIds.splice(e,1)}};dhtmlXRibbon.prototype._skinCollection={dhx_skyblue:true,dhx_web:true,dhx_terrace:true,material:true};dhtmlXRibbon.prototype._setSkinForItems=function(c){var a,b;for(a in this._items){b=this._items[a];b.conf.skin=c;if(dhtmlXRibbon.prototype.items[b.type]&&typeof(dhtmlXRibbon.prototype.items[b.type].setSkin)=="function"){dhtmlXRibbon.prototype.items[b.type].setSkin(b,c)}}b=undefined,a=undefined};dhtmlXRibbon.prototype._setBlockText=function(a,b){a.conf.text=b;a.contForText.innerHTML=b;if(!b&&(b!=0)&&a.contForText.parentNode){a.contForText.parentNode.removeChild(a.contForText)}else{if(!a.contForText.parentNode){if(a.conf.text_pos=="top"){a.base.insertBefore(a.contForText,a.contForItems)}else{a.base.appendChild(a.contForText)}}}};dhtmlXRibbon.prototype.hide=function(c){var b=this._items[c];if(this.items[b.type]&&(typeof(this.items[b.type].hide)=="function")){if(this.items[b.type].hide(b)!=true){return}}if(b.type=="tab"){return}else{if(!/\s?dhxrb_item_hide/i.test(b.base.className)){b.base.className+=" dhxrb_item_hide"}}var a=this._items[b.parentId];if(a&&this.items[a.type]&&(typeof(this.items[a.type].hideChild)=="function")){this.items[a.type].hideChild(a,b)}};dhtmlXRibbon.prototype.show=function(c){var b=this._items[c];if(this.items[b.type]&&(typeof(this.items[b.type].show)=="function")){if(this.items[b.type].show(b)!=true){return}}if(b.type=="tab"){return}else{if(/\s?dhxrb_item_hide/i.test(b.base.className)){b.base.className=b.base.className.replace(/\s?dhxrb_item_hide/i,"")}}var a=this._items[b.parentId];if(a&&this.items[a.type]&&(typeof(this.items[a.type].showChild)=="function")){this.items[a.type].showChild(a,b)}};dhtmlXRibbon.prototype.check=function(c,b){b=dhx4.s2b(b);var a=this._items[c];if(a&&!a.conf.checked&&typeof(this.items[a.type].check)=="function"){this.items[a.type].check(a);if(b){this.callEvent("onCheck",[a.id,a.conf.checked])}}};dhtmlXRibbon.prototype.uncheck=function(c,b){b=dhx4.s2b(b);var a=this._items[c];if(a&&a.conf.checked&&typeof(this.items[a.type].uncheck)=="function"){this.items[a.type].uncheck(a);if(b){this.callEvent("onCheck",[a.id,a.conf.checked])}}};dhtmlXRibbon.prototype.isChecked=function(b){var a=this._items[b];if(a&&typeof(this.items[a.type].isChecked)=="function"){return this.items[a.type].isChecked(a)}};dhtmlXRibbon.prototype.disable=function(e,a){var b=this._items[e];if(this.items[b.type]&&(typeof(this.items[b.type].disable)=="function")){if(this.items[b.type].disable(b)!=true){return}}if(b.type=="tab"){return}else{if(b.type=="block"||b.type=="group"){for(var c=0;c<b.childIds.length;c++){this.disable(b.childIds[c])}}}if(!/\s?dhxrb_item_disable/i.test(b.base.className)){b.base.className+=" dhxrb_item_disable"}if(b.base.className.match(/dhxrb_highlight/gi)!=null){if(b.type=="buttonTwoState"){b.base.className=b.base.className.replace(/\s*dhxrb_highlight0/gi,"")}else{b.base.className=b.base.className.replace(/\s*dhxrb_highlight\d/gi,"")}}b.conf.disable=true};dhtmlXRibbon.prototype.enable=function(c,a){var b=this._items[c];if(this.items[b.type]&&(typeof(this.items[b.type].enable)=="function")){if(this.items[b.type].enable(b)!=true){return}}if(b.type=="tab"){return}else{if(b.type=="block"||b.type=="group"){for(q=0;q<b.childIds.length;q++){this.enable(b.childIds[q])}}}if(/\s?dhxrb_item_disable/i.test(b.base.className)){b.base.className=b.base.className.replace(/\s?dhxrb_item_disable/i,"")}b.conf.disable=false};dhtmlXRibbon.prototype.isEnabled=function(b){var a=this._items[b];if(this.items[a.type]&&typeof(this.items[a.type].isEnabled)=="function"){return this.items[a.type].isEnabled(a)}if(a.type=="tab"){return}else{return a.conf.disable!=true}};dhtmlXRibbon.prototype.isVisible=function(b){var a=this._items[b];if(this.items[a.type]&&(typeof(this.items[a.type].isVisible)=="function")){return this.items[a.type].isVisible(a)}if(a.type=="tab"){return}else{return !/\s?dhxrb_item_hide/i.test(a.base.className)}};dhtmlXRibbon.prototype.setItemState=function(e,b,c){b=dhx4.s2b(b);c=dhx4.s2b(c);var a=this._items[e];if(a&&(typeof(this.items[a.type].setState)=="function")){switch(a.type){case"buttonSegment":this.items[a.type].setState(a,this,c);break;default:this.items[a.type].setState(a,b,c)}}};dhtmlXRibbon.prototype.getItemState=function(b){var a=this._items[b];if(a&&(typeof(this.items[a.type].getState)=="function")){switch(a.type){case"buttonTwoState":case"buttonSegment":return this.items[a.type].getState(a);break}}return null};dhtmlXRibbon.prototype.setIconPath=function(a){this.conf.icons_path=a};dhtmlXRibbon.prototype.setIconset=function(a){this.conf.icons_css=(a=="awesome")};dhtmlXRibbon.prototype.removeItem=function(b){var a=this._items[b];if(a==null){return}switch(a.type){case"tab":break;case"block":this._removeBlock(a);break;case"group":this._removeGroup(a);break;default:this._removeItem(a)}};dhtmlXRibbon.prototype.setSkin=function(g){g=(typeof(g)=="string")?g.toLowerCase():"";if(this._skinCollection[g]!=true){return}var c,b=-1,a,e="dhtmlxribbon";c=this._base.className.match(/\S\w+/ig);if(c instanceof Array){for(a in this._skinCollection){if(b==-1){b=this._indexOf(c,e+"_"+a)}else{break}}b=(b==-1)?c.length:b}else{c=[];b=0}c[b]=e+"_"+g;this._base.className=c.join(" ");this.conf.skin=g;if(this._tabbar!=null){this._tabbar.setSkin(g)}this._setSkinForItems(g)};dhtmlXRibbon.prototype.tabs=function(a){if(this._tabbar instanceof dhtmlXTabBar){return this._tabbar.tabs(a)}else{return undefined}};dhtmlXRibbon.prototype.getItemType=function(b){var a=this._items[b];if(a){return a.type}else{return undefined}};dhtmlXRibbon.prototype.getValue=function(c){var a=this._items[c],b=undefined;if(a&&this.items[a.type]&&typeof(this.items[a.type].getValue)=="function"){b=this.items[a.type].getValue(a)}return b};dhtmlXRibbon.prototype.setValue=function(e,b,c){var a=this._items[e];c=(c===false?false:true);if(a&&this.items[a.type]&&typeof(this.items[a.type].setValue)=="function"){this.items[a.type].setValue(a,b,c)}};dhtmlXRibbon.prototype.getItemText=function(b){var a=this._items[b];if(!a){return null}else{if(a.type=="tab"){return this.tabs(a.id).getText()}else{if(a.type=="block"){return this.items.button.getText(a)}else{if(this.items[a.type]&&typeof(this.items[a.type].getText)=="function"){return this.items[a.type].getText(a)}else{return null}}}}};dhtmlXRibbon.prototype.setItemText=function(c,b){var a=this._items[c];if(!a){return}else{if(a.type=="tab"){this.tabs(a.id).setText(b)}else{if(a.type=="block"){this._setBlockText(a,b)}else{if(this.items[a.type]&&typeof(this.items[a.type].setText)=="function"){this.items[a.type].setText(a,b)}}}}};dhtmlXRibbon.prototype.setItemOptionText=function(e,c,b){var a=this._items[e];if(a.type=="buttonSelect"){this.items[a.type].setOptionText(a,c,b)}};dhtmlXRibbon.prototype.getItemOptionText=function(c,b){var a=this._items[c];if(a.type=="buttonSelect"){return this.items[a.type].getOptionText(a,b)}return null};dhtmlXRibbon.prototype.setItemImage=function(c,a){var b=this._items[c];if(b!=null&&this.items[b.type]!=null&&typeof(this.items[b.type].setImage)=="function"){this.items[b.type].setImage(b,a)}};dhtmlXRibbon.prototype.setItemImageDis=function(c,a){var b=this._items[c];if(b!=null&&this.items[b.type]!=null&&typeof(this.items[b.type].setImageDis)=="function"){this.items[b.type].setImageDis(b,a)}};dhtmlXRibbon.prototype.getCombo=function(b){var a=this._items[b];if(a!=null&&a.type=="buttonCombo"){return a.combo}return null};(function(){var a=dhtmlXRibbon.prototype.items;a.buttonTwoState=a._extends(a.buttonTwoState,a.button);a.buttonSelect=a._extends(a.buttonSelect,a.buttonTwoState);a.buttonSegment=a._extends(a.buttonSegment,a.buttonTwoState)})();if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype._createNode_ribbon=function(g,b,e,a,c){if(typeof(c)!="undefined"){g=c}else{g=document.createElement("DIV");g.className="dhx_cell_ribbon_"+(this.conf.borders?"def":"no_borders");g.appendChild(document.createElement("DIV"))}this.cell.insertBefore(g,this.cell.childNodes[this.conf.idx.cont]);this.conf.ofs_nodes.t.ribbon=true;this._updateIdx();this._adjustCont(this._idd);return g};dhtmlXCellObject.prototype.attachRibbon=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.callEvent("_onBeforeContentAttach",["ribbon"]);if(typeof(a)=="undefined"){a={}}if(typeof(a.skin)=="undefined"){a.skin=this.conf.skin}a.parent=this._attachObject("ribbon").firstChild;this.dataNodes.ribbon=new dhtmlXRibbon(a);var b=this;this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){b._adjustCont(b._idd)});this._adjustCont();a.parent=null;a=null;this.callEvent("_onContentAttach",[]);return this.dataNodes.ribbon};dhtmlXCellObject.prototype.detachRibbon=function(){if(this.dataNodes.ribbon==null){return}if(typeof(this.dataNodes.ribbon.unload)=="function"){this.dataNodes.ribbon.unload()}this.dataNodes.ribbon=null;delete this.dataNodes.ribbon;this._detachObject("ribbon")};dhtmlXCellObject.prototype.showRibbon=function(){this._mtbShowHide("ribbon","")};dhtmlXCellObject.prototype.hideRibbon=function(){this._mtbShowHide("ribbon","none")};dhtmlXCellObject.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon}}function dhtmlXToolbarObject(b,c){var a=this;this.conf={skin:(c||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtoolbar")||"material"),align:"left",align_autostart:"left",icons_path:"",icons_css:false,iconSize:18,sel_ofs_x:0,sel_ofs_y:0,xml_autoload:null,items_autoload:null,cssShadow:(dhx4.isIE6||dhx4.isIE7||dhx4.isIE8?"":" dhx_toolbar_shadow")};if(typeof(b)=="object"&&b!=null&&typeof(b.tagName)=="undefined"){if(b.icons_path!=null||b.icon_path!=null){this.conf.icons_path=(b.icons_path||b.icon_path)}if(b.icons_size!=null){this.conf.icons_size_autoload=b.icons_size}if(b.iconset!=null){this.conf.icons_css=(b.iconset=="awesome")}if(b.json!=null){this.conf.json_autoload=b.json}if(b.xml!=null){this.conf.xml_autoload=b.xml}if(b.onload!=null){this.conf.onload_autoload=b.onload}if(b.onclick!=null||b.onClick!=null){this.conf.auto_onclick=(b.onclick||b.onClick)}if(b.items!=null){this.conf.items_autoload=b.items}if(b.skin!=null){this.conf.skin=b.skin}if(b.align!=null){this.conf.align_autostart=b.align}b=b.parent}this.cont=(typeof(b)!="object")?document.getElementById(b):b;while(this.cont.childNodes.length>0){this.cont.removeChild(this.cont.childNodes[0])}b=null;this.cont.dir="ltr";this.base=document.createElement("DIV");this.base.className="dhxtoolbar_float_left";this.cont.appendChild(this.base);this.cont.ontouchstart=function(g){g=g||event;if((String(g.target.tagName||"").toLowerCase()=="input")){return true}if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}g.cancelBubble=true;return false};this.setSkin(this.conf.skin);this.objPull={};this.anyUsed=null;this._genStr=function(e){var g="dhxId_";var j="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var h=0;h<e;h++){g+=j.charAt(Math.round(Math.random()*(j.length-1)))}return g};this.rootTypes=new Array("button","buttonSelect","buttonTwoState","separator","label","slider","text","buttonInput");this.idPrefix=this._genStr(12);window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson","toolbar",{struct:true});window.dhx4._eventable(this);this._getObj=function(j,e){var g=null;for(var h=0;h<j.childNodes.length;h++){if(j.childNodes[h].tagName!=null){if(String(j.childNodes[h].tagName).toLowerCase()==String(e).toLowerCase()){g=j.childNodes[h]}}}return g};this._addImgObj=function(g){var e=document.createElement(this.conf.icons_css==true?"I":"IMG");if(g.childNodes.length>0){g.insertBefore(e,g.childNodes[0])}else{g.appendChild(e)}return e};this._setItemImage=function(j,g,e){if(e==true){j.imgEn=g}else{j.imgDis=g}if((!j.state&&e==true)||(j.state&&e==false)){return}if(this.conf.icons_css==true){var h=this._getObj(j.obj,"i");if(h==null){h=this._addImgObj(j.obj)}h.className=this.conf.icons_path+g}else{var h=this._getObj(j.obj,"img");if(h==null){h=this._addImgObj(j.obj)}h.src=this.conf.icons_path+g}};this._clearItemImage=function(h,e){if(e==true){h.imgEn=""}else{h.imgDis=""}if((!h.state&&e==true)||(h.state&&e==false)){return}var g=this._getObj(h.obj,(this.conf.icons_css?"i":"img"));if(g!=null){g.parentNode.removeChild(g)}};this._setItemText=function(e,h){var g=this._getObj(e.obj,"div");if(h==null||h.length==0){if(g!=null){g.parentNode.removeChild(g)}return}if(g==null){g=document.createElement("DIV");g.className="dhxtoolbar_text";e.obj.appendChild(g)}g.innerHTML=h};this._getItemText=function(e){var g=this._getObj(e.obj,"div");if(g!=null){return g.innerHTML}return""};this._enableItem=function(g){if(g.state){return}g.state=true;if(this.objPull[g.id]["type"]=="buttonTwoState"&&this.objPull[g.id]["obj"]["pressed"]==true){g.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres";g.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"}else{g.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";g.obj.renderAs=g.obj.className}if(g.arw){g.arw.className=String(g.obj.className).replace("btn","arw")}var e=this._getObj(g.obj,(this.conf.icons_css?"i":"img"));if(g.imgEn!=""){if(e==null){e=this._addImgObj(g.obj)}e[this.conf.icons_css?"className":"src"]=this.conf.icons_path+g.imgEn}else{if(e!=null){e.parentNode.removeChild(e)}}};this._disableItem=function(g){if(!g.state){return}g.state=false;g.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.objPull[g.id]["type"]=="buttonTwoState"&&g.obj.pressed?"pres_":"")+"dis";g.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";if(g.arw){g.arw.className=String(g.obj.className).replace("btn","arw")}var e=this._getObj(g.obj,(this.conf.icons_css?"i":"img"));if(g.imgDis!=""){if(e==null){e=this._addImgObj(g.obj)}e[this.conf.icons_css?"className":"src"]=this.conf.icons_path+g.imgDis}else{if(e!=null){e.parentNode.removeChild(e)}}if(g.polygon!=null){if(g.polygon.style.display!="none"){window.dhx4.zim.clear(g.polygon._idd);g.polygon.style.display="none";if(g.polygon._ie6cover){g.polygon._ie6cover.style.display="none"}if(this.conf.skin=="dhx_terrace"){this._improveTerraceButtonSelect(g.id,true)}this.callEvent("onButtonSelectHide",[g.obj.idd])}}this.anyUsed=null};this.clearAll=function(){for(var e in this.objPull){this._removeItem(String(e).replace(this.idPrefix,""))}this._spacer=null};this._doOnClick=function(g){if(a&&a.forEachItem){a.forEachItem(function(h){if(a.objPull[a.idPrefix+h].type=="buttonSelect"){var e=a.objPull[a.idPrefix+h];if(e.arw._skip===true){e.arw._skip=false}else{if(e.polygon.style.display!="none"){e.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";e.obj.className=e.obj.renderAs;e.arw.className=String(e.obj.renderAs).replace("btn","arw");a.anyUsed=null;a.conf.touch_id=null;window.dhx4.zim.clear(e.polygon._idd);e.polygon.style.display="none";if(e.polygon._ie6cover){e.polygon._ie6cover.style.display="none"}if(a.conf.skin=="dhx_terrace"){a._improveTerraceButtonSelect(e.id,true)}a.callEvent("onButtonSelectHide",[e.obj.idd])}}}})}};if(typeof(window.addEventListener)!="undefined"){window.addEventListener("mousedown",this._doOnClick,false);window.addEventListener("touchstart",this._doOnClick,false)}else{document.body.attachEvent("onmousedown",this._doOnClick)}if(this.conf.icons_size_autoload!=null){this.setIconSize(this.conf.icons_size_autoload);this.conf.icons_size_autoload=null}if(this.conf.items_autoload!=null){this.loadStruct(this.conf.items_autoload,this.conf.onload_autoload);this.conf.items_autoload=null}else{if(this.conf.json_autoload!=null){this.loadStruct(this.conf.json_autoload,this.conf.onload_autoload);this.conf.json_autoload=null}else{if(this.conf.xml_autoload!=null){this.loadStruct(this.conf.xml_autoload,this.conf.onload_autoload);this.conf.xml_autoload=null}}}if(this.conf.align_autostart!=this.conf.align){this.setAlign(this.conf.align_autostart);this.conf.align_autostart=null}if(typeof(this.conf.auto_onclick)=="function"){this.attachEvent("onClick",this.conf.auto_onclick)}else{if(typeof(this.conf.auto_onclick)=="string"&&typeof(window[this.conf.auto_onclick])=="function"){this.attachEvent("onClick",window[this.conf.auto_onclick])}}return this}dhtmlXToolbarObject.prototype.addSpacer=function(c){var b=this.idPrefix+c;if(this._spacer!=null){if(this._spacer.idd==c){return}if(this._spacer==this.objPull[b].obj.parentNode){var a=true;while(a){var j=this._spacer.childNodes[0].idd;this.base.appendChild(this._spacer.childNodes[0]);if(j==c||this._spacer.childNodes.length==0){if(this.objPull[b].arw!=null){this.base.appendChild(this.objPull[b].arw)}a=false}}this._spacer.idd=c;this._fixSpacer();return}if(this.base==this.objPull[b].obj.parentNode){var a=true;var h=(this.objPull[b].arw!=null);while(a){var e=this.base.childNodes.length-1;if(h==true){if(this.base.childNodes[e]==this.objPull[b].arw){a=false}}if(this.base.childNodes[e].idd==c){a=false}if(a){if(this._spacer.childNodes.length>0){this._spacer.insertBefore(this.base.childNodes[e],this._spacer.childNodes[0])}else{this._spacer.appendChild(this.base.childNodes[e])}}}this._spacer.idd=c;this._fixSpacer();return}}else{var g=null;for(var e=0;e<this.base.childNodes.length;e++){if(this.base.childNodes[e]==this.objPull[this.idPrefix+c].obj){g=e;if(this.objPull[this.idPrefix+c].arw!=null){g=e+1}}}if(g!=null){this._spacer=document.createElement("DIV");this._spacer.className=(this.conf.align=="right"?" dhxtoolbar_float_left":" dhxtoolbar_float_right");this._spacer.dir="ltr";this._spacer.idd=c;while(this.base.childNodes.length>g+1){this._spacer.appendChild(this.base.childNodes[g+1])}this.cont.appendChild(this._spacer);this._fixSpacer()}}if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype.removeSpacer=function(){if(!this._spacer){return}while(this._spacer.childNodes.length>0){this.base.appendChild(this._spacer.childNodes[0])}this._spacer.parentNode.removeChild(this._spacer);this._spacer=null;if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._fixSpacer=function(){if(typeof(window.addEventListener)=="undefined"&&this._spacer!=null){this._spacer.style.borderLeft="1px solid #a4bed4";var a=this._spacer;window.setTimeout(function(){a.style.borderLeft="0px solid #a4bed4";a=null},1)}};dhtmlXToolbarObject.prototype.getType=function(c){var e=this.getParentId(c);if(e!=null){var b=null;var a=this.objPull[this.idPrefix+e]._listOptions[c];if(a!=null){if(a.sep!=null){b="buttonSelectSeparator"}else{b="buttonSelectButton"}}return b}else{if(this.objPull[this.idPrefix+c]==null){return null}return this.objPull[this.idPrefix+c]["type"]}};dhtmlXToolbarObject.prototype.getTypeExt=function(b){var a=this.getType(b);if(a=="buttonSelectButton"||a=="buttonSelectSeparator"){if(a=="buttonSelectButton"){a="button"}else{a="separator"}return a}return null};dhtmlXToolbarObject.prototype.inArray=function(c,b){for(var a=0;a<c.length;a++){if(c[a]==b){return true}}return false};dhtmlXToolbarObject.prototype.getParentId=function(g){var h=null;for(var e in this.objPull){if(this.objPull[e]._listOptions){for(var c in this.objPull[e]._listOptions){if(c==g){h=String(e).replace(this.idPrefix,"")}}}}return h};dhtmlXToolbarObject.prototype._addItem=function(a,b){if(typeof(a.text)=="string"){a.text=window.dhx4.trim(a.text);if(a.text.length==0){a.text=null}}this._addItemToStorage(a,b);if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype.addButton=function(g,e,b,a,c){this._addItem({id:g,type:"button",text:b,img:a,imgdis:c},e)};dhtmlXToolbarObject.prototype.addText=function(c,b,a){this._addItem({id:c,type:"text",text:a},b)};dhtmlXToolbarObject.prototype.addButtonSelect=function(e,l,o,a,b,m,j,s,g,h){var r=[];for(var c=0;c<a.length;c++){var n={};if(a[c] instanceof Array){n.id=a[c][0];n.type=(a[c][1]=="obj"?"button":"separator");n.text=(a[c][2]||null);n.img=(a[c][3]||null)}else{if(a[c] instanceof Object&&a[c]!=null&&typeof(a[c].id)!="undefined"&&typeof(a[c].type)!="undefined"){n.id=a[c].id;n.type=(a[c].type=="obj"?"button":"separator");n.text=a[c].text;n.img=a[c].img}}r.push(n)}this._addItem({id:e,type:"buttonSelect",text:o,img:b,imgdis:m,renderSelect:j,openAll:s,options:r,maxOpen:g,mode:h},l)};dhtmlXToolbarObject.prototype.addButtonTwoState=function(g,e,b,a,c){this._addItem({id:g,type:"buttonTwoState",img:a,imgdis:c,text:b},e)};dhtmlXToolbarObject.prototype.addSeparator=function(b,a){this._addItem({id:b,type:"separator"},a)};dhtmlXToolbarObject.prototype.addSlider=function(b,j,g,e,m,c,h,a,l){this._addItem({id:b,type:"slider",length:g,valueMin:e,valueMax:m,valueNow:c,textMin:h,textMax:a,toolTip:l},j)};dhtmlXToolbarObject.prototype.addInput=function(e,c,b,a){this._addItem({id:e,type:"buttonInput",value:b,width:a},c)};dhtmlXToolbarObject.prototype.forEachItem=function(c){for(var b in this.objPull){if(this.inArray(this.rootTypes,this.objPull[b]["type"])){c(this.objPull[b]["id"].replace(this.idPrefix,""))}}};(function(){var h="isVisible,enableItem,disableItem,isEnabled,setItemText,getItemText,setItemToolTip,getItemToolTip,getInput,setItemImage,setItemImageDis,clearItemImage,clearItemImageDis,setItemState,getItemState,setItemToolTipTemplate,getItemToolTipTemplate,setValue,getValue,setMinValue,getMinValue,setMaxValue,getMaxValue,setWidth,getWidth,setMaxOpen".split(",");var c=[false,"","",false,"","","","","","","","","",false,"","","",null,"",[null,null],"",[null,null],"",null];var b=function(j,l){return function(o,n,m){o=this.idPrefix+o;if(this.objPull[o][j]!=null){return this.objPull[o][j].call(this.objPull[o],n,m)}else{return l}}};for(var g=0;g<h.length;g++){var a=h[g];var e=c[g];dhtmlXToolbarObject.prototype[a]=b(a,e)}})();dhtmlXToolbarObject.prototype.showItem=function(a){a=this.idPrefix+a;if(this.objPull[a]!=null&&this.objPull[a].showItem!=null){this.objPull[a].showItem();if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}}};dhtmlXToolbarObject.prototype.hideItem=function(a){a=this.idPrefix+a;if(this.objPull[a]!=null&&this.objPull[a].hideItem!=null){this.objPull[a].hideItem();if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}}};dhtmlXToolbarObject.prototype.getPosition=function(a){return this._getPosition(a)};dhtmlXToolbarObject.prototype._getPosition=function(g,c){if(this.objPull[this.idPrefix+g]==null){return null}var e=null;var a=0;for(var b=0;b<this.base.childNodes.length;b++){if(this.base.childNodes[b].idd!=null){if(this.base.childNodes[b].idd==g){e=a}a++}}if(!e&&this._spacer!=null){for(var b=0;b<this._spacer.childNodes.length;b++){if(this._spacer.childNodes[b].idd!=null){if(this._spacer.childNodes[b].idd==g){e=a}a++}}}return e};dhtmlXToolbarObject.prototype.setPosition=function(a,b){this._setPosition(a,b)};dhtmlXToolbarObject.prototype._setPosition=function(g,e){if(this.objPull[this.idPrefix+g]==null){return}var a=null;if(this._spacer){a=this._spacer.idd;this.removeSpacer()}if(isNaN(e)){e=this.base.childNodes.length}if(e<0){e=0}var c=this.objPull[this.idPrefix+g];this.base.removeChild(c.obj);if(c.arw){this.base.removeChild(c.arw)}var b=this._getIdByPosition(e,true);if(b[0]==null){this.base.appendChild(c.obj);if(c.arw){this.base.appendChild(c.arw)}}else{this.base.insertBefore(c.obj,this.base.childNodes[b[1]]);if(c.arw){this.base.insertBefore(c.arw,this.base.childNodes[b[1]+1])}}if(a!=null){this.addSpacer(a)}};dhtmlXToolbarObject.prototype._getIdByPosition=function(h,b){var g=null;var a=0;var c=0;for(var e=0;e<this.base.childNodes.length;e++){if(this.base.childNodes[e]["idd"]!=null&&g==null){if((a++)==h){g=this.base.childNodes[e]["idd"]}}if(g==null){c++}}c=(g==null?null:c);return(b==true?new Array(g,c):g)};dhtmlXToolbarObject.prototype.removeItem=function(a){this._removeItem(a);if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._removeItem=function(g){var c=this.getType(g);g=this.idPrefix+g;var e=this.objPull[g];if({button:1,buttonTwoState:1}[c]==1){if(window.dhx4.isIE){e.obj.onselectstart=null}this._evs.clear.apply(e,[e.obj.evs,e.obj]);for(var b in e.obj){if(typeof(e.obj[b])=="function"){e.obj[b]=null}}e.obj.parentNode.removeChild(e.obj);e.obj=null;for(var b in e){e[b]=null}}if(c=="buttonSelect"){for(var b in e._listOptions){this.removeListOption(g,b)}e._listOptions=null;if(e.polygon._ie6cover){document.body.removeChild(e.polygon._ie6cover);e.polygon._ie6cover=null}e.p_tbl.removeChild(e.p_tbody);e.polygon.removeChild(e.p_tbl);e.polygon.onselectstart=null;document.body.removeChild(e.polygon);if(window.dhx4.isIE){e.obj.onselectstart=null;e.arw.onselectstart=null}this._evs.clear.apply(e,[e.obj.evs,e.obj]);this._evs.clear.apply(e,[e.arw.evs,e.arw]);for(var b in e.obj){if(typeof(e.obj[b])=="function"){e.obj[b]=null}}e.obj.parentNode.removeChild(e.obj);e.obj=null;for(var b in e.arw){if(typeof(e.arw[b])=="function"){e.arw[b]=null}}e.arw.parentNode.removeChild(e.arw);e.arw=null;for(var b in e){e[b]=null}}if(c=="buttonInput"){e.obj.childNodes[0].onkeydown=null;e.obj.removeChild(e.obj.childNodes[0]);e.obj.w=null;e.obj.idd=null;e.obj.parentNode.removeChild(e.obj);e.obj=null;e.id=null;e.type=null;e.enableItem=null;e.disableItem=null;e.isEnabled=null;e.showItem=null;e.hideItem=null;e.isVisible=null;e.setItemToolTip=null;e.getItemToolTip=null;e.setWidth=null;e.getWidth=null;e.setValue=null;e.getValue=null;e.setItemText=null;e.getItemText=null}if(c=="slider"){if(window.dhx4.isIPad){document.removeEventListener("touchmove",pen._doOnMouseMoveStart,false);document.removeEventListener("touchend",pen._doOnMouseMoveEnd,false)}else{if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousemove",e.pen._doOnMouseMoveStart,false);window.removeEventListener("mouseup",e.pen._doOnMouseMoveEnd,false)}else{document.body.detachEvent("onmousemove",e.pen._doOnMouseMoveStart);document.body.detachEvent("onmouseup",e.pen._doOnMouseMoveEnd)}}e.pen.allowMove=null;e.pen.initXY=null;e.pen.maxX=null;e.pen.minX=null;e.pen.nowX=null;e.pen.newNowX=null;e.pen.valueMax=null;e.pen.valueMin=null;e.pen.valueNow=null;e.pen._definePos=null;e.pen._detectLimits=null;e.pen._doOnMouseMoveStart=null;e.pen._doOnMouseMoveEnd=null;e.pen.onmousedown=null;e.obj.removeChild(e.pen);e.pen=null;e.label.tip=null;document.body.removeChild(e.label);e.label=null;e.obj.onselectstart=null;e.obj.idd=null;while(e.obj.childNodes.length>0){e.obj.removeChild(e.obj.childNodes[0])}e.obj.parentNode.removeChild(e.obj);e.obj=null;e.id=null;e.type=null;e.state=null;e.enableItem=null;e.disableItem=null;e.isEnabled=null;e.setItemToolTipTemplate=null;e.getItemToolTipTemplate=null;e.setMaxValue=null;e.setMinValue=null;e.getMaxValue=null;e.getMinValue=null;e.setValue=null;e.getValue=null;e.showItem=null;e.hideItem=null;e.isVisible=null}if(c=="separator"){e.obj.onselectstart=null;e.obj.idd=null;e.obj.parentNode.removeChild(e.obj);e.obj=null;e.id=null;e.type=null;e.showItem=null;e.hideItem=null;e.isVisible=null}if(c=="text"){e.obj.onselectstart=null;e.obj.idd=null;e.obj.parentNode.removeChild(e.obj);e.obj=null;e.id=null;e.type=null;e.showItem=null;e.hideItem=null;e.isVisible=null;e.setWidth=null;e.setItemText=null;e.getItemText=null}c=null;e=null;this.objPull[g]=null;delete this.objPull[g]};(function(){var e="addListOption,removeListOption,showListOption,hideListOption,isListOptionVisible,enableListOption,disableListOption,isListOptionEnabled,setListOptionPosition,getListOptionPosition,setListOptionText,getListOptionText,setListOptionToolTip,getListOptionToolTip,setListOptionImage,getListOptionImage,clearListOptionImage,forEachListOption,getAllListOptions,setListOptionSelected,getListOptionSelected".split(",");var b=function(g){return function(o,j,h,n,m,l){o=this.idPrefix+o;if(this.objPull[o]==null){return}if(this.objPull[o]["type"]!="buttonSelect"){return}return this.objPull[o][g].call(this.objPull[o],j,h,n,m,l)}};for(var c=0;c<e.length;c++){var a=e[c];dhtmlXToolbarObject.prototype[a]=b(a)}})();dhtmlXToolbarObject.prototype._rtlParseBtn=function(b,a){return b+a};dhtmlXToolbarObject.prototype._separatorObject=function(a,c,b){this.id=a.idPrefix+c;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_sep";this.obj.style.display=(b.hidden!=null?"none":"");this.obj.idd=String(c);this.obj.title=(b.title||"");this.obj.onselectstart=function(g){g=g||event;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}};this.obj.ontouchstart=function(g){g=g||event;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}g.cancelBubble=true;return false};a.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};return this};dhtmlXToolbarObject.prototype._textObject=function(a,c,b){this.id=a.idPrefix+c;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_text";this.obj.style.display=(b.hidden!=null?"none":"");this.obj.idd=String(c);this.obj.title=(b.title||"");this.obj.onselectstart=function(g){g=g||event;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}};this.obj.ontouchstart=function(g){g=g||event;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}g.cancelBubble=true;return false};this.obj.innerHTML=(b.text||"");a.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(e){this.obj.innerHTML=e};this.getItemText=function(){return this.obj.innerHTML};this.setWidth=function(e){this.obj.style.width=e+"px"};this.setItemToolTip=function(e){this.obj.title=e};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._buttonObject=function(c,g,e){this.id=c.idPrefix+g;this.state=(e.enabled!=null?false:true);this.imgEn=(e.img||"");this.imgDis=(e.imgdis||"");this.img=(this.state?(this.imgEn!=""?this.imgEn:""):(this.imgDis!=""?this.imgDis:""));this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=(e.hidden!=null?"none":"");this.obj.allowClick=false;this.obj.extAction=(e.action||null);this.obj.renderAs=this.obj.className;this.obj.idd=String(g);this.obj.title=(e.title||"");this.obj.pressed=false;var a=(c.conf.icons_css?"<i class='"+c.conf.icons_path+this.img+"'></i>":"<img src='"+c.conf.icons_path+this.img+"'>");this.obj.innerHTML=c._rtlParseBtn((this.img!=""?a:""),(e.text!=null?"<div class='dhxtoolbar_text'>"+e.text+"</div>":""));c.base.appendChild(this.obj);if(window.dhx4.isIE){this.obj.onselectstart=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}return false}}var b=this;this._doOnMouseOver=function(h){h=h||event;if(b.state==false||b.obj.pressed==true||b.obj.over==true){return}if(b.obj.className.match(/dhxtoolbar_btn_over/gi)==null){b.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over"}b.obj.over=true};this._doOnMouseOut=function(h){h=h||event;if(b.state==false){return}if(b.obj.className.match(/dhxtoolbar_btn_over/gi)!=null){b.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def"}b.obj.over=b.obj.pressed=false};this._doOnMouseDown=function(h){h=h||event;if(h.type=="touchstart"){if(h.preventDefault){h.preventDefault()}h.cancelBubble=true;if(c.conf.touch_id!=null&&c.conf.touch_id!=b.id){return}c.conf.touch_id=b.id}if(b.state==false){return}if(b.obj.className.match(/dhxtoolbar_btn_pres/gi)==null){b.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres"}b.obj.pressed=true};this._doOnMouseUp=function(h){h=h||event;if(h.type=="touchend"){if(h.preventDefault){h.preventDefault()}h.cancelBubble=true;if(c.conf.touch_id==b.id){c.conf.touch_id=null}}if(b.state==false||b.obj.pressed==false){return}if(b.obj.className.match(/dhxtoolbar_btn_pres/gi)!=null){b.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(b.obj.over?"over":"def")}b.obj.pressed=false;if(b.obj.extAction){window.setTimeout(function(){try{if(b&&b.obj){window[b.obj.extAction](b.id)}}catch(j){}},1)}c.callEvent("onClick",[b.obj.idd.replace(c.idPrefix,"")])};this.obj.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",mouseup:"_doOnMouseUp",touchstart:"_doOnMouseDown",touchend:"_doOnMouseUp"};c._evs.add.apply(this,[this.obj.evs,this.obj]);this.enableItem=function(){c._enableItem(this)};this.disableItem=function(){c._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(h){c._setItemText(this,h)};this.getItemText=function(){return c._getItemText(this)};this.setItemImage=function(h){c._setItemImage(this,h,true)};this.clearItemImage=function(){c._clearItemImage(this,true)};this.setItemImageDis=function(h){c._setItemImage(this,h,false)};this.clearItemImageDis=function(){c._clearItemImage(this,false)};this.setItemToolTip=function(h){this.obj.title=h};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._buttonSelectObject=function(e,j,h){this.id=e.idPrefix+j;this.state=(h.enabled!=null?(h.enabled=="true"?true:false):true);this.imgEn=(h.img||"");this.imgDis=(h.imgdis||"");this.img=(this.state?(this.imgEn!=""?this.imgEn:""):(this.imgDis!=""?this.imgDis:""));this.mode=(h.mode||"button");if(this.mode=="select"){this.openAll=true;this.renderSelect=false;if(!h.text||h.text.length==0){h.text="&nbsp;"}}else{this.openAll=(window.dhx4.s2b(h.openAll)==true);this.renderSelect=(h.renderSelect==null?true:window.dhx4.s2b(h.renderSelect))}this.maxOpen=(!isNaN(h.maxOpen?h.maxOpen:"")?h.maxOpen:null);this._maxOpenTest=function(){if(!isNaN(this.maxOpen)){if(!e._sbw){var m=document.createElement("DIV");m.className="dhxtoolbar_maxopen_test";document.body.appendChild(m);var l=document.createElement("DIV");l.className="dhxtoolbar_maxopen_test2";m.appendChild(l);e._sbw=m.offsetWidth-l.offsetWidth;m.removeChild(l);l=null;document.body.removeChild(m);m=null}}};this._maxOpenTest();this.obj=document.createElement("DIV");this.obj.allowClick=false;this.obj.extAction=(h.action||null);this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=(h.hidden!=null?"none":"");this.obj.renderAs=this.obj.className;this.obj.onselectstart=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}};this.obj.idd=String(j);this.obj.title=(h.title||"");this.obj.pressed=false;this.callEvent=false;var b=(e.conf.icons_css?"<i class='"+e.conf.icons_path+this.img+"'></i>":"<img src='"+e.conf.icons_path+this.img+"'>");this.obj.innerHTML=e._rtlParseBtn((this.img!=""?b:""),(h.text!=null?"<div class='dhxtoolbar_text'>"+h.text+"</div>":""));e.base.appendChild(this.obj);this.arw=document.createElement("DIV");this.arw.className="dhx_toolbar_arw dhxtoolbar_btn_"+(this.state?"def":"dis");this.arw.style.display=this.obj.style.display;this.arw.innerHTML="<div class='arwimg'>&nbsp;</div>";this.arw.title=this.obj.title;this.arw.onselectstart=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}};e.base.appendChild(this.arw);var a=this;if(window.dhx4.isIE){this.arw.onselectstart=this.obj.onselectstart=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}return false}}this._doOnMouseOver=function(l){l=l||event;if(a.state==false||a.obj.over==true||e.anyUsed==a.obj.idd){return}if(a.obj.className.match(/dhxtoolbar_btn_over/gi)==null){a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over";a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_over"}a.obj.over=true};this._doOnMouseOut=function(l){l=l||event;if(a.state==false||e.anyUsed==a.obj.idd||e.anyUsed==a.obj.idd){return}if(a.obj.className.match(/dhxtoolbar_btn_over/gi)!=null){a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def"}a.obj.over=a.obj.pressed=false};this._doOnMouseDown=function(m){m=m||event;if(m.type=="touchstart"){if(m.preventDefault){m.preventDefault()}m.cancelBubble=true;if(e.conf.touch_id!=null&&e.conf.touch_id!=a.id){return}e.conf.touch_id=a.id}if(a.state==false){return}if(e.anyUsed==a.obj.idd){if(a.obj.over==true){a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over";a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_over"}else{a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def"}a._hidePoly(true);e.anyUsed=null}else{var l=(m.target||m.srcElement);if(a.openAll==true||l==a.arw||l.parentNode==a.arw){if(m.type=="touchstart"){a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over"}a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres";a.arw._skip=true;a._showPoly(true);e.anyUsed=a.obj.idd}else{if(a.obj.className.match(/dhxtoolbar_btn_pres/gi)==null){a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres";a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres"}a.obj.pressed=true}}};this._doOnMouseUp=function(m){m=m||event;if(m.type=="touchend"){if(a.polygon.style.display==""){return}if(m.preventDefault){m.preventDefault()}m.cancelBubble=true;if(e.conf.touch_id==a.id){e.conf.touch_id=null}}if(a.state==false||a.obj.pressed==false){return}if(a.obj.className.match(/dhxtoolbar_btn_pres/gi)!=null){a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(a.obj.over?"over":"def");a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_"+(a.obj.over?"over":"def")}if(this.extAction){var l=this;window.setTimeout(function(){try{window[l.extAction](j)}catch(n){}l=null},1)}e.callEvent("onClick",[a.obj.idd.replace(e.idPrefix,"")])};this.arw.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",touchstart:"_doOnMouseDown"};e._evs.add.apply(this,[this.arw.evs,this.arw]);this.obj.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",mouseup:"_doOnMouseUp",touchstart:"_doOnMouseDown",touchend:"_doOnMouseUp"};e._evs.add.apply(this,[this.obj.evs,this.obj]);this._showPoly=function(u){if(e.anyUsed!=null){if(e.objPull[e.idPrefix+e.anyUsed].type=="buttonSelect"){var t=e.objPull[e.idPrefix+e.anyUsed];if(t.polygon.style.display!="none"){t.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";t.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def";t.obj.over=false;window.dhx4.zim.clear(t.polygon._idd);t.polygon.style.display="none";if(t.polygon._ie6cover){t.polygon._ie6cover.style.display="none"}if(e.conf.skin=="dhx_terrace"){e._improveTerraceButtonSelect(t.id,true)}e.callEvent("onButtonSelectHide",[t.obj.idd])}}}this.polygon.style.top="0px";this.polygon.style.visibility="hidden";this.polygon.style.zIndex=window.dhx4.zim.reserve(this.polygon._idd);this.polygon.style.display="";if(e.conf.skin=="dhx_terrace"){e._improveTerraceButtonSelect(this.id,false)}this._fixMaxOpenHeight(this.maxOpen||null);e._autoDetectVisibleArea();var n=window.dhx4.absTop(this.obj)+this.obj.offsetHeight+e.conf.sel_ofs_y;var r=this.polygon.offsetHeight;if(n+r>e.tY2){var l=(this.maxOpen!=null?Math.floor((e.tY2-n)/22):0);if(l>=1){this._fixMaxOpenHeight(l)}else{n=window.dhx4.absTop(this.obj)-r-e.conf.sel_ofs_y;if(n<0){n=0}}}this.polygon.style.top=n+"px";if(e.rtl){this.polygon.style.left=window.dhx4.absLeft(this.obj)+this.obj.offsetWidth-this.polygon.offsetWidth+e.conf.sel_ofs_x+"px"}else{var o=document.body.scrollLeft;var m=o+(window.innerWidth||document.body.clientWidth);var s=window.dhx4.absLeft(this.obj)+e.conf.sel_ofs_x;if(s+this.polygon.offsetWidth>m){s=window.dhx4.absLeft(this.arw)+this.arw.offsetWidth-this.polygon.offsetWidth}this.polygon.style.left=Math.max(s,5)+"px"}this.polygon.style.visibility="visible";if(this.polygon._ie6cover){this.polygon._ie6cover.style.left=this.polygon.style.left;this.polygon._ie6cover.style.top=this.polygon.style.top;this.polygon._ie6cover.style.width=this.polygon.offsetWidth+"px";this.polygon._ie6cover.style.height=this.polygon.offsetHeight+"px";this.polygon._ie6cover.style.display=""}if(u){e.callEvent("onButtonSelectShow",[this.obj.idd])}};this._hidePoly=function(l){window.dhx4.zim.clear(this.polygon._idd);this.polygon.style.display="none";if(this.polygon._ie6cover){this.polygon._ie6cover.style.display="none"}if(e.conf.skin=="dhx_terrace"){e._improveTerraceButtonSelect(this.id,true)}if(l){e.callEvent("onButtonSelectHide",[this.obj.idd])}e.conf.touch_id=null};this.obj.iddPrefix=e.idPrefix;this._listOptions={};this._fixMaxOpenHeight=function(r){var o="auto";var n=false;if(r!==null){var m=0;for(var l in this._listOptions){m++}if(m>r){this._ph=22*r;o=this._ph+"px"}else{n=true}}this.polygon.style.width="auto";this.polygon.style.height="auto";if(!n&&a.maxOpen!=null){this.polygon.style.width=this.p_tbl.offsetWidth+e._sbw+"px";this.polygon.style.height=o}};this._separatorButtonSelectObject=function(n,l,m){this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.className="tr_sep";this.obj.tr.onselectstart=function(o){o=o||event;if(o.preventDefault){o.preventDefault()}else{o.returnValue=false}return false};this.obj.td=document.createElement("TD");this.obj.td.colSpan="2";this.obj.td.className="td_btn_sep";this.obj.td.onselectstart=function(o){o=o||event;if(o.preventDefault){o.preventDefault()}else{o.returnValue=false}return false};if(isNaN(m)){m=a.p_tbody.childNodes.length+1}else{if(m<1){m=1}}if(m>a.p_tbody.childNodes.length){a.p_tbody.appendChild(this.obj.tr)}else{a.p_tbody.insertBefore(this.obj.tr,a.p_tbody.childNodes[m-1])}this.obj.tr.appendChild(this.obj.td);this.obj.sep=document.createElement("DIV");this.obj.sep.className="btn_sep";this.obj.sep.onselectstart=function(o){o=o||event;if(o.preventDefault){o.preventDefault()}else{o.returnValue=false}return false};this.obj.td.appendChild(this.obj.sep);a._listOptions[n]=this.obj;return this};this._buttonButtonSelectObject=function(r,n,o){var m=true;if(typeof(n.enabled)!="undefined"){m=window.dhx4.s2b(n.enabled)}else{if(typeof(n.disabled)!="undefined"){m=window.dhx4.s2b(n.disabled)}}this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.en=m;this.obj.tr.extAction=(n.action||null);this.obj.tr._selected=(n.selected!=null);this.obj.tr.className="tr_btn"+(this.obj.tr.en?(this.obj.tr._selected&&a.renderSelect?" tr_btn_selected":""):" tr_btn_disabled");this.obj.tr.onselectstart=function(s){s=s||event;if(s.preventDefault){s.preventDefault()}else{s.returnValue=false}return false};this.obj.tr.idd=String(r);if(isNaN(o)){o=a.p_tbody.childNodes.length+1}else{if(o<1){o=1}}if(o>a.p_tbody.childNodes.length){a.p_tbody.appendChild(this.obj.tr)}else{a.p_tbody.insertBefore(this.obj.tr,a.p_tbody.childNodes[o-1])}this.obj.td_a=document.createElement("TD");this.obj.td_a.className="td_btn_img";this.obj.td_a.onselectstart=function(s){s=s||event;if(s.preventDefault){s.preventDefault()}else{s.returnValue=false}return false};this.obj.td_b=document.createElement("TD");this.obj.td_b.className="td_btn_txt";this.obj.td_b.onselectstart=function(s){s=s||event;if(s.preventDefault){s.preventDefault()}else{s.returnValue=false}return false};if(e.rtl){this.obj.tr.appendChild(this.obj.td_b);this.obj.tr.appendChild(this.obj.td_a)}else{this.obj.tr.appendChild(this.obj.td_a);this.obj.tr.appendChild(this.obj.td_b)}if(n.img!=null){if(e.conf.icons_css==true){this.obj.td_a.innerHTML="<i class='"+e.conf.icons_path+n.img+"'></i>"}else{this.obj.td_a.innerHTML="<img class='btn_sel_img' src='"+e.conf.icons_path+n.img+"' border='0'>"}this.obj.tr._img=n.img}else{this.obj.td_a.innerHTML="&nbsp;"}var l=(n.text!=null?n.text:(n.itemText||""));this.obj.td_b.innerHTML="<div class='btn_sel_text'>"+l+"</div>";this.obj.tr.onmouseover=function(s){s=s||event;if(s.type.match(/touch/)!=null){return}if(!this.en||(this._selected&&a.renderSelect)){return}this.className="tr_btn tr_btn_over"};this.obj.tr.onmouseout=function(s){s=s||event;if(s.type.match(/touch/)!=null){return}if(!this.en){return}if(this._selected&&a.renderSelect){if(String(this.className).search("tr_btn_selected")==-1){this.className="tr_btn tr_btn_selected"}}else{this.className="tr_btn"}};this.obj.tr.ontouchstart=this.obj.tr.onmousedown=function(s){s=s||event;if(this._etype==null){this._etype=s.type}};this.obj.tr.onclick=function(t){t=t||event;t.cancelBubble=true;if(!this.en){return}a.setListOptionSelected(this.idd.replace(e.idPrefix,""));a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def";a.obj.over=false;if(this._etype!=null&&this._etype.match(/touch/)==null){window.dhx4.zim.clear(a.polygon._idd);a.polygon.style.display="none";if(a.polygon._ie6cover){a.polygon._ie6cover.style.display="none"}}else{var s=a.polygon;window.setTimeout(function(){window.dhx4.zim.clear(s._idd);s.style.display="none";s=null},500)}this._etype=null;if(e.conf.skin=="dhx_terrace"){e._improveTerraceButtonSelect(a.id,true)}e.anyUsed=null;e.conf.touch_id=null;e.callEvent("onButtonSelectHide",[a.obj.idd]);var u=this.idd.replace(e.idPrefix,"");if(this.extAction){try{window[this.extAction](u)}catch(t){}}e.callEvent("onClick",[u])};a._listOptions[r]=this.obj;return this};this.polygon=document.createElement("DIV");this.polygon.dir="ltr";this.polygon.style.display="none";this.polygon.className="dhx_toolbar_poly_"+e.conf.skin+" dhxtoolbar_icons_"+e.conf.iconSize+e.conf.cssShadow;this.polygon.onselectstart=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}};this.polygon.onmousedown=function(l){l=l||event;l.cancelBubble=true};this.polygon.style.overflowY="auto";this.polygon._idd=window.dhx4.newId();this.polygon.ontouchstart=function(l){l=l||event;l.cancelBubble=true};this.polygon.ontouchend=function(l){l=l||event;l.cancelBubble=true};this.p_tbl=document.createElement("TABLE");this.p_tbl.className="buttons_cont";this.p_tbl.cellSpacing="0";this.p_tbl.cellPadding="0";this.p_tbl.border="0";this.polygon.appendChild(this.p_tbl);this.p_tbody=document.createElement("TBODY");this.p_tbl.appendChild(this.p_tbody);if(h.options!=null){for(var g=0;g<h.options.length;g++){var c="_"+(h.options[g].type||"")+"ButtonSelectObject";if(h.options[g].id==null){h.options[g].id=e._genStr(24)}if(typeof(this[c])=="function"){new this[c](h.options[g].id,h.options[g])}}}document.body.appendChild(this.polygon);if(window.dhx4.isIE6){this.polygon._ie6cover=document.createElement("IFRAME");this.polygon._ie6cover.frameBorder=0;this.polygon._ie6cover.style.position="absolute";this.polygon._ie6cover.style.border="none";this.polygon._ie6cover.style.backgroundColor="#000000";this.polygon._ie6cover.style.filter="alpha(opacity=100)";this.polygon._ie6cover.style.display="none";this.polygon._ie6cover.setAttribute("src","javascript:false;");document.body.appendChild(this.polygon._ie6cover)}this.setWidth=function(l){this.obj.style.width=l-this.arw.offsetWidth+"px";this.polygon.style.width=this.obj.offsetWidth+this.arw.offsetWidth-2+"px";this.p_tbl.style.width=this.polygon.style.width};this.enableItem=function(){e._enableItem(this)};this.disableItem=function(){e._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display="";this.arw.style.display=""};this.hideItem=function(){this.obj.style.display="none";this.arw.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(l){e._setItemText(this,l)};this.getItemText=function(){return e._getItemText(this)};this.setItemImage=function(l){e._setItemImage(this,l,true)};this.clearItemImage=function(){e._clearItemImage(this,true)};this.setItemImageDis=function(l){e._setItemImage(this,l,false)};this.clearItemImageDis=function(){e._clearItemImage(this,false)};this.setItemToolTip=function(l){this.obj.title=l;this.arw.title=l};this.getItemToolTip=function(){return this.obj.title};this.addListOption=function(s,r,n,o,l){if(!(n=="button"||n=="separator")){return}var m={id:s,type:n,text:o,img:l};new this["_"+n+"ButtonSelectObject"](s,m,r)};this.removeListOption=function(n){if(!this._isListButton(n,true)){return}var l=this._listOptions[n];if(l.td_a!=null&&l.td_b!=null){l.td_a.onselectstart=null;l.td_b.onselectstart=null;while(l.td_a.childNodes.length>0){l.td_a.removeChild(l.td_a.childNodes[0])}while(l.td_b.childNodes.length>0){l.td_b.removeChild(l.td_b.childNodes[0])}l.tr.onselectstart=null;l.tr.onmouseover=null;l.tr.onmouseout=null;l.tr.onclick=null;l.tr.ontouchstart=null;l.tr.onmousedown=null;while(l.tr.childNodes.length>0){l.tr.removeChild(l.tr.childNodes[0])}l.tr.parentNode.removeChild(l.tr);l.td_a=null;l.td_b=null;l.tr=null}else{l.sep.onselectstart=null;l.td.onselectstart=null;l.tr.onselectstart=null;while(l.td.childNodes.length>0){l.td.removeChild(l.td.childNodes[0])}while(l.tr.childNodes.length>0){l.tr.removeChild(l.tr.childNodes[0])}l.tr.parentNode.removeChild(l.tr);l.sep=null;l.td=null;l.tr=null}l=null;this._listOptions[n]=null;try{delete this._listOptions[n]}catch(m){}};this.showListOption=function(l){if(!this._isListButton(l,true)){return}this._listOptions[l].tr.style.display=""};this.hideListOption=function(l){if(!this._isListButton(l,true)){return}this._listOptions[l].tr.style.display="none"};this.isListOptionVisible=function(l){if(!this._isListButton(l,true)){return}return(this._listOptions[l].tr.style.display!="none")};this.enableListOption=function(l){if(!this._isListButton(l)){return}this._listOptions[l].tr.en=true;this._listOptions[l].tr.className="tr_btn"+(this._listOptions[l].tr._selected&&e.renderSelect?" tr_btn_selected":"")};this.disableListOption=function(l){if(!this._isListButton(l)){return}this._listOptions[l].tr.en=false;this._listOptions[l].tr.className="tr_btn tr_btn_disabled"};this.isListOptionEnabled=function(l){if(!this._isListButton(l)){return}return this._listOptions[l].tr.en};this.setListOptionPosition=function(n,m){if(!this._listOptions[n]||this.getListOptionPosition(n)==m||isNaN(m)){return}if(m<1){m=1}var l=this._listOptions[n].tr;this.p_tbody.removeChild(l);if(m>this.p_tbody.childNodes.length){this.p_tbody.appendChild(l)}else{this.p_tbody.insertBefore(l,this.p_tbody.childNodes[m-1])}l=null};this.getListOptionPosition=function(n){var m=-1;if(!this._listOptions[n]){return m}for(var l=0;l<this.p_tbody.childNodes.length;l++){if(this.p_tbody.childNodes[l]==this._listOptions[n].tr){m=l+1}}return m};this.setListOptionImage=function(n,l){if(!this._isListButton(n)){return}var m=this._listOptions[n].tr.childNodes[(e.rtl?1:0)];m.innerHTML=(e.conf.icons_css?"<i class='"+e.conf.icons_path+l+"'></i>":"<img src='"+e.conf.icons_path+l+"' class='btn_sel_img'>");m=null};this.getListOptionImage=function(n){if(!this._isListButton(n)){return}var m=this._listOptions[n].tr.childNodes[(e.rtl?1:0)];var l=null;if(m.childNodes.length>0){l=m.childNodes[0][(e.conf.icons_css?"className":"src")]}m=null;return l};this.clearListOptionImage=function(m){if(!this._isListButton(m)){return}var l=this._listOptions[m].tr.childNodes[(e.rtl?1:0)];while(l.childNodes.length>0){l.removeChild(l.childNodes[0])}l.innerHTML="&nbsp;";l=null};this.setListOptionText=function(m,l){if(!this._isListButton(m)){return}this._listOptions[m].tr.childNodes[(e.rtl?0:1)].childNodes[0].innerHTML=l};this.getListOptionText=function(l){if(!this._isListButton(l)){return}return this._listOptions[l].tr.childNodes[(e.rtl?0:1)].childNodes[0].innerHTML};this.setListOptionToolTip=function(m,l){if(!this._isListButton(m)){return}this._listOptions[m].tr.title=l};this.getListOptionToolTip=function(l){if(!this._isListButton(l)){return}return this._listOptions[l].tr.title};this.forEachListOption=function(m){for(var l in this._listOptions){m(l)}};this.getAllListOptions=function(){var m=new Array();for(var l in this._listOptions){m[m.length]=l}return m};this.setListOptionSelected=function(n){for(var l in this._listOptions){var m=this._listOptions[l];if(m.td_a!=null&&m.td_b!=null&&m.tr.en){if(l==n){m.tr._selected=true;m.tr.className="tr_btn"+(this.renderSelect?" tr_btn_selected":"");if(this.mode=="select"){if(m.tr._img){this.setItemImage(m.tr._img)}else{this.clearItemImage()}this.setItemText(this.getListOptionText(n))}}else{m.tr._selected=false;m.tr.className="tr_btn"}}m=null}};this.getListOptionSelected=function(){var m=null;for(var l in this._listOptions){if(this._listOptions[l].tr._selected==true){m=l}}return m};this._isListButton=function(m,l){if(this._listOptions[m]==null){return false}if(!l&&this._listOptions[m].tr.className=="tr_sep"){return false}return true};this.setMaxOpen=function(l){this._ph=null;if(typeof(l)=="number"){this.maxOpen=l;this._maxOpenTest();return}this.maxOpen=null};if(h.width){this.setWidth(h.width)}if(this.mode=="select"&&typeof(h.selected)!="undefined"){this.setListOptionSelected(h.selected)}return this};dhtmlXToolbarObject.prototype._buttonInputObject=function(c,g,e){this.id=c.idPrefix+g;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";this.obj.style.display=(e.hidden!=null?"none":"");this.obj.idd=String(g);this.obj.w=(e.width!=null?e.width:100);this.obj.title=(e.title!=null?e.title:"");this.obj.innerHTML="<input class='dhxtoolbar_input' type='text' style='width:"+this.obj.w+"px;'"+(e.value!=null?" value='"+e.value+"'":"")+">";var b=c;var a=this;this.obj.childNodes[0].onkeydown=function(h){h=h||event;if(h.keyCode==13){b.callEvent("onEnter",[a.obj.idd,this.value])}};c.base.appendChild(this.obj);this.enableItem=function(){this.obj.childNodes[0].disabled=false};this.disableItem=function(){this.obj.childNodes[0].disabled=true};this.isEnabled=function(){return(!this.obj.childNodes[0].disabled)};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display!="none")};this.setValue=function(h){this.obj.childNodes[0].value=h};this.getValue=function(){return this.obj.childNodes[0].value};this.setWidth=function(h){this.obj.w=h;this.obj.childNodes[0].style.width=this.obj.w+"px"};this.getWidth=function(){return this.obj.w};this.setItemToolTip=function(h){this.obj.title=h};this.getItemToolTip=function(){return this.obj.title};this.getInput=function(){return this.obj.firstChild};if(typeof(e.enabled)!="undefined"&&window.dhx4.s2b(e.enabled)==false){this.disableItem()}return this};dhtmlXToolbarObject.prototype._buttonTwoStateObject=function(c,g,e){this.id=c.idPrefix+g;this.state=(e.enabled!=null?false:true);this.imgEn=(e.img!=null?e.img:"");this.imgDis=(e.imgdis!=null?e.imgdis:"");this.img=(this.state?(this.imgEn!=""?this.imgEn:""):(this.imgDis!=""?this.imgDis:""));this.obj=document.createElement("DIV");this.obj.pressed=(e.selected!=null);this.obj.extAction=(e.action||null);this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.obj.pressed?"pres"+(this.state?"":"_dis"):(this.state?"def":"dis"));this.obj.style.display=(e.hidden!=null?"none":"");this.obj.renderAs=this.obj.className;this.obj.idd=String(g);this.obj.title=(e.title||"");if(this.obj.pressed){this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"}var a=(c.conf.icons_css?"<i class='"+c.conf.icons_path+this.img+"'></i>":"<img src='"+c.conf.icons_path+this.img+"'>");this.obj.innerHTML=c._rtlParseBtn((this.img!=""?a:""),(e.text!=null?"<div class='dhxtoolbar_text'>"+e.text+"</div>":""));c.base.appendChild(this.obj);if(window.dhx4.isIE){this.obj.onselectstart=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}return false}}var b=this;this._doOnMouseOver=function(h){h=h||event;if(b.state==false||b.obj.over==true){return}if(b.obj.pressed!=true&&b.obj.className.match(/dhxtoolbar_btn_over/gi)==null){b.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over"}b.obj.over=true};this._doOnMouseOut=function(h){h=h||event;if(b.state==false){return}if(b.obj.pressed!=true&&b.obj.className.match(/dhxtoolbar_btn_over/gi)!=null){b.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def"}b.obj.over=false};this._doOnMouseDown=function(h){h=h||event;if(h.type=="touchstart"){if(h.preventDefault){h.preventDefault()}h.cancelBubble=true;if(c.conf.touch_id!=null&&c.conf.touch_id!=b.id){return}c.conf.touch_id=b.id}if(b.state==false){return}if(c.callEvent("onBeforeStateChange",[b.obj.idd.replace(c.idPrefix,""),b.obj.pressed])!==true){return}b.obj.pressed=!b.obj.pressed;b.obj.className="dhx_toolbar_btn "+(b.obj.pressed==true?"dhxtoolbar_btn_pres":(b.obj.over==true?"dhxtoolbar_btn_over":"dhxtoolbar_btn_def"));var j=b.obj.idd.replace(c.idPrefix,"");if(b.obj.extAction){try{window[b.obj.extAction](idd,b.obj.pressed)}catch(h){}}c.callEvent("onStateChange",[j,b.obj.pressed])};this._doOnMouseUp=function(h){h=h||event;if(h.type=="touchend"){if(h.preventDefault){h.preventDefault()}h.cancelBubble=true;if(c.conf.touch_id==b.id){c.conf.touch_id=null}}};this.obj.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",touchstart:"_doOnMouseDown",touchend:"_doOnMouseUp"};c._evs.add.apply(this,[this.obj.evs,this.obj]);this.setItemState=function(h,l){if(this.obj.pressed!=h){if(h==true){this.obj.pressed=true;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres"+(this.state?"":"_dis")}else{this.obj.pressed=false;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis")}if(l==true){var m=this.obj.idd.replace(c.idPrefix,"");if(this.obj.extAction){try{window[this.obj.extAction](m,this.obj.pressed)}catch(j){}}c.callEvent("onStateChange",[m,this.obj.pressed])}}};this.getItemState=function(){return this.obj.pressed};this.enableItem=function(){c._enableItem(this)};this.disableItem=function(){c._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(h){c._setItemText(this,h)};this.getItemText=function(){return c._getItemText(this)};this.setItemImage=function(h){c._setItemImage(this,h,true)};this.clearItemImage=function(){c._clearItemImage(this,true)};this.setItemImageDis=function(h){c._setItemImage(this,h,false)};this.clearItemImageDis=function(){c._clearItemImage(this,false)};this.setItemToolTip=function(h){this.obj.title=h};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._sliderObject=function(e,h,g){this.id=e.idPrefix+h;this.state=(g.enabled!=null?(g.enabled=="true"?true:false):true);this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=(g.hidden!=null?"none":"");this.obj.onselectstart=function(j){j=j||event;if(j.preventDefault){j.preventDefault()}else{j.returnValue=false}};this.obj.idd=String(h);this.obj.len=(g.length!=null?Number(g.length):50);this.obj.innerHTML="<div class='dhxtoolbar_text'>"+(g.textMin||"")+"</div><div class='dhxtoolbar_sl_bg_l'></div><div class='dhxtoolbar_sl_bg_m' style='width:"+this.obj.len+"px;'></div><div class='dhxtoolbar_sl_bg_r'></div><div class='dhxtoolbar_text'>"+(g.textMax||"")+"</div>";e.base.appendChild(this.obj);var a=this;this.pen=document.createElement("DIV");this.pen.className="dhxtoolbar_sl_pen";this.obj.appendChild(this.pen);var c=this.pen;this.label=document.createElement("DIV");this.label.dir="ltr";this.label.className="dhx_toolbar_slider_label_"+e.conf.skin+(e.rtl?"_rtl":"");this.label.style.display="none";this.label.tip=(g.toolTip||"%v");this.label._zi=window.dhx4.newId();document.body.appendChild(this.label);var b=this.label;this.pen.valueMin=(g.valueMin!=null?Number(g.valueMin):0);this.pen.valueMax=(g.valueMax!=null?Number(g.valueMax):100);if(this.pen.valueMin>this.pen.valueMax){this.pen.valueMin=this.pen.valueMax}this.pen.valueNow=(g.valueNow!=null?Number(g.valueNow):this.pen.valueMax);if(this.pen.valueNow>this.pen.valueMax){this.pen.valueNow=this.pen.valueMax}if(this.pen.valueNow<this.pen.valueMin){this.pen.valueNow=this.pen.valueMin}this.pen._detectLimits=function(){this.minX=a.obj.childNodes[1].offsetLeft+2;this.maxX=a.obj.childNodes[3].offsetLeft-this.offsetWidth+1};this.pen._detectLimits();this.pen._definePos=function(){this.nowX=Math.round((this.valueNow-this.valueMin)*(this.maxX-this.minX)/(this.valueMax-this.valueMin)+this.minX);this.style.left=this.nowX+"px";this.newNowX=this.nowX};this.pen._definePos();this.pen.initXY=0;this.pen.allowMove=false;this.pen[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(j){if(a.state==false){return}j=j||event;this.initXY=(window.dhx4.isIPad?j.touches[0].clientX:j.clientX);this.newValueNow=this.valueNow;this.allowMove=true;this.className="dhxtoolbar_sl_pen dhxtoolbar_over";if(b.tip!=""){b.style.visibility="hidden";b.style.display="";b.innerHTML=b.tip.replace("%v",this.valueNow);b.style.left=Math.round(window.dhx4.absLeft(this)+this.offsetWidth/2-b.offsetWidth/2)+"px";b.style.top=window.dhx4.absTop(this)-b.offsetHeight-3+"px";b.style.visibility="";b.style.zIndex=window.dhx4.zim.reserve(b._zi)}};this.pen._doOnMouseMoveStart=function(l){l=l||event;if(!c.allowMove){return}var j=(window.dhx4.isIPad?l.touches[0].clientX:l.clientX);var m=j-c.initXY;if(j<window.dhx4.absLeft(c)+Math.round(c.offsetWidth/2)&&c.nowX==c.minX){return}if(j>window.dhx4.absLeft(c)+Math.round(c.offsetWidth/2)&&c.nowX==c.maxX){return}c.newNowX=c.nowX+m;if(c.newNowX<c.minX){c.newNowX=c.minX}if(c.newNowX>c.maxX){c.newNowX=c.maxX}c.nowX=c.newNowX;c.style.left=c.nowX+"px";c.initXY=j;c.newValueNow=Math.round((c.valueMax-c.valueMin)*(c.newNowX-c.minX)/(c.maxX-c.minX)+c.valueMin);if(b.tip!=""){b.innerHTML=b.tip.replace(/%v/gi,c.newValueNow);b.style.left=Math.round(window.dhx4.absLeft(c)+c.offsetWidth/2-b.offsetWidth/2)+"px";b.style.top=window.dhx4.absTop(c)-b.offsetHeight-3+"px"}l.cancelBubble=true;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}return false};this.pen._doOnMouseMoveEnd=function(){if(!c.allowMove){return}c.className="dhxtoolbar_sl_pen";c.allowMove=false;c.nowX=c.newNowX;c.valueNow=c.newValueNow;if(b.tip!=""){b.style.display="none";window.dhx4.zim.clear(b._zi)}e.callEvent("onValueChange",[a.obj.idd.replace(e.idPrefix,""),c.valueNow])};if(window.dhx4.isIPad){document.addEventListener("touchmove",c._doOnMouseMoveStart,false);document.addEventListener("touchend",c._doOnMouseMoveEnd,false)}else{if(typeof(window.addEventListener)!="undefined"){window.addEventListener("mousemove",c._doOnMouseMoveStart,false);window.addEventListener("mouseup",c._doOnMouseMoveEnd,false)}else{document.body.attachEvent("onmousemove",c._doOnMouseMoveStart);document.body.attachEvent("onmouseup",c._doOnMouseMoveEnd)}}this.enableItem=function(){if(this.state){return}this.state=true;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def"};this.disableItem=function(){if(!this.state){return}this.state=false;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_dis"};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setValue=function(j,l){j=Number(j);if(j<this.pen.valueMin){j=this.pen.valueMin}if(j>this.pen.valueMax){j=this.pen.valueMax}this.pen.valueNow=j;this.pen._definePos();if(l==true){e.callEvent("onValueChange",[this.obj.idd.replace(e.idPrefix,""),this.pen.valueNow])}};this.getValue=function(){return this.pen.valueNow};this.setMinValue=function(l,j){l=Number(l);if(l>this.pen.valueMax){return}this.obj.childNodes[0].innerHTML=j;this.obj.childNodes[0].style.display=(j.length>0?"":"none");this.pen.valueMin=l;if(this.pen.valueNow<this.pen.valueMin){this.pen.valueNow=this.pen.valueMin}this.pen._detectLimits();this.pen._definePos()};this.setMaxValue=function(l,j){l=Number(l);if(l<this.pen.valueMin){return}this.obj.childNodes[4].innerHTML=j;this.obj.childNodes[4].style.display=(j.length>0?"":"none");this.pen.valueMax=l;if(this.pen.valueNow>this.pen.valueMax){this.pen.valueNow=this.pen.valueMax}this.pen._detectLimits();this.pen._definePos()};this.getMinValue=function(){var j=this.obj.childNodes[0].innerHTML;var l=this.pen.valueMin;return new Array(l,j)};this.getMaxValue=function(){var j=this.obj.childNodes[4].innerHTML;var l=this.pen.valueMax;return new Array(l,j)};this.setItemToolTipTemplate=function(j){this.label.tip=j};this.getItemToolTipTemplate=function(){return this.label.tip};return this};dhtmlXToolbarObject.prototype.unload=function(){if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousedown",this._doOnClick,false);window.removeEventListener("touchstart",this._doOnClick,false)}else{document.body.detachEvent("onmousedown",this._doOnClick)}this._doOnClick=null;this.clearAll();this.objPull=null;if(this._xmlLoader){this._xmlLoader.destructor();this._xmlLoader=null}while(this.base.childNodes.length>0){this.base.removeChild(this.base.childNodes[0])}this.cont.removeChild(this.base);this.base=null;while(this.cont.childNodes.length>0){this.cont.removeChild(this.cont.childNodes[0])}this.cont.className="";this.cont=null;window.dhx4._enableDataLoading(this,null,null,null,"clear");window.dhx4._eventable(this,"clear");this.tX1=null;this.tX2=null;this.tY1=null;this.tY2=null;this.anyUsed=null;this.idPrefix=null;this.rootTypes=null;this._rtl=null;this._rtlParseBtn=null;this.setRTL=null;this._sbw=null;this._getObj=null;this._addImgObj=null;this._setItemImage=null;this._clearItemImage=null;this._setItemText=null;this._getItemText=null;this._enableItem=null;this._disableItem=null;this._xmlParser=null;this._addItemToStorage=null;this._genStr=null;this._addItem=null;this._getPosition=null;this._setPosition=null;this._getIdByPosition=null;this._separatorObject=null;this._textObject=null;this._buttonObject=null;this._buttonSelectObject=null;this._buttonInputObject=null;this._buttonTwoStateObject=null;this._sliderObject=null;this._autoDetectVisibleArea=null;this._removeItem=null;this.setAlign=null;this.setSkin=null;this.setIconsPath=null;this.setIconPath=null;this.loadXML=null;this.loadXMLString=null;this.clearAll=null;this.addSpacer=null;this.removeSpacer=null;this.getType=null;this.getTypeExt=null;this.inArray=null;this.getParentId=null;this.addButton=null;this.addText=null;this.addButtonSelect=null;this.addButtonTwoState=null;this.addSeparator=null;this.addSlider=null;this.addInput=null;this.forEachItem=null;this.showItem=null;this.hideItem=null;this.isVisible=null;this.enableItem=null;this.disableItem=null;this.isEnabled=null;this.setItemText=null;this.getItemText=null;this.setItemToolTip=null;this.getItemToolTip=null;this.setItemImage=null;this.setItemImageDis=null;this.clearItemImage=null;this.clearItemImageDis=null;this.setItemState=null;this.getItemState=null;this.setItemToolTipTemplate=null;this.getItemToolTipTemplate=null;this.setValue=null;this.getValue=null;this.setMinValue=null;this.getMinValue=null;this.setMaxValue=null;this.getMaxValue=null;this.setWidth=null;this.getWidth=null;this.getPosition=null;this.setPosition=null;this.removeItem=null;this.addListOption=null;this.removeListOption=null;this.showListOption=null;this.hideListOption=null;this.isListOptionVisible=null;this.enableListOption=null;this.disableListOption=null;this.isListOptionEnabled=null;this.setListOptionPosition=null;this.getListOptionPosition=null;this.setListOptionText=null;this.getListOptionText=null;this.setListOptionToolTip=null;this.getListOptionToolTip=null;this.setListOptionImage=null;this.getListOptionImage=null;this.clearListOptionImage=null;this.forEachListOption=null;this.getAllListOptions=null;this.setListOptionSelected=null;this.getListOptionSelected=null;this.unload=null;this.setUserData=null;this.getUserData=null;this.setMaxOpen=null;this.items=null;this.conf=null};dhtmlXToolbarObject.prototype._autoDetectVisibleArea=function(){var a=window.dhx4.screenDim();this.tX1=a.left;this.tX2=a.right;this.tY1=a.top;this.tY2=a.bottom};dhtmlXToolbarObject.prototype.setIconset=function(a){this.conf.icons_css=(a=="awesome")};dhtmlXToolbarObject.prototype._evs={add:function(c,e){for(var b in c){if(typeof(window.addEventListener)=="function"){e.addEventListener(b,this[c[b]],false)}else{if(b.match(/^touch/)==null){e.attachEvent("on"+b,this[c[b]])}}}e=c=null},clear:function(c,e){for(var b in c){if(typeof(window.addEventListener)=="function"){e.removeEventListener(b,this[c[b]],false)}else{if(b.match(/^touch/)==null){e.detachEvent("on"+b,this[c[b]])}}}e=c=null}};dhtmlXToolbarObject.prototype._initObj=function(b){for(var a=0;a<b.length;a++){this._addItemToStorage(b[a])}if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._xmlToJson=function(o){var m=[];var x=o.getElementsByTagName("toolbar");if(x!=null&&x[0]!=null){x=x[0];var s=function(h){var e=null;for(var r=0;r<h.childNodes.length;r++){if(e==null&&h.childNodes[r].tagName=="itemText"){e=window.dhx4._xmlNodeValue(h.childNodes[r]);break}}return e};var A=["id","type","hidden","title","text","enabled","img","imgdis","action","openAll","renderSelect","mode","maxOpen","width","value","selected","length","textMin","textMax","toolTip","valueMin","valueMax","valueNow"];var c=["id","type","enabled","disabled","action","selected","img","text"];for(var b=0;b<x.childNodes.length;b++){if(x.childNodes[b].tagName=="item"){var l={};for(var y=0;y<A.length;y++){var g=x.childNodes[b].getAttribute(A[y]);if(g!=null){l[A[y]]=g}}for(var v=0;v<x.childNodes[b].childNodes.length;v++){if(x.childNodes[b].childNodes[v].tagName=="item"&&l.type=="buttonSelect"){var z={};for(var y=0;y<c.length;y++){var g=x.childNodes[b].childNodes[v].getAttribute(c[y]);if(g!=null){z[c[y]]=g}}var n=x.childNodes[b].childNodes[v].getElementsByTagName("userdata");for(var y=0;y<n.length;y++){if(!z.userdata){z.userdata={}}var a={};try{a.name=n[y].getAttribute("name")}catch(j){a.name=null}try{a.value=n[y].firstChild.nodeValue}catch(j){a.value=""}if(a.name!=null){z.userdata[a.name]=a.value}}z.text=s(x.childNodes[b].childNodes[v])||z.text;if(l.options==null){l.options=[]}l.options.push(z)}if(x.childNodes[b].childNodes[v].tagName=="userdata"){if(l.userdata==null){l.userdata={}}var z={};try{z.name=x.childNodes[b].childNodes[v].getAttribute("name")}catch(j){z.name=null}try{z.value=x.childNodes[b].childNodes[v].firstChild.nodeValue}catch(j){z.value=""}if(z.name!=null){l.userdata[z.name]=z.value}}}l.text=s(x.childNodes[b])||l.text;m.push(l)}}s=null}return m};dhtmlXToolbarObject.prototype._addItemToStorage=function(h,l){var j=(h.id||this._genStr(24));var e=(h.type||"");if(e=="spacer"){this.addSpacer(this._lastId)}else{this._lastId=j}if(e!=""&&this["_"+e+"Object"]!=null){if(e=="buttonSelect"){if(h.options!=null){for(var g=0;g<h.options.length;g++){if(h.options[g].type=="obj"){h.options[g].type="button"}if(h.options[g].type=="sep"){h.options[g].type="separator"}}}}if(e=="slider"){var c={tip_template:"toolTip",value_min:"valueMin",value_max:"valueMax",value_now:"valueNow",text_min:"textMin",text_max:"textMax"};for(var b in c){if(h[c[b]]==null&&h[b]!=null){h[c[b]]=h[b]}}}if(e=="buttonInput"){if(h.value==null&&h.text!=null){h.value=h.text}}if(e=="buttonTwoState"){if(typeof(h.selected)=="undefined"&&typeof(h.pressed)!="undefined"&&window.dhx4.s2b(h.pressed)){h.selected=true}}if(typeof(h.enabled)=="undefined"&&typeof(h.disabled)!="undefined"&&window.dhx4.s2b(h.disabled)){h.enabled=false}if(h.imgDis==null&&h.img_disabled!=null){h.imgdis=h.img_disabled}if((typeof(h.openAll)=="undefined"||h.openAll==null)&&this.conf.skin=="dhx_terrace"){h.openAll=true}this.objPull[this.idPrefix+j]=new this["_"+e+"Object"](this,j,h);this.objPull[this.idPrefix+j]["type"]=e;this.setPosition(j,l)}if(h.userdata!=null){for(var b in h.userdata){this.setUserData(j,b,h.userdata[b])}}if(h.options!=null){for(var g=0;g<h.options.length;g++){if(h.options[g].userdata!=null){for(var b in h.options[g].userdata){this.setListOptionUserData(h.id,h.options[g].id,b,h.options[g].userdata[b])}}}}};dhtmlXToolbarObject.prototype.setSkin=function(g,c){if(c===true){this.cont.className=this.cont.className.replace(/dhxtoolbar_icons_\d{1,}/,"dhxtoolbar_icons_"+this.conf.iconSize)}else{this.conf.skin=g;if(this.conf.skin=="dhx_skyblue"){this.conf.sel_ofs_y=1}if(this.conf.skin=="dhx_web"){this.conf.sel_ofs_y=1;this.conf.sel_ofs_x=1}if(this.conf.skin=="dhx_terrace"){this.conf.sel_ofs_y=-1;this.conf.sel_ofs_x=0}if(this.conf.skin=="material"){this.conf.sel_ofs_y=-1;this.conf.sel_ofs_x=0}this.cont.className="dhx_toolbar_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize+this.conf.cssShadow}for(var b in this.objPull){var e=this.objPull[b];if(e.type=="slider"){e.pen._detectLimits();e.pen._definePos();e.label.className="dhx_toolbar_slider_label_"+this.conf.skin}if(e.type=="buttonSelect"){e.polygon.className="dhx_toolbar_poly_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize+this.conf.cssShadow}}if(g=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype.setAlign=function(a){this.conf.align=(a=="right"?"right":"left");this.base.className=(a=="right"?"dhxtoolbar_float_right":"dhxtoolbar_float_left");if(this._spacer){this._spacer.className=(a=="right"?" dhxtoolbar_float_left":" dhxtoolbar_float_right")}};dhtmlXToolbarObject.prototype.setIconSize=function(a){this.conf.iconSize=({18:true,24:true,32:true,48:true}[a]?a:18);this.setSkin(this.conf.skin,true);this.callEvent("_onIconSizeChange",[this.conf.iconSize])};dhtmlXToolbarObject.prototype.setIconsPath=function(a){this.conf.icons_path=a};dhtmlXToolbarObject.prototype.setUserData=function(c,a,b){c=this.idPrefix+c;if(this.objPull[c]!=null){if(this.objPull[c].userData==null){this.objPull[c].userData={}}this.objPull[c].userData[a]=b}};dhtmlXToolbarObject.prototype.getUserData=function(b,a){b=this.idPrefix+b;if(this.objPull[b]!=null&&this.objPull[b].userData!=null){return this.objPull[b].userData[a]||null}return null};dhtmlXToolbarObject.prototype._isListOptionExists=function(a,c){if(this.objPull[this.idPrefix+a]==null){return false}var b=this.objPull[this.idPrefix+a];if(b.type!="buttonSelect"){return false}if(b._listOptions[c]==null){return false}return true};dhtmlXToolbarObject.prototype.setListOptionUserData=function(a,g,b,e){if(!this._isListOptionExists(a,g)){return}var c=this.objPull[this.idPrefix+a]._listOptions[g];if(c.userData==null){c.userData={}}c.userData[b]=e};dhtmlXToolbarObject.prototype.getListOptionUserData=function(a,e,b){if(!this._isListOptionExists(a,e)){return null}var c=this.objPull[this.idPrefix+a]._listOptions[e];if(!c.userData){return null}return(c.userData[b]?c.userData[b]:null)};dhtmlXToolbarObject.prototype._improveTerraceSkin=function(){if(this.conf.terrace_radius==null){this.conf.terrace_radius="3px"}var c=[];var g={separator:true,text:true};var j=[this.base];if(this._spacer!=null){j.push(this._spacer)}for(var m=0;m<j.length;m++){c[m]=[];for(var b=0;b<j[m].childNodes.length;b++){if(j[m].childNodes[b].idd!=null&&j[m].childNodes[b].style.display!="none"){var l=this.idPrefix+j[m].childNodes[b].idd;if(this.objPull[l]!=null&&this.objPull[l].obj==j[m].childNodes[b]){c[m].push({a:l,type:this.objPull[l].type,node:this.objPull[l][this.objPull[l].type=="buttonSelect"?"arw":"obj"]})}}}j[m]=null}for(var m=0;m<c.length;m++){for(var b=0;b<c[m].length;b++){var n=c[m][b];var o=false;var h=false;if(!g[n.type]){if(b==c[m].length-1||(c[m][b+1]!=null&&g[c[m][b+1].type])){o=true}if(b==0||(b-1>=0&&c[m][b-1]!=null&&g[c[m][b-1].type])){h=true}}n.node.style.borderRightWidth=(o?"1px":"0px");n.node.style.borderTopRightRadius=n.node.style.borderBottomRightRadius=(o?this.conf.terrace_radius:"0px");if(n.type=="buttonSelect"){n.node.previousSibling.style.borderTopLeftRadius=n.node.previousSibling.style.borderBottomLeftRadius=(h?this.conf.terrace_radius:"0px");n.node.previousSibling._br=o;n.node.previousSibling._bl=h}else{n.node.style.borderTopLeftRadius=n.node.style.borderBottomLeftRadius=(h?this.conf.terrace_radius:"0px")}n.node._br=o;n.node._bl=h}}for(var m=0;m<c.length;m++){for(var b=0;b<c[m].length;b++){for(var l in c[m][b]){c[m][b][l]=null}c[m][b]=null}c[m]=null}c=j=null};dhtmlXToolbarObject.prototype._improveTerraceButtonSelect=function(c,b){var a=this.objPull[c];if(b==true){a.obj.style.borderBottomLeftRadius=(a.obj._bl?this.conf.terrace_radius:"0px");a.arw.style.borderBottomRightRadius=(a.obj._br?this.conf.terrace_radius:"0px")}else{a.obj.style.borderBottomLeftRadius="0px";a.arw.style.borderBottomRightRadius="0px"}a=null};if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype._createNode_toolbar=function(g,b,e,a,c){if(typeof(c)!="undefined"){g=c}else{g=document.createElement("DIV");g.className="dhx_cell_toolbar_"+(this.conf.borders?"def":"no_borders");g.appendChild(document.createElement("DIV"));g.firstChild.className="dhx_toolbar_base_18_dhx_skyblue"}this.cell.insertBefore(g,this.cell.childNodes[this.conf.idx.cont]);this.conf.ofs_nodes.t.toolbar=true;this._updateIdx();return g};dhtmlXCellObject.prototype.attachToolbar=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.callEvent("_onBeforeContentAttach",["toolbar"]);if(typeof(a)=="undefined"){a={}}else{if(typeof(a)=="string"){a={skin:a}}}if(typeof(a.skin)=="undefined"){a.skin=this.conf.skin}a.parent=this._attachObject("toolbar").firstChild;this.dataNodes.toolbar=new dhtmlXToolbarObject(a);this._adjustCont(this._idd);this.dataNodes.toolbar._masterCell=this;this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell._adjustCont()});a.parent=null;a=null;this.callEvent("_onContentAttach",[]);return this.dataNodes.toolbar};dhtmlXCellObject.prototype.detachToolbar=function(){if(this.dataNodes.toolbar==null){return}this.dataNodes.toolbar._masterCell=null;if(typeof(this.dataNodes.toolbar.unload)=="function"){this.dataNodes.toolbar.unload()}this.dataNodes.toolbar=null;delete this.dataNodes.toolbar;this._detachObject("toolbar")};dhtmlXCellObject.prototype.showToolbar=function(){this._mtbShowHide("toolbar","")};dhtmlXCellObject.prototype.hideToolbar=function(){this._mtbShowHide("toolbar","none")};dhtmlXCellObject.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar}}dhtmlXEditor.prototype.attachToolbar=function(b){if(this.tb!=null){return}if(b!=null){this.conf.iconsPath=b}this.cell._stbHide();this.tb=this.cell.attachToolbar({icons_path:this.conf.iconsPath+"/dhxeditor_"+String(this.conf.skin).replace(/^dhx_/,"")+"/",skin:this.conf.skin});this.setSizes();var g=(this.conf.skin=="material"?"png":"gif");this._availFonts=new Array("Arial","Arial Narrow","Comic Sans MS","Courier","Georgia","Impact","Tahoma","Times New Roman","Verdana");this._initFont=this._availFonts[0];this._xmlFonts="";for(var j=0;j<this._availFonts.length;j++){var e=String(this._availFonts[j]).replace(/\s/g,"_");this._xmlFonts+='<item type="button" id="applyFontFamily:'+e+'"><itemText><![CDATA[<img src="'+this.tb.imagePath+"font_"+String(e).toLowerCase()+"."+g+'" border="0" style="/*margin-top:1px;margin-bottom:1px;*/width:110px;height:16px;">]]></itemText></item>'}this._availSizes={"1":"8pt","2":"10pt","3":"12pt","4":"14pt","5":"18pt","6":"24pt","7":"36pt"};this._xmlSizes="";for(var c in this._availSizes){this._xmlSizes+='<item type="button" id="applyFontSize:'+c+":"+this._availSizes[c]+'" text="'+this._availSizes[c]+'"/>'}this.tbXML='<toolbar><item id="applyH1" type="buttonTwoState" img="h1.'+g+'" imgdis="h4_dis.'+g+'" title="H1"/><item id="applyH2" type="buttonTwoState" img="h2.'+g+'" imgdis="h4_dis.'+g+'" title="H2"/><item id="applyH3" type="buttonTwoState" img="h3.'+g+'" imgdis="h4_dis.'+g+'" title="H3"/><item id="applyH4" type="buttonTwoState" img="h4.'+g+'" imgdis="h4_dis.'+g+'" title="H4"/><item id="separ01" type="separator"/><item id="applyBold" type="buttonTwoState" img="bold.'+g+'" imgdis="bold_dis.'+g+'" title="Bold Text"/><item id="applyItalic" type="buttonTwoState" img="italic.'+g+'" imgdis="italic_dis.'+g+'" title="Italic Text"/><item id="applyUnderscore" type="buttonTwoState" img="underline.'+g+'" imgdis="underline_dis.'+g+'" title="Underscore Text"/><item id="applyStrikethrough" type="buttonTwoState" img="strike.'+g+'" imgdis="strike_dis.'+g+'" title="Strikethrough Text"/><item id="separ02" type="separator"/><item id="alignLeft" type="buttonTwoState" img="align_left.'+g+'" imgdis="align_left_dis.'+g+'" title="Left Alignment"/><item id="alignCenter" type="buttonTwoState" img="align_center.'+g+'" imgdis="align_center_dis.'+g+'" title="Center Alignment"/><item id="alignRight" type="buttonTwoState" img="align_right.'+g+'" imgdis="align_right_dis.'+g+'" title="Right Alignment"/><item id="alignJustify" type="buttonTwoState" img="align_justify.'+g+'" title="Justified Alignment"/><item id="separ03" type="separator"/><item id="applySub" type="buttonTwoState" img="script_sub.'+g+'" imgdis="script_sub.'+g+'" title="Subscript"/><item id="applySuper" type="buttonTwoState" img="script_super.'+g+'" imgdis="script_super_dis.'+g+'" title="Superscript"/><item id="separ04" type="separator"/><item id="createNumList" type="button" img="list_number.'+g+'" imgdis="list_number_dis.'+g+'" title="Number List"/><item id="createBulList" type="button" img="list_bullet.'+g+'" imgdis="list_bullet_dis.'+g+'" title="Bullet List"/><item id="separ05" type="separator"/><item id="increaseIndent" type="button" img="indent_inc.'+g+'" imgdis="indent_inc_dis.'+g+'" title="Increase Indent"/><item id="decreaseIndent" type="button" img="indent_dec.'+g+'" imgdis="indent_dec_dis.'+g+'" title="Decrease Indent"/><item id="separ06" type="separator"/><item id="clearFormatting" type="button" img="clear.'+g+'" title="Clear Formatting"/></toolbar>';this.tb.loadStruct(this.tbXML);this._checkAlign=function(a){this.tb.setItemState("alignCenter",false);this.tb.setItemState("alignRight",false);this.tb.setItemState("alignJustify",false);this.tb.setItemState("alignLeft",false);if(a){this.tb.setItemState(a,true)}};this._checkH=function(a){this.tb.setItemState("applyH1",false);this.tb.setItemState("applyH2",false);this.tb.setItemState("applyH3",false);this.tb.setItemState("applyH4",false);if(a){this.tb.setItemState(a,true)}};this._doOnFocusChanged=function(m){if(!m.h1&&!m.h2&&!m.h3&&!m.h4){var a=(String(m.fontWeight).search(/bold/i)!=-1)||(Number(m.fontWeight)>=700);this.tb.setItemState("applyBold",a)}else{this.tb.setItemState("applyBold",false)}var l="alignLeft";if(String(m.textAlign).search(/center/)!=-1){l="alignCenter"}if(String(m.textAlign).search(/right/)!=-1){l="alignRight"}if(String(m.textAlign).search(/justify/)!=-1){l="alignJustify"}this.tb.setItemState(l,true);this._checkAlign(l);this.tb.setItemState("applyH1",m.h1);this.tb.setItemState("applyH2",m.h2);this.tb.setItemState("applyH3",m.h3);this.tb.setItemState("applyH4",m.h4);if(window._KHTMLrv){m.sub=(m.vAlign=="sub");m.sup=(m.vAlign=="super")}this.tb.setItemState("applyItalic",(m.fontStyle=="italic"));this.tb.setItemState("applyStrikethrough",m.del);this.tb.setItemState("applySub",m.sub);this.tb.setItemState("applySuper",m.sup);this.tb.setItemState("applyUnderscore",m.u)};this._doOnToolbarClick=function(l){var a=String(l).split(":");if(this[a[0]]!=null){if(typeof(this[a[0]])=="function"){this[a[0]](a[1]);this.callEvent("onToolbarClick",[l])}}};this._doOnStateChange=function(l,a){this[l]();switch(l){case"alignLeft":case"alignCenter":case"alignRight":case"alignJustify":this._checkAlign(l);break;case"applyH1":case"applyH2":case"applyH3":case"applyH4":this._checkH(l);break}this.callEvent("onToolbarClick",[l])};this._doOnBeforeStateChange=function(l,a){if((l=="alignLeft"||l=="alignCenter"||l=="alignRight"||l=="alignJustify")&&a==true){return false}return true};var h=this;this.tb.attachEvent("onClick",function(a){h._doOnToolbarClick(a)});this.tb.attachEvent("onStateChange",function(l,a){h._doOnStateChange(l,a)});this.tb.attachEvent("onBeforeStateChange",function(l,a){return h._doOnBeforeStateChange(l,a)});this.applyBold=function(){this._runCommand("Bold")};this.applyItalic=function(){this._runCommand("Italic")};this.applyUnderscore=function(){this._runCommand("Underline")};this.applyStrikethrough=function(){this._runCommand("StrikeThrough")};this.alignLeft=function(){this._runCommand("JustifyLeft")};this.alignRight=function(){this._runCommand("JustifyRight")};this.alignCenter=function(){this._runCommand("JustifyCenter")};this.alignJustify=function(){this._runCommand("JustifyFull")};this.applySub=function(){this._runCommand("Subscript")};this.applySuper=function(){this._runCommand("Superscript")};this.applyH1=function(){this._runCommand("FormatBlock","<H1>")};this.applyH2=function(){this._runCommand("FormatBlock","<H2>")};this.applyH3=function(){this._runCommand("FormatBlock","<H3>")};this.applyH4=function(){this._runCommand("FormatBlock","<H4>")};this.createNumList=function(){this._runCommand("InsertOrderedList")};this.createBulList=function(){this._runCommand("InsertUnorderedList")};this.increaseIndent=function(){this._runCommand("Indent")};this.decreaseIndent=function(){this._runCommand("Outdent")};this.clearFormatting=function(){this._runCommand("RemoveFormat");this.tb.setItemState("applyBold",false);this.tb.setItemState("applyItalic",false);this.tb.setItemState("applyStrikethrough",false);this.tb.setItemState("applySub",false);this.tb.setItemState("applySuper",false);this.tb.setItemState("applyUnderscore",false);var a=this.getContent();a=a.replace(/<\/?h\d>/gi,"");this.setContent(a)}};dhtmlx.Group={_init:function(){dhtmlx.assert(this.data,"DataStore required for grouping");this.data.attachEvent("onStoreLoad",dhtmlx.bind(function(){if(this._settings.group){this.group(this._settings.group,false)}},this));this.attachEvent("onBeforeRender",dhtmlx.bind(function(a){if(this._settings.sort){a.block();a.sort(this._settings.sort);a.unblock()}},this));this.data.attachEvent("onClearAll",dhtmlx.bind(function(){this.data._not_grouped_order=this.data._not_grouped_pull=null},this));this.attachEvent("onBeforeSort",dhtmlx.bind(function(){this._settings.sort=null},this))},_init_group_data_event:function(b,a){b.attachEvent("onClearAll",dhtmlx.bind(function(){this.ungroup(false);this.block();this.clearAll();this.unblock()},a))},sum:function(b,a){b=dhtmlx.Template.setter(b);a=a||this.data;var c=0;a.each(function(e){c+=b(e)*1});return c},min:function(c,b){c=dhtmlx.Template.setter(c);b=b||this.data;var a=Infinity;b.each(function(e){if(c(e)*1<a){a=c(e)*1}});return a*1},max:function(c,b){c=dhtmlx.Template.setter(c);b=b||this.data;var a=-Infinity;b.each(function(e){if(c(e)*1>a){a=c(e)*1}});return a},_split_data_by:function(h){var l=function(o,n){o=dhtmlx.Template.setter(o);return o(n[0])};var m=dhtmlx.Template.setter(h.by);if(!h.map[m]){h.map[m]=[m,l]}var c={};var j=[];this.data.each(function(n){var o=m(n);if(!c[o]){j.push({id:o});c[o]=dhtmlx.toArray()}c[o].push(n)});for(var a in h.map){var g=(h.map[a][1]||l);if(typeof g!="function"){g=this[g]}for(var e=0;e<j.length;e++){j[e][a]=g.call(this,h.map[a][0],c[j[e].id])}}this.data._not_grouped_order=this.data.order;this.data._not_grouped_pull=this.data.pull;this.data.order=dhtmlx.toArray();this.data.pull={};for(var e=0;e<j.length;e++){var b=this.data.id(j[e]);this.data.pull[b]=j[e];this.data.order.push(b)}this.callEvent("onStoreUpdated",[])},group:function(a,b){this.ungroup(false);this._split_data_by(a);if(b!==false){this.data.callEvent("onStoreUpdated",[])}},ungroup:function(a){if(this.data._not_grouped_order){this.data.order=this.data._not_grouped_order;this.data.pull=this.data._not_grouped_pull;this.data._not_grouped_pull=this.data._not_grouped_order=null}if(a!==false){this.data.callEvent("onStoreUpdated",[])}},group_setter:function(a){dhtmlx.assert(typeof a=="object","Incorrect group value");dhtmlx.assert(a.by,"group.by is mandatory");dhtmlx.assert(a.map,"group.map is mandatory");return a},sort_setter:function(a){if(typeof a!="object"){a={by:a}}this._mergeSettings(a,{as:"string",dir:"asc"});return a}};dhtmlx.Date={Locale:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},date_part:function(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a},time_part:function(a){return(a.valueOf()/1000-a.getTimezoneOffset()*60)%86400},week_start:function(b){var a=b.getDay();if(this.config.start_on_monday){if(a===0){a=6}else{a--}}return this.date_part(this.add(b,-1*a,"day"))},month_start:function(a){a.setDate(1);return this.date_part(a)},year_start:function(a){a.setMonth(0);return this.month_start(a)},day_start:function(a){return this.date_part(a)},add:function(b,c,e){var a=new Date(b.valueOf());switch(e){case"day":a.setDate(a.getDate()+c);break;case"week":a.setDate(a.getDate()+7*c);break;case"month":a.setMonth(a.getMonth()+c);break;case"year":a.setYear(a.getFullYear()+c);break;case"hour":a.setHours(a.getHours()+c);break;case"minute":a.setMinutes(a.getMinutes()+c);break;default:return dhtmlx.Date["add_"+e](b,c,e)}return a},to_fixed:function(a){if(a<10){return"0"+a}return a},copy:function(a){return new Date(a.valueOf())},date_to_str:function(b,a){b=b.replace(/%[a-zA-Z]/g,function(c){switch(c){case"%d":return'"+dhtmlx.Date.to_fixed(date.getDate())+"';case"%m":return'"+dhtmlx.Date.to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+dhtmlx.Date.to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+dhtmlx.Date.Locale.day_short[date.getDay()]+"';case"%l":return'"+dhtmlx.Date.Locale.day_full[date.getDay()]+"';case"%M":return'"+dhtmlx.Date.Locale.month_short[date.getMonth()]+"';case"%F":return'"+dhtmlx.Date.Locale.month_full[date.getMonth()]+"';case"%h":return'"+dhtmlx.Date.to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+dhtmlx.Date.to_fixed(date.getHours())+"';case"%i":return'"+dhtmlx.Date.to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+dhtmlx.Date.to_fixed(date.getSeconds())+"';case"%W":return'"+dhtmlx.Date.to_fixed(dhtmlx.Date.getISOWeek(date))+"';default:return c}});if(a){b=b.replace(/date\.get/g,"date.getUTC")}return new Function("date",'return "'+b+'";')},str_to_date:function(g,c){var h="var temp=date.split(/[^0-9a-zA-Z]+/g);";var a=g.match(/%[a-zA-Z]/g);for(var b=0;b<a.length;b++){switch(a[b]){case"%j":case"%d":h+="set[2]=temp["+b+"]||1;";break;case"%n":case"%m":h+="set[1]=(temp["+b+"]||1)-1;";break;case"%y":h+="set[0]=temp["+b+"]*1+(temp["+b+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":h+="set[3]=temp["+b+"]||0;";break;case"%i":h+="set[4]=temp["+b+"]||0;";break;case"%Y":h+="set[0]=temp["+b+"]||0;";break;case"%a":case"%A":h+="set[3]=set[3]%12+((temp["+b+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":h+="set[5]=temp["+b+"]||0;";break}}var e="set[0],set[1],set[2],set[3],set[4],set[5]";if(c){e=" Date.UTC("+e+")"}return new Function("date","var set=[0,0,1,0,0,0]; "+h+" return new Date("+e+");")},getISOWeek:function(c){if(!c){return false}var b=c.getDay();if(b===0){b=7}var e=new Date(c.valueOf());e.setDate(c.getDate()+(4-b));var a=e.getFullYear();var h=Math.floor((e.getTime()-new Date(a,0,1).getTime())/86400000);var g=1+Math.floor(h/7);return g},getUTCISOWeek:function(a){return this.getISOWeek(a)}};dhtmlx.math={};dhtmlx.math._toHex=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];dhtmlx.math.toHex=function(b,a){b=parseInt(b,10);str="";while(b>0){str=this._toHex[b%16]+str;b=Math.floor(b/16)}while(str.length<a){str="0"+str}return str};dhtmlx.math.hexToDec=function(a){return parseInt(a,16)};dhtmlx.math.toRgb=function(c){var h,e,a,j;if(typeof(c)!="string"){h=c[0];e=c[1];a=c[2]}else{if(c.indexOf("rgb")!=-1){j=c.substr(c.indexOf("(")+1,c.lastIndexOf(")")-c.indexOf("(")-1).split(",");h=j[0];e=j[1];a=j[2]}else{if(c.substr(0,1)=="#"){c=c.substr(1)}h=this.hexToDec(c.substr(0,2));e=this.hexToDec(c.substr(2,2));a=this.hexToDec(c.substr(4,2))}}h=(parseInt(h,10)||0);e=(parseInt(e,10)||0);a=(parseInt(a,10)||0);if(h<0||h>255){h=0}if(e<0||e>255){e=0}if(a<0||a>255){a=0}return[h,e,a]};dhtmlx.math.hsvToRgb=function(l,x,u){var j,n,e,c,w,a,m,o;j=Math.floor((l/60))%6;n=l/60-j;e=u*(1-x);c=u*(1-n*x);w=u*(1-(1-n)*x);a=0;m=0;o=0;switch(j){case 0:a=u;m=w;o=e;break;case 1:a=c;m=u;o=e;break;case 2:a=e;m=u;o=w;break;case 3:a=e;m=c;o=u;break;case 4:a=w;m=e;o=u;break;case 5:a=u;m=e;o=c;break}a=Math.floor(a*255);m=Math.floor(m*255);o=Math.floor(o*255);return[a,m,o]};dhtmlx.math.rgbToHsv=function(c,m,n){var j,e,o,a,t,w,l,u;j=c/255;e=m/255;o=n/255;var a=Math.min(j,e,o);var t=Math.max(j,e,o);l=0;w=t==0?0:(1-a/t);u=t;if(t==a){l=0}else{if(t==j&&e>=o){l=60*(e-o)/(t-a)+0}else{if(t==j&&e<o){l=60*(e-o)/(t-a)+360}else{if(t==e){l=60*(o-j)/(t-a)+120}else{if(t==o){l=60*(j-e)/(t-a)+240}}}}}return[l,w,u]};if(!dhtmlx.presets){dhtmlx.presets={}}dhtmlx.presets.chart={simple:{item:{borderColor:"#ffffff",color:"#2b7100",shadow:false,borderWidth:2},line:{color:"#8ecf03",width:2}},plot:{color:"#1293f8",item:{borderColor:"#636363",borderWidth:1,color:"#ffffff",type:"r",shadow:false},line:{color:"#1293f8",width:2}},diamond:{color:"#b64040",item:{borderColor:"#b64040",color:"#b64040",type:"d",radius:3,shadow:true},line:{color:"#ff9000",width:2}},point:{color:"#fe5916",disableLines:true,fill:false,disableItems:false,item:{color:"#feb916",borderColor:"#fe5916",radius:2,borderWidth:1,type:"r"},alpha:1},line:{line:{color:"#3399ff",width:2},item:{color:"#ffffff",borderColor:"#3399ff",radius:2,borderWidth:2,type:"d"},fill:false,disableItems:false,disableLines:false,alpha:1},area:{fill:"#3399ff",line:{color:"#3399ff",width:1},disableItems:true,alpha:0.2,disableLines:false},round:{item:{radius:3,borderColor:"#3f83ff",borderWidth:1,color:"#3f83ff",type:"r",shadow:false,alpha:0.6}},square:{item:{radius:3,borderColor:"#447900",borderWidth:2,color:"#69ba00",type:"s",shadow:false,alpha:1}},column:{color:"RAINBOW",gradient:false,width:45,radius:0,alpha:1,border:true},stick:{width:5,gradient:false,color:"#67b5c9",radius:2,alpha:1,border:false},alpha:{color:"#b9a8f9",width:70,gradient:"falling",radius:0,alpha:0.5,border:true}};dhtmlx.ui.Map=function(a){this.name="Map";this._id="map_"+dhtmlx.uid();this._key=a;this._map=[];this._areas=[]};dhtmlx.ui.Map.prototype={addRect:function(c,b,a){this._areas.push({index:a,points:b});this._createMapArea(c,"RECT",b,a)},addPoly:function(c,b,a){this._createMapArea(c,"POLY",b,a)},_createMapArea:function(g,b,e,c){var a="";if(arguments.length==4){a="userdata='"+c+"'"}this._map.push("<area "+this._key+"='"+g+"' shape='"+b+"' coords='"+e.join()+"' "+a+"></area>")},addSector:function(a,n,m,j,g,c,e,h){var l=[];l.push(j);l.push(Math.floor(g*e));for(var b=n;b<m;b+=Math.PI/18){l.push(Math.floor(j+c*Math.cos(b)));l.push(Math.floor((g+c*Math.sin(b))*e))}l.push(Math.floor(j+c*Math.cos(m)));l.push(Math.floor((g+c*Math.sin(m))*e));l.push(j);l.push(Math.floor(g*e));return this.addPoly(a,l,h)},render:function(a){var c=dhtmlx.html.create("DIV");c.style.cssText="position:absolute; width:100%; height:100%; top:0px; left:0px;";a.appendChild(c);var b=dhtmlx._isIE?"":"src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='";c.innerHTML="<map id='"+this._id+"' name='"+this._id+"'>"+this._map.join("\n")+"</map><img "+b+" class='dhx_map_img' usemap='#"+this._id+"' onmousedown='return false;'>";a._htmlmap=c;this._map=[]}};dhtmlx.chart={};dhtmlx.chart.scatter={pvt_render_scatter:function(n,h,m,l,j,a){if(!this._settings.xValue){return dhtmlx.log("warning","Undefined propery: xValue")}var c=this._getLimits();var g=this._getLimits("h","xValue");if(!j){if(!this.canvases.x){this.canvases.x=new dhtmlx.ui.Canvas(this._obj,"axis_x")}if(!this.canvases.y){this.canvases.y=new dhtmlx.ui.Canvas(this._obj,"axis_y")}this._drawYAxis(this.canvases.y.getCanvas(),h,m,l,c.min,c.max);this._drawHXAxis(this.canvases.x.getCanvas(),h,m,l,g.min,g.max)}c={min:this._settings.yAxis.start,max:this._settings.yAxis.end};g={min:this._settings.xAxis.start,max:this._settings.xAxis.end};var b=this._getScatterParams(n,h,m,l,g,c);this._mapStart=m;for(var e=0;e<h.length;e++){this._drawScatterItem(n,a,m,l,b,g,c,h[e],j)}},_getScatterParams:function(a,e,c,b,j,h){var g={};g.totalHeight=b.y-c.y;g.totalWidth=b.x-c.x;this._calcScatterUnit(g,j.min,j.max,g.totalWidth,"X");this._calcScatterUnit(g,h.min,h.max,g.totalHeight,"Y");return g},_drawScatterItem:function(o,a,m,l,c,g,e,h,j){var b=this._calculateScatterItemPosition(c,l,m,g,h,"X");var n=this._calculateScatterItemPosition(c,m,l,e,h,"Y");this._drawItem(o,b,n,h,this._settings.label.call(this,h),j,a)},_calculateScatterItemPosition:function(c,l,j,a,g,b){var n=this._settings[b=="X"?"xValue":"value"].call(this,g);var e=c["valueFactor"+b];var o=(parseFloat(n||0)-a.min)*e;var m=c["unit"+b];var h=j[b.toLowerCase()]-(b=="X"?(-1):1)*Math.floor(m*o);if(o<0){h=j[b.toLowerCase()]}if(n>a.max){h=l[b.toLowerCase()]}if(n<a.min){h=j[b.toLowerCase()]}return h},_calcScatterUnit:function(h,c,a,b,e){var g=this._getRelativeValue(c,a);e=(e||"");h["relValue"+e]=g[0];h["valueFactor"+e]=g[1];h["unit"+e]=(h["relValue"+e]?b/h["relValue"+e]:10)}};dhtmlx.chart.radar={pvt_render_radar:function(b,e,a,h,c,g){this._renderRadarChart(b,e,a,h,c,g)},_renderRadarChart:function(s,g,o,n,m,a){if(!g.length){return}var j=this._getPieParameters(o,n);var l=(this._settings.radius?this._settings.radius:j.radius);var b=(this._settings.x?this._settings.x:j.x);var r=(this._settings.y?this._settings.y:j.y);var c=[];for(var e=0;e<g.length;e++){c.push(1)}var h=this._getRatios(c,g.length);this._mapStart=o;if(!m){this._drawRadarAxises(h,b,r,l,g)}this._drawRadarData(s,h,b,r,l,g,m,a)},_drawRadarData:function(w,r,l,j,g,K,z,J){var v,t,I,F,A,E,e,c,C,H,D,s,b,u,n,m,a,o,h;I=this._settings;A=I.yAxis.start;E=I.yAxis.end;h=this._getRelativeValue(A,E);s=h[0];o=(s?g/s:g/2);a=h[1];b=-Math.PI/2;v=t=b;C=[];c=0;for(F=0;F<K.length;F++){if(!m){u=I.value(K[F]);n=(parseFloat(u||0)-A)*a}else{n=m}H=Math.floor(o*n);u=I.value((F!=(K.length-1))?K[F+1]:K[0]);m=(parseFloat(u||0)-A)*a;D=Math.floor(o*m);v=t;t=((F!=(K.length-1))?(b+r[F]-0.0001):b);e=(c||this._getPositionByAngle(v,l,j,H));c=this._getPositionByAngle(t,l,j,D);C.push(e)}if(I.fill){this._fillRadarChart(w,C,K)}if(!I.disableLines){this._strokeRadarChart(w,C,K)}if(!I.disableItems){this._drawRadarItemMarkers(w,C,K,z,J)}C=null},_drawRadarItemMarkers:function(a,c,g,e,h){for(var b=0;b<c.length;b++){this._drawItem(a,c[b].x,c[b].y,g[b],this._settings.label.call(this,g),e,h)}},_fillRadarChart:function(a,e,h){var g,c;a.globalAlpha=this._settings.alpha.call(this,{});a.beginPath();for(var b=0;b<e.length;b++){a.fillStyle=this._settings.fill.call(this,h[b]);g=e[b];c=(e[b+1]||e[0]);if(!b){a.moveTo(g.x,g.y)}a.lineTo(c.x,c.y)}a.fill();a.globalAlpha=1},_strokeRadarChart:function(a,e,h){var g,c;for(var b=0;b<e.length;b++){g=e[b];c=(e[b+1]||e[0]);this._drawLine(a,g.x,g.y,c.x,c.y,this._settings.line.color.call(this,h[b]),this._settings.line.width)}},_drawRadarAxises:function(w,u,t,l,M){var a=this._settings.yAxis;var e=this._settings.xAxis;var m=a.start;var h=a.end;var o=a.step;var z={};var L=this._configYAxis;if(typeof L.step=="undefined"||typeof L.start=="undefined"||typeof L.end=="undefined"){var r=this._getLimits();z=this._calculateScale(r.min,r.max);m=z.start;h=z.end;o=z.step;a.end=h;a.start=m}var F=[];var J,I,A;var K=0;var b=l*o/(h-m);var s,v;if(o<1){s=Math.min(this._log10(o),(m<=0?0:this._log10(m)));v=Math.pow(10,-s)}var H=[];if(!this.canvases.scale){this.canvases.scale=new dhtmlx.ui.Canvas(this._obj,"radar_scale")}var E=this.canvases.scale.getCanvas();for(J=h;J>=m;J-=o){if(z.fixNum){J=parseFloat((new Number(J)).toFixed(z.fixNum))}F.push(Math.floor(K*b)+0.5);if(v){J=Math.round(J*v)/v}var n=t-l+F[F.length-1];this.canvases.scale.renderTextAt("middle","left",u,n,a.template(J.toString()),"dhx_axis_item_y dhx_radar");if(w.length<2){this._drawScaleSector(E,"arc",u,t,l-F[F.length-1],-Math.PI/2,3*Math.PI/2,J);return}var g=-Math.PI/2;var D=g;var C;for(I=0;I<w.length;I++){if(J==h){H.push(D)}C=g+w[I]-0.0001;this._drawScaleSector(E,(L.lineShape||"line"),u,t,l-F[F.length-1],D,C,J,I,M[J]);D=C}K++}for(J=0;J<H.length;J++){A=this._getPositionByAngle(H[J],u,t,l);if(e.lines.call(this,M[J],J)){this._drawLine(E,u,t,A.x,A.y,(e?e.lineColor.call(this,M[J]):"#cfcfcf"),1)}this._drawRadarScaleLabel(E,u,t,l,H[J],(e?e.template.call(this,M[J]):"&nbsp;"))}},_drawScaleSector:function(s,h,r,n,g,b,a,e,c){var o,m;if(g<0){return false}o=this._getPositionByAngle(b,r,n,g);m=this._getPositionByAngle(a,r,n,g);var l=this._settings.yAxis;if(l.bg){s.beginPath();s.moveTo(r,n);if(h=="arc"){s.arc(r,n,g,b,a,false)}else{s.lineTo(o.x,o.y);s.lineTo(m.x,m.y)}s.fillStyle=l.bg(e,c);s.moveTo(r,n);s.fill();s.closePath()}if(l.lines.call(this,e)){s.lineWidth=1;s.beginPath();if(h=="arc"){s.arc(r,n,g,b,a,false)}else{s.moveTo(o.x,o.y);s.lineTo(m.x,m.y)}s.strokeStyle=l.lineColor.call(this,e);s.stroke()}},_drawRadarScaleLabel:function(v,m,j,b,l,s){var u=this.canvases.scale.renderText(0,0,s,"dhx_axis_radar_title",1);var c=u.scrollWidth;var o=u.offsetHeight;var n=0.001;var h=this._getPositionByAngle(l,m,j,b+5);var g=0,e=0;if(l<0||l>Math.PI){e=-o}if(l>Math.PI/2){g=-c}if(Math.abs(l+Math.PI/2)<n||Math.abs(l-Math.PI/2)<n){g=-c/2}else{if(Math.abs(l)<n||Math.abs(l-Math.PI)<n){e=-o/2}}u.style.top=h.y+e+"px";u.style.left=h.x+g+"px";u.style.width=c+"px";u.style.whiteSpace="nowrap"}};dhtmlx.chart.area={pvt_render_area:function(l,A,g,e,m,x){var o,w,r,n,h,v,j,z,y,u,t,b,s,a,c;v=this._calculateLineParams(l,A,g,e,m);w=this._settings;n=(w.eventRadius||Math.floor(v.cellWidth/2));if(A.length){j=[];u=(!w.offset?g.x:g.x+v.cellWidth*0.5);for(r=0;r<A.length;r++){h=A[r];y=this._getPointY(h,g,e,v);s=u+v.cellWidth*r;if(y){a=(typeof y=="object"?y.y0:y);if(r&&this._settings.fixOverflow){z=this._getPointY(A[r-1],g,e,v);if(z.out&&z.out==y.out){continue}t=v.cellWidth*(r-1)-0.5+u;b=(typeof z=="object"?z.y0:z);if(z.out){c=(z.out=="min"?e.y:g.y);j.push([this._calcOverflowX(t,s,b,a,c),c])}if(y.out){c=(y.out=="min"?e.y:g.y);j.push([this._calcOverflowX(t,s,b,a,c),c]);if(r==(A.length-1)&&c==g.y){j.push([s,g.y])}}}if(!y.out){j.push([s,a]);x.addRect(h.id,[s-n-g.x,a-n-g.y,s+n-g.x,a+n-g.y],m)}if(!w.yAxis){o=(!w.offset&&(r==A.length-1)?"left":"center");this.canvases[m].renderTextAt(false,o,s,a-w.labelOffset,w.label(h))}}}if(j.length){j.push([s,e.y]);j.push([j[0][0],e.y])}l.globalAlpha=this._settings.alpha.call(this,A[0]);l.fillStyle=this._settings.color.call(this,A[0]);l.beginPath();this._path(l,j);l.fill();if(w.border){l.lineWidth=w.borderWidth||1;if(w.borderColor){l.strokeStyle=w.borderColor.call(this,A[0])}else{this._setBorderStyles(l,l.fillStyle)}l.beginPath();this._path(l,j);l.stroke()}l.lineWidth=1;l.globalAlpha=1}}};dhtmlx.chart.stackedArea={pvt_render_stackedArea:function(n,D,b,a,o,A){var F,E,t,z,v,u,g,s,h,w,m,e,c,l;w=this._calculateLineParams(n,D,b,a,o);z=this._settings;s=(z.eventRadius||Math.floor(w.cellWidth/2));if(D.length){m=[];l=[];e=(!z.offset?b.x:b.x+w.cellWidth*0.5);var C=function(j,x){return o?(D[j].$startY?x-a.y+D[j].$startY:0):x};var r=function(j,I,H){var y=(H.y-I.y)/(H.x-I.x);return y*j+I.y-y*I.x};for(v=0;v<D.length;v++){h=D[v];if(!v){c=C(v,a.y);m.push([e,c])}else{e+=w.cellWidth}c=C(v,this._getPointY(h,b,a,w));l.push((isNaN(c)&&!v)?(D[v].$startY||a.y):c);if(c){m.push([e,c]);A.addRect(h.id,[e-s-b.x,c-s-b.y,e+s-b.x,c+s-b.y],o);if(!z.yAxis){t=(!z.offset&&g?"left":"center");this.canvases[o].renderTextAt(false,t,e,c-z.labelOffset,z.label(h))}}}m.push([e,C(v-1,a.y)]);if(o){for(v=D.length-2;v>0;v--){e-=w.cellWidth;c=D[v].$startY;if(c){m.push([e,c])}}}m.push([m[0][0],m[0][1]]);n.globalAlpha=this._settings.alpha.call(this,D[0]);n.fillStyle=this._settings.color.call(this,D[0]);n.beginPath();this._path(n,m);n.fill();for(v=0;v<D.length;v++){c=l[v];if(!c){if(v==D.length-1){c=D[v].$startY}for(u=v+1;u<D.length;u++){if(l[u]){F={x:b.x,y:l[0]};E={x:(b.x+w.cellWidth*u),y:l[u]};c=r(b.x+w.cellWidth*v,F,E);break}}}D[v].$startY=c}}}};dhtmlx.chart.spline={pvt_render_spline:function(n,E,e,c,o,D){var C,s,m,r,A,l,h,v,u,t,g,b,a;A=this._calculateLineParams(n,E,e,c,o);C=this._settings;this._mapStart=e;m=[];if(E.length){v=(C.offset?e.x+A.cellWidth*0.5:e.x);for(s=0;s<E.length;s++){g=this._getPointY(E[s],e,c,A);if(g){h=((!s)?v:A.cellWidth*s-0.5+v);m.push({x:h,y:g,index:s})}}l=this._getSplineParameters(m);for(s=0;s<m.length;s++){u=m[s].x;b=m[s].y;if(s<m.length-1){t=m[s+1].x;a=m[s+1].y;for(r=u;r<t;r++){var z=this._getSplineYPoint(r,u,s,l.a,l.b,l.c,l.d);if(z<e.y){z=e.y}if(z>c.y){z=c.y}var w=this._getSplineYPoint(r+1,u,s,l.a,l.b,l.c,l.d);if(w<e.y){w=e.y}if(w>c.y){w=c.y}this._drawLine(n,r,z,r+1,w,C.line.color(E[s]),C.line.width)}this._drawLine(n,t-1,this._getSplineYPoint(r,u,s,l.a,l.b,l.c,l.d),t,a,C.line.color(E[s]),C.line.width)}this._drawItem(n,u,b,E[m[s].index],C.label(E[m[s].index]),o,D)}}},_getSplineParameters:function(x){var j,z,y,A,w,t,r,o,l=[],g=[],e=x.length;for(j=0;j<e-1;j++){l[j]=x[j+1].x-x[j].x;g[j]=(x[j+1].y-x[j].y)/l[j]}z=[];y=[];z[0]=0;z[1]=2*(l[0]+l[1]);y[0]=0;y[1]=6*(g[1]-g[0]);for(j=2;j<e-1;j++){z[j]=2*(l[j-1]+l[j])-l[j-1]*l[j-1]/z[j-1];y[j]=6*(g[j]-g[j-1])-l[j-1]*y[j-1]/z[j-1]}A=[];A[e-1]=A[0]=0;for(j=e-2;j>=1;j--){A[j]=(y[j]-l[j]*A[j+1])/z[j]}w=[];t=[];r=[];o=[];for(j=0;j<e-1;j++){w[j]=x[j].y;t[j]=-l[j]*A[j+1]/6-l[j]*A[j]/3+(x[j+1].y-x[j].y)/l[j];r[j]=A[j]/2;o[j]=(A[j+1]-A[j])/(6*l[j])}return{a:w,b:t,c:r,d:o}},_getSplineYPoint:function(g,j,l,h,e,n,m){return h[l]+(g-j)*(e[l]+(g-j)*(n[l]+(g-j)*m[l]))}};dhtmlx.chart.barH={pvt_render_barH:function(y,M,j,h,z,L){var r,t,C,A,a,E,n,J,u,K,b,w,l,F,v,g,x,s,I,e,o;C=(h.y-j.y)/M.length;n=this._getLimits("h");J=n.max;u=n.min;g=h.x-j.x;o=!!this._settings.yAxis;if(!z){this._drawHScales(y,M,j,h,u,J,C)}if(o){J=parseFloat(this._settings.xAxis.end);u=parseFloat(this._settings.xAxis.start)}F=this._getRelativeValue(u,J);w=F[0];b=F[1];s=(w?g/w:10);if(!o){v=10;s=(w?(g-v)/w:10)}t=parseInt(this._settings.width,10);var H=this._series.length;var m=this._settings.seriesMargin;var c=this._settings.seriesPadding;if(this._series&&(t*H+c+(H>2?m*H:0)>C)){t=C/H-c-(H>2?m:0)}r=(C-t*H-m*(H-1))/2;if(this._settings.border){t=parseInt(t,10);r=parseInt(r,10)}l=(typeof this._settings.radius!="undefined"?parseInt(this._settings.radius,10):Math.round(t/5));K=false;a=this._settings.gradient;if(a&&typeof(a)!="function"){K=a;a=false}else{if(a){a=y.createLinearGradient(j.x,j.y,h.x,j.y);this._settings.gradient(a)}}if(!o){this._drawLine(y,j.x-0.5,j.y,j.x-0.5,h.y,"#000000",1)}for(E=0;E<M.length;E++){x=parseFloat(this._settings.value(M[E]||0));if(x>J){x=J}x-=u;x*=b;I=j.x;e=j.y+r+(H>2?m*z:0)+parseInt(E*C,10)+t*z;if((x<0&&this._settings.origin=="auto")||(this._settings.xAxis&&x===0&&!(this._settings.origin!="auto"&&this._settings.origin>u))){this.canvases[z].renderTextAt("middle","right",I+10,e+t/2+r,this._settings.label(M[E]));continue}if(x<0&&this._settings.origin!="auto"&&this._settings.origin>u){x=0}if(!o){x+=v/s}A=a||this._settings.color.call(this,M[E]);if(this._settings.border){this._drawBarHBorder(y,I,e,t,u,l,s,x,A)}y.globalAlpha=this._settings.alpha.call(this,M[E]);var D=this._drawBarH(y,h,I,e,t,u,l,s,x,A,a,K);if(K!=false){this._drawBarHGradient(y,I,e,t,u,l,s,x,A,K)}y.globalAlpha=1;if(D[3]==e){this.canvases[z].renderTextAt("middle","left",D[0]-5,D[3]+Math.floor(t/2),this._settings.label(M[E]));L.addRect(M[E].id,[D[0]-j.x,D[3]-j.y,D[2]-j.x,D[3]+t-j.y],z)}else{this.canvases[z].renderTextAt("middle",false,D[2]+5,D[1]+Math.floor(t/2),this._settings.label(M[E]));L.addRect(M[E].id,[D[0]-j.x,e-j.y,D[2]-j.x,D[3]-j.y],z)}}},_setBarHPoints:function(u,e,s,v,j,t,r,h,g){var b=0;if(j>t*r){var o=(j-t*r)/j;b=-Math.asin(o)+Math.PI/2}u.moveTo(e,s+h);var c=e+t*r-j-(j?0:h);if(j<t*r){u.lineTo(c,s+h)}var n=s+j;if(j&&j>0){u.arc(c,n,j-h,-Math.PI/2+b,0,false)}var m=s+v-j-(j?0:h);var a=c+j-(j?h:0);u.lineTo(a,m);if(j&&j>0){u.arc(c,m,j-h,0,Math.PI/2-b,false)}var l=s+v-h;u.lineTo(e,l);if(!g){u.lineTo(e,s+h)}return[a,l]},_drawHScales:function(c,j,h,g,l,b,e){var a=0;if(this._settings.xAxis){if(!this.canvases.x){this.canvases.x=new dhtmlx.ui.Canvas(this._obj)}a=this._drawHXAxis(this.canvases.x.getCanvas(),j,h,g,l,b)}if(this._settings.yAxis){if(!this.canvases.y){this.canvases.y=new dhtmlx.ui.Canvas(this._obj)}this._drawHYAxis(this.canvases.y.getCanvas(),j,h,g,e,a)}},_drawHYAxis:function(r,g,m,j,c,a){if(!this._settings.yAxis){return}var h;var b=parseInt((a?a:m.x),10)-0.5;var n=j.y+0.5;var l=m.y;this._drawLine(r,b,n,b,l,this._settings.yAxis.color,1);for(var e=0;e<g.length;e++){var o=((this._settings.origin!="auto")&&(this._settings.view=="barH")&&(parseFloat(this._settings.value(g[e]))<this._settings.origin));h=l+c/2+e*c;this.canvases.y.renderTextAt("middle",(o?false:"left"),(o?b+5:b-5),h,this._settings.yAxis.template(g[e]),"dhx_axis_item_y",(o?0:b-10));if(this._settings.yAxis.lines.call(this,g[e])){this._drawLine(r,m.x,h,j.x,h,this._settings.yAxis.lineColor.call(this,g[e]),1)}}this._drawLine(r,m.x+0.5,l+0.5,j.x,l+0.5,this._settings.yAxis.lineColor.call(this,{}),1);this._setYAxisTitle(m,j)},_drawHXAxis:function(v,A,h,g,l,j){var m;var t={};var b=this._settings.xAxis;if(!b){return}var e=g.y+0.5;var y=h.x-0.5;var x=g.x-0.5;var s=h.x;this._drawLine(v,y,e,x,e,b.color,1);if(b.step){m=parseFloat(b.step)}if(typeof this._configXAxis.step=="undefined"||typeof this._configXAxis.start=="undefined"||typeof this._configXAxis.end=="undefined"){t=this._calculateScale(l,j);l=t.start;j=t.end;m=t.step;this._settings.xAxis.end=j;this._settings.xAxis.start=l;this._settings.xAxis.step=m}if(m===0){return}var a=(x-y)*m/(j-l);var z=0;for(var w=l;w<=j;w+=m){if(t.fixNum){w=parseFloat((new Number(w)).toFixed(t.fixNum))}var u=Math.floor(y+z*a)+0.5;if(!(w==l&&this._settings.origin=="auto")&&b.lines.call(this,w)){this._drawLine(v,u,e,u,h.y,this._settings.xAxis.lineColor.call(this,w),1)}if(w==this._settings.origin){s=u+1}var n=w;if(m<1){var o=Math.min(this._log10(m),(l<=0?0:this._log10(l)));var r=Math.pow(10,-o);n=Math.round(w*r)/r}this.canvases.x.renderTextAt(false,true,u,e+2,b.template(n.toString()),"dhx_axis_item_x");z++}this.canvases.x.renderTextAt(true,false,y,g.y+this._settings.padding.bottom-3,this._settings.xAxis.title,"dhx_axis_title_x",g.x-h.x);if(!b.lines.call(this,{})){this._drawLine(v,y,h.y-0.5,x,h.y-0.5,this._settings.xAxis.color,0.2)}return s},_correctBarHParams:function(l,g,c,h,j,m,e){var a=this._settings.yAxis;var b=g;if(!!a&&this._settings.origin!="auto"&&(this._settings.origin>e)){g+=(this._settings.origin-e)*j;b=g;h=h-(this._settings.origin-e);if(h<0){h*=(-1);l.translate(g,c+m);l.rotate(Math.PI);g=0.5;c=0}g+=0.5}return{value:h,x0:g,y0:c,start:b}},_drawBarH:function(s,g,x,e,m,n,h,l,r,t,a,j){var u;s.save();var o=this._correctBarHParams(s,x,e,r,l,m,n);s.fillStyle=t;s.beginPath();if(l*o.value>0){u=this._setBarHPoints(s,o.x0,o.y0,m,h,l,o.value,(this._settings.border?1:0));if(a&&!j){s.lineTo(g.x,o.y0+(this._settings.border?1:0))}}else{u=[o.x0,o.y0+1]}s.fill();s.restore();var c=o.y0;var b=(o.y0!=e?e:u[1]);var w=(o.y0!=e?(o.start-u[0]):o.start);var v=(o.y0!=e?o.start:u[0]);return[w,c,v,b]},_drawBarHBorder:function(m,b,j,n,g,e,l,h,c){m.save();var a=this._correctBarHParams(m,b,j,h,l,n,g);m.beginPath();this._setBorderStyles(m,c);m.globalAlpha=0.9;if(l*a.value>0){this._setBarHPoints(m,a.x0,a.y0,n,e,l,a.value,m.lineWidth/2,1)}m.stroke();m.restore()},_drawBarHGradient:function(o,c,m,r,j,h,n,l,e,a){o.save();var b=this._correctBarHParams(o,c,m,l,n,r,j);var g=this._setBarGradient(o,b.x0,b.y0+r,b.x0+n*b.value,b.y0,a,e,"x");o.fillStyle=g.gradient;o.beginPath();if(n*b.value>0){this._setBarHPoints(o,b.x0,b.y0+g.offset,r-g.offset*2,h,n,b.value,g.offset)}o.fill();o.globalAlpha=1;o.restore()}};dhtmlx.assert(dhtmlx.chart.barH);dhtmlx.chart.stackedBarH={pvt_render_stackedBarH:function(y,M,g,e,z,L){var K,t;var b;var u;var w=e.x-g.x;var l=!!this._settings.yAxis;var j=this._getStackedLimits(M);K=j.max;t=j.min;var C=Math.floor((e.y-g.y)/M.length);if(!z){this._drawHScales(y,M,g,e,t,K,C)}if(l){K=parseFloat(this._settings.xAxis.end);t=parseFloat(this._settings.xAxis.start)}var H=this._getRelativeValue(t,K);u=H[0];b=H[1];var r=(u?w/u:10);if(!l){var v=10;r=(u?(w-v)/u:10)}var s=parseInt(this._settings.width,10);if((s+4)>C){s=C-4}var m=(C-s)/2;var h=0;var n=false;var a=this._settings.gradient;if(a){n=true}if(!l){this._drawLine(y,g.x-0.5,g.y,g.x-0.5,e.y,"#000000",1)}var J=0;var F=0;for(E=0;E<this._series.length;E++){if(E==z){F=J}if(this._series[E].view=="stackedBarH"){J++}}for(var E=0;E<M.length;E++){if(!F){M[E].$startX=g.x}var x=parseFloat(this._settings.value(M[E]||0));if(x>K){x=K}x-=t;x*=b;var I=g.x;var c=g.y+m+E*C;if(!F){M[E].$startX=I}else{I=M[E].$startX}if(x<0||(this._settings.yAxis&&x===0)){this.canvases.y.renderTextAt("middle",true,I+10,c+s/2,this._settings.label(M[E]));continue}if(!l){x+=v/r}var A=this._settings.color.call(this,M[E]);y.globalAlpha=this._settings.alpha.call(this,M[E]);y.fillStyle=this._settings.color.call(this,M[E]);y.beginPath();var D=this._setBarHPoints(y,I,c,s,h,r,x,(this._settings.border?1:0));if(a&&!n){y.lineTo(g.x+w,c+(this._settings.border?1:0))}y.fill();if(n!=false){var o=this._setBarGradient(y,I,c+s,I,c,n,A,"x");y.fillStyle=o.gradient;y.beginPath();D=this._setBarHPoints(y,I,c,s,h,r,x,0);y.fill()}if(this._settings.border){this._drawBarHBorder(y,I,c,s,t,h,r,x,A)}y.globalAlpha=1;this.canvases[z].renderTextAt("middle",true,M[E].$startX+(D[0]-M[E].$startX)/2-1,c+(D[1]-c)/2,this._settings.label(M[E]));L.addRect(M[E].id,[M[E].$startX-g.x,c-g.y,D[0]-g.x,D[1]-g.y],z);M[E].$startX=D[0]}}};dhtmlx.chart.stackedBar={pvt_render_stackedBar:function(z,O,h,g,A,M){var J,v,a,I,e;var b;var w;var L=this._settings;var x=g.y-h.y;var l=!!L.yAxis;var K=!!L.xAxis;var j=this._getStackedLimits(O);var N=(L.origin===0);J=j.max;v=j.min;if(!O.length){return}var D=(g.x-h.x)/O.length;if(!A){a=this._drawScales(O,h,g,v,J,D)}if(l){J=parseFloat(L.yAxis.end);v=parseFloat(L.yAxis.start)}var H=this._getRelativeValue(v,J);w=H[0];b=H[1];var t=(w?x/w:10);var u=parseInt(L.width,10);if(u+4>D){u=D-4}var m=Math.floor((D-u)/2);var o=(L.gradient?L.gradient:false);if(!K){this._drawLine(z,h.x,g.y+0.5,g.x,g.y+0.5,"#000000",1)}for(var F=0;F<O.length;F++){var y=parseFloat(L.value(O[F]||0));if(this._logScaleCalc){y=this._log10(y)}I=h.x+m+F*D;var n=N&&y<0;if(!A){e=a-1;O[F].$startY=e;if(N){if(n){e=a+1}O[F].$startYN=a+1}}else{e=n?O[F].$startYN:O[F].$startY}if(!y){continue}if(!A&&!N){y-=v}y*=b;if(e<(h.y+1)){continue}if(L.yAxis&&y===0){this.canvases.y.renderTextAt(true,true,I+Math.floor(u/2),e,this._settings.label(O[F]));continue}var C=this._settings.color.call(this,O[F]);var s=Math.abs(e-(N?(g.y+v*t):g.y))<3;z.globalAlpha=L.alpha.call(this,O[F]);z.fillStyle=z.strokeStyle=L.color.call(this,O[F]);z.beginPath();var c=e-t*y+(s?(n?-1:1):0);var E=this._setStakedBarPoints(z,I-(L.border?0.5:0),e,u+(L.border?0.5:0),c,0,h.y);z.fill();z.stroke();if(o){z.save();var r=this._setBarGradient(z,I,e,I+u,E[1],o,C,"y");z.fillStyle=r.gradient;z.beginPath();E=this._setStakedBarPoints(z,I+r.offset,e,u-r.offset*2,c,(L.border?1:0),h.y);z.fill();z.restore()}if(L.border){z.save();if(typeof L.border=="string"){z.strokeStyle=L.border}else{this._setBorderStyles(z,C)}z.beginPath();this._setStakedBarPoints(z,I-0.5,parseInt(e,10)+0.5,u+1,parseInt(c,10)+0.5,0,h.y,s);z.stroke();z.restore()}z.globalAlpha=1;this.canvases[A].renderTextAt(false,true,I+Math.floor(u/2),(E[1]+(e-E[1])/2)-7,this._settings.label(O[F]));M.addRect(O[F].id,[I-h.x,E[1]-h.y,E[0]-h.x,O[F][n?"$startYN":"$startY"]-h.y],A);O[F][n?"$startYN":"$startY"]=E[1]}},_setStakedBarPoints:function(n,b,l,o,j,e,c,g){n.moveTo(b,l);if(j<c){j=c}n.lineTo(b,j);var a=b+o;var h=j;n.lineTo(a,h);var m=b+o;n.lineTo(m,l);if(!g){n.lineTo(b,l)}return[m,h]}};dhtmlx.chart.line={pvt_render_line:function(j,x,g,e,l,v){var u,m,h,s,r,o,n,b,a,c,w,t;s=this._calculateLineParams(j,x,g,e,l);u=this._settings;if(x.length){r=(u.offset?g.x+s.cellWidth*0.5:g.x);h=[];for(m=0;m<x.length;m++){t=this._getPointY(x[m],g,e,s);if(t){n=((!m)?r:s.cellWidth*m-0.5+r);a=(typeof t=="object"?t.y0:t);if(m&&this._settings.fixOverflow){w=this._getPointY(x[m-1],g,e,s);if(w.out&&w.out==t.out){continue}o=s.cellWidth*(m-1)-0.5+r;b=(typeof w=="object"?w.y0:w);if(w.out){c=(w.out=="min"?e.y:g.y);h.push({x:this._calcOverflowX(o,n,b,a,c),y:c})}if(t.out){c=(t.out=="min"?e.y:g.y);h.push({x:this._calcOverflowX(o,n,b,a,c),y:c})}}if(!t.out){h.push({x:n,y:t,index:m})}}}this._mapStart=g;for(m=1;m<=h.length;m++){o=h[m-1].x;b=h[m-1].y;if(m<h.length){n=h[m].x;a=h[m].y;this._drawLine(j,o,b,n,a,u.line.color.call(this,x[m-1]),u.line.width);if(u.line&&u.line.shadow){j.globalAlpha=0.3;this._drawLine(j,o+2,b+u.line.width+8,n+2,a+u.line.width+8,"#eeeeee",u.line.width+3);j.globalAlpha=1}}if(typeof h[m-1].index!="undefined"){this._drawItem(j,o,b,x[h[m-1].index],u.label(x[h[m-1].index]),l,v,g)}}}},_calcOverflowX:function(b,a,e,c,g){return b+(g-e)*(a-b)/(c-e)},_drawItem:function(s,c,r,m,o,n,b){var e=this._settings.item;var l=parseInt(e.radius.call(this,m),10)||0;var j=this._mapStart;if(l){s.save();if(e.shadow){s.lineWidth=1;s.strokeStyle="#bdbdbd";s.fillStyle="#bdbdbd";var a=[0.1,0.2,0.3];for(var h=(a.length-1);h>=0;h--){s.globalAlpha=a[h];s.strokeStyle="#d0d0d0";s.beginPath();this._strokeChartItem(s,c,r+2*l/3,l+h+1,e.type);s.stroke()}s.beginPath();s.globalAlpha=0.3;s.fillStyle="#bdbdbd";this._strokeChartItem(s,c,r+2*l/3,l+1,e.type);s.fill()}s.restore();if(e.type=="image"&&e.src){this._drawImage(s,c-l,r-l,e.src,l*2,l*2)}else{s.lineWidth=e.borderWidth;s.fillStyle=e.color.call(this,m);s.strokeStyle=e.borderColor.call(this,m);s.globalAlpha=e.alpha.call(this,m);s.beginPath();this._strokeChartItem(s,c,r,l+1,e.type);s.fill();s.stroke();s.globalAlpha=1}}if(o){this.canvases[n].renderTextAt(false,true,c,r-l-this._settings.labelOffset,this._settings.label.call(this,m))}var g=(this._settings.eventRadius||l+1);b.addRect(m.id,[c-g-j.x,r-g-j.y,c+g-j.x,r+g-j.y],n)},_drawImage:function(c,b,l,h,e,a){var g=document.createElement("img");g.style.display="none";g.style.width=e+"px";g.style.height=a+"px";document.body.appendChild(g);g.src=h;var j=function(){c.drawImage(g,b,l)};if(g.complete){j(g)}else{g.onload=j}},_strokeChartItem:function(a,b,g,e,c){var h=[];b=parseInt(b,10);g=parseInt(g,10);if(c&&(c=="square"||c=="s")){e*=Math.sqrt(2)/2;h=[[b-e-a.lineWidth/2,g-e],[b+e,g-e],[b+e,g+e],[b-e,g+e],[b-e,g-e]]}else{if(c&&(c=="diamond"||c=="d")){var j=(a.lineWidth>1?a.lineWidth*Math.sqrt(2)/4:0);h=[[b,g-e],[b+e,g],[b,g+e],[b-e,g],[b+j,g-e-j]]}else{if(c&&(c=="triangle"||c=="t")){h=[[b,g-e],[b+Math.sqrt(3)*e/2,g+e/2],[b-Math.sqrt(3)*e/2,g+e/2],[b,g-e]]}else{h=[[b,g,e,0,Math.PI*2,true]]}}}this._path(a,h)},_getPointY:function(c,l,h,a){var j=a.minValue;var e=a.maxValue;var n=a.unit;var b=a.valueFactor;var m=this._settings.value(c);var o=(parseFloat(m||0)-j)*b;if(!this._settings.yAxis){o+=a.startValue/n}var g=h.y-n*o;if(this._settings.fixOverflow&&(this._settings.view=="line"||this._settings.view=="area")){if(m>e){g={y:l.y,y0:g,out:"max"}}else{if(o<0||m<j){g={y:h.y,y0:g,out:"min"}}}}else{if(m>e){g=l.y}if(o<0||m<j){g=h.y}}return g},_calculateLineParams:function(m,e,j,h,g){var b={};var n;b.totalHeight=h.y-j.y;b.cellWidth=(h.x-j.x)/((!this._settings.offset)?(e.length-1):e.length);var c=!!this._settings.yAxis;var a=(this._settings.view.indexOf("stacked")!=-1?this._getStackedLimits(e):this._getLimits());b.maxValue=a.max;b.minValue=a.min;if(!g){this._drawScales(e,j,h,b.minValue,b.maxValue,b.cellWidth)}if(c){b.maxValue=parseFloat(this._settings.yAxis.end);b.minValue=parseFloat(this._settings.yAxis.start)}var l=this._getRelativeValue(b.minValue,b.maxValue);n=l[0];b.valueFactor=l[1];b.unit=(n?b.totalHeight/n:10);b.startValue=0;if(!c){b.startValue=10;if(b.unit!=b.totalHeight){b.unit=(n?(b.totalHeight-b.startValue)/n:10)}}return b}};dhtmlx.chart.bar={pvt_render_bar:function(y,O,h,g,z,N){var t,C,F,m,L,u,v,b,H,w,s,K,n,M=g.y-h.y;n=!!this._settings.yAxis;K=!!this._settings.xAxis;m=this._getLimits();L=m.max;u=m.min;C=(g.x-h.x)/O.length;if(!z&&!(this._settings.origin!="auto"&&!n)){this._drawScales(O,h,g,u,L,C)}if(n){L=parseFloat(this._settings.yAxis.end);u=parseFloat(this._settings.yAxis.start)}H=this._getRelativeValue(u,L);v=H[0];b=H[1];s=(v?M/v:v);if(!n&&!(this._settings.origin!="auto"&&K)){w=10;s=(v?(M-w)/v:w)}if(!z&&(this._settings.origin!="auto"&&!n)&&this._settings.origin>u){this._drawXAxis(y,O,h,g,C,g.y-s*(this._settings.origin-u))}t=parseInt(this._settings.width,10);var J=0;var E=0;for(F=0;F<this._series.length;F++){if(F==z){E=J}if(this._series[F].view=="bar"){J++}}var l=this._settings.seriesMargin;var e=this._settings.seriesPadding;if(this._series&&(t*J+e+(J>2?l*J:0)>C)){t=C/J-e-(J>2?l:0)}var o=(C-t*J-l*(J-1))/2;if(this._settings.border){t=parseInt(t,10);o=parseInt(o,10)}var j=(typeof this._settings.radius!="undefined"?parseInt(this._settings.radius,10):Math.round(t/5));var r=false;var a=this._settings.gradient;if(a&&typeof(a)!="function"){r=a;a=false}else{if(a){a=y.createLinearGradient(0,g.y,0,h.y);this._settings.gradient(a)}}if(!K){this._drawLine(y,h.x,g.y+0.5,g.x,g.y+0.5,"#000000",1)}for(F=0;F<O.length;F++){var x=parseFloat(this._settings.value(O[F])||0);if(isNaN(x)){continue}if(x>L){x=L}x-=u;x*=b;var I=h.x+o+(J>2?l*E:0)+F*C+t*E;var c=g.y;if(x<0||(this._settings.yAxis&&x===0&&!(this._settings.origin!="auto"&&this._settings.origin>u))){this.canvases[z].renderTextAt(true,true,I+Math.floor(t/2),c,this._settings.label(O[F]));continue}if(!n&&!(this._settings.origin!="auto"&&K)){x+=w/s}var A=a||this._settings.color.call(this,O[F]);y.globalAlpha=this._settings.alpha.call(this,O[F]);var D=this._drawBar(y,h,I,c,t,u,j,s,x,A,a,r);if(r){this._drawBarGradient(y,I,c,t,u,j,s,x,A,r)}if(this._settings.border){this._drawBarBorder(y,I,c,t,u,j,s,x,A)}y.globalAlpha=1;if(D[0]!=I){this.canvases[z].renderTextAt(false,true,I+Math.floor(t/2),D[1],this._settings.label(O[F]))}else{this.canvases[z].renderTextAt(true,true,I+Math.floor(t/2),D[3],this._settings.label(O[F]))}N.addRect(O[F].id,[I-h.x,D[3]-h.y,D[2]-h.x,D[1]-h.y],z)}},_correctBarParams:function(l,g,c,h,j,m,e){var a=this._settings.xAxis;var b=c;if(!!a&&this._settings.origin!="auto"&&(this._settings.origin>e)){c-=(this._settings.origin-e)*j;b=c;h=h-(this._settings.origin-e);if(h<0){h*=(-1);l.translate(g+m,c);l.rotate(Math.PI);g=0;c=0}c-=0.5}return{value:h,x0:g,y0:c,start:b}},_drawBar:function(s,g,x,e,m,n,h,l,r,t,a,j){var u;s.save();s.fillStyle=t;var o=this._correctBarParams(s,x,e,r,l,m,n);if(l*o.value>0){u=this._setBarPoints(s,o.x0,o.y0,m,h,l,o.value,(this._settings.border?1:0))}else{u=[o.x0,o.y0]}if(a&&!j){s.lineTo(o.x0+(this._settings.border?1:0),g.y)}s.fill();s.restore();var w=o.x0;var v=(o.x0!=x?x+u[0]:u[0]);var c=(o.x0!=x?(o.start-u[1]-o.y0):o.y0);var b=(o.x0!=x?o.start-o.y0:u[1]);return[w,c,v,b]},_drawBarBorder:function(m,b,j,n,g,e,l,h,c){var a;m.save();a=this._correctBarParams(m,b,j,h,l,n,g);this._setBorderStyles(m,c);if(l*a.value>0){this._setBarPoints(m,a.x0,a.y0,n,e,l,a.value,m.lineWidth/2,1)}m.stroke();m.restore()},_drawBarGradient:function(r,e,n,s,l,j,o,m,g,b){r.save();var c=this._correctBarParams(r,e,n,m,o,s,l);var h=this._setBarGradient(r,c.x0,c.y0,c.x0+s,c.y0-o*c.value+2,b,g,"y");var a=this._settings.border?1:0;r.fillStyle=h.gradient;if(o*c.value>0){this._setBarPoints(r,c.x0+h.offset,c.y0,s-h.offset*2,j,o,c.value,h.offset+a)}r.fill();r.restore()},_setBarPoints:function(u,e,r,v,l,s,o,g,j){u.beginPath();var b=0;if(l>s*o){var h=(l-s*o)/l;if(h<=1&&h>=-1){b=-Math.acos(h)+Math.PI/2}}u.moveTo(e+g,r);var n=r-Math.floor(s*o)+l+(l?0:g);if(l<s*o){u.lineTo(e+g,n)}var c=e+l;if(l&&l>0){u.arc(c,n,l-g,-Math.PI+b,-Math.PI/2,false)}var a=e+v-l-g;var m=n-l+(l?g:0);u.lineTo(a,m);if(l&&l>0){u.arc(a,n,l-g,-Math.PI/2,0-b,false)}var t=e+v-g;u.lineTo(t,r);if(!j){u.lineTo(e+g,r)}return[t,m]}};dhtmlx.chart.pie={pvt_render_pie:function(b,e,a,h,c,g){this._renderPie(b,e,a,h,1,g,c)},_renderPie:function(r,C,g,e,z,A,s){if(!C.length){return}var t=this._getPieParameters(g,e);var j=(this._settings.radius?this._settings.radius:t.radius);if(j<0){return}var a=this._getValues(C);var h=this._getTotalValue(a);var l=this._getRatios(a,h);var y=(this._settings.x?this._settings.x:t.x);var c=(this._settings.y?this._settings.y:t.y);if(z==1&&this._settings.shadow){this._addShadow(r,y,c,j)}c=c/z;var o=-Math.PI/2;var n;var v=[];r.scale(1,z);if(this._settings.gradient){var x=(z!=1?y+j/3:y);var b=(z!=1?c+j/3:c);this._showRadialGradient(r,y,c,j,x,b)}if(this._settings.labelLines){this._labelMargins=this._getLabelMargins(l,j)}for(var w=0;w<C.length;w++){if(!a[w]){continue}r.strokeStyle=(C.length==1?this._settings.color.call(this,C[w]):this._settings.lineColor.call(this,C[w]));r.beginPath();r.moveTo(y,c);v.push(o);n=-Math.PI/2+l[w]-0.0001;r.arc(y,c,j,o,n,false);r.lineTo(y,c);var u=this._settings.color.call(this,C[w]);r.fillStyle=u;r.fill();if(this._settings.pieInnerText){this._drawSectorLabel(y,c,5*j/6,o,n,z,this._settings.pieInnerText(C[w],h),true)}if(this._settings.label){this._drawSectorLabel(y,c,j,o,n,z,this._settings.label(C[w]),0,(this._labelMargins?this._labelMargins[w]:{}),r)}if(z!=1){this._createLowerSector(r,y,c,o,n,j,true);r.fillStyle="#000000";r.globalAlpha=0.2;this._createLowerSector(r,y,c,o,n,j,false);r.globalAlpha=1;r.fillStyle=u}A.addSector(C[w].id,o,n,y-g.x,c-g.y/z,j,z,s);o=n}r.globalAlpha=0.8;var m;if(v.length>1){for(w=0;w<v.length;w++){m=this._getPositionByAngle(v[w],y,c,j);this._drawLine(r,y,c,m.x,m.y,this._settings.lineColor.call(this,C[w]),2)}}if(z==1){r.lineWidth=2;r.strokeStyle="#ffffff";r.beginPath();r.arc(y,c,j+1,0,2*Math.PI,false);r.stroke()}r.globalAlpha=1;r.scale(1,1/z)},_getLabelMargins:function(t,h){var z,y,F,E,a=[],u=[];var J={1:[0]};for(F=1;F<t.length;F++){z=-Math.PI/2+(F>1?(t[F-1]-(t[F-1]-t[F-2])/2):t[F-1]/2);y=-Math.PI/2+t[F]-(t[F]-t[F-1])/2;var g=Math.cos(y);var w=Math.sin(y);var l=Math.cos(z);var x=Math.sin(z);var A=Math.round((h+8)*Math.abs(Math.sin(y)-Math.sin(z)));var o=(g<0?(w<0?4:3):(w<0?1:2));var s=(l<0?(x<0?4:3):(x<0?1:2));if(!J[o]){J[o]=[]}J[o].push(s==o?A:0)}var C=[];var I=0;for(var v in J){var e=0;var b=J[v].length;var n=0;var m=0;if(v==1||v==3){E=v-1;var H=0;while(E>0){if(J[E]){H+=J[E].length}E--}C[H+J[v].length-1]={y:0,x:0};var E=J[v].length-2;while(E>=0){if((n||E)&&J[v][E+1]-n<18){n+=18-J[v][E+1]}else{n=0}C[H+E]={y:n*(v==1?-1:1)};E--}for(var D=C.length-J[v].length;D<C.length;D++){if(C[D]["y"]!=0){m+=6;C[D]["x"]=m}else{C[D]["x"]=0;m=0}}}else{var E=1;C.push({y:0,x:0});while(E<J[v].length){if(J[v][E]-n<18){n+=18-J[v][E]}else{n=0}C.push({y:n*(v==4?-1:1)});E++}for(var D=C.length-1;D>=C.length-J[v].length;D--){if(C[D]["y"]!=0){m+=8;C[D]["x"]=m}else{m=0;C[D]["x"]=0}}}}return C},_getValues:function(c){var a=[];for(var b=0;b<c.length;b++){a.push(parseFloat(this._settings.value(c[b])||0))}return a},_getTotalValue:function(a){var c=0;for(var b=0;b<a.length;b++){c+=a[b]}return c},_getRatios:function(b,a){var h;var g=[];var e=0;a=a||this._getTotalValue(b);for(var c=0;c<b.length;c++){h=b[c];g[c]=Math.PI*2*(a?((h+e)/a):(1/b.length));e+=h}return g},_getPieParameters:function(j,g){var e=g.x-j.x;var b=g.y-j.y;var c=j.x+e/2;var h=j.y+b/2;var a=Math.min(e/2,b/2);return{x:c,y:h,radius:a}},_createLowerSector:function(e,g,j,c,a,h,b){e.lineWidth=1;if(!((c<=0&&a>=0)||(c>=0&&a<=Math.PI)||(Math.abs(c-Math.PI)>0.003&&c<=Math.PI&&a>=Math.PI))){return}if(c<=0&&a>=0){c=0;b=false;this._drawSectorLine(e,g,j,h,c,a)}if(c<=Math.PI&&a>=Math.PI){a=Math.PI;b=false;this._drawSectorLine(e,g,j,h,c,a)}var l=(this._settings.height||Math.floor(h/4))/this._settings.cant;e.beginPath();e.arc(g,j,h,c,a,false);e.lineTo(g+h*Math.cos(a),j+h*Math.sin(a)+l);e.arc(g,j+l,h,a,c,true);e.lineTo(g+h*Math.cos(c),j+h*Math.sin(c));e.fill();if(b){e.stroke()}},_drawSectorLine:function(c,e,h,g,b,a){c.beginPath();c.arc(e,h,g,b,a,false);c.stroke()},_addShadow:function(b,a,h,e){b.globalAlpha=0.5;var g=["#c4c4c4","#c6c6c6","#cacaca","#dcdcdc","#dddddd","#e0e0e0","#eeeeee","#f5f5f5","#f8f8f8"];for(var c=g.length-1;c>-1;c--){b.beginPath();b.fillStyle=g[c];b.arc(a+1,h+1,e+c,0,Math.PI*2,true);b.fill()}b.globalAlpha=1},_getGrayGradient:function(a){a.addColorStop(0,"#ffffff");a.addColorStop(0.7,"#7a7a7a");a.addColorStop(1,"#000000");return a},_showRadialGradient:function(c,b,j,a,e,g){c.beginPath();var h;if(typeof this._settings.gradient!="function"){h=c.createRadialGradient(e,g,a/4,b,j,a);h=this._getGrayGradient(h)}else{h=this._settings.gradient(h)}c.fillStyle=h;c.arc(b,j,a,0,Math.PI*2,true);c.fill();c.globalAlpha=0.7},_drawSectorLabel:function(K,e,j,C,A,L,w,a,z,E){var v=this.canvases[0].renderText(0,0,w,0,1);if(!v){return}var M=v.scrollWidth;v.style.width=M+"px";if(M>K){M=K}var D=(A-C<0.2?4:8);if(a){D=M/1.8}var h=C+(A-C)/2;var g=j;j=(a?5*j/6:j+this._settings.labelOffset);j=j-(D-8)/2;var o=-D;var n=-8;var F="right";if(h>=Math.PI/2&&h<Math.PI||h<=3*Math.PI/2&&h>=Math.PI){o=-M-o;F="left"}var l=0;if(!a&&L<1&&(h>0&&h<Math.PI)){l=(this._settings.height||Math.floor(j/4))/L}var r=(e+Math.floor(j+l)*Math.sin(h))*L+n;var s=K+Math.floor(j+D/2)*Math.cos(h)+o;var m=(A<Math.PI/2+0.01);var u=(C<Math.PI/2);if(u&&m){s=Math.max(s,K+3)}else{if(!u&&!m){s=Math.min(s,K-M)}else{if(!a&&!this._settings.labelLines&&(h>=Math.PI/2&&h<Math.PI||h<=3*Math.PI/2&&h>=Math.PI)){s+=M/3}}}if(this._settings.labelLines&&!a){var H=Math.abs((Math.abs(z||0)+Math.abs(g*Math.sin(h)))/Math.sin(h));if(z.y){r+=z.y}if(F=="left"){s-=z.x}else{s+=z.x}E.beginPath();E.strokeStyle="#555";var J=K+g*Math.cos(h);var c=e+g*Math.sin(h);E.moveTo(J,c);var I=s-(F=="left"?o-8:2);var b=r;if(F=="left"&&I>J){I=J-Math.abs(b-c+16)/Math.tan(h-Math.PI);b=b+16;if(h<Math.PI){b-=8}}else{b+=8}E.lineTo(I,b);E.lineTo(I+(F=="left"?-5:5),b);E.stroke();r=b-8;s=I+o+(F=="left"?-15:15)}v.style.top=r+"px";v.style.left=s+"px";v.style.width=M+"px";v.style.textAlign=F;v.style.whiteSpace="nowrap"}};dhtmlx.chart.pie3D={pvt_render_pie3D:function(b,e,a,h,c,g){this._renderPie(b,e,a,h,this._settings.cant,g)}};dhtmlx.chart.donut={pvt_render_donut:function(r,g,n,m,j,b){if(!g.length){return}this._renderPie(r,g,n,m,1,b);var e=this._settings;var h=this._getPieParameters(n,m);var a=(e.radius?e.radius:h.radius);var l=((e.innerRadius&&(e.innerRadius<a))?e.innerRadius:a/3);var c=(e.x?e.x:h.x);var o=(e.y?e.y:h.y);r.fillStyle="#ffffff";r.beginPath();r.arc(c,o,l,0,Math.PI*2,true);r.fill()}};dhtmlx.DataDriver.dhtmlxgrid={_grid_getter:"_get_cell_value",toObject:function(a){this._grid=a;return a},getRecords:function(a){return a.rowsBuffer},getDetails:function(c){var a={};for(var b=0;b<this._grid.getColumnsNum();b++){a["data"+b]=this._grid[this._grid_getter](c,b)}return a},getInfo:function(a){return{_size:0,_from:0}}};dhtmlx.ui.Canvas=function(b,c,g){this._canvas_labels=[];this._canvas_name=c;this._obj=b;var e=b.offsetWidth*(window.devicePixelRatio||1);var a=b.offsetHeight*(window.devicePixelRatio||1);var g=g||"";g+=";width:"+b.offsetWidth+"px;height:"+b.offsetHeight+"px;";this._prepareCanvas(c,g,e,a)};dhtmlx.ui.Canvas.prototype={_prepareCanvas:function(b,e,c,a){this._canvas=dhtmlx.html.create("canvas",{width:c,height:a,canvas_id:b,style:(e||"")});this._obj.appendChild(this._canvas);if(!this._canvas.getContext){if(dhtmlx._isIE){dhtmlx.require("thirdparty/excanvas/excanvas.js");G_vmlCanvasManager.init_(document);G_vmlCanvasManager.initElement(this._canvas)}else{dhtmlx.error("Canvas is not supported in the current browser")}}return this._canvas},getCanvas:function(b){var a=(this._canvas||this._prepareCanvas()).getContext(b||"2d");if(!this._dhtmlxDevicePixelRatio){this._dhtmlxDevicePixelRatio=true;a.scale(window.devicePixelRatio||1,window.devicePixelRatio||1)}return a},_resizeCanvas:function(){if(this._canvas){var a=this._canvas.parentNode.offsetWidth;var b=this._canvas.parentNode.offsetHeight;this._canvas.setAttribute("width",a*(window.devicePixelRatio||1));this._canvas.setAttribute("height",b*(window.devicePixelRatio||1));this._canvas.style.width=a+"px";this._canvas.style.height=b+"px";this._dhtmlxDevicePixelRatio=false}},renderText:function(a,h,g,e,b){if(!g){return}var c=dhtmlx.html.create("DIV",{"class":"dhx_canvas_text"+(e?(" "+e):""),style:"left:"+a+"px; top:"+h+"px;"},g);this._obj.appendChild(c);this._canvas_labels.push(c);if(b){c.style.width=b+"px"}return c},renderTextAt:function(g,m,a,l,e,j,b){var h=this.renderText.call(this,a,l,e,j,b);if(h){if(g){if(g=="middle"){h.style.top=parseInt(l-h.offsetHeight/2,10)+"px"}else{h.style.top=l-h.offsetHeight+"px"}}if(m){if(m=="left"){h.style.left=a-h.offsetWidth+"px"}else{h.style.left=parseInt(a-h.offsetWidth/2,10)+"px"}}}return h},clearCanvas:function(a){var b=[],c;for(c=0;c<this._canvas_labels.length;c++){this._obj.removeChild(this._canvas_labels[c])}this._canvas_labels=[];if(!a&&this._obj._htmlmap){b=this._getMapAreas();while(b.length){b[0].parentNode.removeChild(b[0]);b.splice(0,1)}b=null;if(!this._obj._htmlmap.getElementsByTagName("AREA").length){this._obj._htmlmap.parentNode.removeChild(this._obj._htmlmap);this._obj._htmlmap=null}}this.getCanvas().clearRect(0,0,this._canvas.width,this._canvas.height)},toggleCanvas:function(){this._toggleCanvas(this._canvas.style.display=="none")},showCanvas:function(){this._toggleCanvas(true)},hideCanvas:function(){this._toggleCanvas(false)},_toggleCanvas:function(a){var b,c;for(c=0;c<this._canvas_labels.length;c++){this._canvas_labels[c].style.display=(a?"":"none")}if(this._obj._htmlmap){b=this._getMapAreas();for(c=0;c<b.length;c++){if(a){b[c].removeAttribute("disabled")}else{b[c].setAttribute("disabled","true")}}}this._canvas.style.display=(a?"":"none")},_getMapAreas:function(){var c=[],a,b;a=this._obj._htmlmap.getElementsByTagName("AREA");for(b=0;b<a.length;b++){if(a[b].getAttribute("userdata")==this._canvas_name){c.push(a[b])}}return c}};dhtmlXChart=function(a){this.name="Chart";if(dhtmlx.assert_enabled()){this._assert()}dhtmlx.extend(this,dhtmlx.Settings);this._parseContainer(a,"dhx_chart");dhtmlx.extend(this,dhtmlx.AtomDataLoader);dhtmlx.extend(this,dhtmlx.DataLoader);this.data.provideApi(this,true);dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.MouseEvents);dhtmlx.destructors.push(this);dhtmlx.extend(this,dhtmlx.Group);dhtmlx.extend(this,dhtmlx.AutoTooltip);for(var b in dhtmlx.chart){dhtmlx.extend(this,dhtmlx.chart[b])}if(a.preset){this.definePreset(a)}this._parseSettings(a,this.defaults);this._series=[this._settings];this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render()},this));this.attachEvent("onLocateData",this._switchSerie)};dhtmlXChart.prototype={_id:"dhx_area_id",on_click:{dhx_chart_legend_item:function(j,l,h){var g=h.getAttribute("series_id");if(this.callEvent("onLegendClick",[j,g,h])){var c=this._settings;var b=c.legend.values;var a=(b&&(typeof b[g].toggle!="undefined"))?b[g].toggle:c.legend.toggle;if((typeof g!="undefined")&&this._series.length>1){if(a){if(h.className.indexOf("hidden")!=-1){this.showSeries(g)}else{this.hideSeries(g)}}}}}},on_dblclick:{},on_mouse_move:{},destructor:function(){dhtmlx.Destruction.destructor.apply(this,arguments);if(this.canvases){for(var a in this.canvases){this.canvases[a]._obj=null;this.canvases[a]=null}this.canvases=null}if(this.legendObj){this.legendObj.innerHTML="";this.legendObj=null}if(this.config.tooltip){this.config.tooltip._obj=null;this.config.tooltip._dataobj=null}},bind:function(){dhtmlx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhtmlx.BaseBind.legacySync.apply(this,arguments)},resize:function(){for(var a in this.canvases){this.canvases[a]._resizeCanvas()}this.render()},view_setter:function(a){if(!dhtmlx.chart[a]){dhtmlx.error("Chart type extension is not loaded: "+a)}if(typeof this._settings.offset=="undefined"){this._settings.offset=!(a=="area"||a=="stackedArea")}if(a=="radar"&&!this._settings.yAxis){this.define("yAxis",{})}if(a=="scatter"){if(!this._settings.yAxis){this.define("yAxis",{})}if(!this._settings.xAxis){this.define("xAxis",{})}}return a},clearCanvas:function(){if(this.canvases&&typeof this.canvases=="object"){for(var a in this.canvases){this.canvases[a].clearCanvas()}}},render:function(){var c,b,e,g,a;if(!this.callEvent("onBeforeRender",[this.data])){return}if(this.canvases&&typeof this.canvases=="object"){for(b in this.canvases){this.canvases[b].clearCanvas()}}else{this.canvases={}}if(this._settings.legend){if(!this.canvases.legend){this.canvases.legend=new dhtmlx.ui.Canvas(this._obj,"legend")}this._drawLegend(this.data.getRange(),this._obj.offsetWidth)}c=this._getChartBounds(this._obj.offsetWidth,this._obj.offsetHeight);this._map=g=new dhtmlx.ui.Map(this._id);a=this._settings;e=this._getChartData();for(b=0;b<this._series.length;b++){this._settings=this._series[b];if(!this.canvases[b]){this.canvases[b]=new dhtmlx.ui.Canvas(this._obj,b,"z-index:"+(2+b))}this["pvt_render_"+this._settings.view](this.canvases[b].getCanvas(),e,c.start,c.end,b,g)}g.render(this._obj);this._obj.lastChild.style.zIndex=1000;this._applyBounds(this._obj.lastChild,c);this.callEvent("onAfterRender",[]);this._settings=a},_applyBounds:function(c,b){var a={};a.left=b.start.x;a.top=b.start.y;a.width=b.end.x-b.start.x;a.height=b.end.y-b.start.y;for(var e in a){c.style[e]=a[e]+"px"}},_getChartData:function(){var e,j,c,g,h,n,a,l,m,b;g=this.data.getRange();e=(this._settings.view.toLowerCase().indexOf("barh")!=-1?"yAxis":"xAxis");j=this._settings[e];if(j&&j.units&&(typeof j.units=="object")){c=j.units;l=[];if(typeof c.start!="undefined"&&typeof c.end!="undefined"&&typeof c.next!="undefined"){a=c.start;while(a<=c.end){l.push(a);a=c.next.call(this,a)}}else{if(Object.prototype.toString.call(c)==="[object Array]"){l=c}}n=[];if(l.length){m=j.value;b={};for(h=0;h<g.length;h++){b[m(g[h])]=h}for(h=0;h<l.length;h++){if(typeof b[l[h]]!="undefined"){g[b[l[h]]].$unit=l[h];n.push(g[b[l[h]]])}else{n.push({$unit:l[h]})}}}return n}return g},value_setter:dhtmlx.Template.obj_setter,xValue_setter:dhtmlx.Template.obj_setter,yValue_setter:function(a){this.define("value",a)},alpha_setter:dhtmlx.Template.obj_setter,label_setter:dhtmlx.Template.obj_setter,lineColor_setter:dhtmlx.Template.obj_setter,borderColor_setter:dhtmlx.Template.obj_setter,pieInnerText_setter:dhtmlx.Template.obj_setter,gradient_setter:function(a){if((typeof(a)!="function")&&a&&(a===true)){a="light"}return a},colormap:{RAINBOW:function(a){var b=Math.floor(this.indexById(a.id)/this.dataCount()*1536);if(b==1536){b-=1}return this._rainbow[Math.floor(b/256)](b%256)}},color_setter:function(a){return this.colormap[a]||dhtmlx.Template.obj_setter(a)},fill_setter:function(a){return((!a||a==0)?false:dhtmlx.Template.obj_setter(a))},definePreset:function(a){this.define("preset",a.preset);delete a.preset},preset_setter:function(h){var e,c,g;this.defaults=dhtmlx.extend({},this.defaults);if(typeof dhtmlx.presets.chart[h]=="object"){g=dhtmlx.presets.chart[h];for(e in g){if(typeof g[e]=="object"){if(!this.defaults[e]||typeof this.defaults[e]!="object"){this.defaults[e]=dhtmlx.extend({},g[e])}else{this.defaults[e]=dhtmlx.extend({},this.defaults[e]);for(c in g[e]){this.defaults[e][c]=g[e][c]}}}else{this.defaults[e]=g[e]}}return h}return false},legend_setter:function(a){if(!a){if(this.legendObj){this.legendObj.innerHTML="";this.legendObj=null}return false}if(typeof(a)!="object"){a={template:a}}this._mergeSettings(a,{width:150,height:18,layout:"y",align:"left",valign:"bottom",template:"",toggle:(this._settings.view.toLowerCase().indexOf("stacked")!=-1?"":"hide"),marker:{type:"square",width:15,height:15,radius:3},margin:4,padding:3});a.template=dhtmlx.Template.setter(a.template);return a},defaults:{color:"RAINBOW",alpha:"1",label:false,value:"{obj.value}",padding:{},view:"pie",lineColor:"#ffffff",cant:0.5,width:30,labelWidth:100,line:{width:2,color:"#1293f8"},seriesMargin:1,seriesPadding:4,item:{radius:3,borderColor:"#636363",borderWidth:1,color:"#ffffff",alpha:1,type:"r",shadow:false},shadow:true,gradient:false,border:true,labelOffset:20,origin:"auto"},item_setter:function(a){if(typeof(a)!="object"){a={color:a,borderColor:a}}this._mergeSettings(a,dhtmlx.extend({},this.defaults.item));var c=["alpha","borderColor","color","radius"];for(var b=0;b<c.length;b++){a[c[b]]=dhtmlx.Template.setter(a[c[b]])}return a},line_setter:function(a){if(typeof(a)!="object"){a={color:a}}dhtmlx.extend(this.defaults.line,a);a=dhtmlx.extend({},this.defaults.line);a.color=dhtmlx.Template.setter(a.color);return a},padding_setter:function(a){if(typeof(a)!="object"){a={left:a,right:a,top:a,bottom:a}}this._mergeSettings(a,{left:50,right:20,top:35,bottom:40});return a},xAxis_setter:function(a){if(!a){return false}if(typeof(a)!="object"){a={template:a}}if(!a.value){a.value=a.template}this._mergeSettings(a,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",value:"{obj}",lines:true});var b=["lineColor","template","lines","value"];this._converToTemplate(b,a);this._configXAxis=dhtmlx.extend({},a);return a},yAxis_setter:function(a){if(!a){return false}this._mergeSettings(a,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:true,bg:"#ffffff"});var b=["lineColor","template","lines","bg"];this._converToTemplate(b,a);this._configYAxis=dhtmlx.extend({},a);return a},_converToTemplate:function(a,b){for(var c=0;c<a.length;c++){b[a[c]]=dhtmlx.Template.setter(b[a[c]])}},_drawScales:function(g,e,c,j,a,b){var h=0;if(this._settings.yAxis){if(!this.canvases.y){this.canvases.y=new dhtmlx.ui.Canvas(this._obj,"axis_y")}h=this._drawYAxis(this.canvases.y.getCanvas(),g,e,c,j,a)}if(this._settings.xAxis){if(!this.canvases.x){this.canvases.x=new dhtmlx.ui.Canvas(this._obj,"axis_x")}this._drawXAxis(this.canvases.x.getCanvas(),g,e,c,b,h)}return h},_drawXAxis:function(t,h,r,o,e,n){var c=r.x-0.5;var s=parseInt((n?n:o.y),10)+0.5;var b=o.x;var j;var a=true;var l=(this._settings.origin===0&&this._settings.view=="stackedBar")?o.y+0.5:s;for(var g=0;g<h.length;g++){if(this._settings.offset===true){j=c+e/2+g*e}else{j=(g==h.length-1)?o.x:c+g*e;a=!!g}j=Math.ceil(j)-0.5;var m=((this._settings.origin!="auto")&&(this._settings.view=="bar")&&(parseFloat(this._settings.value(h[g]))<this._settings.origin));this._drawXAxisLabel(j,l,h[g],a,m);if((this._settings.offset||g)&&this._settings.xAxis.lines.call(this,h[g])){this._drawXAxisLine(t,j,o.y,r.y,h[g])}}this.canvases.x.renderTextAt(true,false,c,o.y+this._settings.padding.bottom-3,this._settings.xAxis.title,"dhx_axis_title_x",o.x-r.x);this._drawLine(t,c,s,b,s,this._settings.xAxis.color,1);if(!this._settings.xAxis.lines.call(this,{})||!this._settings.offset){return}this._drawLine(t,b+0.5,o.y,b+0.5,r.y+0.5,this._settings.xAxis.color,0.2)},_drawYAxis:function(u,z,h,g,l,j){var m;var s={};if(!this._settings.yAxis){return}var w=h.x-0.5;var e=g.y;var b=h.y;var t=g.y;if(this._settings.yAxis.step){m=parseFloat(this._settings.yAxis.step)}if(typeof this._configYAxis.step=="undefined"||typeof this._configYAxis.start=="undefined"||typeof this._configYAxis.end=="undefined"){s=this._calculateScale(l,j);l=s.start;j=s.end;m=s.step;this._settings.yAxis.end=j;this._settings.yAxis.start=l}this._setYAxisTitle(h,g);if(m===0){j=l;m=1}var a=(j==l?e-b:(e-b)*m/(j-l));var x=0;for(var v=l;v<=j;v+=m){if(s.fixNum){v=parseFloat((new Number(v)).toFixed(s.fixNum))}var y=Math.floor(e-x*a)+0.5;if(!(v==l&&this._settings.origin=="auto")&&this._settings.yAxis.lines.call(this,v)){this._drawLine(u,w,y,g.x,y,this._settings.yAxis.lineColor.call(this,v),1)}if(v==this._settings.origin){t=y}var n=v;if(m<1){var o=Math.min(this._log10(m),(l<=0?0:this._log10(l)));var r=Math.pow(10,-o);n=Math.round(v*r)/r;v=n}this.canvases.y.renderText(0,y-5,this._settings.yAxis.template(n.toString()),"dhx_axis_item_y",h.x-5);x++}this._drawLine(u,w,e+1,w,b,this._settings.yAxis.color,1);return t},_setYAxisTitle:function(c,b){var a="dhx_axis_title_y"+(dhtmlx._isIE&&dhtmlx._isIE!=9?" dhx_ie_filter":"");var e=this.canvases.y.renderTextAt("middle",false,0,parseInt((b.y-c.y)/2+c.y,10),this._settings.yAxis.title,a);if(e){e.style.left=(dhtmlx.env.transform?(e.offsetHeight-e.offsetWidth)/2:0)+"px"}},_calculateScale:function(n,b){if(this._settings.origin!="auto"&&this._settings.origin<n){n=this._settings.origin}var g,e,j;g=((b-n)/8)||1;var c=Math.floor(this._log10(g));var a=Math.pow(10,c);var h=g/a;h=(h>5?10:5);g=parseInt(h,10)*a;if(g>Math.abs(n)){e=(n<0?-g:0)}else{var o=Math.abs(n);var m=Math.floor(this._log10(o));var l=o/Math.pow(10,m);e=Math.ceil(l*10)/10*Math.pow(10,m)-g;if(o>1&&g>0.1){e=Math.ceil(e)}while(n<0?e<=n:e>=n){e-=g}if(n<0){e=-e-2*g}}j=e;while(j<b){j+=g;j=parseFloat((new Number(j)).toFixed(Math.abs(c)))}return{start:e,end:j,step:g,fixNum:Math.abs(c)}},_getLimits:function(b,j){var l,h;var g=((arguments.length&&b=="h")?this._configXAxis:this._configYAxis);j=j||"value";if(g&&(typeof g.end!="undefined")&&(typeof g.start!="undefined")&&g.step){l=parseFloat(g.end);h=parseFloat(g.start)}else{l=this.max(this._series[0][j]);h=(g&&(typeof g.start!="undefined"))?parseFloat(g.start):this.min(this._series[0][j]);if(this._series.length>1){for(var e=1;e<this._series.length;e++){var a=this.max(this._series[e][j]);var c=this.min(this._series[e][j]);if(a>l){l=a}if(c<h){h=c}}}}return{max:l,min:h}},_log10:function(b){var a="log";return Math.floor((Math[a](b)/Math.LN10))},_drawXAxisLabel:function(b,h,g,a,e){if(!this._settings.xAxis){return}var c=this.canvases.x.renderTextAt(e,a,b,h-(e?2:0),this._settings.xAxis.template(g));if(c){c.className+=" dhx_axis_item_x"}},_drawXAxisLine:function(b,a,e,c,g){if(!this._settings.xAxis||!this._settings.xAxis.lines){return}this._drawLine(b,a,e,a,c,this._settings.xAxis.lineColor.call(this,g),1)},_drawLine:function(a,e,j,c,g,b,h){a.strokeStyle=b;a.lineWidth=h;a.beginPath();a.moveTo(e,j);a.lineTo(c,g);a.stroke();a.lineWidth=1},_getRelativeValue:function(e,g){var c,a;var b=1;if(g!=e){c=g-e}else{c=e}return[c,b]},_rainbow:[function(a){return"#FF"+dhtmlx.math.toHex(a/2,2)+"00"},function(a){return"#FF"+dhtmlx.math.toHex(a/2+128,2)+"00"},function(a){return"#"+dhtmlx.math.toHex(255-a,2)+"FF00"},function(a){return"#00FF"+dhtmlx.math.toHex(a,2)},function(a){return"#00"+dhtmlx.math.toHex(255-a,2)+"FF"},function(a){return"#"+dhtmlx.math.toHex(a,2)+"00FF"}],addSeries:function(b){var a=this._settings;this._settings=dhtmlx.extend({},a);this._parseSettings(b,{});this._series.push(this._settings);this._settings=a},_switchSerie:function(h,a,g){var c;this._active_serie=(this._series.length==1?a.getAttribute("userdata"):this._getActiveSeries(g));if(!this._series[this._active_serie]){return}for(var b=0;b<this._series.length;b++){c=this._series[b].tooltip;if(c){c.disable()}}if(!a.getAttribute("disabled")){c=this._series[this._active_serie].tooltip;if(c){c.enable()}}},_getActiveSeries:function(h){var m,b,g,c,l,o,n,j;b=this._map._areas;c=dhtmlx.html.offset(this._obj._htmlmap);l=dhtmlx.html.pos(h);n=l.x-c.x;j=l.y-c.y;for(g=0;g<b.length;g++){m=b[g].points;if(n<=m[2]&&n>=m[0]&&j<=m[3]&&j>=m[1]){if(o){if(b[g].index>o.index){o=b[g]}}else{o=b[g]}}}return o?o.index:0},hideSeries:function(a){this.canvases[a].hideCanvas();if(this._settings.legend.values&&this._settings.legend.values[a]){this._settings.legend.values[a].$hidden=true}this._drawLegend()},showSeries:function(a){this.canvases[a].showCanvas();if(this._settings.legend.values&&this._settings.legend.values[a]){delete this._settings.legend.values[a].$hidden}this._drawLegend()},_changeColorSV:function(b,g,a){var e,c;c=dhtmlx.math.toRgb(b);e=dhtmlx.math.rgbToHsv(c[0],c[1],c[2]);e[1]*=g;e[2]*=a;return"rgb("+dhtmlx.math.hsvToRgb(e[0],e[1],e[2])+")"},_setBorderStyles:function(a,b){var e,c;c=dhtmlx.math.toRgb(b);e=dhtmlx.math.rgbToHsv(c[0],c[1],c[2]);e[2]/=2;b="rgb("+dhtmlx.math.hsvToRgb(e[0],e[1],e[2])+")";a.strokeStyle=b;if(a.globalAlpha==1){a.globalAlpha=0.9}},_drawLegend:function(g,b){var h,o,v,r,j,s,a,m=0,l=0,u,n,e,t;g=g||[];b=b||this._obj.offsetWidth;u=this.canvases.legend.getCanvas();o=this._settings.legend;a=(this._settings.legend.layout!="x"?"width:"+o.width+"px":"");if(this.legendObj){this.legendObj.innerHTML="";this.legendObj.parentNode.removeChild(this.legendObj)}this.canvases.legend.clearCanvas(true);v=dhtmlx.html.create("DIV",{"class":"dhx_chart_legend",style:"left:"+m+"px; top:"+l+"px;"+a},"");if(o.padding){v.style.padding=o.padding+"px"}this.legendObj=v;this._obj.appendChild(v);j=[];if(!o.values){for(h=0;h<g.length;h++){j.push(this._drawLegendText(v,o.template(g[h])))}}else{for(h=0;h<o.values.length;h++){j.push(this._drawLegendText(v,o.values[h].text,(typeof o.values[h].id!="undefined"?typeof o.values[h].id:h),o.values[h].$hidden))}}s=v.offsetWidth;r=v.offsetHeight;if(s<this._obj.offsetWidth){if(o.layout=="x"&&o.align=="center"){m=(this._obj.offsetWidth-s)/2}if(o.align=="right"){m=this._obj.offsetWidth-s}if(o.margin&&o.align!="center"){m+=(o.align=="left"?1:-1)*o.margin}}if(r<this._obj.offsetHeight){if(o.valign=="middle"&&o.align!="center"&&o.layout!="x"){l=(this._obj.offsetHeight-r)/2}else{if(o.valign=="bottom"){l=this._obj.offsetHeight-r}}if(o.margin&&o.valign!="middle"){l+=(o.valign=="top"?1:-1)*o.margin}}v.style.left=m+"px";v.style.top=l+"px";u.save();for(h=0;h<j.length;h++){t=j[h];if(o.values&&o.values[h].$hidden){e=true;n=(o.values[h].disableColor?o.values[h].disableColor:"#d9d9d9")}else{e=false;n=(o.values?o.values[h].color:this._settings.color.call(this,g[h]))}var c=(o.marker.position=="right"?t.offsetWidth-o.marker.width:0);this._drawLegendMarker(u,t.offsetLeft+m+c,t.offsetTop+l,n,t.offsetHeight,e,h)}u.restore();j=null},_drawLegendText:function(a,h,b,g){var e="";var c=this._settings.legend;if(c.layout=="x"){e="float:left;"}var l=c.marker.position;var j=dhtmlx.html.create("DIV",{style:e+"padding-"+(l&&l=="right"?"right":"left")+":"+(10+c.marker.width)+"px","class":"dhx_chart_legend_item"+(g?" hidden":"")},h);if(arguments.length>2){j.setAttribute("series_id",b)}a.appendChild(j);return j},_drawLegendMarker:function(v,r,o,g,u,h,l){var b=[];var j=this._settings.legend.marker;var t=this._settings.legend.values;var n=(t&&t[l].markerType?t[l].markerType:j.type);if(g){v.fillStyle=g;v.strokeStyle=this._getDarkenColor(g,0.75)}v.beginPath();if(n=="round"||!j.radius){v.lineWidth=j.height;v.lineCap=n;r+=v.lineWidth/2+5;o+=u/2;v.moveTo(r,o);var a=r+j.width-j.height+1;v.lineTo(a,o)}else{if(n=="item"){if(this._settings.line&&this._settings.view!="scatter"&&!this._settings.disableLines){v.beginPath();v.lineWidth=this._series[l].line.width;v.strokeStyle=h?g:this._series[l].line.color.call(this,{});var c=r+5;var s=o+u/2;v.moveTo(c,s);var a=c+j.width;v.lineTo(a,s);v.stroke()}var e=this._series[l].item;var m=parseInt(e.radius.call(this,{}),10)||0;if(m){if(e.type=="image"&&e.src){this._drawImage(v,r+5,o+j.height/2-5,e.src,m*2,m*2);return}else{v.beginPath();if(h){v.lineWidth=e.borderWidth;v.strokeStyle=g;v.fillStyle=g}else{v.lineWidth=e.borderWidth;v.fillStyle=e.color.call(this,{});v.strokeStyle=e.borderColor.call(this,{});v.globalAlpha=e.alpha.call(this,{})}v.beginPath();r+=j.width/2+5;o+=u/2;this._strokeChartItem(v,r,o,m+1,e.type);v.fill();v.stroke()}}v.globalAlpha=1}else{v.lineWidth=1;r+=5;o+=parseInt(u/2-j.height/2,10);b=[[r+j.radius,o+j.radius,j.radius,Math.PI,3*Math.PI/2,false],[r+j.width-j.radius,o],[r+j.width-j.radius,o+j.radius,j.radius,-Math.PI/2,0,false],[r+j.width,o+j.height-j.radius],[r+j.width-j.radius,o+j.height-j.radius,j.radius,0,Math.PI/2,false],[r+j.radius,o+j.height],[r+j.radius,o+j.height-j.radius,j.radius,Math.PI/2,Math.PI,false],[r,o+j.radius]];this._path(v,b)}}v.stroke();v.fill()},_getDarkenColor:function(a,e){var c,b;b=dhtmlx.math.toRgb(a);c=dhtmlx.math.rgbToHsv(b[0],b[1],b[2]);c[2]=c[2]*e;return"rgb("+dhtmlx.math.hsvToRgb(c[0],c[1],c[2])+")"},_getChartBounds:function(a,j){var m,c,l,b;m=this._settings.padding.left;c=this._settings.padding.top;l=a-this._settings.padding.right;b=j-this._settings.padding.bottom;if(this._settings.legend){var g=this._settings.legend;var h=this._settings.legend.width;var e=this._settings.legend.height;if(g.layout=="x"){if(g.valign=="center"){if(g.align=="right"){l-=h}else{if(g.align=="left"){m+=h}}}else{if(g.valign=="bottom"){b-=e}else{c+=e}}}else{if(g.align=="right"){l-=h}else{if(g.align=="left"){m+=h}}}}return{start:{x:m,y:c},end:{x:l,y:b}}},_getStackedLimits:function(g){var b,a,h,e,c;if(this._settings.yAxis&&(typeof this._settings.yAxis.end!="undefined")&&(typeof this._settings.yAxis.start!="undefined")&&this._settings.yAxis.step){h=parseFloat(this._settings.yAxis.end);e=parseFloat(this._settings.yAxis.start)}else{for(b=0;b<g.length;b++){g[b].$sum=0;g[b].$min=Infinity;for(a=0;a<this._series.length;a++){c=parseFloat(this._series[a].value(g[b])||0);if(isNaN(c)){continue}if(this._series[a].view.toLowerCase().indexOf("stacked")!=-1){g[b].$sum+=c}if(c<g[b].$min){g[b].$min=c}}}h=-Infinity;e=Infinity;for(b=0;b<g.length;b++){if(g[b].$sum>h){h=g[b].$sum}if(g[b].$min<e){e=g[b].$min}}if(e>0){e=0}}return{max:h,min:e}},_setBarGradient:function(t,b,o,a,m,l,e,c){var n,g,j,h,s,r;if(l=="light"){if(c=="x"){n=t.createLinearGradient(b,o,a,o)}else{n=t.createLinearGradient(b,o,b,m)}r=[[0,"#FFFFFF"],[0.9,e],[1,e]];g=2}else{if(l=="falling"||l=="rising"){if(c=="x"){n=t.createLinearGradient(b,o,a,o)}else{n=t.createLinearGradient(b,o,b,m)}j=dhtmlx.math.toRgb(e);h=dhtmlx.math.rgbToHsv(j[0],j[1],j[2]);h[1]*=1/2;s="rgb("+dhtmlx.math.hsvToRgb(h[0],h[1],h[2])+")";if(l=="falling"){r=[[0,s],[0.7,e],[1,e]]}else{if(l=="rising"){r=[[0,e],[0.3,e],[1,s]]}}g=0}else{t.globalAlpha=0.37;g=0;if(c=="x"){n=t.createLinearGradient(b,m,b,o)}else{n=t.createLinearGradient(b,o,a,o)}r=[[0,"#9d9d9d"],[0.3,"#e8e8e8"],[0.45,"#ffffff"],[0.55,"#ffffff"],[0.7,"#e8e8e8"],[1,"#9d9d9d"]]}}this._gradient(n,r);return{gradient:n,offset:g}},_getPositionByAngle:function(c,b,g,e){c*=(-1);b=b+Math.cos(c)*e;g=g-Math.sin(c)*e;return{x:b,y:g}},_gradient:function(c,b){for(var a=0;a<b.length;a++){c.addColorStop(b[a][0],b[a][1])}},_path:function(a,c){var b,e;for(b=0;b<c.length;b++){e=(b?"lineTo":"moveTo");if(c[b].length>2){e="arc"}a[e].apply(a,c[b])}},_circle:function(b,a,e,c){b.arc(a,e,c,Math.PI*2,true)},_addMapRect:function(e,g,a,c,b){e.addRect(g,[a[0].x-c.x,a[0].y-c.y,a[1].x-c.x,a[1].y-c.y],b)}};dhtmlx.compat("layout");if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype.attachChart=function(a){this.callEvent("_onBeforeContentAttach",["chart"]);var b=document.createElement("DIV");b.id="dhxChartObj_"+window.dhx4.newId();b.style.width="100%";b.style.height="100%";document.body.appendChild(b);this._attachObject(b);a.container=b.id;this.dataType="chart";this.dataObj=new dhtmlXChart(a);if(!this.dataObj.setSizes){this.dataObj.setSizes=function(){if(this.resize){this.resize()}else{this.render()}}}return this.dataObj}}function dhtmlXEditor(c,e){var b=this;this.conf={content:"",contentHTML:"",resizeTM:null,resizeTMTime:100,roMode:false,toolbar:false,iconsPath:"",evs:["focus","blur","keydown","keyup","keypress","mouseup","mousedown","click","touchend"],iOSfix:(navigator.userAgent.match(/Mobile/gi)!=null&&navigator.userAgent.match(/iPad/gi)!=null&&navigator.userAgent.match(/AppleWebKit/gi)!=null),extra_css:"",font:{family:"Tahoma",size:"12px",color:"black"}};this._doOnFocusChanged=null;this._doOnAccess=null;if(typeof(c)=="object"&&c!=null&&c.tagName==null){e=c.skin;if(c.content!=null){this.conf.content=c.content}if(c.contentHTML!=null){this.conf.contentHTML=c.contentHTML}if(c.iconsPath!=null){this.conf.iconsPath=c.iconsPath}if(c.extraCss!=null){this.conf.extra_css=c.extraCss}if(c.toolbar!=null){this.conf.toolbar=window.dhx4.s2b(c.toolbar)}if(c.onFocusChanged!=null){this._doOnFocusChanged=c.onFocusChanged}if(c.onAccess!=null){this._doOnAccess=c.onAccess}c=c.parent}this.conf.skin=(e||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxeditor")||"material");if(typeof(c)=="string"){c=document.getElementById(c)}this.base=c;this.base.className+=" dhxeditor_"+this.conf.skin;while(this.base.childNodes.length>0){this.base.removeChild(this.base.childNodes[0])}var g=(window.dhx4.isIE?this.base.currentStyle.position:(window.getComputedStyle!=null?window.getComputedStyle(this.base,null).getPropertyValue("position"):""));if(!(g=="relative"||g=="absolute")){this.base.style.position="relative"}this.cell=new dhtmlXEditorCell(window.dhx4.newId(),this);this.base.appendChild(this.cell.cell);this.cBlock=document.createElement("DIV");this.cBlock.className="dhxcont_content_blocker";this.cBlock.style.display="none";this.base.appendChild(this.cBlock);this.editor=document.createElement("IFRAME");this.editor.className="dhxeditor_mainiframe";this.editor.frameBorder=0;if(window.dhx4.isOpera){this.editor.scrolling="yes"}this.setSizes();var a=this.editor;if(typeof(window.addEventListener)!="undefined"){a.onload=function(){for(var h=0;h<b.conf.evs.length;h++){a.contentWindow.addEventListener(b.conf.evs[h],b._ev,false)}}}else{a.onreadystatechange=function(h){if(typeof(a.readyState)!="undefined"&&a.readyState=="complete"){try{for(var j=0;j<b.conf.evs.length;j++){a.contentWindow.document.body.attachEvent("on"+b.conf.evs[j],b._ev)}}catch(l){}}}}this._ev=function(j){j=j||event;var h=j.type;if(b.conf.iOSfix==true&&h=="touchend"){b.editor.contentWindow.focus();return}b.callEvent("onAccess",[h,j]);if(typeof(b._doOnAccess)=="function"){b._doOnAccess(h,j)}else{if(typeof(b._doOnAccess)=="string"&&typeof(window[b._doOnAccess])=="function"){window[b._doOnAccess](h,j)}}};this._focus=function(){if(window.dhx4.isIE){this.editor.contentWindow.document.body.focus()}else{this.editor.contentWindow.focus()}};this.cell.attachObject(this.editor);this.edWin=this.editor.contentWindow;this.edDoc=this.edWin.document;this._prepareContent=function(l,n){var j="";if(l===true&&this.getContent!=null){j=this.getContent()}var h=this.editor.contentWindow.document;h.open("text/html","replace");if(window.dhx4.isOpera){h.write("<html><head>"+this.conf.extra_css+"<style> html, body { overflow:auto;-webkit-overflow-scrolling: touch; padding:0px; height:100%; margin:0px; background-color:#ffffff; "+this._fontConf()+"} </style></head><body "+(n!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}else{if(window.dhx4.isKHTML){h.write("<html><head>"+this.conf.extra_css+"<style> html {overflow-x: auto;-webkit-overflow-scrolling: touch; overflow-y: auto;} body { overflow: auto; overflow-y: scroll;} html,body { padding:0px; height:100%; margin:0px; background-color:#ffffff; "+this._fontConf()+"} </style></head><body "+(n!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}else{if(window.dhx4.isIE){h.write("<html><head>"+this.conf.extra_css+"<style> html {overflow-y: auto;} body {overflow-y: scroll;-webkit-overflow-scrolling: touch;} html,body { overflow-x: auto; padding:0px; height:100%; margin:0px; background-color: #ffffff; outline: none; "+this._fontConf()+"} </style></head><body "+(n!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}else{h.write("<html><head>"+this.conf.extra_css+"<style> html,body { overflow-x: auto; overflow-y:-webkit-overflow-scrolling: touch; scroll; padding:0px; height:100%; margin:0px; background-color:#ffffff; "+this._fontConf()+"} </style></head><body "+(n!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}}}h.close();if(window.dhx4.isIE){h.contentEditable=(n!==true)}else{h.designMode=(n!==true?"On":"Off")}if(window.dhx4.isFF){try{h.execCommand("useCSS",false,true)}catch(m){}}if(l===true&&this.setContent!=null){this.setContent(j)}};this._prepareContent();this._doOnResize=function(){window.clearTimeout(b.conf.resizeTM);b.conf.resizeTM=window.setTimeout(function(){if(b.setSizes){b.setSizes()}},b.conf.resizeTMTime)};this._runCommand=function(l,n){if(this.conf.roMode===true){return}if(arguments.length<2){n=null}if(window.dhx4.isIE){this.edWin.focus()}try{var j=this.editor.contentWindow.document;j.execCommand(l,false,n)}catch(m){}if(window.dhx4.isIE){this.edWin.focus();var h=this;window.setTimeout(function(){h.edWin.focus();h=null},1)}};this.applyBold=function(){this._runCommand("Bold")};this.applyItalic=function(){this._runCommand("Italic")};this.applyUnderscore=function(){this._runCommand("Underline")};this.clearFormatting=function(){this._runCommand("RemoveFormat");var h=this.getContent();h=h.replace(/<\/?h\d>/gi,"");this.setContent(h)};this._doOnClick=function(l){var j=l||window.event;var h=j.target||j.srcElement;b._showInfo(h)};this._doOnMouseDown=function(l){var j=l||window.event;var h=j.target||j.srcElement;b._showInfo(h)};this._doOnKeyUp=function(m){var l=m||window.event;var h=l.keyCode;var j=l.target||l.srcElement;if({37:1,38:1,39:1,40:1,13:1}[h]==1){b._showInfo(j)}};this._getParentByTag=function(h,l){l=l.toLowerCase();var j=h;do{if(l==""||j.nodeName.toLowerCase()==l){return j}}while(j=j.parentNode);return h};this._isStyleProperty=function(j,m,h,l){m=m.toLowerCase();var o=j;do{if((o.nodeName.toLowerCase()==m)&&(o.style[h]==l)){return true}}while(o=o.parentNode);return false};this._setStyleProperty=function(h,l){this.style[l]=false;var j=this._getParentByTag(h,l);if(j&&(j.tagName.toLowerCase()==l)){this.style[l]=true}if(l=="del"&&this._getParentByTag(h,"strike")&&this._getParentByTag(h,"strike").tagName.toLowerCase()=="strike"){this.style.del=true}};this._showInfo=function(j){var j=(this._getSelectionBounds().end)?this._getSelectionBounds().end:j;if(!j||!this._setStyleProperty){return}try{if(this.edWin.getComputedStyle){var h=this.edWin.getComputedStyle(j,null);var l=((h.getPropertyValue("font-weight")==401)?700:h.getPropertyValue("font-weight"));this.style={fontStyle:h.getPropertyValue("font-style"),fontSize:h.getPropertyValue("font-size"),textDecoration:h.getPropertyValue("text-decoration"),fontWeight:l,fontFamily:h.getPropertyValue("font-family"),textAlign:h.getPropertyValue("text-align")};if(window.dhx4.isKHTML){this.style.fontStyle=h.getPropertyValue("font-style");this.style.vAlign=h.getPropertyValue("vertical-align");this.style.del=this._isStyleProperty(j,"span","textDecoration","line-through");this.style.u=this._isStyleProperty(j,"span","textDecoration","underline")}}else{var h=j.currentStyle;this.style={fontStyle:h.fontStyle,fontSize:h.fontSize,textDecoration:h.textDecoration,fontWeight:h.fontWeight,fontFamily:h.fontFamily,textAlign:h.textAlign}}this._setStyleProperty(j,"h1");this._setStyleProperty(j,"h2");this._setStyleProperty(j,"h3");this._setStyleProperty(j,"h4");if(!window.dhx4.isKHTML){this._setStyleProperty(j,"del");this._setStyleProperty(j,"sub");this._setStyleProperty(j,"sup");this._setStyleProperty(j,"u")}this.callEvent("onFocusChanged",[this.style,h])}catch(m){return null}};this._getSelectionBounds=function(){var n,l,r,j;if(this.edWin.getSelection){var o=this.edWin.getSelection();if(window.dhx4.isEdge&&o.rangeCount==0){return{root:null,start:null,end:null}}n=o.getRangeAt(o.rangeCount-1);r=n.startContainer;j=n.endContainer;l=n.commonAncestorContainer;if(r.nodeName=="#text"){l=l.parentNode}if(r.nodeName=="#text"){r=r.parentNode}if(r.nodeName.toLowerCase()=="body"){r=r.firstChild}if(j.nodeName=="#text"){j=j.parentNode}if(j.nodeName.toLowerCase()=="body"){j=j.lastChild}if(r==j){l=r}return{root:l,start:r,end:j}}else{if(this.edWin.document.selection){n=this.edDoc.selection.createRange();if(!n.duplicate){return null}l=n.parentElement();var m=n.duplicate();var h=n.duplicate();m.collapse(true);h.moveToElementText(m.parentElement());h.setEndPoint("EndToStart",m);r=m.parentElement();m=n.duplicate();h=n.duplicate();h.collapse(false);m.moveToElementText(h.parentElement());m.setEndPoint("StartToEnd",h);j=h.parentElement();if(r.nodeName.toLowerCase()=="body"){r=r.firstChild}if(j.nodeName.toLowerCase()=="body"){j=j.lastChild}if(r==j){l=r}return{root:l,start:r,end:j}}}return null};this.getContent=function(){if(!this.edDoc.body){return""}else{if(window.dhx4.isFF||window.dhx4.isChrome){return this.editor.contentWindow.document.body.innerHTML.replace(/<\/{0,}br\/{0,}>\s{0,}$/gi,"")}if(window.dhx4.isIE&&this.edDoc.body.innerText.length==0){return""}return this.edDoc.body.innerHTML}};this.setContent=function(l){l=l||"";if(this.edDoc.body){var j=false;if(window.dhx4.isFF){var h=navigator.userAgent.match(/Firefox\/(\d*)/);j=(h!=null&&h[1]<28)}if(j){if(typeof(this.conf.ffTest)=="undefined"){this.editor.contentWindow.document.body.innerHTML="";this._runCommand("InsertHTML","test");this.conf.ffTest=(this.editor.contentWindow.document.body.innerHTML.length>0)}if(this.conf.ffTest){this.editor.contentWindow.document.body.innerHTML=l}else{this.editor.contentWindow.document.body.innerHTML="";if(l.length==0){l=" "}this._runCommand("InsertHTML",l)}}else{this.editor.contentWindow.document.body.innerHTML=l}this.callEvent("onContentSet",[])}else{if(!this.conf.firstLoadEv){this.conf.firstLoadEv=true;this.conf.firstLoadData=l;this._onFirstLoad=function(){b.setContent(b.conf.firstLoadData);if(typeof(window.addEventListener)=="function"){b.edWin.removeEventListener("load",b._onFirstLoad,false)}else{b.edWin.detachEvent("onload",b._onFirstLoad)}b.conf.firstLoadData=null;b.conf.firstLoadEv=false;b._onFirstLoad=null};if(typeof(window.addEventListener)=="function"){this.edWin.addEventListener("load",this._onFirstLoad,false)}else{this.edWin.attachEvent("onload",this._onFirstLoad)}}}};this.setContentHTML=function(h){window.dhx4.ajax.get(h,function(j){if(j.xmlDoc.responseText!=null){b.setContent(j.xmlDoc.responseText)}})};window.dhx4._eventable(this);this.attachEvent("onFocusChanged",function(h){if(typeof(this._doOnFocusChanged)=="function"){this._doOnFocusChanged(h)}else{if(typeof(this._doOnFocusChanged)=="string"&&typeof(window[this._doOnFocusChanged])=="function"){window[this._doOnFocusChanged](h)}}});if(typeof(window.addEventListener)=="function"){window.addEventListener("resize",this._doOnResize,false);this.edDoc.addEventListener("click",this._doOnClick,false);this.edDoc.addEventListener("keyup",this._doOnKeyUp,false);if(window.dhx4.isOpera){this.edDoc.addEventListener("mousedown",this._doOnMouseDown,false)}}else{window.attachEvent("onresize",this._doOnResize);this.edDoc.attachEvent("onclick",this._doOnClick);this.edDoc.attachEvent("onkeyup",this._doOnKeyUp)}this.unload=function(){if(typeof(window.addEventListener)=="function"){window.removeEventListener("resize",this._doOnResize,false);this.edDoc.removeEventListener("click",this._doOnClick,false);this.edDoc.removeEventListener("keyup",this._doOnKeyUp,false);if(window.dhx4.isOpera){this.edDoc.removeEventListener("mousedown",this._doOnMouseDown,false)}for(var h=0;h<b.conf.evs.length;h++){a.contentWindow.removeEventListener(b.conf.evs[h],b._ev,false)}if(this.tb!=null&&this.conf.iOSfix==true){this.tb.cont.removeEventListener("touchend",this._doOnIOSFix,false);this._doOnIOSFix=null}}else{window.detachEvent("onresize",this._doOnResize,false);this.edDoc.detachEvent("onclick",this._doOnClick);this.edDoc.detachEvent("onkeyup",this._doOnKeyUp);for(var h=0;h<b.conf.evs.length;h++){a.contentWindow.document.body.detachEvent("on"+b.conf.evs[h],b._ev)}}this._doOnAccess=null;this._doOnFocusChanged=null;if(typeof(window.addEventListener)=="function"){this.editor.onload=null}else{this.editor.onreadystatechange=null}this.editor.parentNode.removeChild(this.editor);this.editor=null;this.edDoc=null;this.edWin=null;this.cell._unload();this.cell=null;this.tb=null;window.dhx4._eventable(this,"clear");this.cBlock.parentNode.removeChild(this.cBlock);this.cBlock=null;this.base.className=String(this.base.className).replace(new RegExp("\\s{0,}dhxeditor_"+this.conf.skin),"");while(this.base.childNodes.length>0){this.base.removeChild(this.base.childNodes[0])}this.base=null;this._doOnClick=null;this._doOnKeyUp=null;this._doOnMouseDown=null;this._ev=null;this._focus=null;this._prepareContent=null;this._doOnResize=null;this.setIconsPath=null;this.init=null;this.setSizes=null;this._runCommand=null;this.applyBold=null;this.applyItalic=null;this.applyUnderscore=null;this.clearFormatting=null;this._showInfo=null;this._getSelectionBounds=null;this.getContent=null;this.setContent=null;this.setContentHTML=null;this.setReadonly=null;this.isReadonly=null;this.unload=null;b=a=null};if(this.conf.toolbar==true&&typeof(this.attachToolbar)=="function"&&typeof(window.dhtmlXToolbarObject)=="function"){this.attachToolbar(this.conf.iconsPath);if(this.conf.iOSfix==true){this._doOnIOSFix=function(){b.editor.contentWindow.focus()};this.tb.cont.addEventListener("touchend",this._doOnIOSFix,false)}}this.setIconsPath=function(h){this.conf.iconsPath=h};if(this.conf.content.length>0){this.setContent(this.conf.content);this.conf.content=""}else{if(this.conf.contentHTML.length>0){this.setContentHTML(this.conf.contentHTML);this.conf.contentHTML=""}}return this}dhtmlXEditor.prototype.setSizes=function(){this.cell._setSize(0,0,this.base.clientWidth,this.base.clientHeight);if(this.editor!=null){this.editor.style.left="5px";this.editor.style.width=this.base.clientWidth-5+"px"}};dhtmlXEditor.prototype.setReadonly=function(a){this.conf.roMode=(a===true);this._prepareContent(true,this.conf.roMode);this.cBlock.style.display=(this.conf.roMode?"":"none")};dhtmlXEditor.prototype.isReadonly=function(a){return(this.conf.roMode||false)};dhtmlXEditor.prototype.setSkin=function(a){this.base.className=String(this.base.className).replace(new RegExp("dhxeditor_"+this.conf.skin),"dhxeditor_"+a);this.conf.skin=this.cell.conf.skin=a;if(this.tb){this.cell.detachToolbar(a);this.tb=null;this.attachToolbar()}this.setSizes()};dhtmlXEditor.prototype._fontConf=function(){if(this.conf.skin==""){var a={family:this.conf.font.family,size:this.conf.font.size,color:this.conf.font.color}}else{var a={family:"Roboto, Arial, Helvetica",size:"14px",color:"#404040"}}return window.dhx4.template("font-size: #size#; font-family: #family#; color: #color#;",a)};window.dhtmlXEditorCell=function(c,a){dhtmlXCellObject.apply(this,[c,"_editor"]);var b=this;this.editor=a;this.conf.skin=this.editor.conf.skin;this.attachEvent("_onCellUnload",function(){this._stbUnload();this.editor=null;b=null});this._stbInit();return this};dhtmlXEditorCell.prototype=new dhtmlXCellObject();dhtmlXEditorCell.prototype._stbInit=function(){var h=this;var g=document.createElement("DIV");g.className="dhx_cell_stb"+(dhx4.isIE6||dhx4.isIE7||dhx4.isIE8?"":" dhx_cell_stb_shadow");this.cell.insertBefore(g,this.cell.childNodes[this.conf.idx.cont]);g.onselectstart=function(a){a=a||event;a.cancelBubble=true;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};var e={bold:"applyBold",italic:"applyItalic",underline:"applyUnderscore",clearformat:"clearFormatting"};for(var c in e){var b=document.createElement("A");b.href="javascript:void(0);";b.tabIndex=-1;g.appendChild(b);b.onmousedown=b.onclick=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};var j=document.createElement("DIV");j.className="dhx_cell_stb_button btn_"+c;j._actv=c.charAt(0);j._cmd=e[c];b.appendChild(j);j.onclick=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};j.onmousedown=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}h.editor[this._cmd]();h.editor.callEvent("onToolbarClick",[this._actv])};j=b=null}g=null;this._stbUnload=function(){var a=this.cell.childNodes[this.conf.idx.stb];a.onselectstart=null;while(a.childNodes.length>0){a.lastChild.onmousedown=a.lastChild.onclick=null;a.lastChild.firstChild.onmousedown=a.lastChild.firstChild.onclick=null;a.lastChild.firstChild._actv=a.lastChild.firstChild._cmd=null;a.lastChild.removeChild(a.lastChild.firstChild);a.removeChild(a.lastChild)}a.parentNode.removeChild(a);a=h=null;this.conf.idx_data.stb=this.conf.ofs_nodes.t._getStbHeight=null;delete this.conf.ofs_nodes.t._getStbHeight;delete this.conf.idx_data.stb;this._updateIdx()};this.conf.stb_visible=true;this.conf.ofs_nodes.t._getStbHeight="func";this.conf.idx_data.stb="dhx_cell_stb";this._updateIdx()};dhtmlXEditorCell.prototype._stbHide=function(){this.cell.childNodes[this.conf.idx.stb].style.display="none";this.conf.stb_visible=false};dhtmlXEditorCell.prototype._getStbHeight=function(){if(this.conf.stb_visible==true&&this.conf.skin=="material"){if(this.conf.stb_height==null){this.conf.stb_height=window.dhx4.readFromCss("dhxeditor_material stb_height_detect","scrollHeight","<div class='dhx_cell_editor'><div class='dhx_cell_stb'></div></div>")}return this.conf.stb_height}return this.cell.childNodes[this.conf.idx.stb].offsetHeight};dhtmlXCellObject.prototype.attachEditor=function(a){this.callEvent("_onBeforeContentAttach",["editor"]);var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";c.style.overflow="hidden";this._attachObject(c);if(!(typeof(a)=="object"&&a!=null)){a={}}a.parent=c;this.dataType="editor";this.dataObj=new dhtmlXEditor(a);c=null;a.parent=null;a=null;if(typeof(window.dhtmlXPortalCell)=="function"&&this instanceof window.dhtmlXPortalCell){if(this.portal.conf.editor_ev==null){var e=this.portal.attachEvent("onBeforeDrag",function(g){if(this.cdata[g].dataType=="editor"){this.cdata[g].conf.editor_cont=this.cdata[g].dataObj.getContent()}return true});var b=this.portal.attachEvent("onDrop",function(g){if(this.cdata[g].dataType=="editor"){this.cdata[g].dataObj.setContent(this.cdata[g].conf.editor_cont);this.cdata[g].dataObj._prepareContent(true);this.cdata[g].conf.editor_cont=null}});this.portal.conf.editor_ev=[e,b]}this.conf.editor_ev=this.attachEvent("_onBeforeContentDetach",function(){this.detachEvent(this.conf.editor_ev);this.conf.editor_ev=null;if(this instanceof window.dhtmlXPortalCell){var h=false;for(var g in this.portal.cdata){if(this.portal.cdata[g]!=this&&this.portal.cdata[g].dataType=="editor"){h=true}}if(h==false){for(var j=0;j<this.portal.conf.editor_ev.length;j++){this.portal.detachEvent(this.portal.conf.editor_ev[j])}this.portal.conf.editor_ev=null}}})}this.callEvent("_onContentAttach",[]);return this.dataObj};var globalActiveDHTMLGridObject;String.prototype._dhx_trim=function(){return this.replace(/&nbsp;/g," ").replace(/(^[ \t]*)|([ \t]*$)/g,"")};function dhtmlxArray(a){return dhtmlx.extend((a||new Array()),dhtmlxArray._master)}dhtmlxArray._master={_dhx_find:function(b){for(var a=0;a<this.length;a++){if(b==this[a]){return a}}return -1},_dhx_insertAt:function(c,b){this[this.length]=null;for(var a=this.length-1;a>=c;a--){this[a]=this[a-1]}this[c]=b},_dhx_removeAt:function(a){this.splice(a,1)},_dhx_swapItems:function(a,c){var b=this[a];this[a]=this[c];this[c]=b}};function dhtmlXGridObject(id){if(dhtmlxEvent.initTouch){dhtmlxEvent.initTouch()}if(_isIE){try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}}if(id){if(typeof(id)=="object"){this.entBox=id;if(!this.entBox.id){this.entBox.id="cgrid2_"+this.uid()}}else{this.entBox=document.getElementById(id)}}else{this.entBox=document.createElement("DIV");this.entBox.id="cgrid2_"+this.uid()}this.entBox.innerHTML="";dhx4._eventable(this);var self=this;this._RaSeCol=[];this._wcorr=0;this.fontWidth=7;this.cell=null;this.row=null;this.iconURL="";this.editor=null;this._f2kE=true;this._dclE=true;this.combos=new Array(0);this.defVal=new Array(0);this.rowsAr={};this.rowsBuffer=dhtmlxArray();this.rowsCol=dhtmlxArray();this._data_cache={};this._ecache={};this._ud_enabled=true;this.xmlLoader=this.doLoadDetails;this._maskArr=[];this.selectedRows=dhtmlxArray();this.UserData={};this._sizeFix=this._borderFix=0;this.entBox.className+=" gridbox";this.entBox.style.width=this.entBox.getAttribute("width")||(window.getComputedStyle?(this.entBox.style.width||window.getComputedStyle(this.entBox,null)["width"]):(this.entBox.currentStyle?this.entBox.currentStyle.width:this.entBox.style.width||0))||"100%";this.entBox.style.height=this.entBox.getAttribute("height")||(window.getComputedStyle?(this.entBox.style.height||window.getComputedStyle(this.entBox,null)["height"]):(this.entBox.currentStyle?this.entBox.currentStyle.height:this.entBox.style.height||0))||"100%";this.entBox.style.cursor="default";this.entBox.onselectstart=function(){return false};var t_creator=function(name){var t=document.createElement("TABLE");t.cellSpacing=t.cellPadding=0;t.style.cssText="width:100%;table-layout:fixed;";t.className=name.substr(2);return t};this.obj=t_creator("c_obj");this.hdr=t_creator("c_hdr");this.hdr.style.marginRight="20px";this.hdr.style.paddingRight="20px";this.objBox=document.createElement("DIV");this.objBox.style.width="100%";this.objBox.style.overflow="auto";this.objBox.appendChild(this.obj);this.objBox.className="objbox";if(dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(this)}this.hdrBox=document.createElement("DIV");this.hdrBox.style.width="100%";this.hdrBox.style.height="25px";this.hdrBox.style.overflow="hidden";this.hdrBox.className="xhdr";this.preloadImagesAr=new Array(0);this.sortImg=document.createElement("DIV");this.sortImg.style.display="none";this.hdrBox.appendChild(this.sortImg);this.hdrBox.appendChild(this.hdr);this.hdrBox.style.position="relative";this.entBox.appendChild(this.hdrBox);this.entBox.appendChild(this.objBox);this.entBox.grid=this;this.objBox.grid=this;this.hdrBox.grid=this;this.obj.grid=this;this.hdr.grid=this;this.cellWidthPX=[];this.cellWidthPC=[];this.cellWidthType=this.entBox.cellwidthtype||"px";this.delim=this.entBox.delimiter||",";this._csvDelim=",";this.hdrLabels=[];this.columnIds=[];this.columnColor=[];this._hrrar=[];this.cellType=dhtmlxArray();this.cellAlign=[];this.initCellWidth=[];this.fldSort=[];this._srdh=(_isIE&&(document.compatMode!="BackCompat")?22:20);this.imgURL=window.dhx_globalImgPath||"";this.isActive=false;this.isEditable=true;this.useImagesInHeader=false;this.pagingOn=false;this.rowsBufferOutSize=0;dhtmlxEvent(window,"unload",function(){try{if(self.destructor){self.destructor()}}catch(e){}});this.setSkin=function(name){this._srdh=window.dhx4.readFromCss("dhxgrid_rh_"+name)+4;this.skin_name=name;if(this._imgURL){this.setImagePath(this._imgURL)}var classname=this.entBox.className.split(" gridbox")[0];this.entBox.className=classname+" gridbox gridbox_"+name+(_isIE?" isIE":" isModern");this.skin_h_correction=0;this.enableAlterCss("ev_"+name,"odd_"+name,this.isTreeGrid());this._fixAlterCss();switch(name){case"dhx_terrace":case"material":this._srdh=33;this.forceDivInHeader=true;break;case"dhx_web":case"material":this.forceDivInHeader=true;this._srdh=31;break;case"dhx_skyblue":this.forceDivInHeader=true;break}if(_isIE&&this.hdr){var d=this.hdr.parentNode;d.removeChild(this.hdr);d.appendChild(this.hdr)}this.setSizes()};if(_isIE){this.preventIECaching(true)}if(window.dhtmlDragAndDropObject){this.dragger=new dhtmlDragAndDropObject()}this._doOnScroll=function(e,mode){this.callEvent("onScroll",[this.objBox.scrollLeft,this.objBox.scrollTop]);this.doOnScroll(e,mode)};this.doOnScroll=function(e,mode){var box=this.hdrBox;box._try_header_sync=true;setTimeout(function(){box._try_header_sync=false},2000);this.hdrBox.scrollLeft=this.objBox.scrollLeft;if(this.ftr){this.ftr.parentNode.scrollLeft=this.objBox.scrollLeft}if(mode){return}if(this._srnd){if(this._dLoadTimer){window.clearTimeout(this._dLoadTimer)}this._dLoadTimer=window.setTimeout(function(){if(self._update_srnd_view){self._update_srnd_view()}},100)}};this.attachToObject=function(obj){obj.appendChild(this.globalBox?this.globalBox:this.entBox);this.setSizes()};this.init=function(fl){if((this.isTreeGrid())&&(!this._h2)){this._h2=this._createHierarchy();if((this._fake)&&(!this._realfake)){this._fake._h2=this._h2}this._tgc={imgURL:null}}if(!this._hstyles){return}if(!this.skin_name){this.setSkin(window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxgrid")||"material")}this.editStop();this.lastClicked=null;this.resized=null;this.fldSorted=this.r_fldSorted=null;this.cellWidthPX=[];this.cellWidthPC=[];if(this.hdr.rows.length>0){var temp=this.xmlFileUrl;this.clearAll(true);this.xmlFileUrl=temp}var hdrRow=this.hdr.insertRow(0);for(var i=0;i<this.hdrLabels.length;i++){hdrRow.appendChild(document.createElement("TH"));hdrRow.childNodes[i]._cellIndex=i;hdrRow.childNodes[i].style.height="0px"}if(_isIE&&_isIE<8&&document.body.style.msTouchAction==this.undefined){hdrRow.style.position="absolute"}else{hdrRow.style.height="auto"}var hdrRow=this.hdr.insertRow(_isKHTML?2:1);hdrRow._childIndexes=new Array();var col_ex=0;for(var i=0;i<this.hdrLabels.length;i++){hdrRow._childIndexes[i]=i-col_ex;if((this.hdrLabels[i]==this.splitSign)&&(i!=0)){if(_isKHTML){hdrRow.insertCell(i-col_ex)}hdrRow.cells[i-col_ex-1].colSpan=(hdrRow.cells[i-col_ex-1].colSpan||1)+1;hdrRow.childNodes[i-col_ex-1]._cellIndex++;col_ex++;hdrRow._childIndexes[i]=i-col_ex;continue}hdrRow.insertCell(i-col_ex);hdrRow.childNodes[i-col_ex]._cellIndex=i;hdrRow.childNodes[i-col_ex]._cellIndexS=i;this.setColumnLabel(i,this.hdrLabels[i])}if(col_ex==0){hdrRow._childIndexes=null}this._cCount=this.hdrLabels.length;if(_isIE){window.setTimeout(function(){if(self.setSizes){self.setSizes()}},1)}if(!this.obj.firstChild){this.obj.appendChild(document.createElement("TBODY"))}var tar=this.obj.firstChild;if(!tar.firstChild){tar.appendChild(document.createElement("TR"));tar=tar.firstChild;if(_isIE&&_isIE<8&&document.body.style.msTouchAction==this.undefined){tar.style.position="absolute"}else{tar.style.height="auto"}for(var i=0;i<this.hdrLabels.length;i++){tar.appendChild(document.createElement("TH"));tar.childNodes[i].style.height="0px"}}this._c_order=null;if(this.multiLine!=true){this.obj.className+=" row20px"}this.sortImg.style.position="absolute";this.sortImg.style.display="none";this.sortImg.className="dhxgrid_sort_desc";this.sortImg.defLeft=0;if(this.noHeader){this.hdrBox.style.display="none"}else{this.noHeader=false}if(this._ivizcol){this.setColHidden()}this.attachHeader();this.attachHeader(0,0,"_aFoot");this.setSizes();if(fl){this.parseXML()}this.obj.scrollTop=0;if(this.dragAndDropOff){this.dragger.addDragLanding(this.entBox,this)}if(this._initDrF){this._initD()}dhx4.callEvent("onGridCreated",[this])};this.setColumnSizes=function(gridWidth){var summ=0;var fcols=[];var fix=0;for(var i=0;i<this._cCount;i++){if((this.initCellWidth[i]=="*")&&!this._hrrar[i]){this._awdth=false;fcols.push(i);continue}if(this.cellWidthType=="%"){if(typeof this.cellWidthPC[i]=="undefined"){this.cellWidthPC[i]=this.initCellWidth[i]}var cwidth=(gridWidth*this.cellWidthPC[i]/100)||0;if(fix>0.5){cwidth++;fix--}var rwidth=this.cellWidthPX[i]=Math.floor(cwidth);var fix=fix+cwidth-rwidth}else{if(typeof this.cellWidthPX[i]=="undefined"){this.cellWidthPX[i]=this.initCellWidth[i]}}if(!this._hrrar[i]){summ+=this.cellWidthPX[i]*1}}if(fcols.length){var ms=Math.floor((gridWidth-summ)/fcols.length);if(ms<0){ms=1}for(var i=0;i<fcols.length;i++){var next=Math.max((this._drsclmW?(this._drsclmW[fcols[i]]||0):0),ms);this.cellWidthPX[fcols[i]]=next;summ+=next}if(gridWidth>summ){var last=fcols[fcols.length-1];this.cellWidthPX[last]=this.cellWidthPX[last]+(gridWidth-summ);summ=gridWidth}this._setAutoResize()}this.obj.style.width=summ+"px";this.hdr.style.width=summ+"px";if(this.ftr){this.ftr.style.width=summ+"px"}this.chngCellWidth();return summ};this.setSizes=function(){if((!this.hdr.rows[0])){return}var quirks=this.quirks=(_isIE&&document.compatMode=="BackCompat");var outerBorder=(this.entBox.offsetWidth-this.entBox.clientWidth)/2;if(!this.dontSetSizes){if(this.globalBox){if(!this.globalBox.clientWidth){return}var ow=this.globalBox.clientWidth;var splitOuterBorder=(this.globalBox.offsetWidth-ow)/2;if(this._delta_x&&!this._realfake){this.globalBox.style.width=this._delta_x;this.globalBox.style.boxSizing="border-box";var owu=this.globalBox.clientWidth;this.entBox.style.width=Math.max(0,(owu+(quirks?splitOuterBorder*2:0))-this._fake.entBox.clientWidth)+"px";if(owu!=this._lastTimeSplitWidth){this._fake._correctSplit(this._fake.entBox.clientWidth);this._lastTimeSplitWidth=owu}}if(this._delta_y&&!this._realfake){this.globalBox.style.height=this._delta_y;this.entBox.style.overflow=this._fake.entBox.style.overflow="hidden";this.entBox.style.height=this._fake.entBox.style.height=this.globalBox.clientHeight+(quirks?splitOuterBorder*2:0)+"px"}}else{if(this._delta_x){if(this.entBox.parentNode&&this.entBox.parentNode.tagName=="TD"){this.entBox.style.width="1px";this.entBox.style.width=parseInt(this._delta_x)*this.entBox.parentNode.clientWidth/100-outerBorder*2+"px"}else{this.entBox.style.width=this._delta_x}}if(this._delta_y){this.entBox.style.height=this._delta_y}}}window.clearTimeout(this._sizeTime);if(!this.entBox.offsetWidth&&(!this.globalBox||!this.globalBox.offsetWidth)){this._sizeTime=window.setTimeout(function(){if(self.setSizes){self.setSizes()}},250);return}var border_x=((!this._wthB)&&((this.entBox.cmp||this._delta_x)&&((this.skin_name||"").indexOf("dhx")==0||this.skin_name=="material")&&!quirks)?2:0);var border_y=((!this._wthB)&&((this.entBox.cmp||this._delta_y)&&((this.skin_name||"").indexOf("dhx")==0||this.skin_name=="material")&&!quirks)?2:0);if(this._sizeFix){border_x-=this._sizeFix;border_y-=this._sizeFix}var isVScroll=this.parentGrid?false:(this.objBox.scrollHeight>this.objBox.offsetHeight);var scrfix=dhtmlx.$customScroll?0:18;var gridWidth=this.entBox.clientWidth-(this.skin_h_correction||0)*(quirks?0:1)-border_x;var gridWidthActive=this.entBox.clientWidth-(this.skin_h_correction||0)-border_x;var gridHeight=this.entBox.clientHeight-border_y;var summ=this.setColumnSizes(gridWidthActive-(isVScroll?scrfix:0)-(this._correction_x||0));var isHScroll=this.parentGrid?false:((this.objBox.scrollWidth>this.objBox.offsetWidth)||(this.objBox.style.overflowX=="scroll"));var headerHeight=this.hdr.clientHeight;var footerHeight=this.ftr?this.ftr.clientHeight:0;var newWidth=gridWidth;var newHeight=gridHeight-headerHeight-footerHeight;if(this._awdth&&this._awdth[0]&&this._awdth[1]==99999){isHScroll=0}if(this._ahgr){if(this._ahgrMA){newHeight=this.entBox.parentNode.clientHeight-headerHeight-footerHeight}else{newHeight=this.obj.offsetHeight+(isHScroll?scrfix:0)+(this._correction_y||0)}if(this._ahgrM){if(this._ahgrF){newHeight=Math.min(this._ahgrM,newHeight+headerHeight+footerHeight)-headerHeight-footerHeight}else{newHeight=Math.min(this._ahgrM,newHeight)}}if(isVScroll&&newHeight>=this.obj.scrollHeight+(isHScroll?scrfix:0)){isVScroll=false;this.setColumnSizes(gridWidthActive-(this._correction_x||0))}}if((this._awdth)&&(this._awdth[0])){if(this.cellWidthType=="%"){this.cellWidthType="px"}if(this._fake){summ+=this._fake.entBox.clientWidth}var newWidth=Math.min(Math.max(summ+(isVScroll?scrfix:0),this._awdth[2]),this._awdth[1])+(this._correction_x||0);this.objBox.style.overflowX=(!isVScroll&&this.objBox.scrollWidth<=newWidth)?"hidden":"auto";if(this._fake){newWidth-=this._fake.entBox.clientWidth}}newHeight=Math.max(0,newHeight);this._ff_size_delta=(this._ff_size_delta==0.1)?0.2:0.1;if(!_isFF){this._ff_size_delta=0}if(!this.dontSetSizes){this.entBox.style.width=Math.max(0,newWidth+(quirks?2:0)*outerBorder+this._ff_size_delta)+"px";this.entBox.style.height=newHeight+(quirks?2:0)*outerBorder+headerHeight+footerHeight+"px"}this.objBox.style.height=newHeight+((quirks&&!isVScroll)?2:0)*outerBorder+"px";this.hdrBox.style.height=headerHeight+"px";if(newHeight!=gridHeight){this.doOnScroll(0,!this._srnd)}var ext=this["setSizes_"+this.skin_name];if(ext){ext.call(this)}this.setSortImgPos();if(headerHeight!=this.hdr.clientHeight&&this._ahgr){this.setSizes()}this.callEvent("onSetSizes",[])};this.chngCellWidth=function(){if((_isOpera)&&(this.ftr)){this.ftr.width=this.objBox.scrollWidth+"px"}var l=this._cCount;for(var i=0;i<l;i++){this.hdr.rows[0].cells[i].style.width=this.cellWidthPX[i]+"px";this.obj.rows[0].childNodes[i].style.width=this.cellWidthPX[i]+"px";if(this.ftr){this.ftr.rows[0].cells[i].style.width=this.cellWidthPX[i]+"px"}}};this.setDelimiter=function(delim){this.delim=delim};this.setInitWidthsP=function(wp){this.cellWidthType="%";this.initCellWidth=wp.split(this.delim.replace(/px/gi,""));if(!arguments[1]){this._setAutoResize()}};this._setAutoResize=function(){if(this._realfake){return}var el=window;var self=this;dhtmlxEvent(window,"resize",function(){window.clearTimeout(self._resize_timer);if(self._setAutoResize){self._resize_timer=window.setTimeout(function(){if(self.setSizes){self.setSizes()}if(self._fake){self._fake._correctSplit()}},100)}});this._setAutoResize=function(){}};this.setInitWidths=function(wp){this.cellWidthType="px";this.initCellWidth=wp.split(this.delim);if(_isFF){for(var i=0;i<this.initCellWidth.length;i++){if(this.initCellWidth[i]!="*"){this.initCellWidth[i]=parseInt(this.initCellWidth[i])}}}};this.enableMultiline=function(state){this.multiLine=dhx4.s2b(state)};this.enableMultiselect=function(state){this.selMultiRows=dhx4.s2b(state)};this.setImagePath=function(path){path=path.replace(/imgs\/dhxgrid_[a-z]*\/$/,"imgs/");this._imgURL=path;this.imgURL=path+"dhxgrid_"+(this.skin_name||"dhx_skyblue").replace("dhx_","")+"/";this.iconTree=this.imgURL+"tree/"};this.setImagesPath=this.setImagePath;this.setIconPath=function(path){this.iconURL=path};this.setIconsPath=this.setIconPath;this.changeCursorState=function(ev){var el=ev.target||ev.srcElement;if(el.tagName!="TD"){el=this.getFirstParentOfType(el,"TD")}if(!el){return}if((el.tagName=="TD")&&(this._drsclmn)&&(!this._drsclmn[el._cellIndex])){return el.style.cursor="default"}var check=(ev.layerX||0)+(((!_isIE)&&(ev.target.tagName=="DIV"))?el.offsetLeft:0);if((el.offsetWidth-(ev.offsetX||(parseInt(this.getPosition(el,this.hdrBox))-check)*-1))<(_isOpera?20:10)){el.style.cursor="E-resize"}else{el.style.cursor="default"}if(_isOpera){this.hdrBox.scrollLeft=this.objBox.scrollLeft}};this.startColResize=function(ev){if(this.resized){this.stopColResize()}this.resized=null;var el=ev.target||ev.srcElement;if(el.tagName!="TD"){el=this.getFirstParentOfType(el,"TD")}var x=ev.clientX;var tabW=this.hdr.offsetWidth;var startW=parseInt(el.offsetWidth);if(el.tagName=="TD"&&el.style.cursor!="default"){if((this._drsclmn)&&(!this._drsclmn[el._cellIndex])){return}self._old_d_mm=document.body.onmousemove;self._old_d_mu=document.body.onmouseup;document.body.onmousemove=function(e){if(self){self.doColResize(e||window.event,el,startW,x,tabW)}};document.body.onmouseup=function(){if(self){self.stopColResize()}}}};this.stopColResize=function(){document.body.onmousemove=self._old_d_mm||"";document.body.onmouseup=self._old_d_mu||"";this.setSizes();this.doOnScroll(0,1);this.callEvent("onResizeEnd",[this])};this.doColResize=function(ev,el,startW,x,tabW){el.style.cursor="E-resize";this.resized=el;var fcolW=startW+(ev.clientX-x);var wtabW=tabW+(ev.clientX-x);if(!(this.callEvent("onResize",[el._cellIndex,fcolW,this]))){return}if(_isIE){this.objBox.scrollLeft=this.hdrBox.scrollLeft}var result=false;if(el.colSpan>1){var a_sizes=new Array();for(var i=0;i<el.colSpan;i++){a_sizes[i]=Math.round(fcolW*this.hdr.rows[0].childNodes[el._cellIndexS+i].offsetWidth/el.offsetWidth)}for(var i=0;i<el.colSpan;i++){result=this._setColumnSizeR(el._cellIndexS+i*1,a_sizes[i])}}else{result=this._setColumnSizeR(el._cellIndex,fcolW)}this.doOnScroll(0,1);this.setSizes();if(this._fake&&this._awdth){this._fake._correctSplit()}return result};this._setColumnSizeR=function(ind,fcolW){if(fcolW>((this._drsclmW&&!this._notresize)?(this._drsclmW[ind]||10):10)){this.obj.rows[0].childNodes[ind].style.width=fcolW+"px";this.hdr.rows[0].childNodes[ind].style.width=fcolW+"px";if(this.ftr){this.ftr.rows[0].childNodes[ind].style.width=fcolW+"px"}if(this.cellWidthType=="px"){this.cellWidthPX[ind]=fcolW}else{var gridWidth=parseInt(this.entBox.offsetWidth);if(this.objBox.scrollHeight>this.objBox.offsetHeight){gridWidth-=17}var pcWidth=Math.round(fcolW/gridWidth*100);this.cellWidthPC[ind]=pcWidth}if(this.sortImg.style.display!="none"){this.setSortImgPos()}}else{return false}};this.setSortImgState=function(state,ind,order,row){order=(order||"asc").toLowerCase();if(!dhx4.s2b(state)){this.sortImg.style.display="none";if(this.r_fldSorted){this.r_fldSorted.className=""}this.fldSorted=this.r_fldSorted=null;return}if(order=="asc"){this.sortImg.className="dhxgrid_sort_asc"}else{this.sortImg.className="dhxgrid_sort_desc"}this.sortImg.style.display="";this.fldSorted=this.hdr.rows[0].childNodes[ind];var r=this.hdr.rows[row||1];if(!r){return}for(var i=0;i<r.childNodes.length;i++){if(r.childNodes[i]._cellIndexS==ind){this.r_fldSorted=r.childNodes[i];return this.setSortImgPos()}}return this.setSortImgState(state,ind,order,(row||1)+1)};this.setSortImgPos=function(ind,mode,hRowInd,el){if(this._hrrar&&this._hrrar[this.r_fldSorted?this.r_fldSorted._cellIndex:ind]){return}if(this.ar_fldSorted){this.ar_fldSorted.className=""}if(!el){if(!ind){var el=this.r_fldSorted}else{var el=this.hdr.rows[hRowInd||0].cells[ind]}}if(el!=null){var pos=this.getPosition(el,this.hdrBox);var wdth=el.offsetWidth;this.ar_fldSorted=el;el.className=this.sortImg.className+"_col";this.sortImg.style.left=Number(pos[0]+wdth-13)+"px";this.sortImg.defLeft=parseInt(this.sortImg.style.left);this.sortImg.style.top=Number(pos[1]+5)+"px";if((!this.useImagesInHeader)&&(!mode)){this.sortImg.style.display="inline"}this.sortImg.style.left=this.sortImg.defLeft+"px"}};this.setActive=function(fl){if(arguments.length==0){var fl=true}if(fl==true){if(globalActiveDHTMLGridObject&&(globalActiveDHTMLGridObject!=this)){globalActiveDHTMLGridObject.editStop();globalActiveDHTMLGridObject.callEvent("onBlur",[globalActiveDHTMLGridObject])}globalActiveDHTMLGridObject=this;this.isActive=true}else{this.isActive=false;this.callEvent("onBlur",[this])}};this._doClick=function(ev){var selMethod=0;var el=this.getFirstParentOfType(_isIE?ev.srcElement:ev.target,"TD");if(!el||!el.parentNode||!el.parentNode.idd){return}var fl=true;if(this.markedCells){var markMethod=0;if(ev.shiftKey||ev.metaKey){markMethod=1}if(ev.ctrlKey){markMethod=2}this.doMark(el,markMethod);return true}if(this.selMultiRows!=false){if(ev.shiftKey&&this.row!=null&&this.selectedRows.length){selMethod=1}if(ev.ctrlKey||ev.metaKey){selMethod=2}}return this.doClick(el,fl,selMethod,false)};this._doContClick=function(ev){var el=this.getFirstParentOfType(_isIE?ev.srcElement:ev.target,"TD");if((!el)||(typeof(el.parentNode.idd)=="undefined")){this.callEvent("onEmptyClick",[ev]);return true}if(ev.button==2||(_isMacOS&&ev.ctrlKey)){if(!this.callEvent("onRightClick",[el.parentNode.idd,el._cellIndex,ev])){var z=function(e){(e||event).cancelBubble=true;return false};(ev.srcElement||ev.target).oncontextmenu=z;return z(ev)}if(this._ctmndx){if(!(this.callEvent("onBeforeContextMenu",[el.parentNode.idd,el._cellIndex,this]))){return true}if(_isIE){ev.srcElement.oncontextmenu=function(){event.cancelBubble=true;return false}}if(this._ctmndx.showContextMenu){var dEl0=window.document.documentElement;var dEl1=window.document.body;var corrector=new Array((dEl0.scrollLeft||dEl1.scrollLeft),(dEl0.scrollTop||dEl1.scrollTop));if(_isIE){var x=ev.clientX+corrector[0];var y=ev.clientY+corrector[1]}else{var x=ev.pageX;var y=ev.pageY}this._ctmndx.showContextMenu(x-1,y-1);this.contextID=this._ctmndx.contextMenuZoneId=el.parentNode.idd+"_"+el._cellIndex;this._ctmndx._skip_hide=true}else{el.contextMenuId=el.parentNode.idd+"_"+el._cellIndex;el.contextMenu=this._ctmndx;el.a=this._ctmndx._contextStart;el.a(el,ev);el.a=null}ev.cancelBubble=true;return false}}else{if(this._ctmndx){if(this._ctmndx.hideContextMenu){this._ctmndx.hideContextMenu()}else{this._ctmndx._contextEnd()}}}return true};this.doClick=function(el,fl,selMethod,show){if(!this.selMultiRows){selMethod=0}var psid=this.row?this.row.idd:0;this.setActive(true);if(!selMethod){selMethod=0}if(this.cell!=null){this.cell.className=this.cell.className.replace(/[ \t]*cellselected/g,"")}if(el.tagName=="TD"){if(this.checkEvent("onSelectStateChanged")){var initial=this.getSelectedId()}var prow=this.row;if(selMethod==1){var elRowIndex=this.rowsCol._dhx_find(el.parentNode);var lcRowIndex=this.rowsCol._dhx_find(this.lastClicked);if(elRowIndex>lcRowIndex){var strt=lcRowIndex;var end=elRowIndex}else{var strt=elRowIndex;var end=lcRowIndex}for(var i=0;i<this.rowsCol.length;i++){if((i>=strt&&i<=end)){if(this.rowsCol[i]&&(!this.rowsCol[i]._sRow)){if(!this.rowsCol[i].idd){continue}if(this.rowsCol[i].className.indexOf("rowselected")==-1&&(this.callEvent("onBeforeSelect",[this.rowsCol[i].idd,psid,el._cellIndex]))){this.rowsCol[i].className+=" rowselected";this.selectedRows[this.selectedRows.length]=this.rowsCol[i]}}else{this.clearSelection();return this.doClick(el,fl,0,show)}}}}else{if(selMethod==2){if(el.parentNode.className.indexOf("rowselected")!=-1){el.parentNode.className=el.parentNode.className.replace(/[ \t]*rowselected/g,"");this.selectedRows._dhx_removeAt(this.selectedRows._dhx_find(el.parentNode));var skipRowSelection=true;show=false}}}this.editStop();if(typeof(el.parentNode.idd)=="undefined"){return true}if((!skipRowSelection)&&(!el.parentNode._sRow)){if(this.callEvent("onBeforeSelect",[el.parentNode.idd,psid,el._cellIndex])){if(this.getSelectedRowId()!=el.parentNode.idd){if(selMethod==0){this.clearSelection()}this.cell=el;if((prow==el.parentNode)&&(this._chRRS)){fl=false}this.row=el.parentNode;this.row.className+=" rowselected";if(this.selectedRows._dhx_find(this.row)==-1){this.selectedRows[this.selectedRows.length]=this.row}}else{this.cell=el;this.row=el.parentNode}}else{fl=false}}if(this.cell&&this.cell.parentNode.className.indexOf("rowselected")!=-1){this.cell.className=this.cell.className.replace(/[ \t]*cellselected/g,"")+" cellselected"}if(selMethod!=1){if(!this.row){return}}this.lastClicked=el.parentNode;var rid=this.row.idd;var cid=this.cell;if(fl&&typeof(rid)!="undefined"&&cid&&!skipRowSelection){self.onRowSelectTime=setTimeout(function(){if(self.callEvent){self.callEvent("onRowSelect",[rid,cid._cellIndex])}},100)}else{this.callEvent("onRowSelectRSOnly",[rid])}if(this.checkEvent("onSelectStateChanged")){var afinal=this.getSelectedId();if(initial!=afinal){this.callEvent("onSelectStateChanged",[afinal,initial])}}if(skipRowSelection){return false}}this.isActive=true;if(show!==false&&this.cell&&this.cell.parentNode.idd){this.moveToVisible(this.cell)}};this.selectAll=function(){this.clearSelection();var coll=this.rowsBuffer;if(this.pagingOn){coll=this.rowsCol}for(var i=0;i<coll.length;i++){this.render_row(i).className+=" rowselected"}this.selectedRows=dhtmlxArray([].concat(coll));if(this.selectedRows.length){this.row=this.selectedRows[0];this.cell=this.row.cells[0]}if((this._fake)&&(!this._realfake)){this._fake.selectAll()}};this.selectCell=function(r,cInd,fl,preserve,edit,show){if(!fl){fl=false}if(typeof(r)!="object"){r=this.render_row(r)}if(!r||r==-1){return null}if(r._childIndexes){var c=r.childNodes[r._childIndexes[cInd]]}else{var c=r.childNodes[cInd]}if(!c){c=r.childNodes[0]}if(!this.markedCells){if(preserve){this.doClick(c,fl,3,show)}else{this.doClick(c,fl,0,show)}}else{this.doMark(c,preserve?2:0)}if(edit){this.editCell()}};this.moveToVisible=function(cell_obj,onlyVScroll){if(this.pagingOn){var newPage=Math.floor(this.getRowIndex(cell_obj.parentNode.idd)/this.rowsBufferOutSize)+1;if(newPage!=this.currentPage){this.changePage(newPage)}}try{if(cell_obj.offsetHeight){var distance=cell_obj.offsetLeft+cell_obj.offsetWidth+20;var scrollLeft=0;if(distance>(this.objBox.offsetWidth+this.objBox.scrollLeft)){if(cell_obj.offsetLeft>this.objBox.scrollLeft){scrollLeft=cell_obj.offsetLeft-(this.objBox.offsetWidth-cell_obj.offsetWidth)+5}}else{if(cell_obj.offsetLeft<this.objBox.scrollLeft){distance-=cell_obj.offsetWidth*2/3;if(distance<this.objBox.scrollLeft){scrollLeft=cell_obj.offsetLeft-5}}}if((scrollLeft)&&(!onlyVScroll)){this.objBox.scrollLeft=scrollLeft}}if(!cell_obj.offsetHeight){var mask=this._realfake?this._fake.rowsAr[cell_obj.parentNode.idd]:cell_obj.parentNode;distance=this.rowsBuffer._dhx_find(mask)*this._srdh}else{distance=cell_obj.offsetTop}var distancemax=distance+cell_obj.offsetHeight+38;if(distancemax>(this.objBox.offsetHeight+this.objBox.scrollTop)){var scrollTop=distance}else{if(distance<this.objBox.scrollTop){var scrollTop=distance-5}}if(scrollTop){this.objBox.scrollTop=scrollTop}}catch(er){}};this.editCell=function(){if(this.editor&&this.cell==this.editor.cell){return}this.editStop();if((this.isEditable!=true)||(!this.cell)){return false}var c=this.cell;if(c.parentNode._locked){return false}this.editor=this.cells4(c);if(this.editor!=null){if(this.editor.isDisabled()){this.editor=null;return false}if(this.callEvent("onEditCell",[0,this.row.idd,this.cell._cellIndex])!=false&&this.editor.edit){this._Opera_stop=(new Date).valueOf();c.className+=" editable";this.editor.edit();this.callEvent("onEditCell",[1,this.row.idd,this.cell._cellIndex])}else{this.editor=null}}};this.editStop=function(mode){if(_isOpera){if(this._Opera_stop){if((this._Opera_stop*1+50)>(new Date).valueOf()){return}this._Opera_stop=null}}if(this.editor&&this.editor!=null){this.editor.cell.className=this.editor.cell.className.replace("editable","");if(mode){var t=this.editor.val;this.editor.detach();this.editor.setValue(t);this.editor=null;this.callEvent("onEditCancel",[this.row.idd,this.cell._cellIndex,t]);return}if(this.editor.detach()){this.cell.wasChanged=true}var g=this.editor;if(g==null){return}this.editor=null;var z=this.callEvent("onEditCell",[2,this.row.idd,this.cell._cellIndex,g.getValue(),g.val]);if((typeof(z)=="string")||(typeof(z)=="number")){g[g.setImage?"setLabel":"setValue"](z)}else{if(!z){g[g.setImage?"setLabel":"setValue"](g.val)}}if(this._ahgr&&this.multiLine){this.setSizes()}}};this._nextRowCell=function(row,dir,pos){row=this._nextRow((this._groups?this.rowsCol:this.rowsBuffer)._dhx_find(row),dir);if(!row){return null}return row.childNodes[row._childIndexes?row._childIndexes[pos]:pos]};this._getNextCell=function(acell,dir,i){acell=acell||this.cell;var arow=acell.parentNode;if(this._tabOrder){i=this._tabOrder[acell._cellIndex];if(typeof i!="undefined"){if(i<0){acell=this._nextRowCell(arow,dir,Math.abs(i)-1)}else{acell=arow.childNodes[i]}}}else{var i=acell._cellIndex+dir;if(i>=0&&i<this._cCount){if(arow._childIndexes){i=arow._childIndexes[acell._cellIndex]+dir}acell=arow.childNodes[i]}else{acell=this._nextRowCell(arow,dir,(dir==1?0:(this._cCount-1)))}}if(!acell){if((dir==1)&&this.tabEnd){this.tabEnd.focus();this.tabEnd.focus();this.setActive(false)}if((dir==-1)&&this.tabStart){this.tabStart.focus();this.tabStart.focus();this.setActive(false)}return null}if(acell.style.display!="none"&&(!this.smartTabOrder||!this.cells(acell.parentNode.idd,acell._cellIndex).isDisabled())){return acell}return this._getNextCell(acell,dir)};this._nextRow=function(ind,dir){var r=this.render_row(ind+dir);if(!r||r==-1){return null}if(r&&r.style.display=="none"){return this._nextRow(ind+dir,dir)}return r};this.scrollPage=function(dir){if(!this.rowsBuffer.length){return}var master=this._realfake?this._fake:this;var new_ind=Math.floor((master._r_select||this.getRowIndex(this.row.idd)||0)+(dir)*this.objBox.offsetHeight/(this._srdh||20));if(new_ind<0){new_ind=0}if(new_ind>=this.rowsBuffer.length){new_ind=this.rowsBuffer.length-1}if(this._srnd&&!this.rowsBuffer[new_ind]){this.objBox.scrollTop+=Math.floor((dir)*this.objBox.offsetHeight/(this._srdh||20))*(this._srdh||20);if(this._fake){this._fake.objBox.scrollTop=this.objBox.scrollTop}master._r_select=new_ind}else{this.selectCell(new_ind,this.cell._cellIndex,true,false,false,(this.multiLine||this._srnd));if(!this.multiLine&&!this._srnd&&!this._realfake){this.objBox.scrollTop=this.getRowById(this.getRowId(new_ind)).offsetTop;if(this._fake){this._fake.objBox.scrollTop=this.objBox.scrollTop}}master._r_select=null}};this.doKey=function(ev){if(!ev){return true}if((ev.target||ev.srcElement).value!==window.undefined){var zx=(ev.target||ev.srcElement);if(zx.className!="dhxcombo_input"&&zx.className!="dhx_tab_ignore"&&((!zx.parentNode)||(zx.parentNode.className.indexOf("editable")==-1))){return true}}if((globalActiveDHTMLGridObject)&&(this!=globalActiveDHTMLGridObject)){return globalActiveDHTMLGridObject.doKey(ev)}if(this.isActive==false){return true}if(this._htkebl){return true}if(!this.callEvent("onKeyPress",[ev.keyCode,ev.ctrlKey,ev.shiftKey,ev])){return false}var code="k"+ev.keyCode+"_"+(ev.ctrlKey?1:0)+"_"+(ev.shiftKey?1:0);if(this.cell){if(this._key_events[code]){if(false===this._key_events[code].call(this)){return true}if(ev.preventDefault){ev.preventDefault()}ev.cancelBubble=true;return false}if(this._key_events.k_other){this._key_events.k_other.call(this,ev)}}return true};this.selectRow=function(r,fl,preserve,show){if(typeof(r)!="object"){r=this.render_row(r)}this.selectCell(r,0,fl,preserve,false,show)};this.wasDblClicked=function(ev){var el=this.getFirstParentOfType(_isIE?ev.srcElement:ev.target,"TD");if(el){var rowId=el.parentNode.idd;return this.callEvent("onRowDblClicked",[rowId,el._cellIndex,ev])}};this._onHeaderClick=function(e,el){var that=this.grid;el=el||that.getFirstParentOfType(_isIE?event.srcElement:e.target,"TD");if(this.grid.resized==null){if(!(this.grid.callEvent("onHeaderClick",[el._cellIndexS,(e||window.event)]))){return false}that.sortField(el._cellIndexS,false,el)}this.grid.resized=null};this.deleteSelectedRows=function(){var num=this.selectedRows.length;if(num==0){return}var tmpAr=this.selectedRows;this.selectedRows=dhtmlxArray();for(var i=num-1;i>=0;i--){var node=tmpAr[i];if(!this.deleteRow(node.idd,node)){this.selectedRows[this.selectedRows.length]=node}else{if(node==this.row){var ind=i}}}if(ind){try{if(ind+1>this.rowsCol.length){ind--}this.selectCell(ind,0,true)}catch(er){this.row=null;this.cell=null}}};this.getSelectedRowId=function(){var selAr=new Array(0);var uni={};for(var i=0;i<this.selectedRows.length;i++){var id=this.selectedRows[i].idd;if(uni[id]){continue}selAr[selAr.length]=id;uni[id]=true}if(selAr.length==0){return null}else{return selAr.join(this.delim)}};this.getSelectedCellIndex=function(){if(this.cell!=null){return this.cell._cellIndex}else{return -1}};this.getColWidth=function(ind){return parseInt(this.cellWidthPX[ind])};this.setColWidth=function(ind,value){if(value=="*"){this.initCellWidth[ind]="*"}else{if(this._hrrar[ind]){return}if(this.cellWidthType=="px"){this.cellWidthPX[ind]=parseInt(value)}else{this.cellWidthPC[ind]=parseInt(value)}}this.setSizes()};this.getRowIndex=function(row_id){for(var i=0;i<this.rowsBuffer.length;i++){if(this.rowsBuffer[i]&&this.rowsBuffer[i].idd==row_id){return i}}return -1};this.getRowId=function(ind){return this.rowsBuffer[ind]?this.rowsBuffer[ind].idd:this.undefined};this.setRowId=function(ind,row_id){this.changeRowId(this.getRowId(ind),row_id)};this.changeRowId=function(oldRowId,newRowId){if(oldRowId==newRowId){return}var row=this.rowsAr[oldRowId];row.idd=newRowId;if(this.UserData[oldRowId]){this.UserData[newRowId]=this.UserData[oldRowId];this.UserData[oldRowId]=null}if(this._h2&&this._h2.get[oldRowId]){this._h2.get[newRowId]=this._h2.get[oldRowId];this._h2.get[newRowId].id=newRowId;delete this._h2.get[oldRowId]}this.rowsAr[oldRowId]=null;this.rowsAr[newRowId]=row;for(var i=0;i<row.childNodes.length;i++){if(row.childNodes[i]._code){row.childNodes[i]._code=this._compileSCL(row.childNodes[i]._val,row.childNodes[i])}}if(this._mat_links&&this._mat_links[oldRowId]){var a=this._mat_links[oldRowId];delete this._mat_links[oldRowId];for(var c in a){for(var i=0;i<a[c].length;i++){this._compileSCL(a[c][i].original,a[c][i])}}}this.callEvent("onRowIdChange",[oldRowId,newRowId])};this.setColumnIds=function(ids){this.columnIds=ids.split(this.delim)};this.setColumnId=function(ind,id){this.columnIds[ind]=id};this.getColIndexById=function(id){for(var i=0;i<this.columnIds.length;i++){if(this.columnIds[i]==id){return i}}};this.getColumnId=function(cin){return this.columnIds[cin]};this.getColumnLabel=function(cin,ind,hdr,raw){var z=(hdr||this.hdr).rows[(ind||0)+1];for(var i=0;i<z.cells.length;i++){if(z.cells[i]._cellIndexS==cin){return raw?z.cells[i].firstChild.innerHTML:(_isIE?z.cells[i].innerText:z.cells[i].textContent)}}return""};this.getColLabel=this.getColumnLabel;this.getFooterLabel=function(cin,ind,raw){return this.getColumnLabel(cin,ind,this.ftr,raw)};this.setRowTextBold=function(row_id){var r=this.getRowById(row_id);if(r){r.style.fontWeight="bold"}};this.setRowTextStyle=function(row_id,styleString){var r=this.getRowById(row_id);if(!r){return}for(var i=0;i<r.childNodes.length;i++){var pfix=r.childNodes[i]._attrs.style||"";if((this._hrrar)&&(this._hrrar[i])){pfix="display:none;"}if(_isIE){r.childNodes[i].style.cssText=pfix+"width:"+r.childNodes[i].style.width+";"+styleString}else{r.childNodes[i].style.cssText=pfix+"width:"+r.childNodes[i].style.width+";"+styleString}}};this.setRowColor=function(row_id,color){var r=this.getRowById(row_id);for(var i=0;i<r.childNodes.length;i++){r.childNodes[i].bgColor=color}};this.setCellTextStyle=function(row_id,ind,styleString){var r=this.getRowById(row_id);if(!r){return}var cell=r.childNodes[r._childIndexes?r._childIndexes[ind]:ind];if(!cell){return}var pfix="";if((this._hrrar)&&(this._hrrar[ind])){pfix="display:none;"}if(_isIE){cell.style.cssText=pfix+"width:"+cell.style.width+";"+styleString}else{cell.style.cssText=pfix+"width:"+cell.style.width+";"+styleString}};this.setRowTextNormal=function(row_id){var r=this.getRowById(row_id);if(r){r.style.fontWeight="normal"}};this.doesRowExist=function(row_id){if(this.getRowById(row_id)!=null){return true}else{return false}};this.getColumnsNum=function(){return this._cCount};this.moveRowUp=function(row_id){var r=this.getRowById(row_id);if(this.isTreeGrid()){return this.moveRowUDTG(row_id,-1)}var rInd=this.rowsCol._dhx_find(r);if((r.previousSibling)&&(rInd!=0)){r.parentNode.insertBefore(r,r.previousSibling);this.rowsCol._dhx_swapItems(rInd,rInd-1);this.setSizes();var bInd=this.rowsBuffer._dhx_find(r);this.rowsBuffer._dhx_swapItems(bInd,bInd-1);if(this._cssEven){this._fixAlterCss(rInd-1)}}};this.moveRowDown=function(row_id){var r=this.getRowById(row_id);if(this.isTreeGrid()){return this.moveRowUDTG(row_id,1)}var rInd=this.rowsCol._dhx_find(r);if(r.nextSibling){this.rowsCol._dhx_swapItems(rInd,rInd+1);if(r.nextSibling.nextSibling){r.parentNode.insertBefore(r,r.nextSibling.nextSibling)}else{r.parentNode.appendChild(r)}this.setSizes();var bInd=this.rowsBuffer._dhx_find(r);this.rowsBuffer._dhx_swapItems(bInd,bInd+1);if(this._cssEven){this._fixAlterCss(rInd)}}};this.getCombo=function(col_ind){if(!this.combos[col_ind]){this.combos[col_ind]=new dhtmlXGridComboObject()}return this.combos[col_ind]};this.setUserData=function(row_id,name,value){if(!row_id){row_id="gridglobaluserdata"}if(!this.UserData[row_id]){this.UserData[row_id]=new Hashtable()}this.UserData[row_id].put(name,value)};this.getUserData=function(row_id,name){if(!row_id){row_id="gridglobaluserdata"}this.getRowById(row_id);var z=this.UserData[row_id];return(z?z.get(name):"")};this.setEditable=function(fl){this.isEditable=dhx4.s2b(fl)};this.selectRowById=function(row_id,multiFL,show,call){if(!call){call=false}this.selectCell(this.getRowById(row_id),0,call,multiFL,false,show)};this.clearSelection=function(){this.editStop();for(var i=0;i<this.selectedRows.length;i++){var r=this.rowsAr[this.selectedRows[i].idd];if(r){r.className=r.className.replace(/[ \t]*rowselected/g,"")}}this.selectedRows=dhtmlxArray();this.row=null;if(this.cell!=null){this.cell.className=this.cell.className.replace(/[ \t]*cellselected/g,"");this.cell=null}this.callEvent("onSelectionCleared",[])};this.copyRowContent=function(from_row_id,to_row_id){var frRow=this.getRowById(from_row_id);if(!this.isTreeGrid()){for(var i=0;i<frRow.cells.length;i++){this.cells(to_row_id,i).setValue(this.cells(from_row_id,i).getValue())}}else{this._copyTreeGridRowContent(frRow,from_row_id,to_row_id)}if(!_isIE){this.getRowById(from_row_id).cells[0].height=frRow.cells[0].offsetHeight}};this.setFooterLabel=function(c,label,ind){return this.setColumnLabel(c,label,ind,this.ftr)};this.setColumnLabel=function(c,label,ind,hdr){var z=(hdr||this.hdr).rows[ind||1];var col=(z._childIndexes?z._childIndexes[c]:c);if(!z.cells[col]){return}if(!this.useImagesInHeader){var hdrHTML="<div class='hdrcell'>";if(label.indexOf("img:[")!=-1){var imUrl=label.replace(/.*\[([^>]+)\].*/,"$1");label=label.substr(label.indexOf("]")+1,label.length);hdrHTML+="<img width='18px' height='18px' align='absmiddle' src='"+imUrl+"' hspace='2'>"}hdrHTML+=label;hdrHTML+="</div>";z.cells[col].innerHTML=hdrHTML;if(this._hstyles[c]){z.cells[col].style.cssText=this._hstyles[c]}}else{z.cells[col].style.textAlign="left";z.cells[col].innerHTML="<img src='"+label+"'>";var a=new Image();a.src=""+label.replace(/(\.[a-z]+)/,".des$1");this.preloadImagesAr[this.preloadImagesAr.length]=a;var b=new Image();b.src=""+label.replace(/(\.[a-z]+)/,".asc$1");this.preloadImagesAr[this.preloadImagesAr.length]=b}if((label||"").indexOf("#")!=-1){var t=label.match(/(^|{)#([^}]+)(}|$)/);if(t){var tn="_in_header_"+t[2];if(this[tn]){this[tn]((this.forceDivInHeader?z.cells[col].firstChild:z.cells[col]),col,label.split(t[0]))}}}};this.setColLabel=function(a,b,ind,c){return this.setColumnLabel(a,b,(ind||0)+1,c)};this.clearAll=function(header){if(!this.obj.rows[0]){return}if(this._h2){this._h2=this._createHierarchy();if(this._fake){if(this._realfake){this._h2=this._fake._h2}else{this._fake._h2=this._h2}}}this.limit=this._limitC=0;this.editStop(true);if(this._dLoadTimer){window.clearTimeout(this._dLoadTimer)}if(this._dload){this.objBox.scrollTop=0;this.limit=this._limitC||0;this._initDrF=true}var len=this.rowsCol.length;len=this.obj.rows.length;for(var i=len-1;i>0;i--){var t_r=this.obj.rows[i];t_r.parentNode.removeChild(t_r)}if(header){this._master_row=null;this.obj.rows[0].parentNode.removeChild(this.obj.rows[0]);for(var i=this.hdr.rows.length-1;i>=0;i--){var t_r=this.hdr.rows[i];t_r.parentNode.removeChild(t_r)}if(this.ftr){this.ftr.parentNode.removeChild(this.ftr);this.ftr=null}this._aHead=this.ftr=this.cellWidth=this._aFoot=null;this.cellType=dhtmlxArray();this._hrrar=[];this.columnIds=[];this.combos=[];this._strangeParams=[];this.defVal=[];this._ivizcol=null}this.row=null;this.cell=null;this.rowsCol=dhtmlxArray();this.rowsAr={};this._RaSeCol=[];this.rowsBuffer=dhtmlxArray();this.UserData=[];this.selectedRows=dhtmlxArray();if(this.pagingOn||this._srnd){this.xmlFileUrl=""}if(this.pagingOn){this.changePage(1)}if(this._contextCallTimer){window.clearTimeout(this._contextCallTimer)}if(this._sst){this.enableStableSorting(true)}this._fillers=this.undefined;this.setSortImgState(false);this.setSizes();this.callEvent("onClearAll",[])};this.sortField=function(ind,repeatFl,r_el){if(this.getRowsNum()==0){return false}var el=this.hdr.rows[0].cells[ind];if(!el){return}if(el.tagName=="TH"&&(this.fldSort.length-1)>=el._cellIndex&&this.fldSort[el._cellIndex]!="na"){var data=this.getSortingState();var sortType=(data[0]==ind&&data[1]=="asc")?"des":"asc";if(!this.callEvent("onBeforeSorting",[ind,this.fldSort[ind],sortType])){return}this.sortImg.className="dhxgrid_sort_"+(sortType=="asc"?"asc":"desc");if(this.useImagesInHeader){var cel=this.hdr.rows[1].cells[el._cellIndex].firstChild;if(this.fldSorted!=null){var celT=this.hdr.rows[1].cells[this.fldSorted._cellIndex].firstChild;celT.src=celT.src.replace(/(\.asc\.)|(\.des\.)/,".")}cel.src=cel.src.replace(/(\.[a-z]+)$/,"."+sortType+"$1")}this.sortRows(el._cellIndex,this.fldSort[el._cellIndex],sortType);this.fldSorted=el;if(r_el&&r_el.tagName.toLowerCase()!="th"){this.r_fldSorted=r_el}var c=this.hdr.rows[1];var c=r_el.parentNode;var real_el=c._childIndexes?c._childIndexes[el._cellIndex]:el._cellIndex;this.setSortImgPos(false,false,false,r_el)}};this.setCustomSorting=function(func,col){if(!this._customSorts){this._customSorts=new Array()}this._customSorts[col]=(typeof(func)=="string")?eval(func):func;this.fldSort[col]="cus"};this.enableHeaderImages=function(fl){this.useImagesInHeader=fl};this.setHeader=function(hdrStr,splitSign,styles){if(typeof(hdrStr)!="object"){var arLab=this._eSplit(hdrStr)}else{arLab=[].concat(hdrStr)}var arWdth=new Array(0);var arTyp=new dhtmlxArray(0);var arAlg=new Array(0);var arVAlg=new Array(0);var arSrt=new Array(0);for(var i=0;i<arLab.length;i++){arWdth[arWdth.length]=Math.round(100/arLab.length);arTyp[arTyp.length]="ed";arAlg[arAlg.length]="left";arVAlg[arVAlg.length]="middle";arSrt[arSrt.length]="na"}this.splitSign=splitSign||"#cspan";this.hdrLabels=arLab;this.cellWidth=arWdth;if(!this.initCellWidth.length){this.setInitWidthsP(arWdth.join(this.delim),true)}this.cellType=arTyp;this.cellAlign=arAlg;this.cellVAlign=arVAlg;this.fldSort=arSrt;this._hstyles=styles||[]};this._eSplit=function(str){if(![].push){return str.split(this.delim)}var a="r"+(new Date()).valueOf();var z=this.delim.replace(/([\|\+\*\^])/g,"\\$1");return(str||"").replace(RegExp(z,"g"),a).replace(RegExp("\\\\"+a,"g"),this.delim).split(a)};this.getColType=function(cInd){return this.cellType[cInd]};this.getColTypeById=function(cID){return this.cellType[this.getColIndexById(cID)]};this.setColTypes=function(typeStr){this.cellType=dhtmlxArray(typeStr.split(this.delim));this._strangeParams=new Array();for(var i=0;i<this.cellType.length;i++){if((this.cellType[i].indexOf("[")!=-1)){var z=this.cellType[i].split(/[\[\]]+/g);this.cellType[i]=z[0];this.defVal[i]=z[1];if(z[1].indexOf("=")==0){this.cellType[i]="math";this._strangeParams[i]=z[0]}}if(!window["eXcell_"+this.cellType[i]]){dhx4.callEvent("onConfigurationError",["Incorrect cell type: "+this.cellType[i],this,this.cellType[i]])}}};this.setColSorting=function(sortStr){this.fldSort=sortStr.split(this.delim);var check={str:1,"int":1,date:1};for(var i=0;i<this.fldSort.length;i++){if((!check[this.fldSort[i]])&&(typeof(window[this.fldSort[i]])=="function")){if(!this._customSorts){this._customSorts=new Array()}this._customSorts[i]=window[this.fldSort[i]];this.fldSort[i]="cus"}}};this.setColAlign=function(alStr){this.cellAlign=alStr.split(this.delim);for(var i=0;i<this.cellAlign.length;i++){this.cellAlign[i]=this.cellAlign[i]._dhx_trim()}};this.setColVAlign=function(valStr){this.cellVAlign=valStr.split(this.delim)};this.setNoHeader=function(fl){this.noHeader=dhx4.s2b(fl)};this.showRow=function(rowID){this.getRowById(rowID);if(this._h2){this.openItem(this._h2.get[rowID].parent.id)}var c=this.getRowById(rowID).childNodes[0];while(c&&c.style.display=="none"){c=c.nextSibling}if(c){this.moveToVisible(c,true)}};this.setStyle=function(ss_header,ss_grid,ss_selCell,ss_selRow){this.ssModifier=[ss_header,ss_grid,ss_selCell,ss_selCell,ss_selRow];var prefs=["#"+this.entBox.id+" table.hdr td","#"+this.entBox.id+" table.obj td","#"+this.entBox.id+" table.obj tr.rowselected td.cellselected","#"+this.entBox.id+" table.obj td.cellselected","#"+this.entBox.id+" table.obj tr.rowselected td"];var index=0;while(!_isIE){try{var temp=document.styleSheets[index].cssRules.length}catch(e){index++;continue}break}for(var i=0;i<prefs.length;i++){if(this.ssModifier[i]){if(_isIE){document.styleSheets[0].addRule(prefs[i],this.ssModifier[i])}else{document.styleSheets[index].insertRule(prefs[i]+(" { "+this.ssModifier[i]+" }"),document.styleSheets[index].cssRules.length)}}}};this.setColumnColor=function(clr){this.columnColor=clr.split(this.delim)};this.enableAlterCss=function(cssE,cssU,perLevel,levelUnique){if(cssE||cssU){this.attachEvent("onGridReconstructed",function(){this._fixAlterCss();if(this._fake){this._fake._fixAlterCss()}})}this._cssSP=perLevel;this._cssSU=levelUnique;this._cssEven=cssE;this._cssUnEven=cssU};this._fixAlterCss=function(ind){if(this._h2&&(this._cssSP||this._cssSU)){return this._fixAlterCssTGR(ind)}if(!this._cssEven&&!this._cssUnEven){return}ind=ind||0;var j=ind;for(var i=ind;i<this.rowsCol.length;i++){if(!this.rowsCol[i]){continue}if(this.rowsCol[i].style.display!="none"){if(this.rowsCol[i]._cntr){j=1;continue}if(this.rowsCol[i].className.indexOf("rowselected")!=-1){if(j%2==1){this.rowsCol[i].className=this._cssUnEven+" rowselected "+(this.rowsCol[i]._css||"")}else{this.rowsCol[i].className=this._cssEven+" rowselected "+(this.rowsCol[i]._css||"")}}else{if(j%2==1){this.rowsCol[i].className=this._cssUnEven+" "+(this.rowsCol[i]._css||"")}else{this.rowsCol[i].className=this._cssEven+" "+(this.rowsCol[i]._css||"")}}j++}}};this.clearChangedState=function(clear_added){for(var i=0;i<this.rowsCol.length;i++){var row=this.rowsCol[i];if(row&&row.childNodes){var cols=row.childNodes.length;for(var j=0;j<cols;j++){row.childNodes[j].wasChanged=false}if(clear_added){row._added=false}}}};this.getChangedRows=function(and_added){var res=new Array();this.forEachRow(function(id){var row=this.rowsAr[id];if(row.tagName!="TR"){return}var cols=row.childNodes.length;if(and_added&&row._added){res[res.length]=row.idd}else{for(var j=0;j<cols;j++){if(row.childNodes[j].wasChanged){res[res.length]=row.idd;break}}}});return res.join(this.delim)};this._sUDa=false;this._sAll=false;this.setSerializationLevel=function(userData,fullXML,config,changedAttr,onlyChanged,asCDATA){this._sUDa=userData;this._sAll=fullXML;this._sConfig=config;this._chAttr=changedAttr;this._onlChAttr=onlyChanged;this._asCDATA=asCDATA};this.setSerializableColumns=function(list){if(!list){this._srClmn=null;return}this._srClmn=(list||"").split(",");for(var i=0;i<this._srClmn.length;i++){this._srClmn[i]=dhx4.s2b(this._srClmn[i])}};this._serialise=function(rCol,inner,closed){this.editStop();var out=[];var close="</"+this.xml.s_row+">";if(this.isTreeGrid()){this._h2.forEachChildF(0,function(el){var temp=this._serializeRow(this.render_row_tree(-1,el.id));out.push(temp);if(temp){return true}else{return false}},this,function(){out.push(close)})}else{for(var i=0;i<this.rowsBuffer.length;i++){if(this.rowsBuffer[i]){if(this._chAttr&&this.rowsBuffer[i]._locator){continue}var temp=this._serializeRow(this.render_row(i));out.push(temp);if(temp){out.push(close)}}}}return[out.join("")]};this._serializeRow=function(r,i){var out=[];var ra=this.xml.row_attrs;var ca=this.xml.cell_attrs;out.push("<"+this.xml.s_row);out.push(" id='"+r.idd+"'");if((this._sAll)&&this.selectedRows._dhx_find(r)!=-1){out.push(" selected='1'")}if(this._h2&&this._h2.get[r.idd].state=="minus"){out.push(" open='1'")}if(ra.length){for(var i=0;i<ra.length;i++){out.push(" "+ra[i]+"='"+r._attrs[ra[i]]+"'")}}out.push(">");if(this._sUDa&&this.UserData[r.idd]){keysAr=this.UserData[r.idd].getKeys();for(var ii=0;ii<keysAr.length;ii++){var subkey=keysAr[ii];if(subkey.indexOf("__")!==0){out.push("<userdata name='"+subkey+"'>"+(this._asCDATA?"<![CDATA[":"")+this.UserData[r.idd].get(subkey)+(this._asCDATA?"]]>":"")+"</userdata>")}}}var changeFl=false;for(var jj=0;jj<this._cCount;jj++){if((!this._srClmn)||(this._srClmn[jj])){var zx=this.cells3(r,jj);out.push("<cell");if(ca.length){for(var i=0;i<ca.length;i++){out.push(" "+ca[i]+"='"+zx.cell._attrs[ca[i]]+"'")}}zxVal=zx[this._agetm]();if(this._asCDATA){zxVal="<![CDATA["+zxVal+"]]>"}if((this._ecspn)&&(zx.cell.colSpan)&&zx.cell.colSpan>1){out.push(' colspan="'+zx.cell.colSpan+'" ')}if(this._chAttr){if(zx.wasChanged()){out.push(' changed="1"');changeFl=true}}else{if((this._onlChAttr)&&(zx.wasChanged())){changeFl=true}}if(this._sAll&&this.cellType[jj]=="tree"){out.push((this._h2?(" image='"+this._h2.get[r.idd].image+"'"):"")+">"+zxVal+"</cell>")}else{out.push(">"+zxVal+"</cell>")}if((this._ecspn)&&(zx.cell.colSpan)){for(var u=0;u<zx.cell.colSpan-1;u++){out.push("<cell/>");jj++}}}}if((this._onlChAttr)&&(!changeFl)&&(!r._added)){return""}return out.join("")};this._serialiseConfig=function(){var out="<head>";for(var i=0;i<this.hdr.rows[0].cells.length;i++){if(this._srClmn&&!this._srClmn[i]){continue}var sort=this.fldSort[i];if(sort=="cus"){sort=this._customSorts[i].toString();sort=sort.replace(/function[\ ]*/,"").replace(/\([^\f]*/,"")}out+="<column width='"+this.getColWidth(i)+"' align='"+this.cellAlign[i]+"' type='"+this.cellType[i]+"' sort='"+(sort||"na")+"' color='"+(this.columnColor[i]||"")+"'"+(this.columnIds[i]?(" id='"+this.columnIds[i]+"'"):"")+">";if(this._asCDATA){out+="<![CDATA["+this.getColumnLabel(i)+"]]>"}else{out+=this.getColumnLabel(i)}var z=this.getCombo(i);if(z){for(var j=0;j<z.keys.length;j++){out+="<option value='"+z.keys[j]+"'>"+z.values[j]+"</option>"}}out+="</column>"}return out+="</head>"};this.serialize=function(){var out='<?xml version="1.0"?><rows>';if(this._mathSerialization){this._agetm="getMathValue"}else{this._agetm="getValue"}if(this._sUDa&&this.UserData.gridglobaluserdata){var keysAr=this.UserData.gridglobaluserdata.getKeys();for(var i=0;i<keysAr.length;i++){out+="<userdata name='"+keysAr[i]+"'>"+this.UserData.gridglobaluserdata.get(keysAr[i])+"</userdata>"}}if(this._sConfig){out+=this._serialiseConfig()}out+=this._serialise();out+="</rows>";return out};this.getPosition=function(oNode,pNode){if(!pNode){var pos=dhx4.getOffset(oNode);return[pos.left,pos.top]}pNode=pNode||document.body;var oCurrentNode=oNode;var iLeft=0;var iTop=0;while((oCurrentNode)&&(oCurrentNode!=pNode)){iLeft+=oCurrentNode.offsetLeft-oCurrentNode.scrollLeft;iTop+=oCurrentNode.offsetTop-oCurrentNode.scrollTop;oCurrentNode=oCurrentNode.offsetParent}if(pNode==document.body){if(_isIE){iTop+=document.body.offsetTop||document.documentElement.offsetTop;iLeft+=document.body.offsetLeft||document.documentElement.offsetLeft}else{if(!_isFF){iLeft+=document.body.offsetLeft;iTop+=document.body.offsetTop}}}return[iLeft,iTop]};this.getFirstParentOfType=function(obj,tag){while(obj&&obj.tagName!=tag&&obj.tagName!="BODY"){obj=obj.parentNode}return obj};this.objBox.onscroll=function(){this.grid._doOnScroll()};this.hdrBox.onscroll=function(){if(this._try_header_sync){return}this._try_header_sync=true;if(Math.abs(this.grid.objBox.scrollLeft-this.scrollLeft)>1){this.grid.objBox.scrollLeft=this.scrollLeft}this._try_header_sync=false};if((!_isOpera)||(_OperaRv>8.5)){this.hdr.onmousemove=function(e){this.grid.changeCursorState(e||window.event)};this.hdr.onmousedown=function(e){return this.grid.startColResize(e||window.event)}}this.obj.onmousemove=this._drawTooltip;this.objBox.onclick=function(e){e=e||event;e.cancelBubble=true;this.firstChild.grid.setActive(true);window.dhx4.callEvent("_onGridClick",[e,this.firstChild.grid])};this.obj.onclick=function(e){if(this.grid._doClick(e||window.event)!==false){if(this.grid._sclE){this.grid.editCell(e||window.event)}else{this.grid.editStop()}}e=e||event;e.cancelBubble=true;window.dhx4.callEvent("_onGridClick",[e,this.grid])};if(_isMacOS){this.entBox.oncontextmenu=function(e){e.cancelBubble=true;if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}var that=this.grid;if(that._realfake){that=that._fake}return that._doContClick(e||window.event)}}else{this.entBox.onmousedown=function(e){return this.grid._doContClick(e||window.event)};this.entBox.oncontextmenu=function(e){if(this.grid._ctmndx){(e||event).cancelBubble=true}return !this.grid._ctmndx}}this.obj.ondblclick=function(e){if(!this.grid.wasDblClicked(e||window.event)){return false}if(this.grid._dclE){var row=this.grid.getFirstParentOfType((_isIE?event.srcElement:e.target),"TR");if(row==this.grid.row){this.grid.editCell(e||window.event)}}(e||event).cancelBubble=true;if(_isOpera){return false}};this.hdr.onclick=this._onHeaderClick;this.sortImg.onclick=function(){self._onHeaderClick.apply({grid:self},[null,self.r_fldSorted])};this.hdr.ondblclick=this._onHeaderDblClick;if(!document.body._dhtmlxgrid_onkeydown){dhtmlxEvent(document,"keydown",function(e){if(globalActiveDHTMLGridObject){return globalActiveDHTMLGridObject.doKey(e||window.event)}});document.body._dhtmlxgrid_onkeydown=true}dhtmlxEvent(document.body,"click",function(){if(self.editStop){self.editStop()}if(self.isActive){self.setActive(false)}});if(this.entBox.style.height.toString().indexOf("%")!=-1){this._delta_y=this.entBox.style.height}if(this.entBox.style.width.toString().indexOf("%")!=-1){this._delta_x=this.entBox.style.width}if(this._delta_x||this._delta_y){this._setAutoResize()}this.setColHidden=this.setColumnsVisibility;this.enableCollSpan=this.enableColSpan;this.setMultiselect=this.enableMultiselect;this.setMultiLine=this.enableMultiline;this.deleteSelectedItem=this.deleteSelectedRows;this.getSelectedId=this.getSelectedRowId;this.getHeaderCol=this.getColumnLabel;this.isItemExists=this.doesRowExist;this.getColumnCount=this.getColumnsNum;this.setSelectedRow=this.selectRowById;this.setHeaderCol=this.setColumnLabel;this.preventIECashing=this.preventIECaching;this.enableAutoHeigth=this.enableAutoHeight;this.getUID=this.uid;if(dhtmlx.image_path){this.setImagePath(dhtmlx.image_path)}if(dhtmlx.skin){this.setSkin(dhtmlx.skin)}return this}dhtmlXGridObject.prototype={getRowAttribute:function(b,a){return this.getRowById(b)._attrs[a]},setRowAttribute:function(c,a,b){this.getRowById(c)._attrs[a]=b},isTreeGrid:function(){return(this.cellType._dhx_find("tree")!=-1)},setRowHidden:function(h,c){var b=dhx4.s2b(c);var g=this.getRowById(h);if(!g){return}if(g.expand===""){this.collapseKids(g)}if((c)&&(g.style.display!="none")){g.style.display="none";var e=this.selectedRows._dhx_find(g);if(e!=-1){g.className=g.className.replace("rowselected","");for(var a=0;a<g.childNodes.length;a++){g.childNodes[a].className=g.childNodes[a].className.replace(/cellselected/g,"")}this.selectedRows._dhx_removeAt(e)}this.callEvent("onGridReconstructed",[])}if((!c)&&(g.style.display=="none")){g.style.display="";this.callEvent("onGridReconstructed",[])}this.callEvent("onRowHide",[h,c]);this.setSizes()},setColumnHidden:function(c,b){if(!this.hdr.rows.length){if(!this._ivizcol){this._ivizcol=[]}return this._ivizcol[c]=b}if((this.fldSorted)&&(this.fldSorted.cellIndex==c)&&(b)){this.sortImg.style.display="none"}var a=dhx4.s2b(b);if(a){if(!this._hrrar){this._hrrar=new Array()}else{if(this._hrrar[c]){return}}this._hrrar[c]="display:none;";this._hideShowColumn(c,"none")}else{if((!this._hrrar)||(!this._hrrar[c])){return}this._hrrar[c]="";this._hideShowColumn(c,"")}if((this.fldSorted)&&(this.fldSorted.cellIndex==c)&&(!b)){this.sortImg.style.display="inline"}this.setSortImgPos();this.callEvent("onColumnHidden",[c,b])},isColumnHidden:function(a){if((this._hrrar)&&(this._hrrar[a])){return true}return false},setColumnsVisibility:function(b){if(b){this._ivizcol=b.split(this.delim)}if(this.hdr.rows.length&&this._ivizcol){for(var a=0;a<this._ivizcol.length;a++){this.setColumnHidden(a,this._ivizcol[a])}}},_fixHiddenRowsAll:function(m,c,a,b,h){h=h||"_cellIndex";var l=m.rows.length;for(var g=0;g<l;g++){var n=m.rows[g].childNodes;if(n.length!=this._cCount){for(var e=0;e<n.length;e++){if(n[e][h]==c){n[e].style[a]=b;break}}}else{n[c].style[a]=b}}},_hideShowColumn:function(g,e){var a=g;if(this.hdr.rows[1]&&(this.hdr.rows[1]._childIndexes)&&(this.hdr.rows[1]._childIndexes[g]!=g)){a=this.hdr.rows[1]._childIndexes[g]}if(e=="none"){this.hdr.rows[0].cells[g]._oldWidth=this.hdr.rows[0].cells[g].style.width||(this.initCellWidth[g]+"px");this.hdr.rows[0].cells[g]._oldWidthP=this.cellWidthPC[g];this.obj.rows[0].cells[g].style.width="0px";var b={rows:[this.obj.rows[0]]};this.forEachRow(function(h){if(this.rowsAr[h].tagName=="TR"){b.rows.push(this.rowsAr[h])}});this._fixHiddenRowsAll(b,g,"display","none");if(this.isTreeGrid()){this._fixHiddenRowsAllTG(g,"none")}if((_isOpera&&_OperaRv<9)||_isKHTML||(_isFF)){this._fixHiddenRowsAll(this.hdr,g,"display","none","_cellIndexS")}if(this.ftr){this._fixHiddenRowsAll(this.ftr.childNodes[0],g,"display","none")}this._fixHiddenRowsAll(this.hdr,g,"whiteSpace","nowrap","_cellIndexS");if(!this.cellWidthPX.length&&!this.cellWidthPC.length){this.cellWidthPX=[].concat(this.initCellWidth)}if(this.cellWidthPX[g]){this.cellWidthPX[g]=0}if(this.cellWidthPC[g]){this.cellWidthPC[g]=0}}else{if(this.hdr.rows[0].cells[g]._oldWidth){var c=this.hdr.rows[0].cells[g];if(_isOpera||_isKHTML||(_isFF)){this._fixHiddenRowsAll(this.hdr,g,"display","","_cellIndexS")}if(this.ftr){this._fixHiddenRowsAll(this.ftr.childNodes[0],g,"display","")}var b={rows:[this.obj.rows[0]]};this.forEachRow(function(h){if(this.rowsAr[h].tagName=="TR"){b.rows.push(this.rowsAr[h])}});this._fixHiddenRowsAll(b,g,"display","");if(this.isTreeGrid()){this._fixHiddenRowsAllTG(g,"")}this._fixHiddenRowsAll(this.hdr,g,"whiteSpace","normal","_cellIndexS");if(c._oldWidthP){this.cellWidthPC[g]=c._oldWidthP}if(c._oldWidth){this.cellWidthPX[g]=parseInt(c._oldWidth)}}}if(!e&&this._realfake){this.setColumnSizes(this.entBox.clientWidth)}this.setSizes();if((!_isIE)&&(!_isFF)){this.obj.border=1;this.obj.border=0}},enableColSpan:function(a){this._ecspn=dhx4.s2b(a)},enableRowsHover:function(b,a){this._unsetRowHover(false,true);this._hvrCss=a;if(dhx4.s2b(b)){if(!this._elmnh){this.obj._honmousemove=this.obj.onmousemove;this.obj.onmousemove=this._setRowHover;if(_isIE){this.obj.onmouseleave=this._unsetRowHover}else{this.obj.onmouseout=this._unsetRowHover}this._elmnh=true}}else{if(this._elmnh){this.obj.onmousemove=this.obj._honmousemove;if(_isIE){this.obj.onmouseleave=null}else{this.obj.onmouseout=null}this._elmnh=false}}},enableEditEvents:function(b,c,a){this._sclE=dhx4.s2b(b);this._dclE=dhx4.s2b(c);this._f2kE=dhx4.s2b(a)},enableLightMouseNavigation:function(a){if(dhx4.s2b(a)){if(!this._elmn){this.entBox._onclick=this.entBox.onclick;this.entBox.onclick=function(){return true};this.obj._onclick=this.obj.onclick;this.obj.onclick=function(b){var g=this.grid.getFirstParentOfType(b?b.target:event.srcElement,"TD");if(!g){return}this.grid.editStop();this.grid.doClick(g);this.grid.editCell();(b||event).cancelBubble=true};this.obj._onmousemove=this.obj.onmousemove;this.obj.onmousemove=this._autoMoveSelect;this._elmn=true}}else{if(this._elmn){this.entBox.onclick=this.entBox._onclick;this.obj.onclick=this.obj._onclick;this.obj.onmousemove=this.obj._onmousemove;this._elmn=false}}},_unsetRowHover:function(b,g){if(g){that=this}else{that=this.grid}if((that._lahRw)&&(that._lahRw!=g)){for(var a=0;a<that._lahRw.childNodes.length;a++){that._lahRw.childNodes[a].className=that._lahRw.childNodes[a].className.replace(that._hvrCss,"")}that._lahRw=null}},_setRowHover:function(b){var g=this.grid.getFirstParentOfType(b?b.target:event.srcElement,"TD");if(g&&g.parentNode!=this.grid._lahRw){this.grid._unsetRowHover(0,g);g=g.parentNode;if(!g.idd||g.idd=="__filler__"){return}for(var a=0;a<g.childNodes.length;a++){g.childNodes[a].className+=" "+this.grid._hvrCss}this.grid._lahRw=g}this._honmousemove(b)},_autoMoveSelect:function(a){if(!this.grid.editor){var b=this.grid.getFirstParentOfType(a?a.target:event.srcElement,"TD");if(b.parentNode.idd){this.grid.doClick(b,true,0)}}this._onmousemove(a)},enableDistributedParsing:function(c,a,b){if(dhx4.s2b(c)){this._ads_count=a||10;this._ads_time=b||250}else{this._ads_count=0}},destructor:function(){this.editStop(true);if(this._sizeTime){this._sizeTime=window.clearTimeout(this._sizeTime)}this.entBox.className=(this.entBox.className||"").replace(/gridbox.*/,"");if(this.formInputs){for(var c=0;c<this.formInputs.length;c++){this.parentForm.removeChild(this.formInputs[c])}}var b;for(var c=0;c<this.rowsCol.length;c++){if(this.rowsCol[c]){this.rowsCol[c].grid=null}}for(c in this.rowsAr){if(this.rowsAr[c]){this.rowsAr[c]=null}}this.rowsCol=new dhtmlxArray();this.rowsAr={};this.entBox.innerHTML="";var e=function(){};this.entBox.onclick=this.entBox.onmousedown=this.entBox.onbeforeactivate=this.entBox.onbeforedeactivate=this.entBox.onbeforedeactivate=this.entBox.onselectstart=e;this.setSizes=this._update_srnd_view=this.callEvent=e;this.entBox.grid=this.objBox.grid=this.hdrBox.grid=this.obj.grid=this.hdr.grid=null;if(this._fake){this.globalBox.innerHTML="";this._fake.setSizes=this._fake._update_srnd_view=this._fake.callEvent=e;this.globalBox.onclick=this.globalBox.onmousedown=this.globalBox.onbeforeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onselectstart=e}for(b in this){if((this[b])&&(this[b].m_obj)){this[b].m_obj=null}this[b]=null}if(this==globalActiveDHTMLGridObject){globalActiveDHTMLGridObject=null}return null},getSortingState:function(){var a=new Array();if(this.fldSorted){a[0]=this.fldSorted._cellIndex;a[1]=(this.sortImg.className=="dhxgrid_sort_desc"?"des":"asc")}return a},enableAutoHeight:function(c,b,a){this._ahgr=dhx4.s2b(c);this._ahgrF=dhx4.s2b(a);this._ahgrM=b||null;if(arguments.length==1){this.objBox.style.overflowY=c?"hidden":"auto"}if(b=="auto"){this._ahgrM=null;this._ahgrMA=true;this._setAutoResize()}},enableStableSorting:function(a){this._sst=dhx4.s2b(a);this.rowsCol.stablesort=function(h){var g=this.length-1;for(var e=0;e<this.length-1;e++){for(var c=0;c<g;c++){if(h(this[c],this[c+1])>0){var b=this[c];this[c]=this[c+1];this[c+1]=b}}g--}}},enableKeyboardSupport:function(a){this._htkebl=!dhx4.s2b(a)},enableContextMenu:function(a){this._ctmndx=a},setScrollbarWidthCorrection:function(a){},enableTooltips:function(b){this._enbTts=b.split(",");for(var a=0;a<this._enbTts.length;a++){this._enbTts[a]=dhx4.s2b(this._enbTts[a])}},enableResizing:function(b){this._drsclmn=b.split(",");for(var a=0;a<this._drsclmn.length;a++){this._drsclmn[a]=dhx4.s2b(this._drsclmn[a])}},setColumnMinWidth:function(a,b){if(arguments.length==2){if(!this._drsclmW){this._drsclmW=new Array()}this._drsclmW[b]=a}else{this._drsclmW=a.split(",")}},enableCellIds:function(a){this._enbCid=dhx4.s2b(a)},lockRow:function(a,c){var b=this.getRowById(a);if(b){b._locked=dhx4.s2b(c);if((this.cell)&&(this.cell.parentNode.idd==a)){this.editStop()}}},_getRowArray:function(g){var e=new Array();for(var c=0;c<g.childNodes.length;c++){var b=this.cells3(g,c);e[c]=b.getValue()}return e},setDateFormat:function(b,a){this._dtmask=b;this._dtmask_inc=a},setNumberFormat:function(l,c,g,j){var e=l.replace(/[^0\,\.]*/g,"");var a=e.indexOf(".");if(a>-1){a=e.length-a-1}var b=e.indexOf(",");if(b>-1){b=e.length-a-2-b}if(typeof g!="string"){g=this.i18n.decimal_separator}if(typeof j!="string"){j=this.i18n.group_separator}var m=l.split(e)[0];var h=l.split(e)[1];this._maskArr[c]=[a,b,m,h,g,j]},_aplNFb:function(g,e){var b=this._maskArr[e];if(!b){return g}var c=parseFloat(g.toString().replace(/[^0-9]*/g,""));if(g.toString().substr(0,1)=="-"){c=c*-1}if(b[0]>0){c=c/Math.pow(10,b[0])}return c},_aplNF:function(h,g){var b=this._maskArr[g];if(!b){return h}var l=(parseFloat(h)<0?"-":"")+b[2];h=Math.abs(Math.round(parseFloat(h)*Math.pow(10,b[0]>0?b[0]:0))).toString();h=(h.length<b[0]?Math.pow(10,b[0]+1-h.length).toString().substr(1,b[0]+1)+h.toString():h).split("").reverse();h[b[0]]=(h[b[0]]||"0")+b[4];if(b[1]>0){for(var e=(b[0]>0?0:1)+b[0]+b[1];e<h.length;e+=b[1]){h[e]+=b[5]}}return l+h.reverse().join("")+b[3]},_launchCommands:function(a){for(var e=0;e<a.length;e++){var c=new Array();for(var b=0;b<a[e].childNodes.length;b++){if(a[e].childNodes[b].nodeType==1){c[c.length]=a[e].childNodes[b].firstChild.data}}this[a[e].getAttribute("command")].apply(this,c)}},_parseHead:function(g){var e=dhx4.ajax.xpath("./head",g);if(e.length){var h=dhx4.ajax.xpath("./column",e[0]);var l=dhx4.ajax.xpath("./settings",e[0]);var y="setInitWidths";var u=false;if(l[0]){for(var m=0;m<l[0].childNodes.length;m++){switch(l[0].childNodes[m].tagName){case"colwidth":if(l[0].childNodes[m].firstChild&&l[0].childNodes[m].firstChild.data=="%"){y="setInitWidthsP"}break;case"splitat":u=(l[0].childNodes[m].firstChild?l[0].childNodes[m].firstChild.data:false);break}}}this._launchCommands(dhx4.ajax.xpath("./beforeInit/call",e[0]));if(h.length>0){if(this.hdr.rows.length>0){this.clearAll(true)}var a=[[],[],[],[],[],[],[],[],[]];var t=["","width","type","align","sort","color","format","hidden","id"];var r=["",y,"setColTypes","setColAlign","setColSorting","setColumnColor","","","setColumnIds"];for(var x=0;x<h.length;x++){for(var w=1;w<t.length;w++){a[w].push(h[x].getAttribute(t[w]))}a[0].push((h[x].firstChild?h[x].firstChild.data:"").replace(/^\s*((\s\S)*.+)\s*$/gi,"$1"))}this.setHeader(a[0]);for(var x=0;x<r.length;x++){if(r[x]){this[r[x]](a[x].join(this.delim))}}for(var x=0;x<h.length;x++){if((this.cellType[x].indexOf("co")==0)||(this.cellType[x]=="clist")){var n=dhx4.ajax.xpath("./option",h[x]);if(n.length){var v=new Array();if(this.cellType[x]=="clist"){for(var w=0;w<n.length;w++){v[v.length]=n[w].firstChild?n[w].firstChild.data:""}this.registerCList(x,v)}else{var z=this.getCombo(x);for(var w=0;w<n.length;w++){z.put(n[w].getAttribute("value"),n[w].firstChild?n[w].firstChild.data:"")}}}}else{if(a[6][x]){if((this.cellType[x].toLowerCase().indexOf("calendar")!=-1)||(this.fldSort[x]=="date")){this.setDateFormat(a[6][x])}else{this.setNumberFormat(a[6][x],x)}}}}this.init();var c=a[7].join(this.delim);if(this.setColHidden&&c.replace(/,/g,"")!=""){this.setColHidden(c)}if((u)&&(this.splitAt)){this.splitAt(u)}}this._launchCommands(dhx4.ajax.xpath("./afterInit/call",e[0]))}var b=dhx4.ajax.xpath("//rows/userdata",g);if(b.length>0){if(!this.UserData.gridglobaluserdata){this.UserData.gridglobaluserdata=new Hashtable()}for(var w=0;w<b.length;w++){var A="";for(var o=0;o<b[w].childNodes.length;o++){A+=b[w].childNodes[o].nodeValue}this.UserData.gridglobaluserdata.put(b[w].getAttribute("name"),A)}}},getCheckedRows:function(a){var b=new Array();this.forEachRowA(function(e){var c=this.cells(e,a);if(c.changeState&&c.getValue()!=0){b.push(e)}},true);return b.join(",")},checkAll:function(){var b=arguments.length?arguments[0]:1;for(var a=0;a<this.getColumnsNum();a++){if(this.getColType(a)=="ch"){this.setCheckedRows(a,b)}}},uncheckAll:function(){this.checkAll(0)},setCheckedRows:function(b,a){this.forEachRowA(function(c){if(this.cells(c,b).isCheckbox()){this.cells(c,b).setValue(a)}})},_drawTooltip:function(h){var j=this.grid.getFirstParentOfType(h?h.target:event.srcElement,"TD");if(!j||((this.grid.editor)&&(this.grid.editor.cell==j))){return true}var g=j.parentNode;if(!g.idd||g.idd=="__filler__"){return}var b=(h?h.target:event.srcElement);if(g.idd==window.unknown){return true}if(!this.grid.callEvent("onMouseOver",[g.idd,j._cellIndex,(h||window.event)])){return true}if((this.grid._enbTts)&&(!this.grid._enbTts[j._cellIndex])){if(b.title){b.title=""}return true}if(j._cellIndex>=this.grid._cCount){return}var a=this.grid.cells3(g,j._cellIndex);if(!a||!a.cell||!a.cell._attrs){return}if(b._title){a.cell.title=""}if(!a.cell._attrs.title){b._title=true}if(a){b.title=a.cell._attrs.title||(a.getTitle?a.getTitle():(a.getValue()||"").toString().replace(/<[^>]*>/gi,""))}return true},enableCellWidthCorrection:function(a){if(_isFF){this._wcorr=parseInt(a)}},getAllRowIds:function(c){var a=[];for(var b=0;b<this.rowsBuffer.length;b++){if(this.rowsBuffer[b]){a.push(this.rowsBuffer[b].idd)}}return a.join(c||this.delim)},getAllItemIds:function(){return this.getAllRowIds()},setColspan:function(b,v,e){if(!this._ecspn){return}var a=this.getRowById(b);if((a._childIndexes)&&(a.childNodes[a._childIndexes[v]])){var l=a._childIndexes[v];var g=a.childNodes[l];var h=g.colSpan;g.colSpan=1;if((h)&&(h!=1)){for(var s=1;s<h;s++){var u=document.createElement("TD");if(g.nextSibling){a.insertBefore(u,g.nextSibling)}else{a.appendChild(u)}a._childIndexes[v+s]=l+s;u._cellIndex=v+s;u.style.textAlign=this.cellAlign[s];u.style.verticalAlign=this.cellVAlign[s];g=u;this.cells3(a,v+s).setValue("")}}for(var t=v*1+1*h;t<a._childIndexes.length;t++){a._childIndexes[t]+=(h-1)*1}}if((e)&&(e>1)){if(a._childIndexes){var l=a._childIndexes[v]}else{var l=v;a._childIndexes=new Array();for(var t=0;t<a.childNodes.length;t++){a._childIndexes[t]=t}}a.childNodes[l].colSpan=e;for(var t=1;t<e;t++){a._childIndexes[a.childNodes[l+1]._cellIndex]=l;a.removeChild(a.childNodes[l+1])}var o=a.childNodes[a._childIndexes[v]]._cellIndex;for(var t=o*1+1*e;t<a._childIndexes.length;t++){a._childIndexes[t]-=(e-1)}}},preventIECaching:function(a){dhx4.ajax.cache=!a},enableColumnAutoSize:function(a){this._eCAS=dhx4.s2b(a)},_onHeaderDblClick:function(c){var b=this.grid;var a=b.getFirstParentOfType(_isIE?event.srcElement:c.target,"TD");if(!b._eCAS){return false}b.adjustColumnSize(a._cellIndexS)},adjustColumnSize:function(o,c){if(this._hrrar&&this._hrrar[o]){return}this._notresize=true;var e=0;this._setColumnSizeR(o,20);for(var h=1;h<this.hdr.rows.length;h++){var t=this.hdr.rows[h];t=t.childNodes[(t._childIndexes)?t._childIndexes[o]:o];if((t)&&((!t.colSpan)||(t.colSpan<2))&&t._cellIndex==o){if((t.childNodes[0])&&(t.childNodes[0].className=="hdrcell")){t=t.childNodes[0]}e=Math.max(e,t.scrollWidth)}}var g=this.obj.rows.length;var s=0;var v=this.cellType._dhx_find("tree");var r=document.createElement("DIV");r.className="dhx_grid_adjust";r.style.cssText="width:auto;height:auto;visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden; white-space:nowrap;";document.body.appendChild(r);for(var n=1;n<g;n++){var u=this.obj.rows[n];var b=o;if(!this.rowsAr[u.idd]){continue}if(u._childIndexes){if(u._childIndexes[o]==u._childIndexes[o+1]){continue}b=u._childIndexes[o]}if(!u.childNodes[b]||u.childNodes[b]._cellIndex!=o){continue}r.innerHTML=(u.childNodes[b].innerText||u.childNodes[b].textContent||"");s=r.offsetWidth;if(this._h2&&o==v){s+=this._h2.get[u.idd].level*22}if(s>e){e=s}}document.body.removeChild(r);e+=20+(c||0);this._setColumnSizeR(o,e);this._notresize=false;this.setSizes()},detachHeader:function(a,c){c=c||this.hdr;var b=c.rows[a+1];if(b){b.parentNode.removeChild(b)}this.setSizes()},detachFooter:function(a){this.detachHeader(a,this.ftr)},attachHeader:function(a,e,b){if(typeof(a)=="string"){a=this._eSplit(a)}if(typeof(e)=="string"){e=e.split(this.delim)}b=b||"_aHead";if(this.hdr.rows.length){if(a){this._createHRow([a,e],this[(b=="_aHead")?"hdr":"ftr"])}else{if(this[b]){for(var c=0;c<this[b].length;c++){this.attachHeader.apply(this,this[b][c])}}}}else{if(!this[b]){this[b]=new Array()}this[b][this[b].length]=[a,e,b]}},_createHRow:function(c,o){if(!o){if(this.entBox.style.position!="absolute"){this.entBox.style.position="relative"}var l=document.createElement("DIV");l.className="c_ftr".substr(2);this.entBox.appendChild(l);var u=document.createElement("TABLE");u.cellPadding=u.cellSpacing=0;if(!_isIE||_isIE==8){u.width="100%";u.style.paddingRight="20px"}u.style.marginRight="20px";u.style.tableLayout="fixed";l.appendChild(u);u.appendChild(document.createElement("TBODY"));this.ftr=o=u;var h=u.insertRow(0);var a=((this.hdrLabels.length<=1)?c[0].length:this.hdrLabels.length);for(var e=0;e<a;e++){h.appendChild(document.createElement("TH"));h.childNodes[e]._cellIndex=e}if(_isIE&&_isIE<8){h.style.position="absolute"}else{h.style.height="auto"}}var g=c[1];var l=document.createElement("TR");o.rows[0].parentNode.appendChild(l);for(var e=0;e<c[0].length;e++){if(c[0][e]=="#cspan"){var m=l.cells[l.cells.length-1];m.colSpan=(m.colSpan||1)+1;continue}if((c[0][e]=="#rspan")&&(o.rows.length>1)){var x=o.rows.length-2;var v=false;var m=null;while(!v){var m=o.rows[x];for(var b=0;b<m.cells.length;b++){if(m.cells[b]._cellIndex==e){v=b+1;break}}x--}m=m.cells[v-1];m.rowSpan=(m.rowSpan||1)+1;continue}var n=document.createElement("TD");n._cellIndex=n._cellIndexS=e;if(this._hrrar&&this._hrrar[e]&&!_isIE){n.style.display="none"}if(typeof c[0][e]=="object"){n.appendChild(c[0][e])}else{if(this.forceDivInHeader){n.innerHTML="<div class='hdrcell'>"+(c[0][e]||"&nbsp;")+"</div>"}else{n.innerHTML=(c[0][e]||"&nbsp;")}if((c[0][e]||"").indexOf("#")!=-1){var u=c[0][e].match(/(^|{)#([^}]+)(}|$)/);if(u){var r="_in_header_"+u[2];if(this[r]){this[r]((this.forceDivInHeader?n.firstChild:n),e,c[0][e].split(u[0]))}}}}if(g){n.style.cssText=g[e]}l.appendChild(n)}var s=o;if(_isKHTML){if(o._kTimer){window.clearTimeout(o._kTimer)}o._kTimer=window.setTimeout(function(){o.rows[1].style.display="none";window.setTimeout(function(){o.rows[1].style.display=""},1)},500)}},attachFooter:function(a,b){this.attachHeader(a,b,"_aFoot")},setCellExcellType:function(c,a,b){this.changeCellType(this.getRowById(c),a,b)},getCellExcellType:function(b,a){var e=this.getRowById(b);var c=this.cells3(e,a);return c.cell._cellType||this.cellType[a]},changeCellType:function(c,e,b){b=b||this.cellType[e];var g=this.cells3(c,e);var a=g.getValue();g.cell._cellType=b;var g=this.cells3(c,e);g.setValue(a)},setRowExcellType:function(c,b){var e=this.rowsAr[c];for(var a=0;a<e.childNodes.length;a++){this.changeCellType(e,a,b)}},setColumnExcellType:function(a,c){for(var b=0;b<this.rowsBuffer.length;b++){if(this.rowsBuffer[b]&&this.rowsBuffer[b].tagName=="TR"){this.changeCellType(this.rowsBuffer[b],a,c)}}if(this.cellType[a]=="math"){this._strangeParams[b]=c}else{this.cellType[a]=c}},forEachRow:function(c){for(var b in this.rowsAr){if(this.rowsAr[b]&&this.rowsAr[b].idd){c.apply(this,[this.rowsAr[b].idd])}}},forEachRowA:function(c){for(var b=0;b<this.rowsBuffer.length;b++){if(this.rowsBuffer[b]){c.call(this,this.render_row(b).idd)}}},forEachCell:function(c,b){var e=this.getRowById(c);if(!e){return}for(var a=0;a<this._cCount;a++){b(this.cells3(e,a),a)}},enableAutoWidth:function(c,a,b){this._awdth=[dhx4.s2b(c),parseInt(a||99999),parseInt(b||0)];if(arguments.length==1){this.objBox.style.overflowX=c?"hidden":"auto"}},updateFromXML:function(a,e,b,c){if(typeof e=="undefined"){e=true}this._refresh_mode=[true,e,b];this.load(a,c)},_refreshFromXML:function(e){if(this._f_rowsBuffer){this.filterBy(0,"")}reset=false;if(window.eXcell_tree){eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue;eXcell_tree.prototype.setValue=function(t){var s=this.grid._h2.get[this.cell.parentNode.idd];if(s&&this.cell.parentNode.valTag){this.setLabel(t)}else{this.setValueX(t)}}}var o=this.cellType._dhx_find("tree");var h=dhx4.ajax.xmltop("rows",e);var g=h.getAttribute("parent")||0;var l={};if(this._refresh_mode[2]){if(o!=-1){this._h2.forEachChild(g,function(r){l[r.id]=true},this)}else{this.forEachRow(function(r){l[r]=true})}}var n=dhx4.ajax.xpath("//row",h);for(var c=0;c<n.length;c++){var m=n[c];var a=m.getAttribute("id");l[a]=false;var g=m.parentNode.getAttribute("id")||g;if(this.rowsAr[a]&&this.rowsAr[a].tagName!="TR"){if(this._h2){this._h2.get[a].buff.data=m}else{this.rowsBuffer[this.getRowIndex(a)].data=m}this.rowsAr[a]=m}else{if(this.rowsAr[a]){this._process_xml_row(this.rowsAr[a],m,-1);this._postRowProcessing(this.rowsAr[a],true);if(this._fake&&this._fake.rowsAr[a]){this._fake._process_xml_row(this._fake.rowsAr[a],m,-1)}}else{if(this._refresh_mode[1]){var j={idd:a,data:m,_parser:this._process_xml_row,_locator:this._get_xml_data};var b=this.rowsBuffer.length;if(this._refresh_mode[1]=="top"){this.rowsBuffer.unshift(j);b=0}else{this.rowsBuffer.push(j)}if(this._h2){reset=true;(this._h2.add(a,(m.parentNode.getAttribute("id")||m.parentNode.getAttribute("parent")))).buff=this.rowsBuffer[this.rowsBuffer.length-1]}else{if(this._srnd){reset=true}}this.rowsAr[a]=m;m=this.render_row(b);this._insertRowAt(m,b?-1:0)}}}}if(this._refresh_mode[2]){for(a in l){if(l[a]&&this.rowsAr[a]){this.deleteRow(a)}}}this._refresh_mode=null;if(window.eXcell_tree){eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX}if(reset){if(this._h2){this._renderSort()}else{this.render_dataset()}}if(this._f_rowsBuffer){this._f_rowsBuffer=null;this.filterByAll()}},getCustomCombo:function(c,b){var a=this.cells(c,b).cell;if(!a._combo){a._combo=new dhtmlXGridComboObject()}return a._combo},setTabOrder:function(b){var e=b.split(this.delim);this._tabOrder=[];var a=this._cCount||b.length;for(var c=0;c<a;c++){e[c]={c:parseInt(e[c]),ind:c}}e.sort(function(h,g){return(h.c>g.c?1:-1)});for(var c=0;c<a;c++){if(!e[c+1]||(typeof e[c].c=="undefined")){this._tabOrder[e[c].ind]=(e[0].ind+1)*-1}else{this._tabOrder[e[c].ind]=e[c+1].ind}}},i18n:{loading:"Loading",decimal_separator:".",group_separator:","},_key_events:{k13_1_0:function(){var a=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[a+1],this.cell._cellIndex,true)},k13_0_1:function(){var a=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[a-1],this.cell._cellIndex,true)},k13_0_0:function(){this.editStop();this.callEvent("onEnter",[(this.row?this.row.idd:null),(this.cell?this.cell._cellIndex:null)]);this._still_active=true},k9_0_0:function(){this.editStop();if(!this.callEvent("onTab",[true])){return true}var a=this._getNextCell(null,1);if(a){this.selectCell(a.parentNode,a._cellIndex,(this.row!=a.parentNode),false,true);this._still_active=true}},k9_0_1:function(){this.editStop();if(!this.callEvent("onTab",[false])){return false}var a=this._getNextCell(null,-1);if(a){this.selectCell(a.parentNode,a._cellIndex,(this.row!=a.parentNode),false,true);this._still_active=true}},k113_0_0:function(){if(this._f2kE){this.editCell()}},k32_0_0:function(){var a=this.cells4(this.cell);if(!a.changeState||(a.changeState()===false)){return false}},k27_0_0:function(){this.editStop(true)},k33_0_0:function(){if(this.pagingOn){this.changePage(this.currentPage-1)}else{this.scrollPage(-1)}},k34_0_0:function(){if(this.pagingOn){this.changePage(this.currentPage+1)}else{this.scrollPage(1)}},k37_0_0:function(){if(!this.editor&&this.isTreeGrid()){this.collapseKids(this.row)}else{return false}},k39_0_0:function(){if(!this.editor&&this.isTreeGrid()){this.expandKids(this.row)}else{return false}},k40_0_0:function(){var b=this._realfake?this._fake:this;if(this.editor&&this.editor.combo){this.editor.shiftNext()}else{if(!this.row.idd){return}var a=Math.max((b._r_select||0),this.getRowIndex(this.row.idd));var c=this._nextRow(a,1);if(c){b._r_select=null;this.selectCell(c,this.cell._cellIndex,true);if(b.pagingOn){b.showRow(c.idd)}}else{if(!this.callEvent("onLastRow",[])){return false}this._key_events.k34_0_0.apply(this,[]);if(this.pagingOn&&this.rowsCol[a+1]){this.selectCell(a+1,0,true)}}}this._still_active=true},k38_0_0:function(){var b=this._realfake?this._fake:this;if(this.editor&&this.editor.combo){this.editor.shiftPrev()}else{if(!this.row.idd){return}var a=this.getRowIndex(this.row.idd)+1;if(a!=-1&&(!this.pagingOn||(a!=1))){var c=this._nextRow(a-1,-1);this.selectCell(c,this.cell._cellIndex,true);if(b.pagingOn&&c){b.showRow(c.idd)}}else{this._key_events.k33_0_0.apply(this,[])}}this._still_active=true}},_build_master_row:function(){var c=document.createElement("DIV");var b=["<table><tr>"];for(var a=0;a<this._cCount;a++){b.push("<td></td>")}b.push("</tr></table>");c.innerHTML=b.join("");this._master_row=c.firstChild.rows[0]},_prepareRow:function(a){if(!this._master_row){this._build_master_row()}var c=this._master_row.cloneNode(true);for(var b=0;b<c.childNodes.length;b++){c.childNodes[b]._cellIndex=b;if(this._enbCid){c.childNodes[b].id="c_"+a+"_"+b}if(this.dragAndDropOff){this.dragger.addDraggableItem(c.childNodes[b],this)}}c.idd=a;c.grid=this;return c},_process_jsarray_row:function(b,c){b._attrs={};for(var a=0;a<b.childNodes.length;a++){b.childNodes[a]._attrs={}}this._fillRow(b,(this._c_order?this._swapColumns(c):c));return b},_get_jsarray_data:function(b,a){return b[a]},_process_json_row:function(a,b){b=this._c_order?this._swapColumns(b.data):b.data;return this._process_some_row(a,b)},_process_some_row:function(b,c){b._attrs={};for(var a=0;a<b.childNodes.length;a++){b.childNodes[a]._attrs={}}this._fillRow(b,c);return b},_get_json_data:function(b,a){return b.data[a]},_process_js_row:function(c,e){var a=[];for(var b=0;b<this.columnIds.length;b++){a[b]=e[this.columnIds[b]];if(!a[b]&&a[b]!==0){a[b]=""}}this._process_some_row(c,a);c._attrs=e;return c},_get_js_data:function(b,a){return b[this.columnIds[a]]},_process_csv_row:function(b,c){b._attrs={};for(var a=0;a<b.childNodes.length;a++){b.childNodes[a]._attrs={}}this._fillRow(b,(this._c_order?this._swapColumns(c.split(this.csv.cell)):c.split(this.csv.cell)));return b},_get_csv_data:function(b,a){return b.split(this.csv.cell)[a]},_process_store_row:function(g,e){var a=[];for(var c=0;c<this.columnIds.length;c++){a[c]=e[this.columnIds[c]]}for(var b=0;b<g.childNodes.length;b++){g.childNodes[b]._attrs={}}g._attrs=e;this._fillRow(g,a)},_process_xml_row:function(a,h){var s=dhx4.ajax.xpath(this.xml.cell,h);var n=[];a._attrs=this._xml_attrs(h);if(this._ud_enabled){var o=dhx4.ajax.xpath("./userdata",h);for(var g=o.length-1;g>=0;g--){var m="";for(var c=0;c<o[g].childNodes.length;c++){m+=o[g].childNodes[c].nodeValue}this.setUserData(a.idd,o[g].getAttribute("name"),m)}}for(var c=0;c<s.length;c++){var e=s[this._c_order?this._c_order[c]:c];if(!e){continue}var b=a._childIndexes?a._childIndexes[c]:c;var l=e.getAttribute("type");if(a.childNodes[b]){if(l){a.childNodes[b]._cellType=l}a.childNodes[b]._attrs=this._xml_attrs(e)}if(!e.getAttribute("xmlcontent")){if(e.firstChild){e=e.firstChild.wholeText||e.firstChild.data}else{e=""}}n.push(e)}for(c<s.length;c<a.childNodes.length;c++){a.childNodes[c]._attrs={}}if(a.parentNode&&a.parentNode.tagName=="row"){a._attrs.parent=a.parentNode.getAttribute("idd")}this._fillRow(a,n);return a},_get_xml_data:function(b,a){b=b.firstChild;while(true){if(!b){return""}if(b.tagName=="cell"){a--}if(a<0){break}b=b.nextSibling}return(b.firstChild?b.firstChild.data:"")},_fillRow:function(e,h){if(this.editor&&this.editor.parentNode&&this.editor.parentNode.idd==e.idd){this.editStop()}for(var b=0;b<e.childNodes.length;b++){if((b<h.length)||(this.defVal[b])){var c=e.childNodes[b]._cellIndex;var g=h[c];var a=this.cells4(e.childNodes[b]);if((this.defVal[c])&&((g=="")||(typeof(g)=="undefined"))){g=this.defVal[c]}if(a){a.setValue(g)}}else{e.childNodes[b].innerHTML="&nbsp;";e.childNodes[b]._clearCell=true}}return e},_postRowProcessing:function(h,l){if(h._attrs["class"]){h._css=h.className=h._attrs["class"]}if(h._attrs.locked){h._locked=true}if(h._attrs.bgColor){h.bgColor=h._attrs.bgColor}var j=0;for(var b=0;b<h.childNodes.length;b++){var m=h.childNodes[b];var g=m._cellIndex;var e=m._attrs.style||h._attrs.style;if(e){m.style.cssText+=";"+e}if(m._attrs["class"]){m.className=m._attrs["class"]}e=m._attrs.align||this.cellAlign[g];if(e){m.align=e}m.vAlign=m._attrs.valign||this.cellVAlign[g];var a=m._attrs.bgColor||this.columnColor[g];if(a){m.bgColor=a}if(m._attrs.colspan&&!l){this.setColspan(h.idd,b+j,m._attrs.colspan);j+=(m._attrs.colspan-1)}if(this._hrrar&&this._hrrar[g]&&!l){m.style.display="none"}}this.callEvent("onRowCreated",[h.idd,h,null])},load:function(a,c,b){this.callEvent("onXLS",[this]);if(arguments.length==2&&typeof c!="function"){b=c;c=null}this._last_load_type=b=b||this._last_load_type||"xml";if(!this.xmlFileUrl){this.xmlFileUrl=a}this._data_type=b;this.xmlLoader=this.doLoadDetails;var e=this;this.xmlLoader=function(g){if(!e.callEvent){return}e["_process_"+b](g.xmlDoc);if(!e._contextCallTimer){e.callEvent("onXLE",[e,0,0,g.xmlDoc,b])}if(c){c();c=null}};return dhx4.ajax.get(a,this.xmlLoader)},loadXMLString:function(b,a){if(window.console&&window.console.info){window.console.info("loadXMLString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}this.parse({responseXML:dhx4.ajax.parse(b)},a,"xml")},loadXML:function(a,b){if(window.console&&window.console.info){window.console.info("loadXML was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}this.load(a,b,"xml")},parse:function(c,b,a){if(arguments.length==2&&typeof b!="function"){a=b;b=null}this._last_load_type=a=a||this._last_load_type||"xml";this._data_type=a;if(a=="xml"&&typeof c=="string"){c={responseXML:dhx4.ajax.parse(c)}}this["_process_"+a](c);if(!this._contextCallTimer){this.callEvent("onXLE",[this,0,0,c,a])}if(b){b()}},xml:{top:"rows",row:"./row",cell:"./cell",s_row:"row",s_cell:"cell",row_attrs:[],cell_attrs:[]},csv:{row:"\n",cell:","},_xml_attrs:function(b){var c={};if(b.attributes.length){for(var a=0;a<b.attributes.length;a++){c[b.attributes[a].name]=b.attributes[a].value}}return c},_process_xml:function(n){if(this._refresh_mode){return this._refreshFromXML(n)}this._parsing=true;var j=dhx4.ajax.xmltop(this.xml.top,n);if(j.tagName!=this.xml.top){return}var m=j.getAttribute("dhx_security");if(m){dhtmlx.security_key=m}this._parseHead(j);var o=dhx4.ajax.xpath(this.xml.row,j);var g=parseInt(j.getAttribute("pos")||0);var l=parseInt(j.getAttribute("total_count")||0);if(!this.pagingOn){var l=Math.min(l,32000000/this._srdh)}var e=false;if(l&&l!=this.rowsBuffer.length){if(!this.rowsBuffer[l-1]){if(this.rowsBuffer.length){e=true}this.rowsBuffer[l-1]=null}if(l<this.rowsBuffer.length){this.rowsBuffer.splice(l,this.rowsBuffer.length-l);e=true}}if(this.isTreeGrid()){return this._process_tree_xml(j)}for(var b=0;b<o.length;b++){if(this.rowsBuffer[b+g]){continue}var a=o[b].getAttribute("id")||(b+g+1);this.rowsBuffer[b+g]={idd:a,data:o[b],_parser:this._process_xml_row,_locator:this._get_xml_data};this.rowsAr[a]=o[b]}this.callEvent("onDataReady",[]);if(e&&this._srnd){var c=this.objBox.scrollTop;this._reset_view();this.objBox.scrollTop=c}else{this.render_dataset()}this._parsing=false},_process_jsarray:function(data){this._parsing=true;data=data.responseText||data;if(typeof data=="string"){eval("dhtmlx.temp="+data+";");data=dhtmlx.temp}for(var i=0;i<data.length;i++){var id=i+1;this.rowsBuffer.push({idd:id,data:data[i],_parser:this._process_jsarray_row,_locator:this._get_jsarray_data});this.rowsAr[id]=data[i]}this.render_dataset();this._parsing=false},_process_csv:function(e){this._parsing=true;e=e.responseText||e;e=e.replace(/\r/g,"");e=e.split(this.csv.row);if(this._csvHdr){this.clearAll();var c=e.splice(0,1)[0].split(this.csv.cell);if(!this._csvAID){c.splice(0,1)}this.setHeader(c.join(this.delim));this.init()}for(var b=0;b<e.length;b++){if(!e[b]&&b==e.length-1){continue}if(this._csvAID){var g=b+1;this.rowsBuffer.push({idd:g,data:e[b],_parser:this._process_csv_row,_locator:this._get_csv_data})}else{var a=e[b].split(this.csv.cell);var g=a.splice(0,1)[0];this.rowsBuffer.push({idd:g,data:a,_parser:this._process_jsarray_row,_locator:this._get_jsarray_data})}this.rowsAr[g]=e[b]}this.render_dataset();this._parsing=false},_process_js:function(a){return this._process_json(a,"js")},_process_json:function(data,mode){this._parsing=true;var data=data.responseText||data;if(typeof data=="string"){eval("dhtmlx.temp="+data+";");data=dhtmlx.temp}if(mode=="js"){if(data.data){data=data.data}for(var i=0;i<data.length;i++){var row=data[i];var id=row.id||(i+1);this.rowsBuffer.push({idd:id,data:row,_parser:this._process_js_row,_locator:this._get_js_data});this.rowsAr[id]=data[i]}}else{if(data.rows){for(var i=0;i<data.rows.length;i++){var id=data.rows[i].id;this.rowsBuffer.push({idd:id,data:data.rows[i],_parser:this._process_json_row,_locator:this._get_json_data});this.rowsAr[id]=data.rows[i]}}}if(data.dhx_security){dhtmlx.security_key=data.dhx_security}this.callEvent("onDataReady",[]);this.render_dataset();this._parsing=false},render_dataset:function(e,m){if(this._srnd){if(this._fillers){return this._update_srnd_view()}m=Math.min((this._get_view_size()+(this._srnd_pr||0)),this.rowsBuffer.length)}if(this.pagingOn){e=Math.max((e||0),(this.currentPage-1)*this.rowsBufferOutSize);m=Math.min(this.currentPage*this.rowsBufferOutSize,this.rowsBuffer.length)}else{e=e||0;m=m||this.rowsBuffer.length}for(var g=e;g<m;g++){var a=this.render_row(g);if(a==-1){if(this.xmlFileUrl){if(this.callEvent("onDynXLS",[g,(this._dpref?this._dpref:(m-g))])){this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+g+"&count="+(this._dpref?this._dpref:(m-g)),this._data_type)}}m=g;break}if(!a.parentNode||!a.parentNode.tagName){this._insertRowAt(a,g);if(a._attrs.selected||a._attrs.select){this.selectRow(a,a._attrs.call?true:false,true);a._attrs.selected=a._attrs.select=null}}if(this._ads_count&&g-e==this._ads_count){var l=this;this._context_parsing=this._context_parsing||this._parsing;return this._contextCallTimer=window.setTimeout(function(){l._contextCallTimer=null;l.render_dataset(g,m);if(!l._contextCallTimer){if(l._context_parsing){l.callEvent("onXLE",[])}else{l._fixAlterCss()}l._context_parsing=false}},this._ads_time)}}if(this._ads_count&&g==m){this.callEvent("onDistributedEnd",[])}if(this._srnd&&!this._fillers){var b=this.rowsBuffer.length-m;this._fillers=[];if(this._fake&&!this._realfake){this._fake._fillers=[]}var c=Math.round(990000/this._srdh);while(b>0){var h=(_isIE||window._FFrv)?Math.min(b,c):b;var j=this._add_filler(m,h);if(j){this._fillers.push(j)}b-=h;m+=h}}this.setSizes()},render_row:function(b){if(!this.rowsBuffer[b]){return -1}if(this.rowsBuffer[b]._parser){var a=this.rowsBuffer[b];if(this.rowsAr[a.idd]&&this.rowsAr[a.idd].tagName=="TR"){return this.rowsBuffer[b]=this.rowsAr[a.idd]}var c=this._prepareRow(a.idd);this.rowsBuffer[b]=c;this.rowsAr[a.idd]=c;a._parser.call(this,c,a.data);this._postRowProcessing(c);return c}return this.rowsBuffer[b]},_get_cell_value:function(b,a,c){if(b._locator){if(this._c_order){a=this._c_order[a]}return b._locator.call(this,b.data,a)}return this.cells3(b,a)[c?c:"getValue"]()},sortRows:function(c,h,b){this.editStop();b=(b||"asc").toLowerCase();h=(h||this.fldSort[c]);c=c||0;if(this.isTreeGrid()){this.sortTreeRows(c,h,b)}else{var a={};var g=this.cellType[c];var j="getValue";if(g=="link"){j="getContent"}if(g=="dhxCalendar"||g=="dhxCalendarA"){j="getDate"}if(g=="co"||g=="coro"){j="getText"}for(var e=0;e<this.rowsBuffer.length;e++){a[this.rowsBuffer[e].idd]=this._get_cell_value(this.rowsBuffer[e],c,j)}this._sortRows(c,h,b,a)}this.callEvent("onAfterSorting",[c,h,b])},_sortCore:function(c,h,b,a,g){var e="sort";if(this._sst){g.stablesort=this.rowsCol.stablesort;e="stablesort"}if(h.length>4){h=window[h]}if(h=="cus"){var j=this._customSorts[c];g[e](function(m,l){return j(a[m.idd],a[l.idd],b,m.idd,l.idd)})}else{if(typeof(h)=="function"){g[e](function(m,l){return h(a[m.idd],a[l.idd],b,m.idd,l.idd)})}else{if(h=="str"){g[e](function(m,l){if(b=="asc"){return a[m.idd]>a[l.idd]?1:(a[m.idd]<a[l.idd]?-1:0)}else{return a[m.idd]<a[l.idd]?1:(a[m.idd]>a[l.idd]?-1:0)}})}else{if(h=="int"){g[e](function(n,m){var l=parseFloat(a[n.idd]);l=isNaN(l)?-99999999999999:l;var o=parseFloat(a[m.idd]);o=isNaN(o)?-99999999999999:o;if(b=="asc"){return l-o}else{return o-l}})}else{if(h=="date"){g[e](function(n,m){var l=Date.parse(a[n.idd])||(Date.parse("01/01/1900"));var o=Date.parse(a[m.idd])||(Date.parse("01/01/1900"));if(b=="asc"){return l-o}else{return o-l}})}}}}}},_sortRows:function(c,e,b,a){this._sortCore(c,e,b,a,this.rowsBuffer);this._reset_view();this.callEvent("onGridReconstructed",[])},_reset_view:function(c){if(!this.obj.rows[0]){return}if(this._lahRw){this._unsetRowHover(0,true)}this.callEvent("onResetView",[]);var a=this.obj.rows[0].parentNode;var e=a.removeChild(a.childNodes[0],true);if(_isKHTML){for(var b=a.parentNode.childNodes.length-1;b>=0;b--){if(a.parentNode.childNodes[b].tagName=="TR"){a.parentNode.removeChild(a.parentNode.childNodes[b],true)}}}else{if(_isIE){for(var b=a.childNodes.length-1;b>=0;b--){a.childNodes[b].removeNode(true)}}else{a.innerHTML=""}}a.appendChild(e);this.rowsCol=dhtmlxArray();if(this._sst){this.enableStableSorting(true)}this._fillers=this.undefined;if(!c){if(_isIE&&this._srnd){this.render_dataset()}else{this.render_dataset()}}},deleteRow:function(b,e){if(!e){e=this.getRowById(b)}if(!e){return}this.editStop();if(!this._realfake){if(this.callEvent("onBeforeRowDeleted",[b])==false){return false}}var a=0;if(this.cellType._dhx_find("tree")!=-1&&!this._realfake){a=this._h2.get[b].parent.id;this._removeTrGrRow(e)}else{if(e.parentNode){e.parentNode.removeChild(e)}var h=this.rowsCol._dhx_find(e);if(h!=-1){this.rowsCol._dhx_removeAt(h)}for(var c=0;c<this.rowsBuffer.length;c++){if(this.rowsBuffer[c]&&this.rowsBuffer[c].idd==b){this.rowsBuffer._dhx_removeAt(c);h=c;break}}}this.rowsAr[b]=null;for(var c=0;c<this.selectedRows.length;c++){if(this.selectedRows[c].idd==b){this.selectedRows._dhx_removeAt(c)}}if(this._srnd){for(var c=0;c<this._fillers.length;c++){var g=this._fillers[c];if(!g){continue}if(g[0]>=h){this._update_fillers(c,0,-1)}else{if(g[0]+g[1]>h){this._update_fillers(c,-1,0)}}}this._update_srnd_view()}if(this.pagingOn){this.changePage()}if(!this._realfake){this.callEvent("onAfterRowDeleted",[b,a])}this.callEvent("onGridReconstructed",[]);if(this._ahgr){this.setSizes()}return true},_addRow:function(h,l,b){if(b==-1||typeof b=="undefined"){b=this.rowsBuffer.length}if(typeof l=="string"){l=l.split(this.delim)}var m=this._prepareRow(h);m._attrs={};for(var c=0;c<m.childNodes.length;c++){m.childNodes[c]._attrs={}}this.rowsAr[m.idd]=m;if(this._h2){this._h2.get[m.idd].buff=m}this._fillRow(m,l);this._postRowProcessing(m);if(this._skipInsert){this._skipInsert=false;return this.rowsAr[m.idd]=m}if(this.pagingOn){this.rowsBuffer._dhx_insertAt(b,m);this.rowsAr[m.idd]=m;return m}if(this._fillers){this.rowsCol._dhx_insertAt(b,null);this.rowsBuffer._dhx_insertAt(b,m);if(this._fake){this._fake.rowsCol._dhx_insertAt(b,null)}this.rowsAr[m.idd]=m;var n=false;for(var e=0;e<this._fillers.length;e++){var g=this._fillers[e];if(g&&g[0]<=b&&(g[0]+g[1])>=b){g[1]=g[1]+1;var a=g[2].firstChild.style.height=parseInt(g[2].firstChild.style.height)+this._srdh+"px";n=true;if(this._fake){this._fake._fillers[e][1]++;this._fake._fillers[e][2].firstChild.style.height=a}}if(g&&g[0]>b){g[0]=g[0]+1;if(this._fake){this._fake._fillers[e][0]++}}}if(!n){this._fillers.push(this._add_filler(b,1,(b==0?{parentNode:this.obj.rows[0].parentNode,nextSibling:(this.rowsCol[1])}:this.rowsCol[b-1])))}return m}this.rowsBuffer._dhx_insertAt(b,m);return this._insertRowAt(m,b)},addRow:function(a,e,c){var b=this._addRow(a,e,c);if(!this.dragContext){this.callEvent("onRowAdded",[a])}if(this.pagingOn){this.changePage(this.currentPage)}if(this._srnd){this._update_srnd_view()}b._added=true;if(this._srnd&&!this._fillers){this._fillers=[]}if(this._ahgr){this.setSizes()}this.callEvent("onGridReconstructed",[]);return b},_insertRowAt:function(c,e,b){this.rowsAr[c.idd]=c;if(this._skipInsert){this._skipInsert=false;return c}if((e<0)||((!e)&&(parseInt(e)!==0))){e=this.rowsCol.length}else{if(e>this.rowsCol.length){e=this.rowsCol.length}}if(this._cssEven){var a=c.className.replace(this._cssUnEven,"");if((this._cssSP?this.getLevel(c.idd):e)%2==1){c.className=a+" "+this._cssUnEven+(this._cssSU?(" "+this._cssUnEven+"_"+this.getLevel(c.idd)):"")}else{c.className=a+" "+this._cssEven+(this._cssSU?(" "+this._cssEven+"_"+this.getLevel(c.idd)):"")}}if(!b){if((e==(this.obj.rows.length-1))||(!this.rowsCol[e])){if(_isKHTML){this.obj.appendChild(c)}else{this.obj.firstChild.appendChild(c)}}else{this.rowsCol[e].parentNode.insertBefore(c,this.rowsCol[e])}}this.rowsCol._dhx_insertAt(e,c);this.callEvent("onRowInserted",[c,e]);return c},getRowById:function(c){var b=this.rowsAr[c];if(b){if(b.tagName!="TR"){for(var a=0;a<this.rowsBuffer.length;a++){if(this.rowsBuffer[a]&&this.rowsBuffer[a].idd==c){return this.render_row(a)}}if(this._h2){return this.render_row(null,b.idd)}}return b}return null},cellById:function(b,a){return this.cells(b,a)},cells:function(e,b){if(arguments.length==0){return this.cells4(this.cell)}else{var g=this.getRowById(e)}var a=(g._childIndexes?g.childNodes[g._childIndexes[b]]:g.childNodes[b]);if(!a&&g._childIndexes){a=g.firstChild||{}}return this.cells4(a)},cellByIndex:function(b,a){return this.cells2(b,a)},cells2:function(e,b){var g=this.render_row(e);var a=(g._childIndexes?g.childNodes[g._childIndexes[b]]:g.childNodes[b]);if(!a&&g._childIndexes){a=g.firstChild||{}}return this.cells4(a)},cells3:function(c,b){var a=(c._childIndexes?c.childNodes[c._childIndexes[b]]:c.childNodes[b]);return this.cells4(a)},cells4:function(a){var b=window["eXcell_"+(a._cellType||this.cellType[a._cellIndex])];if(b){return new b(a)}},cells5:function(a,c){var c=c||(a._cellType||this.cellType[a._cellIndex]);if(!this._ecache[c]){if(!window["eXcell_"+c]){var b=eXcell_ro}else{var b=window["eXcell_"+c]}this._ecache[c]=new b(a)}this._ecache[c].cell=a;return this._ecache[c]},dma:function(a){if(!this._ecache){this._ecache={}}if(a&&!this._dma){this._dma=this.cells4;this.cells4=this.cells5}else{if(!a&&this._dma){this.cells4=this._dma;this._dma=null}}},getRowsNum:function(){return this.rowsBuffer.length},enableEditTabOnly:function(a){if(arguments.length>0){this.smartTabOrder=dhx4.s2b(a)}else{this.smartTabOrder=true}},setExternalTabOrder:function(g,a){var b=this;this.tabStart=(typeof(g)=="object")?g:document.getElementById(g);var c=this.tabStart.onkeydown;this.tabStart.onkeydown=function(j){if(c){c.call(this,j)}var h=(j||window.event);if(h.keyCode==9&&!h.shiftKey){h.cancelBubble=true;b.selectCell(0,0,0,0,1);if(b.smartTabOrder&&b.cells2(0,0).isDisabled()){b._key_events.k9_0_0.call(b)}this.blur();return false}};if(_isOpera){this.tabStart.onkeypress=this.tabStart.onkeydown}this.tabEnd=(typeof(a)=="object")?a:document.getElementById(a);var e=this.tabEnd.onkeydown;this.tabEnd.onkeydown=this.tabEnd.onkeypress=function(j){if(e){e.call(this,j)}var h=(j||window.event);if(h.keyCode==9&&h.shiftKey){h.cancelBubble=true;b.selectCell((b.getRowsNum()-1),(b.getColumnCount()-1),0,0,1);if(b.smartTabOrder&&b.cells2((b.getRowsNum()-1),(b.getColumnCount()-1)).isDisabled()){b._key_events.k9_0_1.call(b)}this.blur();return false}};if(_isOpera){this.tabEnd.onkeypress=this.tabEnd.onkeydown}},uid:function(){if(!this._ui_seed){this._ui_seed=(new Date()).valueOf()}return this._ui_seed++},setIconset:function(a){this.iconset=a},clearAndLoad:function(){if(this._last_load_request){var b=this._last_load_request.xmlDoc;if(b.readyState!=4){try{b.onreadystatechange=function(){};b.abort()}catch(c){}}}var a=this._pgn_skin;this._pgn_skin=null;this.clearAll();this._pgn_skin=a;this._last_load_request=this.load.apply(this,arguments)},getStateOfView:function(){if(this.pagingOn){var e=(this.currentPage-1)*this.rowsBufferOutSize;return[this.currentPage,e,Math.min(e+this.rowsBufferOutSize,this.rowsBuffer.length),this.rowsBuffer.length]}var b=Math.floor(this.objBox.scrollTop/this._srdh);var a=Math.ceil(parseInt(this.objBox.offsetHeight)/this._srdh);if(this.multiLine){var c=this.objBox.scrollTop;b=0;while(c>=0){c-=this.rowsCol[b]?this.rowsCol[b].offsetHeight:this._srdh;b++}b--;c+=this.objBox.offsetHeight;a=0;while(c>=0){c-=this.rowsCol[b+a]?this.rowsCol[b+a].offsetHeight:this._srdh;a++}}return[b,a,this.rowsBuffer.length]}};(function(){function e(j,l){this[j]=l}function h(j,l){this[j].call(this,l)}function c(j,l){this[j].call(this,l.join(this.delim))}function a(j,n){for(var m=0;m<n.length;m++){if(typeof n[m]=="object"){var o=this.getCombo(m);for(var l in n[m]){o.put(l,n[m][l])}}}}function g(l,u,o){var w=1;var t=[];function v(y,x,z){if(!t[x]){t[x]=[]}if(typeof z=="object"){z.toString=function(){return this.text}}t[x][y]=z}for(var r=0;r<u.length;r++){if(typeof(u[r])=="object"&&u[r].length){for(var n=0;n<u[r].length;n++){v(r,n,u[r][n])}}else{v(r,0,u[r])}}for(var r=0;r<t.length;r++){for(var n=0;n<t[0].length;n++){var s=t[r][n];t[r][n]=(s||"").toString()||"&nbsp;";if(s&&s.colspan){for(var m=1;m<s.colspan;m++){v(n+m,r,"#cspan")}}if(s&&s.rowspan){for(var m=1;m<s.rowspan;m++){v(n,r+m,"#rspan")}}}}this.setHeader(t[0]);for(var r=1;r<t.length;r++){this.attachHeader(t[r])}}var b=[{name:"label",def:"&nbsp;",operation:"setHeader",type:g},{name:"id",def:"",operation:"columnIds",type:e},{name:"width",def:"*",operation:"setInitWidths",type:c},{name:"align",def:"left",operation:"cellAlign",type:e},{name:"valign",def:"middle",operation:"cellVAlign",type:e},{name:"sort",def:"na",operation:"fldSort",type:e},{name:"type",def:"ro",operation:"setColTypes",type:c},{name:"options",def:"",operation:"",type:a}];dhtmlx.extend_api("dhtmlXGridObject",{_init:function(j){return[j.parent]},image_path:"setImagePath",columns:"columns",rows:"rows",headers:"headers",skin:"setSkin",smart_rendering:"enableSmartRendering",css:"enableAlterCss",auto_height:"enableAutoHeight",save_hidden:"enableAutoHiddenColumnsSaving",save_cookie:"enableAutoSaving",save_size:"enableAutoSizeSaving",auto_width:"enableAutoWidth",block_selection:"enableBlockSelection",csv_id:"enableCSVAutoID",csv_header:"enableCSVHeader",cell_ids:"enableCellIds",colspan:"enableColSpan",column_move:"enableColumnMove",context_menu:"enableContextMenu",distributed:"enableDistributedParsing",drag:"enableDragAndDrop",drag_order:"enableDragOrder",tabulation:"enableEditTabOnly",header_images:"enableHeaderImages",header_menu:"enableHeaderMenu",keymap:"enableKeyboardSupport",mouse_navigation:"enableLightMouseNavigation",markers:"enableMarkedCells",math_editing:"enableMathEditing",math_serialization:"enableMathSerialization",drag_copy:"enableMercyDrag",multiline:"enableMultiline",multiselect:"enableMultiselect",save_column_order:"enableOrderSaving",hover:"enableRowsHover",rowspan:"enableRowspan",smart:"enableSmartRendering",save_sorting:"enableSortingSaving",stable_sorting:"enableStableSorting",undo:"enableUndoRedo",csv_cell:"setCSVDelimiter",date_format:"setDateFormat",drag_behavior:"setDragBehavior",editable:"setEditable",without_header:"setNoHeader",submit_changed:"submitOnlyChanged",submit_serialization:"submitSerialization",submit_selected:"submitOnlySelected",submit_id:"submitOnlyRowID",xml:"load"},{columns:function(r){for(var l=0;l<b.length;l++){var o=[];for(var m=0;m<r.length;m++){o[m]=r[m][b[l].name]||b[l].def}var n=b[l].type||h;n.call(this,b[l].operation,o,r)}this.init()},rows:function(j){},headers:function(l){for(var j=0;j<l.length;j++){this.attachHeader(l[j])}}})})();dhtmlXGridObject.prototype._dp_init=function(a){a.attachEvent("insertCallback",function(b,e){if(this.obj._h2){this.obj.addRow(e,c,null,parent)}else{this.obj.addRow(e,[],0)}var c=this.obj.getRowById(e);if(c){this.obj._process_xml_row(c,b.firstChild);this.obj._postRowProcessing(c)}});a.attachEvent("updateCallback",function(b,e){var c=this.obj.getRowById(e);if(c){this.obj._process_xml_row(c,b.firstChild);this.obj._postRowProcessing(c)}});a.attachEvent("deleteCallback",function(b,c){this.obj.setUserData(c,this.action_param,"true_deleted");this.obj.deleteRow(c)});a._methods=["setRowTextStyle","setCellTextStyle","changeRowId","deleteRow"];this.attachEvent("onEditCell",function(e,g,c){if(a._columns&&!a._columns[c]){return true}var b=this.cells(g,c);if(e==1){if(b.isCheckbox()){a.setUpdated(g,true)}}else{if(e==2){if(b.wasChanged()){a.setUpdated(g,true)}}}return true});this.attachEvent("onRowPaste",function(b){a.setUpdated(b,true)});this.attachEvent("onUndo",function(b){a.setUpdated(b,true)});this.attachEvent("onRowIdChange",function(e,b){var c=a.findRow(e);if(c<a.updatedRows.length){a.updatedRows[c]=b}});this.attachEvent("onSelectStateChanged",function(b){if(a.updateMode=="row"){a.sendData()}return true});this.attachEvent("onEnter",function(c,b){if(a.updateMode=="row"){a.sendData()}return true});this.attachEvent("onBeforeRowDeleted",function(b){if(a._silent_mode||(!this.rowsAr[b])){return true}if(this.dragContext&&a.dnd){window.setTimeout(function(){a.setUpdated(b,true)},1);return true}var c=a.getState(b);if(this._h2){this._h2.forEachChild(b,function(e){a.setUpdated(e.id,false);a.markRow(e.id,true,"deleted")},this)}if(c=="inserted"){a.set_invalid(b,false);a.setUpdated(b,false);return true}if(c=="deleted"){return false}if(c=="true_deleted"){a.setUpdated(b,false);return true}a.setUpdated(b,true,"deleted");return false});this.attachEvent("onBindUpdate",function(c,b,e){a.setUpdated(e,true)});this.attachEvent("onRowAdded",function(b){if(this.dragContext&&a.dnd){return true}a.setUpdated(b,true,"inserted");return true});a._getRowData=function(e,s){var l={};l.gr_id=e;if(this.obj.isTreeGrid()){l.gr_pid=this.obj.getParentId(e)}var b=this.obj.getRowById(e);for(var m=0;m<this.obj._cCount;m++){if(this.obj._c_order){var n=this.obj._c_order[m]}else{var n=m}var o=this.obj.cells(b.idd,m);if(this._changed&&!o.wasChanged()){continue}if(this._endnm){l[this.obj.getColumnId(m)]=o.getValue()}else{l["c"+n]=o.getValue()}}var g=this.obj.UserData[e];if(g){for(var h=0;h<g.keys.length;h++){if(g.keys[h]&&g.keys[h].indexOf("__")!=0){l[g.keys[h]]=g.values[h]}}}var g=this.obj.UserData.gridglobaluserdata;if(g){for(var h=0;h<g.keys.length;h++){l[g.keys[h]]=g.values[h]}}return l};a._clearUpdateFlag=function(c){var e=this.obj.getRowById(c);if(e){for(var b=0;b<this.obj._cCount;b++){this.obj.cells(c,b).cell.wasChanged=false}}};a.checkBeforeUpdate=function(h){var g=true;var b=[];for(var e=0;e<this.obj._cCount;e++){if(this.mandatoryFields[e]){var c=this.mandatoryFields[e].call(this.obj,this.obj.cells(h,e).getValue(),h,e);if(typeof c=="string"){this.messages.push(c);g=false}else{g&=c;b[e]=!c}}}if(!g){this.set_invalid(h,"invalid",b);this.setUpdated(h,false)}return g}};dhx4.attachEvent("onGridCreated",function(b){b._con_f_used=[].concat(b._con_f_used);dhtmlXGridObject.prototype._con_f_used=[];if(b._was_created_once){return}b._was_created_once=true;var a=function(h){h=h.replace(/(\?|\&)connector[^\f]*/g,"");return h+(h.indexOf("?")!=-1?"&":"?")+"connector=true"+(this.hdr.rows.length>0?"&dhx_no_header=1":"")};var g=function(h){return a.call(this,h)+(this._connector_sorting||"")+(this._connector_filter||"")};var e=function(j,l,h){this._connector_sorting="&dhx_sort["+l+"]="+h;return g.call(this,j)};var c=function(j,h,m){var n=[];for(var l=0;l<h.length;l++){n[l]="dhx_filter["+h[l]+"]="+encodeURIComponent(m[l])}this._connector_filter="&"+n.join("&");return g.call(this,j)};b.attachEvent("onCollectValues",function(h){if(this._con_f_used[h]){if(typeof(this._con_f_used[h])=="object"){return this._con_f_used[h]}else{return false}}return true});b.attachEvent("onDynXLS",function(){if(this.xmlFileUrl){this.xmlFileUrl=g.call(this,this.xmlFileUrl)}return true});b.attachEvent("onBeforeSorting",function(m,l,j){if(l=="connector"){var h=this;this.clearAndLoad(e.call(this,this.xmlFileUrl,m,j),function(){h.setSortImgState(true,m,j)});return false}return true});b.attachEvent("onFilterStart",function(j,h){if(this._con_f_used.length){var m=this.getSortingState();var l=this;this.clearAndLoad(c.call(this,this.xmlFileUrl,j,h));if(m.length){l.setSortImgState(true,m[0],m[1])}return false}return true})});dhtmlXGridObject.prototype._con_f_used=[];dhtmlXGridObject.prototype._in_header_connector_text_filter=function(b,a){if(!this._con_f_used[a]){this._con_f_used[a]=1}return this._in_header_text_filter(b,a)};dhtmlXGridObject.prototype._in_header_connector_select_filter=function(b,a){if(!this._con_f_used[a]){this._con_f_used[a]=2}return this._in_header_select_filter(b,a)};if(!dhtmlXGridObject.prototype.load_connector){dhtmlXGridObject.prototype.load_connector=dhtmlXGridObject.prototype.load;dhtmlXGridObject.prototype.load=function(b,g,e){if(!this._colls_loaded&&this.cellType){var a=[];for(var c=0;c<this.cellType.length;c++){if(this.cellType[c].indexOf("co")==0||this.cellType[c].indexOf("clist")==0||this._con_f_used[c]==2){a.push(c)}}if(a.length){arguments[0]+=(arguments[0].indexOf("?")!=-1?"&":"?")+"connector=true&dhx_colls="+a.join(",")}}return this.load_connector.apply(this,arguments)};dhtmlXGridObject.prototype._parseHead_connector=dhtmlXGridObject.prototype._parseHead;dhtmlXGridObject.prototype._parseHead=function(b,t,o){this._parseHead_connector.apply(this,arguments);if(!this._colls_loaded){var r=dhx4.ajax.xpath("./coll_options",arguments[0]);for(var l=0;l<r.length;l++){var n=r[l].getAttribute("for");var s=[];var e=null;if(this.cellType[n]=="combo"){e=this.getColumnCombo(n)}else{if(this.cellType[n].indexOf("co")==0){e=this.getCombo(n)}}var h=dhx4.ajax.xpath("./item",r[l]);var a=[];for(var g=0;g<h.length;g++){var c=h[g].getAttribute("value");if(e){var m=h[g].getAttribute("label")||c;if(e.addOption){a.push([c,m])}else{e.put(c,m)}s[s.length]=m}else{s[s.length]=c}}if(a.length){if(e){e.addOption(a)}}else{if(s.length&&!e){if(this.registerCList){this.registerCList(n*1,s)}}}if(this._con_f_used[n*1]){this._con_f_used[n*1]=s}}this._colls_loaded=true}}}dhtmlXGridObject.prototype.getRowData=function(g){var b={};var a=this.getColumnsNum();for(var c=0;c<a;c++){var e=this.getColumnId(c);if(e){b[e]=this.cells(g,c).getValue()}}return b};dhtmlXGridObject.prototype.setRowData=function(g,c){var a=this.getColumnsNum();for(var b=0;b<a;b++){var e=this.getColumnId(b);if(e&&c.hasOwnProperty(e)){this.cells(g,b).setValue(c[e])}}};function dhtmlXGridCellObject(a){this.destructor=function(){this.cell.obj=null;this.cell=null;this.grid=null;this.base=null;return null};this.cell=a;this.getValue=function(){if((this.cell.textContent)&&(this.cell.textContent.tagName=="TEXTAREA")){return this.cell.textContent.value}else{return this.cell.innerHTML._dhx_trim()}};this.getMathValue=function(){if(this.cell.original){return this.cell.original}else{return this.getValue()}};this.getFont=function(){arOut=new Array(3);if(this.cell.style.fontFamily){arOut[0]=this.cell.style.fontFamily}if(this.cell.style.fontWeight=="bold"||this.cell.parentNode.style.fontWeight=="bold"){arOut[1]="bold"}if(this.cell.style.fontStyle=="italic"||this.cell.parentNode.style.fontWeight=="italic"){arOut[1]+="italic"}if(this.cell.style.fontSize){arOut[2]=this.cell.style.fontSize}else{arOut[2]=""}return arOut.join("-")};this.getTextColor=function(){if(this.cell.style.color){return this.cell.style.color}else{return"#000000"}};this.getBgColor=function(){return this.cell.style.backgroundColor||"#FFFFFF"};this.getHorAlign=function(){if(this.cell.style.textAlign){return this.cell.style.textAlign}else{if(this.cell.style.textAlign){return this.cell.style.textAlign}else{return"left"}}};this.getWidth=function(){return this.cell.scrollWidth};this.setFont=function(b){fntAr=b.split("-");this.cell.style.fontFamily=fntAr[0];this.cell.style.fontSize=fntAr[fntAr.length-1];if(fntAr.length==3){if(/bold/.test(fntAr[1])){this.cell.style.fontWeight="bold"}if(/italic/.test(fntAr[1])){this.cell.style.fontStyle="italic"}if(/underline/.test(fntAr[1])){this.cell.style.textDecoration="underline"}}};this.setTextColor=function(b){this.cell.style.color=b};this.setBgColor=function(b){if(b==""){b=null}this.cell.style.background=b};this.setHorAlign=function(b){if(b.length==1){if(b=="c"){this.cell.style.textAlign="center"}else{if(b=="l"){this.cell.style.textAlign="left"}else{this.cell.style.textAlign="right"}}}else{this.cell.style.textAlign=b}};this.wasChanged=function(){if(this.cell.wasChanged){return true}else{return false}};this.isCheckbox=function(){var b=this.cell.firstChild;if(b&&b.tagName=="INPUT"){type=b.type;if(type=="radio"||type=="checkbox"){return true}else{return false}}else{return false}};this.isChecked=function(){if(this.isCheckbox()){return this.cell.firstChild.checked}};this.isDisabled=function(){return this.cell._disabled};this.setChecked=function(b){if(this.isCheckbox()){if(b!="true"&&b!=1){b=false}this.cell.firstChild.checked=b}};this.setDisabled=function(b){if(b!="true"&&b!=1){b=false}if(this.isCheckbox()){this.cell.firstChild.disabled=b;if(this.disabledF){this.disabledF(b)}}this.cell._disabled=b}}dhtmlXGridCellObject.prototype={getAttribute:function(a){return this.cell._attrs[a]},setAttribute:function(a,b){this.cell._attrs[a]=b},getInput:function(){if(this.obj&&(this.obj.tagName=="INPUT"||this.obj.tagName=="TEXTAREA")){return this.obj}var a=(this.obj||this.cell).getElementsByTagName("TEXTAREA");if(!a.length){a=(this.obj||this.cell).getElementsByTagName("INPUT")}return a[0]}};dhtmlXGridCellObject.prototype.setValue=function(a){if((typeof(a)!="number")&&(!a||a.toString()._dhx_trim()=="")){a="&nbsp;";this.cell._clearCell=true}else{this.cell._clearCell=false}this.setCValue(a)};dhtmlXGridCellObject.prototype.getTitle=function(){return(_isIE?this.cell.innerText:this.cell.textContent)};dhtmlXGridCellObject.prototype.setCValue=function(b,a){this.cell.innerHTML=b;this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,(arguments.length>1?a:b)])};dhtmlXGridCellObject.prototype.setCTxtValue=function(a){this.cell.innerHTML="";this.cell.appendChild(document.createTextNode(a));this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,a])};dhtmlXGridCellObject.prototype.setLabel=function(a){this.cell.innerHTML=a};dhtmlXGridCellObject.prototype.getMath=function(){if(this._val){return this.val}else{return this.getValue()}};function eXcell(){this.obj=null;this.val=null;this.changeState=function(){return false};this.edit=function(){this.val=this.getValue()};this.detach=function(){return false};this.getPosition=function(e){var a=e;var c=0;var b=0;while(a.tagName!="BODY"){c+=a.offsetLeft;b+=a.offsetTop;a=a.offsetParent}return new Array(c,b)}}eXcell.prototype=new dhtmlXGridCellObject;function eXcell_ed(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.edit=function(){this.cell.atag=(!this.grid.multiLine)?"INPUT":"TEXTAREA";this.val=this.getValue();this.obj=document.createElement(this.cell.atag);this.obj.setAttribute("autocomplete","off");this.obj.style.height=(this.cell.offsetHeight-(this.grid.multiLine?9:4))+"px";this.obj.className="dhx_combo_edit";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.style.textAlign;this.obj.onclick=function(b){(b||event).cancelBubble=true};this.obj.onmousedown=function(b){(b||event).cancelBubble=true};this.obj.value=this.val;this.cell.innerHTML="";this.cell.appendChild(this.obj);this.obj.onselectstart=function(b){if(!b){b=event}b.cancelBubble=true;return true};if(_isIE){this.obj.focus();this.obj.blur()}this.obj.focus()};this.getValue=function(){if((this.cell.firstChild)&&((this.cell.atag)&&(this.cell.firstChild.tagName==this.cell.atag))){return this.cell.firstChild.value}if(this.cell._clearCell){return""}return this.cell.innerHTML.toString()._dhx_trim()};this.detach=function(){this.setValue(this.obj.value);return this.val!=this.getValue()}}eXcell_ed.prototype=new eXcell;function eXcell_edtxt(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.getValue=function(){if((this.cell.firstChild)&&((this.cell.atag)&&(this.cell.firstChild.tagName==this.cell.atag))){return this.cell.firstChild.value}if(this.cell._clearCell){return""}return(_isIE?this.cell.innerText:this.cell.textContent)};this.setValue=function(b){if(!b||b.toString()._dhx_trim()==""){b=" ";this.cell._clearCell=true}else{this.cell._clearCell=false}this.setCTxtValue(b)}}eXcell_edtxt.prototype=new eXcell_ed;function eXcell_edn(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.getValue=function(){if((this.cell.firstChild)&&(this.cell.firstChild.tagName=="TEXTAREA")){return this.cell.firstChild.value}if(this.cell._clearCell){return""}return this.cell._orig_value||this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)};this.detach=function(){var b=this.obj.value;this.setValue(b);return this.val!=this.getValue()}}eXcell_edn.prototype=new eXcell_ed;eXcell_edn.prototype.setValue=function(a){if(!a||a.toString()._dhx_trim()==""){this.cell._clearCell=true;return this.setCValue("&nbsp;",0)}else{this.cell._clearCell=false;this.cell._orig_value=a}this.setCValue(this.grid._aplNF(a,this.cell._cellIndex),a)};function eXcell_ch(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.disabledF=function(b){if((b==true)||(b==1)){this.cell.innerHTML=this.cell.innerHTML.replace("item_chk0.","item_chk0_dis.").replace("item_chk1.","item_chk1_dis.")}else{this.cell.innerHTML=this.cell.innerHTML.replace("item_chk0_dis.","item_chk0.").replace("item_chk1_dis.","item_chk1.")}};this.changeState=function(b){if(b===true&&!this.grid.isActive){if(window.globalActiveDHTMLGridObject!=null&&window.globalActiveDHTMLGridObject!=this.grid&&window.globalActiveDHTMLGridObject.isActive){window.globalActiveDHTMLGridObject.setActive(false)}this.grid.setActive(true)}if((!this.grid.isEditable)||(this.cell.parentNode._locked)||(this.isDisabled())){return}if(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])){this.val=this.getValue();if(this.val=="1"){this.setValue("0")}else{this.setValue("1")}this.cell.wasChanged=true;this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")]);this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")])}else{this.editor=null}};this.getValue=function(){return this.cell.chstate?this.cell.chstate.toString():"0"};this.isCheckbox=function(){return true};this.isChecked=function(){if(this.getValue()=="1"){return true}else{return false}};this.setChecked=function(b){this.setValue(b.toString())};this.detach=function(){return this.val!=this.getValue()};this.edit=null}eXcell_ch.prototype=new eXcell;eXcell_ch.prototype.setValue=function(b){this.cell.style.verticalAlign="middle";if(b){b=b.toString()._dhx_trim();if((b=="false")||(b=="0")){b=""}}if(b){b="1";this.cell.chstate="1"}else{b="0";this.cell.chstate="0"}var a=this;this.cell.setAttribute("excell","ch");this.setCValue("<img src='"+this.grid.imgURL+"item_chk"+b+".gif' onclick='new eXcell_ch(this.parentNode).changeState(true); (arguments[0]||event).cancelBubble=true; '>",this.cell.chstate)};function eXcell_ra(a){this.base=eXcell_ch;this.base(a);this.grid=a.parentNode.grid;this.disabledF=function(b){if((b==true)||(b==1)){this.cell.innerHTML=this.cell.innerHTML.replace("radio_chk0.","radio_chk0_dis.").replace("radio_chk1.","radio_chk1_dis.")}else{this.cell.innerHTML=this.cell.innerHTML.replace("radio_chk0_dis.","radio_chk0.").replace("radio_chk1_dis.","radio_chk1.")}};this.changeState=function(b){if(b===false&&this.getValue()==1){return}if((!this.grid.isEditable)||(this.cell.parentNode._locked)||(this.isDisabled())){return}if(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])!=false){this.val=this.getValue();if(this.val=="1"){this.setValue("0")}else{this.setValue("1")}this.cell.wasChanged=true;this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")]);this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")])}else{this.editor=null}};this.edit=null}eXcell_ra.prototype=new eXcell_ch;eXcell_ra.prototype.setValue=function(b){this.cell.style.verticalAlign="middle";if(b){b=b.toString()._dhx_trim();if((b=="false")||(b=="0")){b=""}}if(b){if(!this.grid._RaSeCol){this.grid._RaSeCol=[]}if(this.grid._RaSeCol[this.cell._cellIndex]){var c=this.grid._RaSeCol[this.cell._cellIndex];if(this.grid.rowsAr[c]){var a=this.grid.cells(c,this.cell._cellIndex);a.setValue("0");if(this.grid.rowsAr[a.cell.parentNode.idd]){this.grid.callEvent("onEditCell",[1,a.cell.parentNode.idd,a.cell._cellIndex])}}}this.grid._RaSeCol[this.cell._cellIndex]=this.cell.parentNode.idd;b="1";this.cell.chstate="1"}else{b="0";this.cell.chstate="0"}this.cell.setAttribute("excell","ra");this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+b+".gif' onclick='new eXcell_ra(this.parentNode).changeState(false);'>",this.cell.chstate)};function eXcell_txt(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.edit=function(){this.val=this.getValue();this.obj=document.createElement("TEXTAREA");this.obj.className="dhx_textarea";this.obj.onclick=function(g){(g||event).cancelBubble=true};var b=this.grid.getPosition(this.cell);this.obj.value=this.val;this.obj.style.display="";this.obj.style.textAlign=this.cell.style.textAlign;document.body.appendChild(this.obj);if(_isOpera){this.obj.onkeypress=function(e){if(e.keyCode==9||e.keyCode==27){return false}}}this.obj.onkeydown=function(h){var g=(h||event);if(g.keyCode==9||g.keyCode==27){globalActiveDHTMLGridObject.entBox.focus();globalActiveDHTMLGridObject.doKey({keyCode:g.keyCode,shiftKey:g.shiftKey,srcElement:"0"});return false}};this.obj.style.left=b[0]+"px";this.obj.style.top=b[1]+this.cell.offsetHeight+"px";if(this.cell.offsetWidth<200){var c=200}else{var c=this.cell.offsetWidth}this.obj.style.width=c+16+"px";if(_isIE){this.obj.select();this.obj.value=this.obj.value}this.obj.focus()};this.detach=function(){var b="";b=this.obj.value;if(b==""){this.cell._clearCell=true}else{this.cell._clearCell=false}this.setValue(b);document.body.removeChild(this.obj);this.obj=null;return this.val!=this.getValue()};this.getValue=function(){if(this.obj){return this.obj.value}if(this.cell._clearCell){return""}if(typeof this.cell._brval!="undefined"){return this.cell._brval}if((!this.grid.multiLine)){return this.cell._brval||this.cell.innerHTML}else{return this.cell._brval||this.cell.innerHTML.replace(/<br[^>]*>/gi,"\n")._dhx_trim()}}}eXcell_txt.prototype=new eXcell;function eXcell_txttxt(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.getValue=function(){if((this.cell.firstChild)&&(this.cell.firstChild.tagName=="TEXTAREA")){return this.cell.firstChild.value}if(this.cell._clearCell){return""}if((!this.grid.multiLine)&&this.cell._brval){return this.cell._brval}return(_isIE?this.cell.innerText:this.cell.textContent)};this.setValue=function(b){this.cell._brval=b;if(!b||b.toString()._dhx_trim()==""){b=" ";this.cell._clearCell=true}else{this.cell._clearCell=false}this.setCTxtValue(b)}}eXcell_txttxt.prototype=new eXcell_txt;eXcell_txt.prototype.setValue=function(a){this.cell._brval=a;if(!a||a.toString()._dhx_trim()==""){a="&nbsp;";this.cell._clearCell=true}else{this.cell._clearCell=false}if((!this.grid.multiLine)||this.cell._clearCell){this.setCValue(a,this.cell._brval)}else{this.setCValue(a.replace(/\n/g,"<br/>"),a)}};function eXcell_co(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.combo=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex));this.editable=true}this.shiftNext=function(){var b=this.list.options[this.list.selectedIndex+1];if(b){b.selected=true}this.obj.value=this.list.options[this.list.selectedIndex].text;return true};this.shiftPrev=function(){if(this.list.selectedIndex!=0){var b=this.list.options[this.list.selectedIndex-1];if(b){b.selected=true}this.obj.value=this.list.options[this.list.selectedIndex].text}return true};this.edit=function(){this.val=this.getValue();this.text=this.getText()._dhx_trim();var e=this.grid.getPosition(this.cell);this.obj=document.createElement("TEXTAREA");this.obj.className="dhx_combo_edit";this.obj.style.height=(this.cell.offsetHeight-(this.grid.multiLine?9:4))+"px";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.style.textAlign;this.obj.onclick=function(m){(m||event).cancelBubble=true};this.obj.onmousedown=function(m){(m||event).cancelBubble=true};this.obj.value=this.text;this.obj.onselectstart=function(m){if(!m){m=event}m.cancelBubble=true;return true};var h=this;this.obj.onkeyup=function(o){var n=(o||event).keyCode;if(n==38||n==40||n==9){return}var r=this.readonly?String.fromCharCode(n):this.value;var s=h.list.options;for(var m=0;m<s.length;m++){if(s[m].text.indexOf(r)==0){return s[m].selected=true}}};this.list=document.createElement("SELECT");this.list.className="dhx_combo_select";this.list.style.width=this.cell.offsetWidth+"px";this.list.style.left=e[0]+"px";this.list.style.top=e[1]+this.cell.offsetHeight+"px";this.list.onclick=function(o){var n=o||window.event;var m=n.target||n.srcElement;if(m.tagName=="OPTION"){m=m.parentNode}h.editable=false;h.grid.editStop();n.cancelBubble=true};var b=this.combo.getKeys();var g=false;var l=0;for(var c=0;c<b.length;c++){var j=this.combo.get(b[c]);this.list.options[this.list.options.length]=new Option(j,b[c]);if(b[c]==this.val){l=this.list.options.length-1;g=true}}if(g==false){this.list.options[this.list.options.length]=new Option(this.text,this.val===null?"":this.val);l=this.list.options.length-1}document.body.appendChild(this.list);this.list.size="6";this.cstate=1;if(this.editable){this.cell.innerHTML=""}else{this.obj.style.width="0px";this.obj.style.height="0px"}this.cell.appendChild(this.obj);this.list.options[l].selected=true;if(this.editable){this.obj.focus();this.obj.focus()}if(!this.editable){this.obj.style.visibility="hidden";this.obj.style.position="absolute";this.list.focus();this.list.onkeydown=function(m){m=m||window.event;h.grid.setActive(true);if(m.keyCode<30){return h.grid.doKey({target:h.cell,keyCode:m.keyCode,shiftKey:m.shiftKey,ctrlKey:m.ctrlKey})}}}};this.getValue=function(){return((this.cell.combo_value==window.undefined)?"":this.cell.combo_value)};this.detach=function(){if(this.val!=this.getValue()){this.cell.wasChanged=true}if(this.list.parentNode!=null){if(this.editable){var b=this.list.options[this.list.selectedIndex];if(b&&b.text==this.obj.value){this.setValue(this.list.value)}else{var c=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex));var e=c.values._dhx_find(this.obj.value);if(e!=-1){this.setValue(c.keys[e])}else{this.setValue(this.cell.combo_value=this.obj.value)}}}else{this.setValue(this.list.value)}}if(this.list.parentNode){this.list.parentNode.removeChild(this.list)}if(this.obj.parentNode){this.obj.parentNode.removeChild(this.obj)}return this.val!=this.getValue()}}eXcell_co.prototype=new eXcell;eXcell_co.prototype.getText=function(){return this.cell.innerHTML};eXcell_co.prototype.setValue=function(e){if(typeof(e)=="object"){var c=dhx4.ajax.xpath("./option",e);if(c.length){this.cell._combo=new dhtmlXGridComboObject()}for(var b=0;b<c.length;b++){this.cell._combo.put(c[b].getAttribute("value"),c[b].firstChild?c[b].firstChild.data:"")}e=e.firstChild.data}if((e||"").toString()._dhx_trim()==""){e=null}this.cell.combo_value=e;if(e!==null){var a=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(e);this.setCValue(a===null?e:a,e)}else{this.setCValue("&nbsp;",e)}};function eXcell_coro(a){this.base=eXcell_co;this.base(a);this.editable=false}eXcell_coro.prototype=new eXcell_co;function eXcell_cotxt(a){this.base=eXcell_co;this.base(a)}eXcell_cotxt.prototype=new eXcell_co;eXcell_cotxt.prototype.getText=function(){return(_isIE?this.cell.innerText:this.cell.textContent)};eXcell_cotxt.prototype.setValue=function(c){if(typeof(c)=="object"){var b=dhx4.ajax.xpath("./option",c);if(b.length){this.cell._combo=new dhtmlXGridComboObject()}for(var a=0;a<b.length;a++){this.cell._combo.put(b[a].getAttribute("value"),b[a].firstChild?b[a].firstChild.data:"")}c=c.firstChild.data}if((c||"").toString()._dhx_trim()==""){c=null}if(c!==null){this.setCTxtValue((this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(c)||c,c)}else{this.setCTxtValue(" ",c)}this.cell.combo_value=c};function eXcell_corotxt(a){this.base=eXcell_co;this.base(a);this.editable=false}eXcell_corotxt.prototype=new eXcell_cotxt;function eXcell_cp(a){try{this.cell=a;this.grid=this.cell.parentNode.grid}catch(b){}this.edit=function(){this.val=this.getValue();this.obj=document.createElement("SPAN");this.obj.style.border="1px solid black";this.obj.style.position="absolute";var c=this.grid.getPosition(this.cell);this.colorPanel(4,this.obj);document.body.appendChild(this.obj);this.obj.style.left=c[0]+"px";this.obj.style.zIndex=1000;this.obj.style.top=c[1]+this.cell.offsetHeight+"px"};this.toolDNum=function(c){if(c.length==1){c="0"+c}return c};this.colorPanel=function(s,v){var m=document.createElement("TABLE");v.appendChild(m);m.cellSpacing=0;m.editor_obj=this;m.style.cursor="default";m.onclick=function(r){var n=r||window.event;var c=n.target||n.srcElement;var j=c.parentNode.parentNode.parentNode.editor_obj;if(j){j.setValue(c._bg);j.grid.editStop()}};var h=256/s;for(var l=0;l<=(256/h);l++){var e=m.insertRow(l);for(var o=0;o<=(256/h);o++){for(var g=0;g<=(256/h);g++){R=new Number(h*l)-(l==0?0:1);G=new Number(h*o)-(o==0?0:1);B=new Number(h*g)-(g==0?0:1);var u=this.toolDNum(R.toString(16))+""+this.toolDNum(G.toString(16))+""+this.toolDNum(B.toString(16));var t=e.insertCell(o);t.width="10px";t.innerHTML="&nbsp;";t.title=u.toUpperCase();t.style.backgroundColor="#"+u;t._bg="#"+u;if(this.val!=null&&"#"+u.toUpperCase()==this.val.toUpperCase()){t.style.border="2px solid white"}}}}};this.getValue=function(){return this.cell.firstChild._bg||""};this.getRed=function(){return Number(parseInt(this.getValue().substr(1,2),16))};this.getGreen=function(){return Number(parseInt(this.getValue().substr(3,2),16))};this.getBlue=function(){return Number(parseInt(this.getValue().substr(5,2),16))};this.detach=function(){if(this.obj.offsetParent!=null){document.body.removeChild(this.obj)}return this.val!=this.getValue()}}eXcell_cp.prototype=new eXcell;eXcell_cp.prototype.setValue=function(a){this.setCValue("<div style='width:100%;height:"+((this.grid.multiLine?"100%":23))+";background-color:"+(a||"")+";border:0px;'>&nbsp;</div>",a);this.cell.firstChild._bg=a};function eXcell_img(a){try{this.cell=a;this.grid=this.cell.parentNode.grid}catch(b){}this.getValue=function(){if(this.cell.firstChild.tagName=="IMG"){return this.cell.firstChild.src+(this.cell.titFl!=null?"^"+this.cell._brval:"")}else{if(this.cell.firstChild.tagName=="A"){var c=this.cell.firstChild.firstChild.src+(this.cell.titFl!=null?"^"+this.cell._brval:"");c+="^"+this.cell.lnk;if(this.cell.trg){c+="^"+this.cell.trg}return c}}};this.isDisabled=function(){return true}}eXcell_img.prototype=new eXcell;eXcell_img.prototype.getTitle=function(){return this.cell._brval};eXcell_img.prototype.setValue=function(c){var b=c;if((c||"").indexOf("^")!=-1){var a=c.split("^");c=a[0];b=this.cell._attrs.title||a[1];if(a.length>2){this.cell.lnk=a[2];if(a[3]){this.cell.trg=a[3]}}this.cell.titFl="1"}if(!this.grid.multiLine){this.setCValue("<img src='"+this.grid.iconURL+(c||"")._dhx_trim()+"' border='0' style='max-height:"+(this.grid._srdh-4)+"px'>",c)}else{this.setCValue("<img src='"+this.grid.iconURL+(c||"")._dhx_trim()+"' border='0'>",c)}if(this.cell.lnk){this.cell.innerHTML="<a href='"+this.cell.lnk+"' target='"+this.cell.trg+"'>"+this.cell.innerHTML+"</a>"}this.cell._brval=b};function eXcell_icon(a){this.base=eXcell_ed;this.base(a);try{this.cell=a;this.grid=this.cell.parentNode.grid}catch(b){}this.setValue=function(c){this.cell._raw_value=c;this.setCValue('<div class="dhx_grid_icon"><i class="fa fa-'+c.toString()._dhx_trim()+'"></i></div>')};this.getValue=function(){return this.cell._raw_value};this.isDisabled=function(){return true}}eXcell_icon.prototype=new eXcell_ed;function eXcell_price(a){this.base=eXcell_ed;this.base(a);this.getValue=function(){if(this.cell.childNodes.length>1){return this.cell.childNodes[1].innerHTML.toString()._dhx_trim()}else{return"0"}}}eXcell_price.prototype=new eXcell_ed;eXcell_price.prototype.setValue=function(b){if(isNaN(parseFloat(b))){b=this.val||0}var a="green";if(b<0){a="red"}this.setCValue("<span>$</span><span style='padding-right:2px;color:"+a+";'>"+b+"</span>",b)};function eXcell_dyn(a){this.base=eXcell_ed;this.base(a);this.getValue=function(){if(!this.cell.firstChild.childNodes[1]){return""}var c=this.cell.firstChild.childNodes[1].innerHTML.toString()._dhx_trim();var b=this.grid._aplNFb(c,this.cell._cellIndex);if(isNaN(Number(b))){return c}return b}}eXcell_dyn.prototype=new eXcell_ed;eXcell_dyn.prototype.getValue=function(){var a=eXcell_ed.prototype.getValue.call(this);return};eXcell_dyn.prototype.setValue=function(c){if(!c||isNaN(Number(c))){if(c!==""){c=0}}else{if(c>0){var b="green";var a="dyn_up.gif"}else{if(c==0){var b="black";var a="dyn_.gif"}else{var b="red";var a="dyn_down.gif"}}c=this.grid._aplNF(c,this.cell._cellIndex)}this.setCValue("<div class='grid_cell_dyn'><img src='"+this.grid.imgURL+""+a+"'><span style='color:"+b+";'>"+c+"</span></div>",c)};function eXcell_ro(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.edit=function(){};this.isDisabled=function(){return true};this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()}}eXcell_ro.prototype=new eXcell;window.eXcell_hidden=function(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.edit=function(){};this.isDisabled=function(){return true};this.getValue=function(){return this.cell.val}};eXcell_hidden.prototype=new eXcell;eXcell_hidden.prototype.setValue=function(a){this.cell.val=a};function eXcell_ron(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.edit=function(){};this.isDisabled=function(){return true};this.getValue=function(){return this.cell._clearCell?"":this.cell._orig_value||this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex).toString()}}eXcell_ron.prototype=new eXcell;eXcell_ron.prototype.setValue=function(a){if(a===0){}else{if(!a||a.toString()._dhx_trim()==""){this.setCValue("&nbsp;");return this.cell._clearCell=true}}this.cell._orig_value=a;this.cell._clearCell=false;this.setCValue(a?this.grid._aplNF(a,this.cell._cellIndex):"0")};function eXcell_rotxt(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.edit=function(){};this.isDisabled=function(){return true};this.setValue=function(b){if(!b){b=" ";this.cell._clearCell=true}else{this.cell._clearCell=false}this.setCTxtValue(b)};this.getValue=function(){if(this.cell._clearCell){return""}return(_isIE?this.cell.innerText:this.cell.textContent)}}eXcell_rotxt.prototype=new eXcell;function dhtmlXGridComboObject(){this.keys=new dhtmlxArray();this.values=new dhtmlxArray();this.put=function(b,c){for(var a=0;a<this.keys.length;a++){if(this.keys[a]==b){this.values[a]=c;return true}}this.values[this.values.length]=c;this.keys[this.keys.length]=b};this.get=function(b){for(var a=0;a<this.keys.length;a++){if(this.keys[a]==b){return this.values[a]}}return null};this.clear=function(){this.keys=new dhtmlxArray();this.values=new dhtmlxArray()};this.remove=function(b){for(var a=0;a<this.keys.length;a++){if(this.keys[a]==b){this.keys._dhx_removeAt(a);this.values._dhx_removeAt(a);return true}}};this.size=function(){var a=0;for(var b=0;b<this.keys.length;b++){if(this.keys[b]!=null){a++}}return a};this.getKeys=function(){var a=new Array(0);for(var b=0;b<this.keys.length;b++){if(this.keys[b]!=null){a[a.length]=this.keys[b]}}return a};this.save=function(){this._save=new Array();for(var a=0;a<this.keys.length;a++){this._save[a]=[this.keys[a],this.values[a]]}};this.restore=function(){if(this._save){this.keys[a]=new Array();this.values[a]=new Array();for(var a=0;a<this._save.length;a++){this.keys[a]=this._save[a][0];this.values[a]=this._save[a][1]}}};return this}function Hashtable(){this.keys=new dhtmlxArray();this.values=new dhtmlxArray();return this}Hashtable.prototype=new dhtmlXGridComboObject;if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype.attachGrid=function(a){this.callEvent("_onBeforeContentAttach",["grid"]);var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";this._attachObject(b);this.dataType="grid";if(a&&typeof a==="object"&&!a.tagName){a.parent=b;b=a}this.dataObj=new dhtmlXGridObject(b);this.dataObj.setSkin(this.conf.skin);if(typeof(window.dhtmlXTabBarCell)=="function"&&this instanceof window.dhtmlXTabBarCell&&navigator.userAgent.match(/7[\.\d]* mobile/gi)!=null&&navigator.userAgent.match(/AppleWebKit/gi)!=null){this.dataObj.objBox.style.webkitOverflowScrolling="auto"}if(this.conf.skin=="material"&&typeof(window.dhtmlXLayoutCell)=="function"&&this instanceof window.dhtmlXLayoutCell){this.cell.childNodes[this.conf.idx.cont].style.overflow="hidden"}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)=="function"&&this instanceof window.dhtmlXWindowsCell){this.dataObj.entBox.style.border="1px solid #a4bed4";this.dataObj._sizeFix=0}else{this.dataObj.entBox.style.border="0px solid white";this.dataObj._sizeFix=2}b=null;this.callEvent("_onContentAttach",[]);return this.dataObj}}dhtmlXGridObject.prototype.enableDragAndDrop=function(a){if(a=="temporary_disabled"){this.dADTempOff=false;a=true}else{this.dADTempOff=true}this.dragAndDropOff=dhx4.s2b(a);this._drag_validate=true;if(a){this.objBox.ondragstart=function(b){(b||event).cancelBubble=true;return false}}};dhtmlXGridObject.prototype.setDragBehavior=function(a){this.dadmodec=this.dadmodefix=0;switch(a){case"child":this.dadmode=0;this._sbmod=false;break;case"sibling":this.dadmode=1;this._sbmod=false;break;case"sibling-next":this.dadmode=1;this._sbmod=true;break;case"complex":this.dadmode=2;this._sbmod=false;break;case"complex-next":this.dadmode=2;this._sbmod=true;break}};dhtmlXGridObject.prototype.enableDragOrder=function(a){this._dndorder=dhx4.s2b(a)};dhtmlXGridObject.prototype._checkParent=function(e,b){var c=this._h2.get[e.idd].parent;if(!c.parent){return}for(var a=0;a<b.length;a++){if(b[a]==c.id){return true}}return this._checkParent(this.rowsAr[c.id],b)};dhtmlXGridObject.prototype._createDragNode=function(c,g){this.editStop();if(window.dhtmlDragAndDrop.dragNode){return null}if(!this.dADTempOff){return null}c.parentObject=new Object();c.parentObject.treeNod=this;var m=this.callEvent("onBeforeDrag",[c.parentNode.idd,c._cellIndex,g]);if(!m){return null}var h=new Array();h=this.getSelectedId();h=(((h)&&(h!=""))?h.split(this.delim):[]);var j=false;for(var b=0;b<h.length;b++){if(h[b]==c.parentNode.idd){j=true}}if(!j){this.selectRow(this.rowsAr[c.parentNode.idd],false,g.ctrlKey,false);if(!g.ctrlKey){h=[]}h[this.selMultiRows?h.length:0]=c.parentNode.idd}if(this.isTreeGrid()){for(var b=h.length-1;b>=0;b--){if(this._checkParent(this.rowsAr[h[b]],h)){h.splice(b,1)}}}var n=this;if(h.length&&this._dndorder){h.sort(function(o,e){return(n.rowsAr[o].rowIndex>n.rowsAr[e].rowIndex?1:-1)})}var a=this.getFirstParentOfType(_isIE?g.srcElement:g.target,"TD");if(a){this._dndExtra=a._cellIndex}this._dragged=new Array();for(var b=0;b<h.length;b++){if(this.rowsAr[h[b]]){this._dragged[this._dragged.length]=this.rowsAr[h[b]];this.rowsAr[h[b]].treeNod=this}}c.parentObject.parentNode=c.parentNode;var l=document.createElement("div");l.innerHTML=(m!==true?m:this.rowToDragElement(c.parentNode.idd));l.style.position="absolute";l.className="dragSpanDiv";return l};dhtmlXGridObject.prototype._createSdrgc=function(){this._sdrgc=document.createElement("DIV");this._sdrgc.innerHTML="&nbsp;";this._sdrgc.className="gridDragLine";this.objBox.appendChild(this._sdrgc)};function dragContext(y,x,w,v,u,t,r,s,o,n,g){this.source=y||"grid";this.target=x||"grid";this.mode=w||"move";this.dropmode=v||"child";this.sid=u||0;this.tid=t;this.sobj=r||null;this.tobj=s||null;this.sExtra=o||null;this.tExtra=n||null;this.before=g||false;return this}dragContext.prototype.valid=function(){if(this.sobj!=this.tobj){return true}if(this.sid==this.tid){return false}if(this.target=="treeGrid"){var a=this.tid;while(a=this.tobj.getParentId(a)){if(this.sid==a){return false}}}return true};dragContext.prototype.close=function(){this.sobj=null;this.tobj=null};dragContext.prototype.copy=function(){return new dragContext(this.source,this.target,this.mode,this.dropmode,this.sid,this.tid,this.sobj,this.tobj,this.sExtra,this.tExtra,this.before)};dragContext.prototype.set=function(e,c){this[e]=c;return this};dragContext.prototype.uid=function(e,c){this.nid=this.sid;while(this.tobj.rowsAr[this.nid]){this.nid=this.nid+((new Date()).valueOf())}return this};dragContext.prototype.data=function(){if(this.sobj==this.tobj){return this.sobj._getRowArray(this.sobj.rowsAr[this.sid])}if(this.source=="tree"){return this.tobj.treeToGridElement(this.sobj,this.sid,this.tid)}else{return this.tobj.gridToGrid(this.sid,this.sobj,this.tobj)}};dragContext.prototype.attrs=function(){if(this.source=="tree"){return{}}else{return this.sobj.rowsAr[this.sid]._attrs}};dragContext.prototype.childs=function(){if(this.source=="treeGrid"){return this.sobj._h2.get[this.sid]._xml_await?this.sobj._h2.get[this.sid].has_kids:null}return null};dragContext.prototype.pid=function(){if(!this.tid){return 0}if(!this.tobj._h2){return 0}if(this.target=="treeGrid"){if(this.dropmode=="child"){return this.tid}else{var b=this.tobj.rowsAr[this.tid];var a=this.tobj._h2.get[b.idd].parent.id;if((this.alfa)&&(this.tobj._sbmod)&&(b.nextSibling)){var c=this.tobj._h2.get[b.nextSibling.idd].parent.id;if(c==this.tid){return this.tid}if(c!=a){return c}}return a}}};dragContext.prototype.ind=function(){if(this.tid==window.unknown){return this.tobj.rowsBuffer.length}if(this.target=="treeGrid"){if(this.dropmode=="child"){this.tobj.openItem(this.tid)}else{this.tobj.openItem(this.tobj.getParentId(this.tid))}}var a=this.tobj.rowsBuffer._dhx_find(this.tobj.rowsAr[this.tid]);if((this.alfa)&&(this.tobj._sbmod)&&(this.dropmode=="sibling")){var b=this.tobj.rowsAr[this.tid];if((b.nextSibling)&&(this._h2.get[b.nextSibling.idd].parent.id==this.tid)){return a+1}}return(a+1+((this.target=="treeGrid"&&a>=0&&this.tobj._h2.get[this.tobj.rowsBuffer[a].idd].state=="minus")?this.tobj._getOpenLenght(this.tobj.rowsBuffer[a].idd,0):0))};dragContext.prototype.img=function(){if((this.target!="grid")&&(this.sobj._h2)){return this.sobj.getItemImage(this.sid)}else{return null}};dragContext.prototype.slist=function(){var b=new Array();for(var a=0;a<this.sid.length;a++){b[b.length]=this.sid[a][(this.source=="tree")?"id":"idd"]}return b.join(",")};dhtmlXGridObject.prototype._drag=function(o,g,n,r){if(this._realfake){return this._fake._drag()}var m=(this.lastLanding);if(this._autoOpenTimer){window.clearTimeout(this._autoOpenTimer)}var e=n.parentNode;var b=o.parentObject;if(!e.idd){e.grid=this;this.dadmodefix=0}var l=new dragContext(0,0,0,((e.grid.dadmode==1||e.grid.dadmodec)?"sibling":"child"));if(b&&b.childNodes){l.set("source","tree").set("sobj",b.treeNod).set("sid",l.sobj._dragged)}else{if(!b){return true}if(b.treeNod.isTreeGrid&&b.treeNod.isTreeGrid()){l.set("source","treeGrid")}l.set("sobj",b.treeNod).set("sid",l.sobj._dragged)}if(e.grid.isTreeGrid()){l.set("target","treeGrid")}else{l.set("dropmode","sibling")}l.set("tobj",e.grid).set("tid",e.idd);if(((l.tobj.dadmode==2)&&(l.tobj.dadmodec==1))&&(l.tobj.dadmodefix<0)){if(l.tobj.obj.rows[1].idd!=l.tid){l.tid=e.previousSibling.idd}else{if(this._h2&&l.tid){l.before=true}else{l.tid=0}}}var a=this.getFirstParentOfType(r,"TD");if(a){l.set("tExtra",a._cellIndex)}if(a){l.set("sExtra",l.sobj._dndExtra)}if(l.sobj.dpcpy){l.set("mode","copy")}if(l.tobj._realfake){l.tobj=l.tobj._fake}if(l.sobj._realfake){l.sobj=l.sobj._fake}l.tobj._clearMove();if(b&&b.treeNod&&b.treeNod._nonTrivialRow){b.treeNod._nonTrivialRow(this,l.tid,l.dropmode,b)}else{l.tobj.dragContext=l;if(!l.tobj.callEvent("onDrag",[l.slist(),l.tid,l.sobj,l.tobj,l.sExtra,l.tExtra])){return l.tobj.dragContext=null}var s=new Array();if(typeof(l.sid)=="object"){var j=l.copy();for(var h=0;h<l.sid.length;h++){if(!j.set("alfa",(!h)).set("sid",l.sid[h][(l.source=="tree"?"id":"idd")]).valid()){continue}j.tobj._dragRoutine(j);if(j.target=="treeGrid"&&j.dropmode=="child"){j.tobj.openItem(j.tid)}s[s.length]=j.nid;j.set("dropmode","sibling").set("tid",j.nid)}j.close()}else{l.tobj._dragRoutine(l)}if(l.tobj.laterLink){l.tobj.laterLink()}l.tobj.callEvent("onDrop",[l.slist(),l.tid,s.join(","),l.sobj,l.tobj,l.sExtra,l.tExtra])}l.tobj.dragContext=null;l.close()};dhtmlXGridObject.prototype._dragRoutine=function(r){if((r.sobj==r.tobj)&&(r.source=="grid")&&(r.mode=="move")&&!this._fake){if(r.sobj._dndProblematic){return}var n=r.sobj.rowsAr[r.sid];var o=r.sobj.rowsCol._dhx_find(n);r.sobj.rowsCol._dhx_removeAt(r.sobj.rowsCol._dhx_find(n));r.sobj.rowsBuffer._dhx_removeAt(r.sobj.rowsBuffer._dhx_find(n));r.sobj.rowsBuffer._dhx_insertAt(r.ind(),n);if(r.tobj._fake){r.tobj._fake.rowsCol._dhx_removeAt(o);var s=r.tobj._fake.rowsAr[r.sid];s.parentNode.removeChild(s)}r.sobj._insertRowAt(n,r.ind()-(this.pagingOn?((this.currentPage-1)*this.rowsBufferOutSize):0));r.nid=r.sid;r.sobj.callEvent("onGridReconstructed",[]);return}var m;if(this._h2&&typeof r.tid!="undefined"&&r.dropmode=="sibling"&&(this._sbmod||r.tid)){if(r.before){m=r.uid().tobj.addRowBefore(r.nid,r.data(),r.tid,r.img(),r.childs())}else{if(r.alfa&&this._sbmod&&this._h2.get[r.tid].childs.length){this.openItem(r.tid);m=r.uid().tobj.addRowBefore(r.nid,r.data(),this._h2.get[r.tid].childs[0].id,r.img(),r.childs())}else{m=r.uid().tobj.addRowAfter(r.nid,r.data(),r.tid,r.img(),r.childs())}}}else{m=r.uid().tobj.addRow(r.nid,r.data(),r.ind(),r.pid(),r.img(),r.childs())}m._attrs=r.attrs();if(r.source=="tree"){this.callEvent("onRowAdded",[r.nid]);var a=r.sobj._globalIdStorageFind(r.sid);if(a.childsCount){var h=r.copy().set("tid",r.nid).set("dropmode",r.target=="grid"?"sibling":"child");for(var e=0;e<a.childsCount;e++){r.tobj._dragRoutine(h.set("sid",a.childNodes[e].id));if(r.mode=="move"){e--}}h.close()}}else{r.tobj._copyUserData(r);this.callEvent("onRowAdded",[r.nid]);if((r.source=="treeGrid")){if(r.sobj==r.tobj){m._xml=r.sobj.rowsAr[r.sid]._xml}var g=r.sobj._h2.get[r.sid];if((g)&&(g.childs.length)){var h=r.copy().set("tid",r.nid);if(r.target=="grid"){h.set("dropmode","sibling")}else{if(!h.tobj.kidsXmlFile){h.tobj.openItem(r.tid)}h.set("dropmode","child")}var b=g.childs.length;if(!h.tobj.kidsXmlFile){for(var e=0;e<b;e++){r.sobj.render_row_tree(null,g.childs[e].id);r.tobj._dragRoutine(h.set("sid",g.childs[e].id));if(b!=g.childs.length){e--;b=g.childs.length}}}h.close()}}}if(r.mode=="move"){r.sobj[(r.source=="tree")?"deleteItem":"deleteRow"](r.sid);if((r.sobj==r.tobj)&&(!r.tobj.rowsAr[r.sid])){r.tobj.changeRowId(r.nid,r.sid);r.nid=r.sid}}};dhtmlXGridObject.prototype.gridToGrid=function(e,a,c){var g=new Array();for(var b=0;b<a.hdr.rows[0].cells.length;b++){g[b]=a.cells(e,b).getValue()}return g};dhtmlXGridObject.prototype.checkParentLine=function(a,b){if((!this._h2)||(!b)||(!a)){return false}if(a.id==b){return true}else{return this.checkParentLine(a.parent,b)}};dhtmlXGridObject.prototype._dragIn=function(h,e,b,j){if(!this.dADTempOff){return 0}var a=this.isTreeGrid();var g=e.parentNode.idd?e.parentNode:e.parentObject;if(this._drag_validate){if(h.parentNode==e.parentNode){return 0}if((a)&&(this==g.grid)&&((this.checkParentLine(this._h2.get[h.parentNode.idd],e.parentNode.idd)))){return 0}}if(!this.callEvent("onDragIn",[g.idd||g.id,h.parentNode.idd,g.grid||g.treeNod,(h.grid||h.parentNode.grid)])){return this._setMove(h,b,j,true)}this._setMove(h,b,j);if((a)&&(h.parentNode.expand!="")){var c=this;this._autoOpenTimer=window.setTimeout(function(){c._autoOpenItem(null,c);c=null},1000);this._autoOpenId=h.parentNode.idd}else{if(this._autoOpenTimer){window.clearTimeout(this._autoOpenTimer)}}return h};dhtmlXGridObject.prototype._autoOpenItem=function(a,b){b.openItem(b._autoOpenId)};dhtmlXGridObject.prototype._dragOut=function(b){this._clearMove();var a=b.parentNode.parentObject?b.parentObject.id:b.parentNode.idd;this.callEvent("onDragOut",[a]);if(this._autoOpenTimer){window.clearTimeout(this._autoOpenTimer)}};dhtmlXGridObject.prototype._setMove=function(h,b,l,g){if(!h.parentNode.idd){return}var c=dhx4.absTop(h);var a=dhx4.absTop(this.objBox);if((c-a)>(parseInt(this.objBox.offsetHeight)-50)){this.objBox.scrollTop=parseInt(this.objBox.scrollTop)+20}if((c-a+parseInt(this.objBox.scrollTop))<(parseInt(this.objBox.scrollTop)+30)){this.objBox.scrollTop=parseInt(this.objBox.scrollTop)-20}if(g){return 0}if(this.dadmode==2){var j=l-c+(document.body.scrollTop||document.documentElement.scrollTop)-2-h.offsetHeight/2;if((Math.abs(j)-h.offsetHeight/6)>0){this.dadmodec=1;if(j<0){this.dadmodefix=-1}else{this.dadmodefix=1}}else{this.dadmodec=0}}else{this.dadmodec=this.dadmode}if(this.dadmodec){if(!this._sdrgc){this._createSdrgc()}this._sdrgc.style.display="block";this._sdrgc.style.top=c-a+parseInt(this.objBox.scrollTop)+((this.dadmodefix>=0)?h.offsetHeight:0)+"px"}else{this._llSelD=h;if(h.parentNode.tagName=="TR"){for(var e=0;e<h.parentNode.childNodes.length;e++){var j=h.parentNode.childNodes[e];j._bgCol=j.style.backgroundColor;j.style.backgroundColor="#FFCCCC"}}}};dhtmlXGridObject.prototype._clearMove=function(){if(this._sdrgc){this._sdrgc.style.display="none"}if((this._llSelD)&&(this._llSelD.parentNode.tagName=="TR")){var b=this._llSelD.parentNode.childNodes;for(var a=0;a<b.length;a++){b[a].style.backgroundColor=b[a]._bgCol}}this._llSelD=null};dhtmlXGridObject.prototype.rowToDragElement=function(a){var b=this.cells(a,0).getValue();return b};dhtmlXGridObject.prototype._copyUserData=function(e){if(!e.tobj.UserData[e.nid]||e.tobj!=e.sobj){e.tobj.UserData[e.nid]=new Hashtable()}else{return}var b=e.sobj.UserData[e.sid];var a=e.tobj.UserData[e.nid];if(b){a.keys=a.keys.concat(b.keys);a.values=a.values.concat(b.values)}};dhtmlXGridObject.prototype.moveRow=function(c,e,a,b){switch(e){case"row_sibling":this.moveRowTo(c,a,"move","sibling",this,b);break;case"up":this.moveRowUp(c);break;case"down":this.moveRowDown(c);break}};dhtmlXGridObject.prototype._nonTrivialNode=function(o,n,j,l,c){if((o.callEvent)&&(!c)){if(!o.callEvent("onDrag",[l.idd,n.id,(j?j.id:null),this,o])){return false}}var m=l.idd;var a=m;while(o._idpull[a]){a+=(new Date()).getMilliseconds().toString()}var g=(this.isTreeGrid()?this.getItemImage(m):"");if(j){for(e=0;e<n.childsCount;e++){if(n.childNodes[e]==j){break}}if(e!=0){j=n.childNodes[e-1]}else{st="TOP";j=""}}var b=o._attachChildNode(n,a,this.gridToTreeElement(o,a,m),"",g,g,g,"","",j);if(this._h2){var h=this._h2.get[m];if(h.childs.length){for(var e=0;e<h.childs.length;e++){this._nonTrivialNode(o,b,0,this.rowsAr[h.childs[e].id],1);if(!this.dpcpy){e--}}}}if(!this.dpcpy){this.deleteRow(m)}if((o.callEvent)&&(!c)){o.callEvent("onDrop",[a,n.id,(j?j.id:null),this,o])}};dhtmlXGridObject.prototype.gridToTreeElement=function(b,c,a){return this.cells(a,0).getValue()};dhtmlXGridObject.prototype.treeToGridElement=function(e,g,a){var b=new Array();var h=this.cellType._dhx_find("tree");if(h==-1){h=0}for(var c=0;c<this.getColumnCount();c++){b[b.length]=(c!=h)?(e.getUserData(g,this.getColumnId(c))||""):e.getItemText(g)}return b};dhtmlXGridObject.prototype.moveRowTo=function(e,b,j,h,a,g){var l=new dragContext((a||this).isTreeGrid()?"treeGrid":"grid",(g||this).isTreeGrid()?"treeGrid":"grid",j,h||"sibling",e,b,a||this,g||this);l.tobj._dragRoutine(l);l.close();return l.nid};dhtmlXGridObject.prototype.enableMercyDrag=function(a){this.dpcpy=dhx4.s2b(a)};dhtmlXGridObject.prototype.toPDF=function(e,n,t,r,l,y){var g={row:(this.getSelectedRowId()||"").split(this.delim),col:this.getSelectedCellIndex()};if(g.row===null||g.col===-1){g=false}else{if(g.row){for(var u=0;u<g.row.length;u++){if(g.row[u]){var b=this.cells(g.row[u],g.col).cell;b.parentNode.className=b.parentNode.className.replace(" rowselected","");b.className=b.className.replace(" cellselected","");g.row[u]=b}}}else{g=false}}n=n||"color";var v=n=="full_color";var a=this;a._asCDATA=true;if(typeof(y)==="undefined"){this.target=' target="_blank"'}else{this.target=y}eXcell_ch.prototype.getContent=function(){return this.getValue()};eXcell_ra.prototype.getContent=function(){return this.getValue()};function x(C){var J=[];for(var H=1;H<a.hdr.rows.length;H++){J[H]=[];for(var F=0;F<a._cCount;F++){var L=a.hdr.rows[H].childNodes[F];if(!J[H][F]){J[H][F]=[0,0]}if(L){J[H][L._cellIndexS]=[L.colSpan,L.rowSpan]}}}var I="<rows profile='"+C+"'";if(t){I+=" header='"+t+"'"}if(r){I+=" footer='"+r+"'"}I+="><head>"+a._serialiseExportConfig(J).replace(/^<head/,"<columns").replace(/head>$/,"columns>");for(var H=2;H<a.hdr.rows.length;H++){var z=0;var O=a.hdr.rows[H];var K="";for(var F=0;F<a._cCount;F++){if((a._srClmn&&!a._srClmn[F])||(a._hrrar[F]&&(!a._fake||F>=a._fake.hdrLabels.length))){z++;continue}var N=J[H][F];var M=((N[0]&&N[0]>1)?' colspan="'+N[0]+'" ':"");if(N[1]&&N[1]>1){M+=' rowspan="'+N[1]+'" ';z=-1}var A="";var E=O;if(a._fake&&F<a._fake._cCount){E=a._fake.hdr.rows[H]}for(var D=0;D<E.cells.length;D++){if(E.cells[D]._cellIndexS==F){if(E.cells[D].getElementsByTagName("SELECT").length){A=""}else{A=_isIE?E.cells[D].innerText:E.cells[D].textContent}A=A.replace(/[ \n\r\t\xA0]+/," ");break}}if(!A||A==" "){z++}K+="<column"+M+"><![CDATA["+A+"]]></column>"}if(z!=a._cCount){I+="\n<columns>"+K+"</columns>"}}I+="</head>\n";I+=m();return I}function c(){var z=[];if(l){for(var A=0;A<l.length;A++){z.push(s(a.getRowIndex(l[A])))}}else{for(var A=0;A<a.getRowsNum();A++){z.push(s(A))}}return z.join("\n")}function m(){var C=["<foot>"];if(!a.ftr){return""}for(var D=1;D<a.ftr.rows.length;D++){C.push("<columns>");var H=a.ftr.rows[D];for(var A=0;A<a._cCount;A++){if(a._srClmn&&!a._srClmn[A]){continue}if(a._hrrar[A]&&(!a._fake||A>=a._fake.hdrLabels.length)){continue}for(var z=0;z<H.cells.length;z++){var F="";var E="";if(H.cells[z]._cellIndexS==A){F=_isIE?H.cells[z].innerText:H.cells[z].textContent;F=F.replace(/[ \n\r\t\xA0]+/," ");if(H.cells[z].colSpan&&H.cells[z].colSpan!=1){E=" colspan='"+H.cells[z].colSpan+"' "}if(H.cells[z].rowSpan&&H.cells[z].rowSpan!=1){E=" rowspan='"+H.cells[z].rowSpan+"' "}break}}C.push("<column"+E+"><![CDATA["+F+"]]></column>")}C.push("</columns>")}C.push("</foot>");return C.join("\n")}function j(A,z){return(window.getComputedStyle?(window.getComputedStyle(A,null)[z]):(A.currentStyle?A.currentStyle[z]:null))||""}function s(D){if(!a.rowsBuffer[D]){return""}var z=a.render_row(D);if(z.style.display=="none"){return""}var A=a.isTreeGrid()?' level="'+a.getLevel(z.idd)+'"':"";var I="<row"+A+">";for(var F=0;F<a._cCount;F++){if(((!a._srClmn)||(a._srClmn[F]))&&(!a._hrrar[F]||(a._fake&&F<a._fake.hdrLabels.length))){var M=a.cells(z.idd,F);if(v){var E=j(M.cell,"color");var L=j(M.cell,"backgroundColor");var K=j(M.cell,"font-weight")||j(M.cell,"fontWeight");var H=j(M.cell,"font-style")||j(M.cell,"fontStyle");var J=j(M.cell,"text-align")||j(M.cell,"textAlign");var C=j(M.cell,"font-family")||j(M.cell,"fontFamily");if(L=="transparent"||L=="rgba(0, 0, 0, 0)"){L="rgb(255,255,255)"}I+="<cell bgColor='"+L+"' textColor='"+E+"' bold='"+K+"' italic='"+H+"' align='"+J+"' font='"+C+"'>"}else{I+="<cell>"}I+="<![CDATA["+(M.getContent?M.getContent():M.getTitle())+"]]></cell>"}}return I+"</row>"}function o(){var z="</rows>";return z}var w=document.createElement("div");w.style.display="none";document.body.appendChild(w);var h="form_"+a.uid();w.innerHTML='<form id="'+h+'" method="post" action="'+e+'" accept-charset="utf-8"  enctype="application/x-www-form-urlencoded"'+this.target+'><input type="hidden" name="grid_xml" id="grid_xml"/> </form>';document.getElementById(h).firstChild.value=encodeURIComponent(x(n).replace("\u2013","-")+c()+o());document.getElementById(h).submit();w.parentNode.removeChild(w);a=null;if(g&&g.row.length){for(var u=0;u<g.row.length;u++){g.row[u].parentNode.className+=" rowselected";if(g.row.length==1){g.row[u].className+=" cellselected"}}}g=null};dhtmlXGridObject.prototype._serialiseExportConfig=function(h){function g(j){if(typeof(j)!=="string"){return j}j=j.replace(/&/g,"&amp;");j=j.replace(/"/g,"&quot;");j=j.replace(/'/g,"&apos;");j=j.replace(/</g,"&lt;");j=j.replace(/>/g,"&gt;");return j}var b="<head>";for(var c=0;c<this.hdr.rows[0].cells.length;c++){if(this._srClmn&&!this._srClmn[c]){continue}if(this._hrrar[c]&&(!this._fake||c>=this._fake.hdrLabels.length)){continue}var e=this.fldSort[c];if(e=="cus"){e=this._customSorts[c].toString();e=e.replace(/function[\ ]*/,"").replace(/\([^\f]*/,"")}var n=h[1][c];var l=((n[1]&&n[1]>1)?' rowspan="'+n[1]+'" ':"")+((n[0]&&n[0]>1)?' colspan="'+n[0]+'" ':"");b+="<column "+l+" width='"+this.getColWidth(c)+"' align='"+this.cellAlign[c]+"' type='"+this.cellType[c]+"' hidden='"+((this.isColumnHidden&&this.isColumnHidden(c))?"true":"false")+"' sort='"+(e||"na")+"' color='"+(this.columnColor[c]||"")+"'"+(this.columnIds[c]?(" id='"+this.columnIds[c]+"'"):"")+">";if(this._asCDATA){b+="<![CDATA["+this.getColumnLabel(c)+"]]>"}else{b+=this.getColumnLabel(c)}var m=this.combos[c]?this.getCombo(c):null;if(m){for(var a=0;a<m.keys.length;a++){b+="<option value='"+g(m.keys[a])+"'><![CDATA["+m.values[a]+"]]></option>"}}b+="</column>"}return b+="</head>"};if(window.eXcell_sub_row_grid){window.eXcell_sub_row_grid.prototype.getContent=function(){return""}}dhtmlXGridObject.prototype.toExcel=function(a,e,j,h,b){if(!document.getElementById("ifr")){var g=document.createElement("iframe");g.style.display="none";g.setAttribute("name","dhx_export_iframe");g.setAttribute("src","");g.setAttribute("id","dhx_export_iframe");document.body.appendChild(g)}var c=' target="dhx_export_iframe"';this.toPDF(a,e,j,h,b,c)};dhtmlXGridObject.prototype.filterBy=function(c,e,b){if(this.isTreeGrid()){return this.filterTreeBy(c,e,b)}if(this._f_rowsBuffer){if(!b){this.rowsBuffer=dhtmlxArray([].concat(this._f_rowsBuffer));if(this._fake){this._fake.rowsBuffer=this.rowsBuffer}}}else{this._f_rowsBuffer=[].concat(this.rowsBuffer)}if(!this.rowsBuffer.length){return}var g=true;this.dma(true);if(typeof(c)=="object"){for(var a=0;a<e.length;a++){this._filterA(c[a],e[a])}}else{this._filterA(c,e)}this.dma(false);if(this.pagingOn&&this.rowsBuffer.length/this.rowsBufferOutSize<(this.currentPage-1)){this.changePage(0)}this._reset_view();this.callEvent("onGridReconstructed",[])};dhtmlXGridObject.prototype._filterA=function(b,c){if(c==""){return}var e=true;if(typeof(c)=="function"){e=false}else{c=(c||"").toString().toLowerCase()}if(!this.rowsBuffer.length){return}for(var a=this.rowsBuffer.length-1;a>=0;a--){if(e?(this._get_cell_value(this.rowsBuffer[a],b).toString().toLowerCase().indexOf(c)==-1):(!c.call(this,this._get_cell_value(this.rowsBuffer[a],b),this.rowsBuffer[a].idd))){this.rowsBuffer.splice(a,1)}}};dhtmlXGridObject.prototype.getFilterElement=function(a){if(!this.filters){return}for(var b=0;b<this.filters.length;b++){if(this.filters[b][1]==a){return(this.filters[b][0].combo||this.filters[b][0])}}return null};dhtmlXGridObject.prototype.collectValues=function(e){var s=this.dhxevs.data.oncollectvalues;if(s){var n=true;for(var o in s){var v=s[o].call(this,e);if(v!==true){n=v||n}}if(n!==true){return n}}if(this.isTreeGrid()){return this.collectTreeValues(e)}this.dma(true);this._build_m_order();e=this._m_order?this._m_order[e]:e;var l={};var h=[];var b=this._f_rowsBuffer||this.rowsBuffer;for(var g=0;g<b.length;g++){var a=this._get_cell_value(b[g],e);if(a&&(!b[g]._childIndexes||b[g]._childIndexes[e]!=b[g]._childIndexes[e-1])){l[a]=true}}this.dma(false);var m=(this.combos[e]||(this._col_combos&&this._col_combos[e]?this._col_combos[e]:((this._sub_trees&&this._sub_trees[e])?this._sub_trees[e][0]:false)));for(var j in l){if(l[j]===true){if(m){if(m.get&&m.get(j)){j=m.get(j)}else{if(m.getOption&&m.getOption(j)){j=m.getOption(j).text}else{if(m.getItemText){var r=m.getItemText(j);var u=this._sub_trees[e][1]=this._sub_trees[e][1]||{};u[r]=j;j=r}}}}h.push(j)}}return h.sort()};dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var a=0;a<this._c_order.length;a++){this._m_order[this._c_order[a]]=a}}};dhtmlXGridObject.prototype.filterByAll=function(){var e=[];var c=[];this._build_m_order();for(var g=0;g<this.filters.length;g++){var j=this._m_order?this._m_order[this.filters[g][1]]:this.filters[g][1];if(j>=this._cCount){continue}c.push(j);var l=this.filters[g][0].old_value=this.filters[g][0].value;if(this.filters[g][0]._filter){l=this.filters[g][0]._filter()}var h;if(typeof l!="function"&&(h=(this.combos[j]||((this._col_combos&&this._col_combos[j])?this._col_combos[j]:((this._sub_trees&&this._sub_trees[j])?this._sub_trees[j][1]:false))))){if(h.values){j=h.values._dhx_find(l);l=(j==-1)?l:h.keys[j]}else{if(h.getOptionByLabel){l=(h.getOptionByLabel(l)?h.getOptionByLabel(l).value:l)}else{l=h[l]}}}e.push(l)}if(!this.callEvent("onFilterStart",[c,e])){return}this.filterBy(c,e);if(this._cssEven){this._fixAlterCss()}this.callEvent("onFilterEnd",[this.filters]);if(this._f_rowsBuffer&&this.rowsBuffer.length==this._f_rowsBuffer.length){this._f_rowsBuffer=null}};dhtmlXGridObject.prototype.makeFilter=function(g,c,b){if(!this.filters){this.filters=[]}if(typeof(g)!="object"){g=document.getElementById(g)}if(!g){return}var a=this;if(!g.style.width){g.style.width="90%"}if(g.tagName=="SELECT"){this.filters.push([g,c]);this._loadSelectOptins(g,c);g.onchange=function(){a.filterByAll()};if(_isIE){g.style.marginTop="1px"}this.attachEvent("onEditCell",function(j,h,l){this._build_m_order();if(j==2&&this.filters&&(this._m_order?(l==this._m_order[c]):(l==c))){this._loadSelectOptins(g,c)}return true})}else{if(g.tagName=="INPUT"){this.filters.push([g,c]);g.old_value=g.value="";g.onkeydown=function(){if(this._timer){window.clearTimeout(this._timer)}this._timer=window.setTimeout(function(){if(g.value!=g.old_value){a.filterByAll();g.old_value=g.value}},500)}}else{if(g.tagName=="DIV"){this.filters.push([g,c]);g.style.padding="0px";g.style.margin="0px";if(!window.dhx_globalImgPath){window.dhx_globalImgPath=this.imgURL}var e=new dhtmlXCombo(g,"_filter","90%");e.filterSelfA=e.filterSelf;e.filterSelf=function(){if(this.getSelectedIndex()==0){this.setComboText("")}this.filterSelfA.apply(this,arguments);this.optionsArr[0].hide(false)};e.enableFilteringMode(true);g.combo=e;g.value="";this._loadComboOptins(g,c);e.attachEvent("onChange",function(){g.value=e.getSelectedValue();if(g.value===null){g.value=""}a.filterByAll()})}}}if(g.parentNode){g.parentNode.className+=" filter"}this._filters_ready()};dhtmlXGridObject.prototype.findCell=function(h,l,e,g){var g=g||(function(m,j){return j.toString().toLowerCase().indexOf(m)!=-1});if(g===true){g=function(m,j){return j.toString().toLowerCase()==m}}var c=new Array();h=h.toString().toLowerCase();if(typeof e!="number"){e=e?1:0}if(!this.rowsBuffer.length){return c}for(var b=(l||0);b<this._cCount;b++){if(this._h2){this._h2.forEachChild(0,function(j){if(e&&c.length==e){return c}if(g(h,this._get_cell_value(j.buff,b))){c.push([j.id,b])}},this)}else{for(var a=0;a<this.rowsBuffer.length;a++){if(g(h,this._get_cell_value(this.rowsBuffer[a],b))){c.push([this.rowsBuffer[a].idd,b]);if(e&&c.length==e){return c}}}}if(typeof(l)!="undefined"){return c}}return c};dhtmlXGridObject.prototype.makeSearch=function(e,c,a){if(typeof(e)!="object"){e=document.getElementById(e)}if(!e){return}var b=this;if(e.tagName=="INPUT"){e.onkeypress=function(){if(this._timer){window.clearTimeout(this._timer)}this._timer=window.setTimeout(function(){if(e.value==""){return}var g=b.findCell(e.value,c,true,a);if(g.length){if(b._h2){b.openItem(g[0][0])}b.selectCell(b.getRowIndex(g[0][0]),(c||0))}},500)}}if(e.parentNode){e.parentNode.className+=" filter"}};dhtmlXGridObject.prototype._loadSelectOptins=function(g,j){var a=this.collectValues(j);var b=g.value;g.innerHTML="";g.options[0]=new Option("","");var h=this._filter_tr?this._filter_tr[j]:null;for(var e=0;e<a.length;e++){g.options[g.options.length]=new Option(h?h(a[e]):a[e],a[e])}g.value=b};dhtmlXGridObject.prototype.setSelectFilterLabel=function(b,a){if(!this._filter_tr){this._filter_tr=[]}this._filter_tr[b]=a};dhtmlXGridObject.prototype._loadComboOptins=function(e,h){if(!e.combo){return}var a=this.collectValues(h);e.combo.clearAll();var g=[["",""]];for(var b=0;b<a.length;b++){g.push([a[b],a[b]])}e.combo.addOption(g)};dhtmlXGridObject.prototype.refreshFilters=function(){if(!this.filters){return}for(var a=0;a<this.filters.length;a++){switch(this.filters[a][0].tagName.toLowerCase()){case"input":break;case"select":this._loadSelectOptins.apply(this,this.filters[a]);break;case"div":this._loadComboOptins.apply(this,this.filters[a]);break}}};dhtmlXGridObject.prototype._filters_ready=function(b,a){this.attachEvent("onXLE",this.refreshFilters);this.attachEvent("onSyncApply",this.refreshFilters);this.attachEvent("onRowCreated",function(g,e){if(this._f_rowsBuffer){for(var c=0;c<this._f_rowsBuffer.length;c++){if(this._f_rowsBuffer[c].idd==g){return this._f_rowsBuffer[c]=e}}}});this.attachEvent("onClearAll",function(){this._f_rowsBuffer=null;if(!this.hdr.rows.length){this.filters=[]}});this.attachEvent("onSetSizes",this._filters_resize_combo);this.attachEvent("onResize",this._filters_resize_combo);this._filters_ready=function(){}};dhtmlXGridObject.prototype._filters_resize_combo=function(){if(!this.filters){return}for(var a=0;a<this.filters.length;a++){if(this.filters[a][0].combo!=null){this.filters[a][0].combo.setSize(Math.round(this.filters[a][0].offsetWidth*90/100))}}return true};dhtmlXGridObject.prototype._in_header_text_filter=function(b,a){b.innerHTML="<input type='text'>";b.onclick=b.onmousedown=function(c){(c||event).cancelBubble=true;return true};b.onselectstart=function(){return(event.cancelBubble=true)};this.makeFilter(b.firstChild,a)};dhtmlXGridObject.prototype._in_header_text_filter_inc=function(b,a){b.innerHTML="<input type='text'>";b.onclick=b.onmousedown=function(c){(c||event).cancelBubble=true;return true};b.onselectstart=function(){return(event.cancelBubble=true)};this.makeFilter(b.firstChild,a);b.firstChild._filter=function(){if(b.firstChild.value==""){return""}return function(c){return(c.toString().toLowerCase().indexOf(b.firstChild.value.toLowerCase())==0)}};this._filters_ready()};dhtmlXGridObject.prototype._in_header_select_filter=function(b,a){b.innerHTML="<select></select>";b.onclick=function(c){(c||event).cancelBubble=true;return false};this.makeFilter(b.firstChild,a)};dhtmlXGridObject.prototype._in_header_select_filter_strict=function(c,b){c.innerHTML="<select style='width:90%; font-size:8pt; font-family:Tahoma;'></select>";c.onclick=function(g){(g||event).cancelBubble=true;return false};this.makeFilter(c.firstChild,b);var a=this.combos;c.firstChild._filter=function(){var e=c.firstChild.value;if(!e){return""}if(a[b]){e=a[b].keys[a[b].values._dhx_find(e)]}e=e.toLowerCase();return function(g){return(g.toString().toLowerCase()==e)}};this._filters_ready()};dhtmlXGridObject.prototype._in_header_combo_filter=function(b,a){b.innerHTML="<div style='width:100%; padding-left:2px; overflow:hidden; ' class='combo'></div>";b.onselectstart=function(){return(event.cancelBubble=true)};b.onclick=b.onmousedown=function(c){(c||event).cancelBubble=true;return true};this.makeFilter(b.firstChild,a)};dhtmlXGridObject.prototype._search_common=function(b,a){b.innerHTML="<input type='text' style='width:90%; '>";b.onclick=b.onmousedown=function(c){(c||event).cancelBubble=true;return true};b.onselectstart=function(){return(event.cancelBubble=true)}};dhtmlXGridObject.prototype._in_header_text_search=function(c,b,a){this._search_common(c,b);this.makeSearch(c.firstChild,b)};dhtmlXGridObject.prototype._in_header_text_search_strict=function(b,a){this._search_common(b,a);this.makeSearch(b.firstChild,a,true)};dhtmlXGridObject.prototype._in_header_numeric_filter=function(b,a){this._in_header_text_filter.call(this,b,a);b.firstChild._filter=function(){var c=this.value;var g;var j="==";var e=parseFloat(c.replace("=",""));var h=null;if(c){if(c.indexOf("..")!=-1){c=c.split("..");e=parseFloat(c[0]);h=parseFloat(c[1]);return function(l){if(l>=e&&l<=h){return true}return false}}g=c.match(/>=|<=|>|</);if(g){j=g[0];e=parseFloat(c.replace(j,""))}return Function("v"," if (v "+j+" "+e+" ) return true; return false;")}return""}};dhtmlXGridObject.prototype._in_header_master_checkbox=function(e,b,g){e.innerHTML=g[0]+"<input type='checkbox' />"+g[1];var a=this;e.getElementsByTagName("input")[0].onclick=function(h){a._build_m_order();var c=a._m_order?a._m_order[b]:b;var l=this.checked?1:0;a.forEachRowA(function(m){var j=this.cells(m,c);if(j.isCheckbox()&&!j.isDisabled()){j.setValue(l);j.cell.wasChanged=true}this.callEvent("onEditCell",[1,m,c,l]);this.callEvent("onCheckbox",[m,c,l]);this.callEvent("onCheck",[m,c,l])});(h||event).cancelBubble=true}};dhtmlXGridObject.prototype._in_header_stat_total=function(b,a,g){var e=function(){var m=0;this._build_m_order();var l=this._m_order?this._m_order[a]:a;for(var h=0;h<this.rowsBuffer.length;h++){var c=parseFloat(this._get_cell_value(this.rowsBuffer[h],l));m+=isNaN(c)?0:c}return this._maskArr[l]?this._aplNF(m,l):(Math.round(m*100)/100)};this._stat_in_header(b,e,a,g,g)};dhtmlXGridObject.prototype._in_header_stat_multi_total=function(g,e,m){var l=m[1].split(":");m[1]="";for(var b=0;b<l.length;b++){l[b]=parseInt(l[b])}var h=function(){var r=0;for(var o=0;o<this.rowsBuffer.length;o++){var n=1;for(var c=0;c<l.length;c++){n*=parseFloat(this._get_cell_value(this.rowsBuffer[o],l[c]))}r+=isNaN(n)?0:n}return this._maskArr[e]?this._aplNF(r,e):(Math.round(r*100)/100)};var a=[];for(var j=0;j<l.length;j++){a[l[j]]=true}this._stat_in_header(g,h,a,m,m)};dhtmlXGridObject.prototype._in_header_stat_max=function(b,a,g){var e=function(){this._build_m_order();var h=this._m_order?this._m_order[a]:a;var l=-999999999;if(this.getRowsNum()==0){return"&nbsp;"}for(var c=0;c<this.rowsBuffer.length;c++){l=Math.max(l,parseFloat(this._get_cell_value(this.rowsBuffer[c],h)))}return this._maskArr[a]?this._aplNF(l,a):l};this._stat_in_header(b,e,a,g)};dhtmlXGridObject.prototype._in_header_stat_min=function(b,a,g){var e=function(){this._build_m_order();var h=this._m_order?this._m_order[a]:a;var l=999999999;if(this.getRowsNum()==0){return"&nbsp;"}for(var c=0;c<this.rowsBuffer.length;c++){l=Math.min(l,parseFloat(this._get_cell_value(this.rowsBuffer[c],h)))}return this._maskArr[a]?this._aplNF(l,a):l};this._stat_in_header(b,e,a,g)};dhtmlXGridObject.prototype._in_header_stat_average=function(b,a,g){var e=function(){this._build_m_order();var l=this._m_order?this._m_order[a]:a;var n=0;var m=0;if(this.getRowsNum()==0){return"&nbsp;"}for(var h=0;h<this.rowsBuffer.length;h++){var c=parseFloat(this._get_cell_value(this.rowsBuffer[h],l));if(!isNaN(c)){n+=c;m++}}return this._maskArr[a]?this._aplNF(n/m,a):(Math.round(n/m*100)/100)};this._stat_in_header(b,e,a,g)};dhtmlXGridObject.prototype._in_header_stat_count=function(b,a,g){var e=function(){return this.getRowsNum()};this._stat_in_header(b,e,a,g)};dhtmlXGridObject.prototype._stat_in_header=function(b,e,a,j){var g=this;var h=function(){this.dma(true);b.innerHTML=(j[0]?j[0]:"")+e.call(this)+(j[1]?j[1]:"");this.dma(false);this.callEvent("onStatReady",[])};if(!this._stat_events){this._stat_events=[];this.attachEvent("onClearAll",function(){if(!this.hdr.rows[1]){for(var l=0;l<this._stat_events.length;l++){for(var c=0;c<4;c++){this.detachEvent(this._stat_events[l][c])}}this._stat_events=[]}})}this._stat_events.push([this.attachEvent("onGridReconstructed",h),this.attachEvent("onXLE",h),this.attachEvent("onFilterEnd",h),this.attachEvent("onEditCell",function(c,m,l){if(c==2&&(l==a||(a&&a[l]))){h.call(this)}return true})]);b.innerHTML=""};dhtmlXGridObject.prototype.loadCSVFile=function(b,a){this.load(b,a,"csv")};dhtmlXGridObject.prototype.enableCSVAutoID=function(a){this._csvAID=dhx4.s2b(a)};dhtmlXGridObject.prototype.enableCSVHeader=function(a){this._csvHdr=dhx4.s2b(a)};dhtmlXGridObject.prototype.setCSVDelimiter=function(a){this.csv.cell=a};dhtmlXGridObject.prototype._csvAID=true;dhtmlXGridObject.prototype.loadCSVString=function(a){this.parse(a,"csv")};dhtmlXGridObject.prototype.serializeToCSV=function(m){this.editStop();if(this._mathSerialization){this._agetm="getMathValue"}else{if(this._strictText||m){this._agetm="getTitle"}else{this._agetm="getValue"}}var h=[];if(this._csvHdr){for(var g=1;g<this.hdr.rows.length;g++){var b=[];for(var l=0;l<this._cCount;l++){if((!this._srClmn)||(this._srClmn[l])){b.push(this.getColumnLabel(l,g-1))}}h.push(this.csvParser.str(b,this.csv.cell,this.csv.row))}}var l=0;var e=this.rowsBuffer.length;for(l;l<e;l++){var c=this._serializeRowToCVS(null,l);if(c!=""){h.push(c)}}return this.csvParser.block(h,this.csv.row)};dhtmlXGridObject.prototype._serializeRowToCVS=function(a,m,c,j){var l=new Array();if(!a){a=this.render_row(m);if(this._fake&&!this._fake.rowsAr[a.idd]){this._fake.render_row(m)}}if(!this._csvAID){l[l.length]=a.idd}c=c||0;j=j||this._cCount;var o=false;var e=c;while(a.childNodes[c]._cellIndex>e&&c){c--}for(var n=c;e<j;n++){if(!a.childNodes[n]){break}var b=a.childNodes[n]._cellIndex;if(((!this._srClmn)||(this._srClmn[b]))&&(!this._serialize_visible||!this._hrrar[b])){var g=a.childNodes[n];var h=this.cells(a.idd,b);while(e!=b){e++;l.push("");if(e>=j){break}}if(e>=j){break}e++;if(h.cell){zxVal=h[this._agetm]()}else{zxVal=""}if((this._chAttr)&&(h.wasChanged())){o=true}l[l.length]=((zxVal===null)?"":zxVal);if(this._ecspn&&g.colSpan&&g.colSpan>1){g=g.colSpan-1;for(var s=0;s<g;s++){l[l.length]="";e++}}}else{e++}}if((this._onlChAttr)&&(!o)){return""}return this.csvParser.str(l,this.csv.cell,this.csv.row)};dhtmlXGridObject.prototype.toClipBoard=function(a){if(window.clipboardData){window.clipboardData.setData("Text",a)}else{(new Clipboard()).copy(a)}};dhtmlXGridObject.prototype.fromClipBoard=function(){if(window.clipboardData){return window.clipboardData.getData("Text")}else{return(new Clipboard()).paste()}};dhtmlXGridObject.prototype.cellToClipboard=function(c,b){if((!c)||(!b&&b!==0)){if(!this.selectedRows[0]){return}c=this.selectedRows[0].idd;b=this.cell._cellIndex}var a=this.cells(c,b);this.toClipBoard(((a.getLabel?a.getLabel():a.getValue())||"").toString())};dhtmlXGridObject.prototype.updateCellFromClipboard=function(c,b){if((!c)||(!b)){if(!this.selectedRows[0]){return}c=this.selectedRows[0].idd;b=this.cell._cellIndex}var a=this.cells(c,b);a[a.setImage?"setLabel":"setValue"](this.fromClipBoard())};dhtmlXGridObject.prototype.rowToClipboard=function(e){var a="";if(this._mathSerialization){this._agetm="getMathValue"}else{if(this._strictText){this._agetm="getTitle"}else{this._agetm="getValue"}}this._serialize_visible=!this._fake;if(e){a=this._serializeRowToCVS(this.getRowById(e))}else{var c=[];for(var b=0;b<this.selectedRows.length;b++){c[c.length]=this._serializeRowToCVS(this.selectedRows[b]);a=this.csvParser.block(c,this.csv.row)}}this._serialize_visible=false;this.toClipBoard(a)};dhtmlXGridObject.prototype.updateRowFromClipboard=function(g){var a=this.fromClipBoard();if(!a){return}if(g){var e=this.getRowById(g)}else{var e=this.selectedRows[0]}if(!e){return}var h=this.csvParser;a=h.unblock(a,this.csv.cell,this.csv.row)[0];if(!this._csvAID){a.splice(0,1)}for(var c=0;c<a.length;c++){var b=this.cells3(e,c);b[b.setImage?"setLabel":"setValue"](a[c])}};dhtmlXGridObject.prototype.csvParser={block:function(a,b){return a.join(b)},unblock:function(h,a,g){var e=(h||"").split(g);for(var b=0;b<e.length;b++){e[b]=(e[b]||"").split(a)}var c=e.length-1;if(e[c].length==1&&e[c][0]==""){e.splice(c,1)}return e},str:function(b,a,c){return b.join(a)}};dhtmlXGridObject.prototype.csvExtParser={_quote:RegExp('"',"g"),_quote_esc:RegExp('""',"g"),block:function(a,b){return a.join(b)},unblock:function(l,o,s){var c=[[]];var b=0;if(!l){return c}var m=/^[ ]*"/;var j=/"[ ]*$/;var a=new RegExp(".*"+s+".*$");var g=l.split(o);for(var e=0;e<g.length;e++){if(g[e].match(m)){var r=g[e].replace(m,"");while(!g[e].match(j)){e++;r+=g[e]}c[b].push(r.replace(j,"").replace(this._quote_esc,'"'))}else{if(g[e].match(a)){var h=g[e].indexOf(s);c[b].push(g[e].substr(0,h));b++;c[b]=[];g[e]=g[e].substr(h+1);e--}else{if(g[e]||e!=g.length-1){c[b].push(g[e])}}}}var n=c.length-1;if(n>0&&!c[n].length){c.splice(n,1)}return c},str:function(c,a,e){for(var b=0;b<c.length;b++){c[b]='"'+c[b].replace(this._quote,'""')+'"'}return c.join(a)}};dhtmlXGridObject.prototype.addRowFromClipboard=function(){var a=this.fromClipBoard();if(!a){return}var c=this.csvParser.unblock(a,this.csv.cell,this.csv.row);for(var b=0;b<c.length;b++){if(c[b]){a=c[b];if(!a.length){continue}if(this._csvAID){this.addRow(this.getRowsNum()+2,a)}else{if(this.rowsAr[a[0]]){a[0]=this.uid()}this.addRow(a[0],a.slice(1))}}}};dhtmlXGridObject.prototype.gridToClipboard=function(){this.toClipBoard(this.serializeToCSV())};dhtmlXGridObject.prototype.gridFromClipboard=function(){var a=this.fromClipBoard();if(!a){return}this.loadCSVString(a)};dhtmlXGridObject.prototype.getXLS=function(h){if(!this.xslform){this.xslform=document.createElement("FORM");this.xslform.action=(h||"")+"xls.php";this.xslform.method="post";this.xslform.target=(_isIE?"_blank":"");document.body.appendChild(this.xslform);var g=document.createElement("INPUT");g.type="hidden";g.name="csv";this.xslform.appendChild(g);var e=document.createElement("INPUT");e.type="hidden";e.name="csv_header";this.xslform.appendChild(e)}var j=this.serializeToCSV();this.xslform.childNodes[0].value=j;var c=[];var a=this._cCount;for(var b=0;b<a;b++){c.push(this.getHeaderCol(b))}c=c.join(",");this.xslform.childNodes[1].value=c;this.xslform.submit()};dhtmlXGridObject.prototype.printView=function(t,b){var o="<style>TD { font-family:Arial; text-align:center; padding-left:2px;padding-right:2px; } \n td.filter input, td.filter select { display:none; }	\n  </style>";var A=null;if(this._fake){A=[].concat(this._hrrar);for(var z=0;z<this._fake._cCount;z++){this._hrrar[z]=null}}var n=document.location.port;var r=document.location.hostname;o+="<base  href='"+(document.location.protocol+"//"+r+(n?(":"+n):"")+document.location.pathname)+"'></base>";if(!this.parentGrid){o+=(t||"")}o+='<table width="100%" border="2px" cellpadding="0" cellspacing="0">';var s=Math.max(this.rowsBuffer.length,this.rowsCol.length);var m=this._cCount;var u=this._printWidth();o+='<tr class="header_row_1">';for(var z=0;z<m;z++){if(this._hrrar&&this._hrrar[z]){continue}var g=this.hdr.rows[1].cells[this.hdr.rows[1]._childIndexes?this.hdr.rows[1]._childIndexes[parseInt(z)]:z];var a=(g.colSpan||1);var F=(g.rowSpan||1);for(var y=1;y<a;y++){u[z]+=u[y]}o+='<td rowspan="'+F+'" width="'+u[z]+'%" style="background-color:lightgrey;" colspan="'+a+'">'+this.getHeaderCol(z)+"</td>";z+=a-1}o+="</tr>";for(var z=2;z<this.hdr.rows.length;z++){if(_isIE){o+="<tr style='background-color:lightgrey' class='header_row_"+z+"'>";var e=this.hdr.rows[z].childNodes;for(var y=0;y<e.length;y++){if(!this._hrrar||!this._hrrar[e[y]._cellIndex]){o+=e[y].outerHTML}}o+="</tr>"}else{o+="<tr class='header_row_"+z+"' style='background-color:lightgrey'>"+(this._fake?this._fake.hdr.rows[z].innerHTML:"")+this.hdr.rows[z].innerHTML+"</tr>"}}for(var z=0;z<s;z++){o+="<tr>";if(this.rowsCol[z]&&this.rowsCol[z]._cntr){o+=this.rowsCol[z].innerHTML.replace(/<img[^>]*>/gi,"")+"</tr>";continue}if(this.rowsCol[z]&&this.rowsCol[z].style.display=="none"){continue}var l;if(this.rowsCol[z]){l=this.rowsCol[z].idd}else{if(this.rowsBuffer[z]){l=this.rowsBuffer[z].idd}else{continue}}for(var y=0;y<m;y++){if(this._hrrar&&this._hrrar[y]){continue}if(this.rowsAr[l]&&this.rowsAr[l].tagName=="TR"){var E=this.cells(l,y);if(E._setState){var v=""}else{if(E.getContent){v=E.getContent()}else{if(E.getImage||E.combo){var v=E.cell.innerHTML}else{var v=E.getValue()}}}}else{var v=this._get_cell_value(this.rowsBuffer[z],y)}var w=this.columnColor[y]?"background-color:"+this.columnColor[y]+";":"";var x=this.cellAlign[y]?"text-align:"+this.cellAlign[y]+";":"";var C=E.getAttribute("colspan");o+='<td style="'+w+x+'" '+(C?'colSpan="'+C+'"':"")+">"+(v===""?"&nbsp;":v)+"</td>";if(C){y+=C-1}}o+="</tr>";if(this.rowsCol[z]&&this.rowsCol[z]._expanded){var h=this.cells4(this.rowsCol[z]._expanded.ctrl);if(h.getSubGrid){o+='<tr><td colspan="'+m+'">'+h.getSubGrid().printView()+"</td></tr>"}else{o+='<tr><td colspan="'+m+'">'+this.rowsCol[z]._expanded.innerHTML+"</td></tr>"}}}if(this.ftr){for(var z=1;z<this.ftr.childNodes[0].rows.length;z++){o+="<tr style='background-color:lightgrey'>"+((this._fake)?this._fake.ftr.childNodes[0].rows[z].innerHTML:"")+this.ftr.childNodes[0].rows[z].innerHTML+"</tr>"}}o+="</table>";if(this.parentGrid){return o}o+=(b||"");var D=window.open("","_blank");D.document.write(o);D.document.write("<script>window.onerror=function(){return true;}<\/script>");D.document.close();if(this._fake){this._hrrar=A}};dhtmlXGridObject.prototype._printWidth=function(){var g=[];var e=0;for(var c=0;c<this._cCount;c++){var a=this.getColWidth(c);g.push(a);e+=a}var j=[];var b=0;for(var c=0;c<g.length;c++){var h=Math.floor((g[c]/e)*100);b+=h;j.push(h)}j[j.length-1]+=100-b;return j};dhtmlXGridObject.prototype.enableBlockSelection=function(c){if(typeof this._bs_mode=="undefined"){var a=this;this.obj.onmousedown=function(g){if(a._bs_mode){a._OnSelectionStart((g||event),this)}return true};this._CSVRowDelimiter=this.csv.row;this.attachEvent("onResize",function(){a._HideSelection();return true});this.attachEvent("onGridReconstructed",function(){a._HideSelection();return true});this.attachEvent("onFilterEnd",this._HideSelection)}if(c===false){this._bs_mode=false;return this._HideSelection()}else{this._bs_mode=true}if(!window.dhx4.isIPad){var b=this._clip_area=document.createElement("textarea");b.className="dhx_tab_ignore";b.style.cssText="position:absolute; width:1px; height:1px; overflow:hidden; color:transparent; background-color:transparent; bottom:1px; right:1px; border:none;";b.onkeydown=function(g){g=g||event;if(g.keyCode==86&&(g.ctrlKey||g.metaKey)){a.pasteBlockFromClipboard()}};document.body.insertBefore(this._clip_area,document.body.firstChild);dhtmlxEvent(this.entBox,"click",function(){if(!a.editor&&a._clip_area){a._clip_area.select()}})}};dhtmlXGridObject.prototype.forceLabelSelection=function(a){this._strictText=dhx4.s2b(a)};dhtmlXGridObject.prototype.selectBlock=function(e,c,b,a){c=this.getRowIndex(c);a=this.getRowIndex(a);this._CreateSelection(c,e);this._selectionArea=this._RedrawSelectionPos(this.cells2(c,e).cell,this.cells2(a,b).cell);this._ShowSelection()};dhtmlXGridObject.prototype._OnSelectionStart=function(c,e){var b=this;if(c.button==2){return}var g=c.srcElement||c.target;if(this.editor){if(g.tagName&&(g.tagName=="INPUT"||g.tagName=="TEXTAREA")){return}this.editStop()}b.setActive(true);var j=this.getPosition(this.obj);var a=c.clientX-j[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0));var h=c.clientY-j[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));this._CreateSelection(a-4,h-4);if(g==this._selectionObj){this._HideSelection();this._startSelectionCell=null}else{while(g&&(!g.tagName||g.tagName.toLowerCase()!="td")){g=g.parentNode}this._startSelectionCell=g}if(this._startSelectionCell){if(!this.callEvent("onBeforeBlockSelected",[this._startSelectionCell.parentNode.idd,this._startSelectionCell._cellIndex])){return this._startSelectionCell=null}}this.obj.onmousedown=null;this.obj[_isIE?"onmouseleave":"onmouseout"]=function(l){if(b._blsTimer){window.clearTimeout(b._blsTimer)}};this.obj.onmmold=this.obj.onmousemove;this._init_pos=[a,h];this._selectionObj.onmousemove=this.obj.onmousemove=function(l){l=l||c;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}b._OnSelectionMove(l)};this._oldDMP=document.body.onmouseup;document.body.onmouseup=function(l){l=l||c;b._OnSelectionStop(l,this);return true};this.callEvent("onBeforeBlockSelection",[]);document.body.onselectstart=function(){return false}};dhtmlXGridObject.prototype._getCellByPos=function(a,e){a=a;if(this._fake){a+=this._fake.objBox.scrollWidth}e=e;var b=0;for(var c=0;c<this.obj.rows.length;c++){e-=this.obj.rows[c].offsetHeight;if(e<=0){b=this.obj.rows[c];break}}if(!b||!b.idd){return null}for(var c=0;c<this._cCount;c++){a-=this.getColWidth(c);if(a<=0){while(true){if(b._childIndexes&&b._childIndexes[c+1]==b._childIndexes[c]){b=b.previousSibling}else{return this.cells(b.idd,c).cell}}}}return null};dhtmlXGridObject.prototype._OnSelectionMove=function(g){var w=this;this._ShowSelection();var r=this.getPosition(this.obj);var l=g.clientX-r[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0));var j=g.clientY-r[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));if((Math.abs(this._init_pos[0]-l)<5)&&(Math.abs(this._init_pos[1]-j)<5)){return this._HideSelection()}var u=this._endSelectionCell;if(this._startSelectionCell==null){this._endSelectionCell=this._startSelectionCell=this.getFirstParentOfType(g.srcElement||g.target,"TD")}else{if(g.srcElement||g.target){if((g.srcElement||g.target).className=="dhtmlxGrid_selection"){this._endSelectionCell=(this._getCellByPos(l,j)||this._endSelectionCell)}else{var v=this.getFirstParentOfType(g.srcElement||g.target,"TD");if(v.parentNode.idd){this._endSelectionCell=v}}}}if(this._endSelectionCell){if(!this.callEvent("onBeforeBlockSelected",[this._endSelectionCell.parentNode.idd,this._endSelectionCell._cellIndex])){this._endSelectionCell=u}}var h=this.objBox.scrollLeft+this.objBox.clientWidth;var c=this.objBox.scrollTop+this.objBox.clientHeight;var n=this.objBox.scrollLeft;var m=this.objBox.scrollTop;var e=false;if(this._blsTimer){window.clearTimeout(this._blsTimer)}if(l+20>=h){this.objBox.scrollLeft=this.objBox.scrollLeft+20;e=true}else{if(l-20<n){this.objBox.scrollLeft=this.objBox.scrollLeft-20;e=true}}if(j+20>=c&&!this._realfake){this.objBox.scrollTop=this.objBox.scrollTop+20;e=true}else{if(j-20<m&&!this._realfake){this.objBox.scrollTop=this.objBox.scrollTop-20;e=true}}this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._endSelectionCell);if(e){var s=g.clientX;var o=g.clientY;this._blsTimer=window.setTimeout(function(){w._OnSelectionMove({clientX:s,clientY:o})},100)}};dhtmlXGridObject.prototype._OnSelectionStop=function(b){var a=this;if(this._blsTimer){window.clearTimeout(this._blsTimer)}this.obj.onmousedown=function(g){if(a._bs_mode){a._OnSelectionStart((g||b),this)}return true};this.obj.onmousemove=this.obj.onmmold||null;this._selectionObj.onmousemove=null;document.body.onmouseup=this._oldDMP||null;if(parseInt(this._selectionObj.style.width)<2&&parseInt(this._selectionObj.style.height)<2){this._HideSelection()}else{var c=this.getFirstParentOfType(b.srcElement||b.target,"TD");if((!c)||(!c.parentNode.idd)){c=this._endSelectionCell}while(c&&(!c.tagName||c.tagName.toLowerCase()!="td")){c=c.parentNode}if(!c){return this._HideSelection()}this._stopSelectionCell=c;this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._stopSelectionCell);this.callEvent("onBlockSelected",[])}document.body.onselectstart=function(){}};dhtmlXGridObject.prototype._RedrawSelectionPos=function(r,j){if(r.parentNode.grid!=j.parentNode.grid){return this._selectionArea}var n={};n.LeftTopCol=r._cellIndex;n.LeftTopRow=this.getRowIndex(r.parentNode.idd);n.RightBottomCol=j._cellIndex;n.RightBottomRow=this.getRowIndex(j.parentNode.idd);var e=r.offsetWidth;var c=r.offsetHeight;r=this.getPosition(r,this.obj);var s=j.offsetWidth;var l=j.offsetHeight;j=this.getPosition(j,this.obj);if(r[0]<j[0]){var g=r[0];var h=j[0]+s}else{var m=n.RightBottomCol;n.RightBottomCol=n.LeftTopCol;n.LeftTopCol=m;var g=j[0];var h=r[0]+e}if(r[1]<j[1]){var o=r[1];var a=j[1]+l}else{var m=n.RightBottomRow;n.RightBottomRow=n.LeftTopRow;n.LeftTopRow=m;var o=j[1];var a=r[1]+c}var t=h-g;var b=a-o;this._selectionObj.style.left=g+"px";this._selectionObj.style.top=o+"px";this._selectionObj.style.width=t+"px";this._selectionObj.style.height=b+"px";return n};dhtmlXGridObject.prototype._CreateSelection=function(a,c){if(this._selectionObj==null){var b=document.createElement("div");b.style.position="absolute";b.style.display="none";b.className="dhtmlxGrid_selection";this._selectionObj=b;this._selectionObj.onmousedown=function(g){g=g||event;if(g.button==2||(_isMacOS&&g.ctrlKey)){return this.parentNode.grid.callEvent("onBlockRightClick",["BLOCK",g])}};this._selectionObj.oncontextmenu=function(g){(g||event).cancelBubble=true;return false};this.objBox.appendChild(this._selectionObj)}this._selectionObj.style.width="0px";this._selectionObj.style.height="0px";this._selectionObj.style.left=a+"px";this._selectionObj.style.top=c+"px";this._selectionObj.startX=a;this._selectionObj.startY=c};dhtmlXGridObject.prototype._ShowSelection=function(){if(this._selectionObj){this._selectionObj.style.display=""}};dhtmlXGridObject.prototype._HideSelection=function(){if(this._selectionObj){this._selectionObj.style.display="none"}this._selectionArea=null;if(this._clip_area){this._clip_area.value="";this._clip_area.blur()}};dhtmlXGridObject.prototype.copyBlockToClipboard=function(){if(!this._clip_area){return}if(this._selectionArea!=null){var c=new Array();if(this._mathSerialization){this._agetm="getMathValue"}else{if(this._strictText){this._agetm="getTitle"}else{this._agetm="getValue"}}this._serialize_visible=true;for(var a=this._selectionArea.LeftTopRow;a<=this._selectionArea.RightBottomRow;a++){var b=this._serializeRowToCVS(this.rowsBuffer[a],null,this._selectionArea.LeftTopCol,this._selectionArea.RightBottomCol+1);if(!this._csvAID){c[c.length]=b.substr(b.indexOf(this.csv.cell)+1)}else{c[c.length]=b}}c=c.join(this._CSVRowDelimiter);this._clip_area.value=c;this._clip_area.select();this._serialize_visible=false}};dhtmlXGridObject.prototype.pasteBlockFromClipboard=function(){if(!this._clip_area){return}this._clip_area.select();var a=this;window.setTimeout(function(){a._pasteBlockFromClipboard();a=null},1)};dhtmlXGridObject.prototype._pasteBlockFromClipboard=function(){var h=this._clip_area.value;if(!h){return}if(this._selectionArea!=null){var u=this._selectionArea.LeftTopRow;var a=this._selectionArea.LeftTopCol}else{if(this.cell!=null&&!this.editor){var u=this.getRowIndex(this.cell.parentNode.idd);var a=this.cell._cellIndex}else{return false}}h=this.csvParser.unblock(h,this.csv.cell,this.csv.row);var m=u+h.length;var s=a+h[0].length;if(s>this._cCount){s=this._cCount}var e=0;for(var o=u;o<m;o++){var v=this.render_row(o);if(v==-1){continue}var c=0;for(var g=a;g<s;g++){if(this._hrrar[g]&&!this._fake){s=Math.min(s+1,this._cCount);continue}var r=this.cells3(v,g);if(r.isDisabled()){c++;continue}if(this._onEditUndoRedo){this._onEditUndoRedo(2,v.idd,g,h[e][c],r.getValue())}if(r.combo){var t=r.combo.values;for(var b=0;b<t.length;b++){if(h[e][c]==t[b]){r.setValue(r.combo.keys[b]);t=null;break}}if(t!=null&&r.editable){r.setValue(h[e][c++])}else{c++}}else{r[r.setImage?"setLabel":"setValue"](h[e][c++])}r.cell.wasChanged=true}this.callEvent("onRowPaste",[v.idd]);e++}};dhtmlXGridObject.prototype.getSelectedBlock=function(){if(this._selectionArea){return this._selectionArea}else{if(this.getSelectedRowId()!==null){return{LeftTopRow:this.getSelectedRowId(),LeftTopCol:this.getSelectedCellIndex(),RightBottomRow:this.getSelectedRowId(),RightBottomCol:this.getSelectedCellIndex()}}else{return null}}};dhtmlXGridObject.prototype.enableSmartRendering=function(c,b,a){if(arguments.length>2){if(b&&!this.rowsBuffer[b-1]){this.rowsBuffer[b-1]=0}b=a}this._srnd=dhx4.s2b(c);this._srdh=this._srdh||20;this._dpref=b||0};dhtmlXGridObject.prototype.enablePreRendering=function(a){this._srnd_pr=parseInt(a||50)};dhtmlXGridObject.prototype.forceFullLoading=function(a,g){for(var c=0;c<this.rowsBuffer.length;c++){if(!this.rowsBuffer[c]){var e=a||(this.rowsBuffer.length-c);if(this.callEvent("onDynXLS",[c,e])){var b=this;this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+c+"&count="+e,function(){window.setTimeout(function(){b.forceFullLoading(a,g)},100)},this._data_type)}return}}if(g){g.call(this)}};dhtmlXGridObject.prototype.setAwaitedRowHeight=function(a){this._srdh=parseInt(a)};dhtmlXGridObject.prototype._get_view_size=function(){return Math.floor(parseInt(this.entBox.offsetHeight)/this._srdh)+2};dhtmlXGridObject.prototype._add_filler=function(j,a,b,e){if(!a){return null}var h="__filler__";var g=this._prepareRow(h);g.firstChild.style.width="1px";g.firstChild.style.borderWidth=g.firstChild.style.padding=g.firstChild.style.margin="0px";for(var c=1;c<g.childNodes.length;c++){g.childNodes[c].style.display="none"}g.firstChild.style.height=a*this._srdh+"px";b=b||this.rowsCol[j];if(b&&b.nextSibling){b.parentNode.insertBefore(g,b.nextSibling)}else{if(_isKHTML){this.obj.appendChild(g)}else{this.obj.rows[0].parentNode.appendChild(g)}}this.callEvent("onAddFiller",[j,a,g,b,e]);return[j,a,g]};dhtmlXGridObject.prototype._update_srnd_view=function(){var h=Math.floor(this.objBox.scrollTop/this._srdh);var b=h+this._get_view_size();if(this.multiLine){var l=this.objBox.scrollTop;h=0;while(l>0){l-=this.rowsCol[h]?this.rowsCol[h].offsetHeight:this._srdh;h++}b=h+this._get_view_size();if(h>0){h--}}b+=(this._srnd_pr||0);if(b>this.rowsBuffer.length){b=this.rowsBuffer.length}for(var e=h;e<b;e++){if(!this.rowsCol[e]){var g=this._add_from_buffer(e);if(g==-1){if(this.xmlFileUrl){if(this._dpref&&this.rowsBuffer[b-1]){var c=this._dpref?this._dpref:(b-e);var a=Math.max(0,Math.min(e,b-this._dpref));this._current_load=[a,b-a]}else{this._current_load=[e,(this._dpref?this._dpref:(b-e))]}if(this.callEvent("onDynXLS",this._current_load)){this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+this._current_load[0]+"&count="+this._current_load[1],this._data_type)}}return}else{if(this._tgle){this._updateLine(this._h2.get[this.rowsBuffer[e].idd],this.rowsBuffer[e]);this._updateParentLine(this._h2.get[this.rowsBuffer[e].idd],this.rowsBuffer[e])}if(e&&e==(this._realfake?this._fake:this)["_r_select"]){this.selectCell(e,this.cell?this.cell._cellIndex:0,true)}}}}if(this._fake&&!this._realfake&&this.multiLine){this._fake.objBox.scrollTop=this.objBox.scrollTop}};dhtmlXGridObject.prototype._add_from_buffer=function(e){var g=this.render_row(e);if(g==-1){return -1}if(g._attrs.selected||g._attrs.select){this.selectRow(g,false,true);g._attrs.selected=g._attrs.select=null}if(!this._cssSP){if(this._cssEven&&e%2==0){g.className=this._cssEven+((g.className.indexOf("rowselected")!=-1)?" rowselected ":" ")+(g._css||"")}else{if(this._cssUnEven&&e%2==1){g.className=this._cssUnEven+((g.className.indexOf("rowselected")!=-1)?" rowselected ":" ")+(g._css||"")}}}else{if(this._h2){var a=this._h2.get[g.idd];g.className+=" "+((a.level%2)?(this._cssUnEven+" "+this._cssUnEven):(this._cssEven+" "+this._cssEven))+"_"+a.level+(this.rowsAr[a.id]._css||"")}}for(var b=0;b<this._fillers.length;b++){var c=this._fillers[b];if(c&&c[0]<=e&&(c[0]+c[1])>e){var h=e-c[0];if(h==0){this._insert_before(e,g,c[2]);this._update_fillers(b,-1,1)}else{if(h==c[1]-1){this._insert_after(e,g,c[2]);this._update_fillers(b,-1,0)}else{this._fillers.push(this._add_filler(e+1,c[1]-h-1,c[2],1));this._insert_after(e,g,c[2]);this._update_fillers(b,-c[1]+h,0)}}return}}};dhtmlXGridObject.prototype._update_fillers=function(c,a,e){var b=this._fillers[c];b[1]=b[1]+a;b[0]=b[0]+e;if(!b[1]){this.callEvent("onRemoveFiller",[b[2]]);b[2].parentNode.removeChild(b[2]);this._fillers.splice(c,1)}else{b[2].firstChild.style.height=parseFloat(b[2].firstChild.style.height)+a*this._srdh+"px";this.callEvent("onUpdateFiller",[b[2]])}};dhtmlXGridObject.prototype._insert_before=function(b,c,a){a.parentNode.insertBefore(c,a);this.rowsCol[b]=c;this.callEvent("onRowInserted",[c,null,a,"before"])};dhtmlXGridObject.prototype._insert_after=function(b,c,a){if(a.nextSibling){a.parentNode.insertBefore(c,a.nextSibling)}else{a.parentNode.appendChild(c)}this.rowsCol[b]=c;this.callEvent("onRowInserted",[c,null,a,"after"])};if(typeof(window.dhtmlxValidation)!="undefined"){dhtmlxValidation.trackInput=function(c,e,b,a){dhtmlxEvent(c,"keyup",function(g){if(dhtmlxValidation._timer){window.clearTimeout(dhtmlxValidation._timer);dhtmlxValidation._timer=null}dhtmlxValidation._timer=window.setTimeout(function(){if(!dhtmlxValidation.checkInput(c,e)){if(!b||b(c,c.value,e)){c.className+=" dhtmlx_live_validation_error"}}else{c.className=c.className.replace(/[ ]*dhtmlx_live_validation_error/g,"");if(a){a(c,c.value,e)}}},250)})};dhtmlxValidation.checkInput=function(a,b){return dhtmlxValidation.checkValue(a.value,b)};dhtmlxValidation.checkValue=function(c,e){if(typeof e=="string"){e=e.split(",")}var a=true;for(var b=0;b<e.length;b++){if(!this["is"+e[b]]){alert("Incorrect validation rule: "+e[b])}else{a=a&&this["is"+e[b]](c)}}return a}}dhtmlXGridObject.prototype.enableValidation=function(b,a){b=dhx4.s2b(b);if(b){this._validators={data:[]}}else{this._validators=false}if(arguments.length>1){this._validators._live=a}if(!this._validators._event){this._validators._event=this.attachEvent("onEditCell",this.validationEvent)}};dhtmlXGridObject.prototype.setColValidators=function(a){if(!this._validators){this.enableValidation(true)}if(typeof a=="string"){a=a.split(this.delim)}this._validators.data=a};dhtmlXGridObject.prototype.validationEvent=function(h,b,e,c,l){var m=this._validators;if(!m){return true}var j=(m.data[e]||this.cells(b,e).getAttribute("validate"))||"";if(h==1&&j){var g=this.editor||(this._fake||{}).editor;if(!g){return true}g.cell.className=g.cell.className.replace(/[ ]*dhtmlx_validation_error/g,"");if(m._live){var a=this;dhtmlxValidation.trackInput(g.getInput(),j,function(n,o,r){return a.callEvent("onLiveValidationError",[b,e,o,n,r])},function(n,o,r){return a.callEvent("onLiveValidationCorrect",[b,e,o,n,r])})}}if(h==2){this.validateCell(b,e,j,c)}return true};dhtmlXGridObject.prototype.validateCell=function(j,g,h,e){h=h||(this._validators.data[g]||this.cells(j,g).getAttribute("validate"));e=e||this.cells(j,g).getValue();if(!h){return}var b=this.cells(j,g).cell;var a=true;if(typeof h=="string"){h=h.split(this.delim)}for(var c=0;c<h.length;c++){if(!dhtmlxValidation.checkValue(e,h[c])){if(this.callEvent("onValidationError",[j,g,e,h[c]])){b.className+=" dhtmlx_validation_error"}a=false}}if(a){this.callEvent("onValidationCorrect",[j,g,e,h]);b.className=b.className.replace(/[ ]*dhtmlx_validation_error/g,"")}return a};function eXcell_stree(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._sub_trees){return}this._sub=this.grid._sub_trees[a._cellIndex];if(!this._sub){return}this._sub=this._sub[0]}this.getValue=function(){return this.cell._val};this.setValue=function(b){this.cell._val=b;b=this._sub.getItemText(this.cell._val);this.setCValue((b||"&nbsp;"),b)};this.edit=function(){this._sub.parentObject.style.display="block";var c=this.grid.getPosition(this.cell);this._sub.parentObject.style.top=c[1]+"px";this._sub.parentObject.style.left=c[0]+"px";this._sub.parentObject.style.position="absolute";var b=this.grid.editStop;this.grid.editStop=function(){};this.grid.editStop=b};this.detach=function(){this._sub.parentObject.style.display="none";if(this.grid._sub_id!=null){var b=this.cell._val;this.setValue(this._sub.getSelectedItemId());this.grid._sub_id=null;return this.cell._val!=b}}}eXcell_stree.prototype=new eXcell;dhtmlXGridObject.prototype.setSubTree=function(a,b){if(!this._sub_trees){this._sub_trees=[]}this._sub_trees[b]=[a];a.parentObject.style.display="none";var c=this;a.parentObject.onclick=function(e){(e||window.event).cancelBubble=true;return false};a.ev_onDblClick=null;a.attachEvent("onDblClick",function(e){c._sub_id=e;c.editStop();return true});a._chRRS=true};function eXcell_link(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.isDisabled=function(){return true};this.edit=function(){};this.getValue=function(){if(this.cell.firstChild.getAttribute){var b=this.cell.firstChild.getAttribute("target");return this.cell.firstChild.innerHTML+"^"+this.cell.firstChild.getAttribute("href")+(b?("^"+b):"")}else{return""}};this.setValue=function(c){if((typeof(c)!="number")&&(!c||c.toString()._dhx_trim()=="")){this.setCValue("&nbsp;",b);return(this.cell._clearCell=true)}var b=c.split("^");if(b.length==1){b[1]=""}else{if(b.length>1){b[1]="href='"+b[1]+"'";if(b.length==3){b[1]+=" target='"+b[2]+"'"}else{b[1]+=" target='_blank'"}}}this.setCValue("<a "+b[1]+" onclick='(_isIE?event:arguments[0]).cancelBubble = true;'>"+b[0]+"</a>",b)}}eXcell_link.prototype=new eXcell;eXcell_link.prototype.getTitle=function(){var a=this.cell.firstChild;return((a&&a.tagName)?a.getAttribute("href"):"")};eXcell_link.prototype.getContent=function(){var a=this.cell.firstChild;return((a&&a.tagName)?a.innerHTML:"")};function eXcell_grid(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._sub_grids){return}this._sub=this.grid._sub_grids[a._cellIndex];if(!this._sub){return}this._sindex=this._sub[1];this._sub=this._sub[0]}this.getValue=function(){return this.cell.val};this.setValue=function(b){this.cell.val=b;if(this._sub.getRowById(b)){b=this._sub.cells(b,this._sindex);if(b){b=b.getValue()}else{b=""}}this.setCValue((b||"&nbsp;"),b)};this.edit=function(){this.val=this.cell.val;this._sub.entBox.style.display="block";var c=this.grid.getPosition(this.cell);this._sub.entBox.style.top=c[1]+"px";this._sub.entBox.style.left=c[0]+"px";this._sub.entBox.style.position="absolute";this._sub.setSizes();var b=this.grid.editStop;this.grid.editStop=function(){};if(this._sub.getRowById(this.cell.val)){this._sub.setSelectedRow(this.cell.val)}this._sub.setActive(true);this.grid.editStop=b};this.detach=function(){var b=this.cell.val;this._sub.entBox.style.display="none";if(this._sub.getSelectedId()===null){return false}this.setValue(this._sub.getSelectedId());this.grid.setActive(true);return this.cell.val!=b}}eXcell_grid.prototype=new eXcell;dhtmlXGridObject.prototype.setSubGrid=function(b,a,e){if(!this._sub_grids){this._sub_grids=[]}this._sub_grids[a]=[b,e];b.entBox.style.display="none";var c=this;b.entBox.onclick=function(g){(g||window.event).cancelBubble=true;return false};b.attachEvent("onRowSelect",function(g){c.editStop();return true});b._chRRS=false};function eXcell_dhxCalendar(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._grid_calendarA){var c=this.grid._grid_calendarA=new dhtmlxCalendarObject();this.grid.callEvent("onDhxCalendarCreated",[c]);var b=this.grid;c.attachEvent("onClick",function(){this._last_operation_calendar=true;window.setTimeout(function(){b.editStop()},1);return true});var e=function(g){(g||event).cancelBubble=true};dhtmlxEvent(c.base,"click",e);c=null}}}eXcell_dhxCalendar.prototype=new eXcell;eXcell_dhxCalendar.prototype.edit=function(){var b=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(false,false);var c=0;if(!window.innerHeight||(b[1]+this.grid._grid_calendarA.base.offsetHeight+this.cell.offsetHeight<window.innerHeight)){c=b[1]+this.cell.offsetHeight}else{c=b[1]-(this.grid._grid_calendarA.base.offsetHeight)}var e=b[0];if(window.innerWidth&&(e+this.grid._grid_calendarA.base.clientWidth+this.cell.offsetWidth>window.innerWidth)){e=window.innerWidth-this.grid._grid_calendarA.base.clientWidth}this.grid._grid_calendarA.setPosition(e,c);this.grid._grid_calendarA._last_operation_calendar=false;this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]);this.cell._cediton=true;this.val=this.cell.val;this._val=this.cell.innerHTML;var a=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){};this.grid._grid_calendarA.setDateFormat((this.grid._dtmask||"%d/%m/%Y"));this.grid._grid_calendarA.setDate(this.val||(new Date()));this.grid._grid_calendarA.draw=a};eXcell_dhxCalendar.prototype.getDate=function(){if(this.cell.val){return this.cell.val}return null};eXcell_dhxCalendar.prototype.getValue=function(){if(this.cell._clearCell){return""}if(this.grid._dtmask_inc&&this.cell.val){return this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString()}return this.cell.innerHTML.toString()._dhx_trim()};eXcell_dhxCalendar.prototype.detach=function(){if(!this.grid._grid_calendarA){return}this.grid._grid_calendarA.hide();if(this.cell._cediton){this.cell._cediton=false}else{return}if(this.grid._grid_calendarA._last_operation_calendar){var c=this.grid._grid_calendarA.getFormatedDate((this.grid._dtmask||"%d/%m/%Y"));var b=this.grid._grid_calendarA.getDate();this.cell.val=new Date(b);this.setCValue(c,b);this.cell._clearCell=!c;var a=this.val;this.val=this._val;return(this.cell.val.valueOf()!=(a||"").valueOf())}return false};eXcell_dhxCalendar.prototype.setValue=function(a){if(a&&typeof a=="object"){this.cell.val=a;this.cell._clearCell=false;this.setCValue(this.grid._grid_calendarA.getFormatedDate((this.grid._dtmask||"%d/%m/%Y"),a).toString(),this.cell.val);return}if(!a||a.toString()._dhx_trim()==""){a="&nbsp";this.cell._clearCell=true;this.cell.val=""}else{this.cell._clearCell=false;this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate((this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y"),a.toString(),null,true));if(this.grid._dtmask_inc){a=this.grid._grid_calendarA.getFormatedDate((this.grid._dtmask||"%d/%m/%Y"),this.cell.val)}}if((this.cell.val=="NaN")||(this.cell.val=="Invalid Date")){this.cell._clearCell=true;this.cell.val=new Date();this.setCValue("&nbsp;",0)}else{this.setCValue((a||"").toString(),this.cell.val)}};function eXcell_dhxCalendarA(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._grid_calendarA){var c=this.grid._grid_calendarA=new dhtmlxCalendarObject();this.grid.callEvent("onDhxCalendarCreated",[c]);var b=this.grid;c.attachEvent("onClick",function(){this._last_operation_calendar=true;window.setTimeout(function(){b.editStop()},1);return true});var e=function(g){(g||event).cancelBubble=true};dhtmlxEvent(c.base,"click",e)}}}eXcell_dhxCalendarA.prototype=new eXcell;eXcell_dhxCalendarA.prototype.edit=function(){var b=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(false,false);this.grid._grid_calendarA.setPosition(b[0]*1+this.cell.offsetWidth,b[1]*1);this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid._grid_calendarA._last_operation_calendar=false;this.cell._cediton=true;this.val=this.cell.val;this._val=this.cell.innerHTML;var a=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){};this.grid._grid_calendarA.setDateFormat((this.grid._dtmask||"%d/%m/%Y"));this.grid._grid_calendarA.setDate(this.val);this.grid._grid_calendarA.draw=a;this.cell.atag=((!this.grid.multiLine)&&(_isKHTML||_isMacOS||_isFF))?"INPUT":"TEXTAREA";this.obj=document.createElement(this.cell.atag);this.obj.style.height=(this.cell.offsetHeight-4)+"px";this.obj.className="dhx_combo_edit";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.align;this.obj.onclick=function(c){(c||event).cancelBubble=true};this.obj.onmousedown=function(c){(c||event).cancelBubble=true};this.obj.value=this.getValue();this.cell.innerHTML="";this.cell.appendChild(this.obj);if(window.dhx4.isIE){this.obj.style.overflow="visible";if((this.grid.multiLine)&&(this.obj.offsetHeight>=18)&&(this.obj.offsetHeight<40)){this.obj.style.height="36px";this.obj.style.overflow="scroll"}}this.obj.onselectstart=function(c){if(!c){c=event}c.cancelBubble=true;return true};this.obj.focus();this.obj.focus()};eXcell_dhxCalendarA.prototype.getDate=function(){if(this.cell.val){return this.cell.val}return null};eXcell_dhxCalendarA.prototype.getValue=function(){if(this.cell._clearCell){return""}if(this.grid._dtmask_inc&&this.cell.val){return this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString()}return this.cell.innerHTML.toString()._dhx_trim()};eXcell_dhxCalendarA.prototype.detach=function(){if(!this.grid._grid_calendarA){return}this.grid._grid_calendarA.hide();if(this.cell._cediton){this.cell._cediton=false}else{return}if(this.grid._grid_calendarA._last_operation_calendar){this.grid._grid_calendarA._last_operation_calendar=false;var c=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y");var b=this.grid._grid_calendarA.getDate();this.cell.val=new Date(b);this.setCValue(c,b);this.cell._clearCell=!c;var a=this.val;this.val=this._val;return(this.cell.val.valueOf()!=(a||"").valueOf())}this.setValue(this.obj.value);var a=this.val;this.val=this._val;return(this.cell.val.valueOf()!=(a||"").valueOf())};eXcell_dhxCalendarA.prototype.setValue=function(a){if(a&&typeof a=="object"){this.cell.val=a;this.cell._clearCell=false;this.setCValue(this.grid._grid_calendarA.getFormatedDate((this.grid._dtmask||"%d/%m/%Y"),a).toString(),this.cell.val);return}if(!a||a.toString()._dhx_trim()==""){a="&nbsp";this.cell._clearCell=true;this.cell.val=""}else{this.cell._clearCell=false;this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate((this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y"),a.toString(),null,true));if(this.grid._dtmask_inc){a=this.grid._grid_calendarA.getFormatedDate((this.grid._dtmask||"%d/%m/%Y"),this.cell.val)}}if((this.cell.val=="NaN")||(this.cell.val=="Invalid Date")){this.cell.val=new Date();this.cell._clearCell=true;this.setCValue("&nbsp;",0)}else{this.setCValue((a||"").toString(),this.cell.val)}};function eXcell_cntr(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._ex_cntr_ready&&!this._realfake){this.grid._ex_cntr_ready=true;if(this.grid._h2){this.grid.attachEvent("onOpenEn",function(c){this.resetCounter(a._cellIndex)})}var b=function(){var c=this;window.setTimeout(function(){if(!c.resetCounter){return}if(c._fake&&!c._realfake&&a._cellIndex<c._fake._cCount){c._fake.resetCounter(a._cellIndex)}else{c.resetCounter(a._cellIndex)}},1);return true};this.grid.attachEvent("onBeforeSorting",b);this.grid.attachEvent("onFilterEnd",b)}this.edit=function(){};this.getValue=function(){return this.cell.innerHTML};this.setValue=function(e){this.cell.style.paddingRight="2px";var c=this.cell;window.setTimeout(function(){if(!c.parentNode){return}var g=c.parentNode.rowIndex;if(c.parentNode.grid.currentPage||g<0||c.parentNode.grid._srnd){g=c.parentNode.grid.rowsBuffer._dhx_find(c.parentNode)+1}if(g<=0){return}c.innerHTML=g;if(c.parentNode.grid._fake&&c._cellIndex<c.parentNode.grid._fake._cCount&&c.parentNode.grid._fake.rowsAr[c.parentNode.idd]){c.parentNode.grid._fake.cells(c.parentNode.idd,c._cellIndex).setCValue(g)}c=null},100)}}dhtmlXGridObject.prototype.resetCounter=function(b){if(this._fake&&!this._realfake&&b<this._fake._cCount){this._fake.resetCounter(b,this.currentPage)}var a=arguments[0]||0;if(this.currentPage){a=(this.currentPage-1)*this.rowsBufferOutSize}for(a=0;a<this.rowsBuffer.length;a++){if(this.rowsBuffer[a]&&this.rowsBuffer[a].tagName=="TR"&&this.rowsAr[this.rowsBuffer[a].idd]){this.rowsAr[this.rowsBuffer[a].idd].childNodes[b].innerHTML=a+1}}};eXcell_cntr.prototype=new eXcell;function eXcell_acheck(a){try{this.cell=a;this.grid=this.cell.parentNode.grid;this.cell.obj=this}catch(b){}this.changeState=function(){if((!this.grid.isEditable)||(this.cell.parentNode._locked)||(this.isDisabled())){return}if(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])!=false){this.val=this.getValue();if(this.val=="1"){this.setValue("<checkbox state='false'>")}else{this.setValue("<checkbox state='true'>")}this.cell.wasChanged=true;this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")]);this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")])}else{this.editor=null}};this.getValue=function(){try{return this.cell.chstate.toString()}catch(c){return null}};this.isCheckbox=function(){return true};this.isChecked=function(){if(this.getValue()=="1"){return true}else{return false}};this.setChecked=function(c){this.setValue(c.toString())};this.detach=function(){return this.val!=this.getValue()};this.drawCurrentState=function(){if(this.cell.chstate==1){return"<div  onclick='(new eXcell_acheck(this.parentNode)).changeState(); (arguments[0]||event).cancelBubble=true;'  style='cursor:pointer; font-weight:bold; text-align:center; '><span style='height:8px; width:8px; background:green; display:inline-block;'></span>&nbsp;Yes</div>"}else{return"<div  onclick='(new eXcell_acheck(this.parentNode)).changeState(); (arguments[0]||event).cancelBubble=true;' style='cursor:pointer;  text-align:center; '><span style='height:8px; width:8px; background:red; display:inline-block;'></span>&nbsp;No</div>"}}}eXcell_acheck.prototype=new eXcell;eXcell_acheck.prototype.setValue=function(b){b=(b||"").toString();if(b.indexOf("1")!=-1||b.indexOf("true")!=-1){b="1";this.cell.chstate="1"}else{b="0";this.cell.chstate="0"}var a=this;this.setCValue(this.drawCurrentState(),this.cell.chstate)};function eXcell_context(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._sub_context){return}this._sub=this.grid._sub_context[a._cellIndex];if(!this._sub){return}this._sindex=this._sub[1];this._sub=this._sub[0]}this.getValue=function(){return _isIE?this.cell.innerText:this.cell.textContent};this.setValue=function(c){this.cell._val=c;var b=this._sub.itemPull[this._sub.idPrefix+this.cell._val];c=b?b.title:c;this.setCValue((c||"&nbsp;"),c)};this.edit=function(){var c=this.grid.getPosition(this.cell);this._sub.showContextMenu(c[0]+this.cell.offsetWidth,c[1]);var b=this.grid.editStop;this.grid.editStop=function(){};this.grid.editStop=b};this.detach=function(){if(this.grid._sub_id!=null){var b=this.cell._val;this.setValue(this.grid._sub_id);this.grid._sub_id=null;return this.cell._val!=b}this._sub.hideContextMenu()}}eXcell_context.prototype=new eXcell;dhtmlXGridObject.prototype.setSubContext=function(a,b,e){var c=this;a.attachEvent("onClick",function(h,g){c._sub_id=h;c.editStop();a.hideContextMenu();return true});if(!this._sub_context){this._sub_context=[]}this._sub_context[b]=[a,e];a.hideContextMenu()};dhtmlXGridObject.prototype._process_json_row=function(g,h){g._attrs=h;for(var c=0;c<g.childNodes.length;c++){g.childNodes[c]._attrs={}}if(h.userdata){for(var b in h.userdata){this.setUserData(g.idd,b,h.userdata[b])}}h=this._c_order?this._swapColumns(h.data):h.data;for(var e=0;e<h.length;e++){if(typeof h[e]=="object"&&h[e]!=null){g.childNodes[e]._attrs=h[e];if(h[e].type){g.childNodes[e]._cellType=h[e].type}h[e]=h[e].value}}this._fillRow(g,h);return g};dhtmlXGridObject.prototype._process_js_row=function(h,l){h._attrs=l;for(var e=0;e<h.childNodes.length;e++){h.childNodes[e]._attrs={}}if(l.userdata){for(var c in l.userdata){this.setUserData(h.idd,c,l.userdata[c])}}var b=[];for(var g=0;g<this.columnIds.length;g++){b[g]=l[this.columnIds[g]];if(typeof b[g]=="object"&&b[g]!=null){h.childNodes[g]._attrs=b[g];if(b[g].type){h.childNodes[g]._cellType=b[g].type}b[g]=b[g].value}if(!b[g]&&b[g]!==0){b[g]=""}}this._fillRow(h,b);return h};dhtmlXGridObject.prototype.updateFromJSON=function(a,e,b,c){if(typeof e=="undefined"){e=true}this._refresh_mode=[true,e,b];this.load(a,c,"json")},dhtmlXGridObject.prototype._refreshFromJSON=function(c){if(this._f_rowsBuffer){this.filterBy(0,"")}reset=false;if(window.eXcell_tree){eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue;eXcell_tree.prototype.setValue=function(s){var o=this.grid._h2.get[this.cell.parentNode.idd];if(o&&this.cell.parentNode.valTag){this.setLabel(s)}else{this.setValueX(s)}}}var n=this.cellType._dhx_find("tree");var g=c.parent||0;var j={};if(this._refresh_mode[2]){if(n!=-1){this._h2.forEachChild(g,function(o){j[o.id]=true},this)}else{this.forEachRow(function(o){j[o]=true})}}var m=c.rows;for(var e=0;e<m.length;e++){var l=m[e];var a=l.id;j[a]=false;if(this.rowsAr[a]&&this.rowsAr[a].tagName!="TR"){if(this._h2){this._h2.get[a].buff.data=l}else{this.rowsBuffer[this.getRowIndex(a)].data=l}this.rowsAr[a]=l}else{if(this.rowsAr[a]){this._process_json_row(this.rowsAr[a],l,-1);this._postRowProcessing(this.rowsAr[a],true)}else{if(this._refresh_mode[1]){var h={idd:a,data:l,_parser:this._process_json_row,_locator:this._get_json_data};var b=this.rowsBuffer.length;if(this._refresh_mode[1]=="top"){this.rowsBuffer.unshift(h);b=0}else{this.rowsBuffer.push(h)}if(this._h2){reset=true;(this._h2.add(a,g)).buff=this.rowsBuffer[this.rowsBuffer.length-1]}this.rowsAr[a]=l;l=this.render_row(b);this._insertRowAt(l,b?-1:0)}}}}if(this._refresh_mode[2]){for(a in j){if(j[a]&&this.rowsAr[a]){this.deleteRow(a)}}}this._refresh_mode=null;if(window.eXcell_tree){eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX}if(reset){this._renderSort()}if(this._f_rowsBuffer){this._f_rowsBuffer=null;this.filterByAll()}},dhtmlXGridObject.prototype._process_js=function(a){return this._process_json(a,"js")};dhtmlXGridObject.prototype._parseOptionsJson=function(c){if(c.coll_options){for(var b in c.coll_options){var g=c.coll_options[b];var e=this.getColIndexById(b);var h;if(this.cellType[e]=="combo"){var h=this.getColumnCombo(e);h.addOption(g)}else{if(this.cellType[e].indexOf("co")==0){var h=this.getCombo(e);for(var a=0;a<g.length;a++){h.put(g[a].value,g[a].label)}}}}this._colls_loaded=true}};dhtmlXGridObject.prototype._parseHeadJson=function(r){if(!r.head||!r.head.length){return}var a=r.head;var e=r.settings;var l="setInitWidths";var n=false;if(e&&e.colwidth=="%"){l="setInitWidthsP"}if(e&&e.splitat=="%"){n=e.splitat}if(this.hdr.rows.length>0){this.clearAll(true)}var m=[[],[],[],[],[],[],[]];var o=["value","width","type","align","sort","hidden","id"];var t=["",l,"setColTypes","setColAlign","setColSorting","","setColumnIds"];for(var h=0;h<a.length;h++){for(var g=0;g<o.length;g++){m[g].push(a[h][o[g]])}}this.setHeader(m[0]);for(var h=0;h<t.length;h++){if(t[h]){this[t[h]](m[h].join(this.delim))}}for(var h=0;h<a.length;h++){var s=a[h].options;if(a[h].options){if(this.cellType[h]=="clist"){this.registerCList(h,s)}else{var b=this.getCombo(h);for(var g=0;g<s.length;g++){b.put(s[g].id,s[g].value)}}}}this.init();var c=m[5].join(this.delim);if(this.setColHidden&&c.replace(/,/g,"")!=""){this.setColHidden(c)}if((n)&&(this.splitAt)){this.splitAt(n)}};dhtmlXGridObject.prototype._process_json=function(data,mode){this._parsing=true;try{var data=data.responseText||data;if(typeof data=="string"){eval("dhtmlx.temp="+data+";");data=dhtmlx.temp}}catch(e){dhx4.callEvent("onLoadXMLError",["Incorrect JSON",(data.xmlDoc||data),this]);data={rows:[]}}if(this._refresh_mode){return this._refreshFromJSON(data)}if(data.head){this._parseHeadJson(data)}this._parseOptionsJson(data);var cr=parseInt(data.pos||0);var total=parseInt(data.total_count||0);var reset=false;if(total){if(!this.rowsBuffer[total-1]){if(this.rowsBuffer.length){reset=true}this.rowsBuffer[total-1]=null}if(total<this.rowsBuffer.length){this.rowsBuffer.splice(total,this.rowsBuffer.length-total);reset=true}}var userdata=mode==="js"?data.userdata:data;for(var key in userdata){if(mode==="js"||key!="rows"){this.setUserData("",key,userdata[key])}}if(mode=="js"&&data.collections){for(var colkey in data.collections){var index=this.getColIndexById(colkey);var colrecs=data.collections[colkey];if(index!==window.undefined){if(this.cellType[index]=="clist"){colplaindata=[];for(var j=0;j<colrecs.length;j++){colplaindata.push(colrecs[j].label)}this.registerCList(index,colplaindata)}else{var combo=this.getCombo(index);for(var j=0;j<colrecs.length;j++){combo.put(colrecs[j].value,colrecs[j].label)}}}}}if(this.isTreeGrid()){return this._process_tree_json(data,null,null,mode)}if(mode=="js"){if(data.data){data=data.data}for(var i=0;i<data.length;i++){if(this.rowsBuffer[i+cr]){continue}var row=data[i];var id=row.id||(i+1);this.rowsBuffer[i+cr]={idd:id,data:row,_parser:this._process_js_row,_locator:this._get_js_data};this.rowsAr[id]=data[i]}}else{for(var i=0;i<data.rows.length;i++){if(this.rowsBuffer[i+cr]){continue}var id=data.rows[i].id;this.rowsBuffer[i+cr]={idd:id,data:data.rows[i],_parser:this._process_json_row,_locator:this._get_json_data};this.rowsAr[id]=data.rows[i]}}this.callEvent("onDataReady",[]);if(reset&&this._srnd){var h=this.objBox.scrollTop;this._reset_view();this.objBox.scrollTop=h}else{this.render_dataset()}this._parsing=false};dhtmlXGridObject.prototype._get_json_data=function(b,a){var c=b.data[a];if(typeof c=="object"){return c?c.value:""}else{return c}};dhtmlXGridObject.prototype._process_tree_json=function(e,g,b,j){this._parsing=true;var a=false;if(!g){this.render_row=this.render_row_tree;a=true;g=e;b=g.parent||0;if(b=="0"){b=0}if(!this._h2){this._h2=this._createHierarchy()}if(this._fake){this._fake._h2=this._h2}}if(j=="js"){if(g.data&&!b){e=g.data}if(g.rows){g=g.rows}for(var c=0;c<g.length;c++){var l=g[c].id;var h=this._h2.add(l,b);h.buff={idd:l,data:g[c],_parser:this._process_js_row,_locator:this._get_js_data};if(g[c].open){h.state="minus"}this.rowsAr[l]=h.buff;this._process_tree_json(g[c],g[c],l,j)}}else{if(g.rows){for(var c=0;c<g.rows.length;c++){var l=g.rows[c].id;var h=this._h2.add(l,b);h.buff={idd:l,data:g.rows[c],_parser:this._process_json_row,_locator:this._get_json_data};if(g.rows[c].open){h.state="minus"}this.rowsAr[l]=h.buff;this._process_tree_json(g.rows[c],g.rows[c],l,j)}}}if(a){if(b!=0){this._h2.change(b,"state","minus")}this._updateTGRState(this._h2.get[b]);this._h2_to_buff();this.callEvent("onDataReady",[]);if(b!=0&&(this._srnd||this.pagingOn)){this._renderSort()}else{this.render_dataset()}if(this._slowParse===false){this.forEachRow(function(m){this.render_row_tree(0,m)})}this._parsing=false;if(b!=0&&!this._srnd){this.callEvent("onOpenEnd",[b,1])}}};function dhtmlXGridFromTable(obj,init){if(typeof(obj)!="object"){obj=document.getElementById(obj)}var w=document.createElement("DIV");w.setAttribute("width",obj.getAttribute("gridWidth")||(obj.offsetWidth?(obj.offsetWidth+"px"):0)||(window.getComputedStyle?window.getComputedStyle(obj,null)["width"]:(obj.currentStyle?obj.currentStyle.width:0)));w.setAttribute("height",obj.getAttribute("gridHeight")||(obj.offsetHeight?(obj.offsetHeight+"px"):0)||(window.getComputedStyle?window.getComputedStyle(obj,null)["height"]:(obj.currentStyle?obj.currentStyle.height:0)));w.className=obj.className;obj.className="";if(obj.id){w.id=obj.id}var mr=obj;var drag=obj.getAttribute("dragAndDrop");mr.parentNode.insertBefore(w,mr);var f=mr.getAttribute("name")||("name_"+(new Date()).valueOf());var windowf=new dhtmlXGridObject(w);window[f]=windowf;var acs=mr.getAttribute("onbeforeinit");var acs2=mr.getAttribute("oninit");if(acs){eval(acs)}windowf.setImagePath(windowf.imgURL||(mr.getAttribute("imgpath")||mr.getAttribute("image_path")||""));var skin=mr.getAttribute("skin");if(skin){windowf.setSkin(skin)}if(init){init(windowf)}var hrow=mr.rows[0];var za=[];var zb="";var zc="";var zd="";var ze="";for(var i=0;i<hrow.cells.length;i++){za.push(hrow.cells[i].innerHTML);var width=hrow.cells[i].getAttribute("width")||hrow.cells[i].offsetWidth||(window.getComputedStyle?window.getComputedStyle(hrow.cells[i],null)["width"]:(hrow.cells[i].currentStyle?hrow.cells[i].currentStyle.width:0));zb+=(zb?",":"")+(width=="*"?width:parseInt(width));zc+=(zc?",":"")+(hrow.cells[i].getAttribute("align")||"left");zd+=(zd?",":"")+(hrow.cells[i].getAttribute("type")||"ed");ze+=(ze?",":"")+(hrow.cells[i].getAttribute("sort")||"str");var f_a=hrow.cells[i].getAttribute("format");if(f_a){if(hrow.cells[i].getAttribute("type").toLowerCase().indexOf("calendar")!=-1){windowf._dtmask=f_a}else{windowf.setNumberFormat(f_a,i)}}}windowf.setHeader(za);windowf.setInitWidths(zb);windowf.setColAlign(zc);windowf.setColTypes(zd);windowf.setColSorting(ze);if(obj.getAttribute("gridHeight")=="auto"){windowf.enableAutoHeigth(true)}if(obj.getAttribute("multiline")){windowf.enableMultiline(true)}var lmn=mr.getAttribute("lightnavigation");if(lmn){windowf.enableLightMouseNavigation(lmn)}var evr=mr.getAttribute("evenrow");var uevr=mr.getAttribute("unevenrow");if(evr||uevr){windowf.enableAlterCss(evr,uevr)}if(drag){windowf.enableDragAndDrop(true)}windowf.init();if(obj.getAttribute("split")){windowf.splitAt(obj.getAttribute("split"))}windowf.callEvent("onXLS",[]);windowf._process_inner_html(mr,1);if(acs2){eval(acs2)}if(obj.parentNode&&obj.parentNode.removeChild){obj.parentNode.removeChild(obj)}windowf.callEvent("onXLE",[]);return windowf}dhtmlXGridObject.prototype._process_html=function(b){if(b.tagName&&b.tagName=="TABLE"){return this._process_inner_html(b,0)}var a=document.createElement("DIV");a.innerHTML=b.xmlDoc.responseText;var c=a.getElementsByTagName("TABLE")[0];this._process_inner_html(c,0)};dhtmlXGridObject.prototype._process_inner_html=function(c,g){var b=c.rows.length;for(var a=g;a<b;a++){var e=c.rows[a].getAttribute("id")||a;this.rowsBuffer.push({idd:e,data:c.rows[a],_parser:this._process_html_row,_locator:this._get_html_data})}this.render_dataset();this.setSizes()};dhtmlXGridObject.prototype._process_html_row=function(m,g){var l=g.getElementsByTagName("TD");var b=[];m._attrs=this._xml_attrs(g);for(var e=0;e<l.length;e++){var h=l[e];var a=h.getAttribute("type");if(m.childNodes[e]){if(a){m.childNodes[e]._cellType=a}m.childNodes[e]._attrs=this._xml_attrs(l[e])}if(h.firstChild){b.push(h.innerHTML)}else{b.push("")}if(h.colSpan>1){m.childNodes[e]._attrs.colspan=h.colSpan;for(var c=1;c<h.colSpan;c++){b.push("")}}}for(e<l.length;e<m.childNodes.length;e++){m.childNodes[e]._attrs={}}this._fillRow(m,(this._c_order?this._swapColumns(b):b));return m};dhtmlXGridObject.prototype._get_html_data=function(b,a){b=b.firstChild;while(true){if(!b){return""}if(b.tagName=="TD"){a--}if(a<0){break}b=b.nextSibling}return(b.firstChild?b.firstChild.data:"")};dhtmlxEvent(window,"load",function(){var c=document.getElementsByTagName("table");for(var b=0;b<c.length;b++){if(c[b].className=="dhtmlxGrid"){dhtmlXGridFromTable(c[b])}}});function dhtmlXTabBar(e,j){var g=this;this.conf={skin:(window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtabbar")||"material"),css:"dhxtabbar",lastActive:null,closeButton:false,align:"left",tabsMode:(j=="bottom"?"bottom":"top"),tabsContCss:"",contZone:true,transSpeed:"0.15s",arwMode:"always",tabsOfs:1,tabsTop:0,url_demand:false,urls:{},autoload:{},tabsWidth:{dhx_terrace:[44,14],dhx_web:[35,9],dhx_skyblue:[35,9],material:[44,14]}};if(this.conf.skin=="material"){this.conf.arwMode="auto"}var b=navigator.userAgent;if(b.indexOf("Safari")>=0&&(b.indexOf("5.1.7")>=0||(b.match(/7[\.\d]* mobile/gi)!=null&&b.match(/AppleWebKit/gi)!=null))){this.conf.tabsContCss=" safari_517_fix"}var h;if(e!=null&&typeof(e)=="object"&&typeof(e.tagName)=="undefined"){h=e.parent;if(typeof(e.skin)!="undefined"){this.conf.skin=e.skin}if(typeof(e.mode)!="undefined"){this.conf.tabsMode=(e.mode=="bottom"?"bottom":"top")}if(typeof(e.align)!="undefined"){this.conf.align=(e.align=="right"?"right":"left")}if(typeof(e.close_button)!="undefined"){this.conf.closeButton=window.dhx4.s2b(e.close_button)}if(typeof(e.content_zone)!="undefined"){this.conf.contZone=window.dhx4.s2b(e.content_zone)}if(typeof(e.xml)!="undefined"){this.conf.autoload.xml=e.xml}if(typeof(e.json)!="undefined"){this.conf.autoload.xml=e.json}if(typeof(e.tabs)!="undefined"){this.conf.autoload.tabs=e.tabs}if(typeof(e.onload)!="undefined"){this.conf.autoload.onload=e.onload}if(typeof(e.arrows_mode)!="undefined"){this.conf.autoload.arrows_mode=e.arrows_mode}}else{h=e}window.dhtmlXCellTop.apply(this,[h,e.offsets]);if(this.base._ofs!=null&&this.base._ofs.t!=null){this.conf.tabsTop=this.base._ofs.t}this.tabsMode=document.createElement("DIV");this.tabsMode.className="dhxtabbar_tabs_"+this.conf.tabsMode;this.cont.appendChild(this.tabsMode);this.tabsArea=document.createElement("DIV");this.tabsArea.className="dhxtabbar_tabs dhxtabbar_tabs_"+this.conf.tabsMode;this.tabsArea.innerHTML="<div class='dhxtabbar_tabs_ar_left'><div class='dhxtabbar_arrow_img'></div></div><div class='dhxtabbar_tabs_base'><div class='dhxtabbar_tabs_cont_"+this.conf.align+this.conf.tabsContCss+"'><div class='dhxtabbar_tabs_line'></div></div></div><div class='dhxtabbar_tabs_ar_right'><div class='dhxtabbar_arrow_img'></div></div>";this.tabsArea.style.top=(this.conf.tabsMode=="top"?this.conf.tabsTop+"px":"auto");this.tabsMode.appendChild(this.tabsArea);this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px";this.tabsArea.childNodes[0].onclick=function(){if(g.conf.align=="left"){g._moveTabs(1)}else{g._moveTabs(-1)}};this.tabsArea.childNodes[2].onclick=function(){if(g.conf.align=="left"){g._moveTabs(-1)}else{g._moveTabs(1)}};this._onTabsAreaClick=function(a){return this._callMainEvent("onTabClose",[a])};this.tabsArea.onclick=function(l){l=l||event;var a=(l.target||l.srcElement);while(a!=null){if(typeof(a._tabCloseId)!="undefined"){if(g._onTabsAreaClick(a._tabCloseId)!==true){return}g.t[a._tabCloseId].conf.remove=true;g._hideTab(a._tabCloseId);a=null}else{if(typeof(a._tabId)!="undefined"){g._doOnClick(a._tabId);a=null}}if(a!=null){a=a.parentNode;if(a==this){a=null}}}};this.tabsArea.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}};this._doOnClick=function(a){this.callEvent("onTabClick",[a,this.conf.lastActive]);if(this.t[a].conf.enabled){this._setTabActive(a)}};this.t={};this.addTab=function(a,t,m,r,o,u){u=(typeof(u)=="undefined"?(this.conf.closeButton==true):window.dhx4.s2b(u));o=window.dhx4.s2b(o);var n=document.createElement("DIV");n.className="dhxtabbar_tab";n.innerHTML="<div class='dhxtabbar_tab_text"+(u?" dhxtabbar_tab_text_close":"")+"'>"+t+"</div>"+(u?"<div class='dhxtabbar_tab_close'></div>":"");n._tabId=a;if(u){n.childNodes[1]._tabCloseId=a}var l=this.tabsArea.childNodes[1].firstChild;if(r!=null&&r+1>0&&r+1<l.childNodes.length){l.insertBefore(n,l.childNodes[r+1])}else{l.appendChild(n)}var v=false;if(typeof(m)=="undefined"||m==null||m=="*"){m=this._getLabelWidth(t,u);v=true}else{m=parseInt(m)}n.style.width=m+"px";var s=new dhtmlXTabBarCell(a,this);this.tabsMode.appendChild(s.cell);this.t[a]={tab:n,cell:s,conf:{text:t,visible:true,active:false,enabled:true,close:u,width:m,autowidth:v}};l=s=null;if(o){this._setTabActive(a)}else{this._adjustCell(a)}if(this.conf.initSeq!=true&&this.conf.arwMode=="auto"){this.setSizes()}};this.setSizes=function(){this._adjustCont();if(this.conf.tabsAreaOfs==null){this.tabsArea.style.width=this.cont.offsetWidth+"px";this.conf.tabsAreaOfs=parseInt(this.tabsArea.style.width)-this.tabsArea.offsetWidth}this.tabsArea.style.width=this.cont.offsetWidth+this.conf.tabsAreaOfs+"px";this._adjustCell(this.conf.lastActive);this._adjustTabs(true);this.callEvent("_onSetSizes",[])};this._adjustCell=function(n){if(!this.conf.contZone||n==null){return}var m=(this.conf.tabsMode=="top"?this.tabsArea.offsetHeight:0)+this.conf.tabsTop;var l=this.cont.offsetHeight-this.tabsArea.offsetHeight-this.conf.tabsTop;var a=this.t[n].cell.dataType;if(this.conf.skin=="dhx_skyblue"&&(a=="layout"||a=="tabbar"||a=="acc")){if(this.conf.tabsMode=="top"){m=m-1}l=l+1}if(n!=this.conf.lastActive){m=-5000;this.t[n].cell.cell.style.visibility="hidden";this.t[n].cell.cell.style.zIndex=0}this.t[n].cell._setSize(0,m,this.cont.offsetWidth,l)};this.setTabsMode=function(a){this.conf.tabsMode=(a=="bottom"?"bottom":"top");this.tabsMode.className="dhxtabbar_tabs_"+this.conf.tabsMode;this.tabsArea.className="dhxtabbar_tabs dhxtabbar_tabs_"+this.conf.tabsMode;this.tabsArea.style.top=(this.conf.tabsMode=="top"?this.conf.tabsTop+"px":"auto");this.setSizes()};this._tabCss=function(r,n){var l=this.t[r].conf.active;var o=!this.t[r].conf.enabled;var m=!this.t[r].conf.visible;return"dhxtabbar_tab"+(m?" dhxtabbar_tab_hidden":(l||o?" dhxtabbar_tab"+(l?"_actv":"")+(o?"_dis":""):""))};this._getLabelWidth=function(m,l){if(this.tabsTextTest==null){this.tabsTextTest=document.createElement("SPAN");this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin}document.body.appendChild(this.tabsTextTest);this.tabsTextTest.innerHTML=m;var a=this.tabsTextTest.offsetWidth;if(window.dhx4.isIE&&a==0){a=this.tabsTextTest.offsetWidth}a+=this.conf.tabsWidth[this.conf.skin][0];if(l==true){a+=this.conf.tabsWidth[this.conf.skin][1]}document.body.removeChild(this.tabsTextTest);return a};this._adjustTabs=function(n){if(this._checkArrows()==true||n==true){this.tabsArea.childNodes[1].style.left=this.tabsArea.childNodes[0].offsetWidth-1+"px";this.tabsArea.childNodes[1].style.width=Math.max(0,this.tabsArea.clientWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth)+this.conf.tabsOfs*2+"px"}var r=this.tabsArea.childNodes[1];if(r.offsetWidth<5){r=null;return}var a=parseInt(r.childNodes[0].style[this.conf.align]);var m=null;for(var o=0;o<r.childNodes[0].childNodes.length;o++){var s=r.childNodes[0].childNodes[o]._tabId;if(s!=null&&this.t[s].conf.visible){var l=this.t[s].tab.offsetWidth-this.conf.tabsOfs;if(this.t[s].conf.active){if(a<0||r.offsetWidth<l){m={d:1,id:s}}else{if(a+l>r.offsetWidth){m={d:-1,id:s}}}}a+=l}}if(m!=null){this._moveTabs(m.d,m.id)}else{if(r.offsetWidth>a+1){r.childNodes[0].style[this.conf.align]=Math.min(0,parseInt(r.childNodes[0].style[this.conf.align])+(r.offsetWidth-a))+"px"}}r=m=null};this._moveTabs=function(w,o){var n=this.tabsArea.childNodes[1].childNodes[0];var u=0;var y=[];var A=null;for(var a=0;a<n.childNodes.length;a++){var m=n.childNodes[a]._tabId;if(m!=null&&this.t[m].conf.visible){y.push({id:m,w:this.t[m].tab.offsetWidth-this.conf.tabsOfs,ind:u});if(m==o){A=u}u++}}var z=parseInt(this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]);var s=this.tabsArea.clientWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth+this.conf.tabsOfs;var v=null;var r=null;for(var a=0;a<y.length;a++){y[a].x=z;if(v==null&&z>=0&&z+y[a].w>0){v=y[a]}if(z<s&&z+y[a].w<=s){r=y[a]}z+=y[a].w}if(A!=null){var C=y[A]}else{var C=null;if(w>0){if(v==null){if(y.length>0){C=y[y.length-1]}}else{if(v.ind>0&&y.length>=v.ind){C=y[v.ind-1]}}}else{if(r==null){if(y.length>0){C=y[0]}}else{if(y.length>r.ind){C=y[r.ind+1]}}}}if(C!=null){if(w>0){if(z<s){n.style[this.conf.align]=Math.min(0,parseInt(n.style[this.conf.align])+(s-z))+"px"}else{n.style[this.conf.align]=parseInt(n.style[this.conf.align])-C.x+"px"}}else{n.style[this.conf.align]=parseInt(n.style[this.conf.align])-C.x+s-C.w+"px"}}n=C=y=null};this._getNextVisible=function(l,a){return this._getNearVisible(l,a,"next")};this._getPrevVisible=function(l,a){return this._getNearVisible(l,a,"previous")};this._getFirstVisible=function(){return this._getNearVisible(null,false,"first")};this._getNearVisible=function(r,m,o){if(o=="first"){var n=this.tabsArea.childNodes[1].childNodes[0].childNodes[1];o="next"}else{if(r==null||this.t[r]==null){return(m?this._getFirstVisible():null)}var n=this.t[r].tab[o+"Sibling"]}var l=null;while(n!=null&&l==null){var a=n._tabId;if(a!=null&&l==null&&this.t[a].conf.visible){l=a}else{n=n[o+"Sibling"]}}n=null;return l};this._showTab=function(l,a){if(this.t[l]==null){return}if(this.t[l].conf.transActv==true){if(this.t[l].conf.transMode=="show"){return}}else{if(this.t[l].conf.visible==true){return}}if(this.conf.transProp!==false){this.t[l].conf.transActv=true;this.t[l].conf.transMode="show";this.t[l].conf.transProp=this.conf.transProp;this.t[l].conf.transActvId=(a?l:null);if(!this.t[l].conf.transEv){this.t[l].tab.addEventListener(this.conf.transEv,this._doOnTrEnd,false);this.t[l].conf.transEv=true}this.t[l].conf.visible=true;this.t[l].tab.className=this._tabCss(l);this.t[l].tab.style[this.conf.transProp]=this.conf.transValueWidth;this.t[l].tab.style.width=this.t[l].conf.width+"px";if(this.t[l].tab.clientWidth>=this.t[l].conf.width){this.t[l].tab.style.visibility="visible"}}else{this.t[l].conf.visible=true;this.t[l].tab.style.display="";if(a||this.t[l].conf.active){this.t[l].conf.active=false;this._setTabActive(l)}else{this._adjustTabs()}}};this._hideTab=function(r,a){if(this.t[r]==null){return}if(this.t[r].conf.transActv==true){if(this.t[r].conf.transMode=="hide"){return}}else{if(this.t[r].conf.visible!=true){return}}var l=false;if(this.conf.lastActive==r){this.conf.lastActive=null;this.t[r].conf.active=false;this.t[r].tab.className=this._tabCss(r);l=true}var n=this._getPrevVisible(r);var m=this._getNextVisible(r);var o=(l==true&&a!==false?(a==true?null:a)||m||n:null);if(this.conf.transProp!==false){this.t[r].conf.transActv=true;this.t[r].conf.transMode="hide";this.t[r].conf.transProp=this.conf.transProp;this.t[r].conf.transActvId=o;this.t[r].conf.visible=false;if(!this.t[r].conf.transEv){this.t[r].tab.addEventListener(this.conf.transEv,this._doOnTrEnd,false);this.t[r].conf.transEv=true}this.t[r].tab.style.visibility="hidden";this.t[r].tab.className=g._tabCss(r);this.t[r].tab.style[this.conf.transProp]=this.conf.transValueWidth;this.t[r].tab.style.width="0px"}else{this.t[r].tab.style.display="none";this.t[r].conf.visible=false;if(this.conf.contZone){this.t[r].cell.cell.style.visibility="hidden";this.t[r].cell.cell.style.top="-5000px"}if(o!=null){this._setTabActive(o)}this._adjustTabs();if(this.t[r].conf.remove){this._removeTab(r)}}};this._isTabVisible=function(a){return(this.t[a].conf.visible==true)};this._doOnTrEnd=function(){var m=this._tabId;if(g.t[m]==null){return}var a=g.t[m];var l=a.conf.transActvId;if(a.conf.transMode=="hide"){if(a.conf.remove){g._removeTab(m)}else{a.tab.style[a.conf.transProp]="";if(g.conf.contZone){a.cell.cell.style.visibility="hidden";a.cell.cell.style.top="-5000px"}a.conf.transActv=false}}else{if(a.conf.transMode=="show"){a.tab.style[a.conf.transProp]="";a.tab.style.visibility="visible";a.conf.transMode=null;a.conf.transActv=false}}if(l!=null){g._setTabActive(l)}else{g._adjustTabs()}a=null};this.enableTabCloseButton=function(a){this.conf.closeButton=window.dhx4.s2b(a)};this.unload=function(){this.conf.unloading=true;this.clearAll();this.t=null;if(this.tabsTextTest!=null){if(this.tabsTextTest.parentNode){this.tabsTextTest.parentNode.removeChild(this.tabsTextTest)}this.tabsTextTest=null}window.dhx4._enableDataLoading(this,null,null,null,"clear");this.tabsArea.childNodes[0].onclick=null;this.tabsArea.childNodes[2].onclick=null;this.tabsArea.onclick=null;this.tabsArea.onselectstart=null;this.tabsArea.parentNode.removeChild(this.tabsArea);this.tabsArea=null;this.tabsMode.parentNode.removeChild(this.tabsMode);this.tabsMode=null;this._unloadTop();window.dhx4._eventable(this,"clear");for(var l in this){this[l]=null}g=null};this.enableContentZone=function(a){this.conf.contZone=(a==true)};this.setSkin=function(m){this._setBaseSkin(m);this.conf.skin=m;if(this.tabsTextTest!=null){this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin}for(var l in this.t){this.t[l].cell._resetSizeState();if(this.t[l].conf.autowidth==true){this.t[l].conf.width=this._getLabelWidth(this.t[l].conf.text,this.t[l].conf.close);if(this.t[l].conf.visible){this.t[l].tab.style.width=this.t[l].conf.width+"px"}}}this.conf.tabsAreaOfs=null;this._fixTabsOfs();this.setSizes()};this.setAlign=function(a){a=(a=="left"?"left":"right");if(a==this.conf.align){this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px";return}if(this.conf.transProp!==false){this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=""}this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="";this.conf.align=a;this.tabsArea.childNodes[1].childNodes[0].className="dhxtabbar_tabs_cont_"+this.conf.align+this.conf.tabsContCss;this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px";if(this.conf.transProp!==false){this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed;this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos}};this._initObj=function(n){this.conf.initSeq=true;this.clearAll();var a=false;if(n.settings!=null){if(n.settings.skin!=null){this.setSkin(n.settings.skin)}if(n.settings.close_button!=null){this.enableTabCloseButton(window.dhx4.s2b(n.settings.close_button))}else{if(n.settings.closeButton!=null){this.enableTabCloseButton(window.dhx4.s2b(n.settings.closeButton))}}if(n.settings.align!=null){this.setAlign(n.settings.align)}if(n.settings.hrefmode=="ajax"){a=true}if(n.settings.hrefmode=="ajax-html"){a=true;this.conf.url_demand=true}}if(n.tabs!=null){for(var m=0;m<n.tabs.length;m++){var l=n.tabs[m];if(typeof(l.id)=="undefined"){l.id=window.dhx4.newId()}if(!isNaN(parseInt(l.width))){l.width=parseInt(l.width)}else{l.width=null}this.addTab(l.id,l.text||l.label||"",l.width,l.index,window.dhx4.s2b(l.selected)||window.dhx4.s2b(l.active),l.close);if(l.content!=null){this.cells(l.id).attachHTMLString(l.content)}else{if(l.href!=null){if(this.conf.url_demand==true){this.conf.urls[l.id]={href:l.href,ajax:a}}else{this.cells(l.id).attachURL(l.href,a)}}}if(typeof(l.enabled)!="undefined"&&window.dhx4.s2b(l.enabled)==false){this.tabs(l.id).disable()}else{if(typeof(l.disabled)!="undefined"&&window.dhx4.s2b(l.disabled)==true){this.tabs(l.id).disable()}}}}this.conf.initSeq=false;if(this.conf.arwMode=="auto"){this.setSizes()}if(this.conf.url_demand==true){this._loadURLOnDemand(this.conf.lastActive)}};this._xmlToObj=function(s){var o={settings:{},tabs:[]};var l=s.getElementsByTagName("tabbar")[0];if(l!=null){for(var u in {skin:1,align:1,closeButton:1,hrefmode:1}){if(l.getAttribute(u)!=null){o.settings[u]=l.getAttribute(u)}}var x=l.getElementsByTagName("tab");for(var m=0;m<x.length;m++){var n={text:(x[m].firstChild.nodeValue||"")};for(var u in {id:1,width:1,close:1,selected:1,active:1,enabled:1,disabled:1,href:1}){if(x[m].getAttribute(u)!=null){n[u]=x[m].getAttribute(u)}}var y=x[m].getElementsByTagName("content")[0];if(y!=null){n.content="";for(var v=0;v<y.childNodes.length;v++){n.content+=(y.childNodes[v].nodeValue||"")}}o.tabs.push(n)}}return o};dhx4._enableDataLoading(this,"_initObj","_xmlToObj","tabbar",{struct:true});var c=window.dhx4.transDetect();this.conf.transProp=c.transProp;this.conf.transEv=c.transEv;this.conf.transValueWidth="width "+this.conf.transSpeed;c=null;if(this.conf.transProp!==false){this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed;this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos}this._callMainEvent=function(l,a){return this.callEvent(l,a)};window.dhx4._eventable(this);if(this.conf.autoload.json!=null){this.loadStruct(this.conf.autoload.json,this.conf.autoload.onload)}else{if(this.conf.autoload.xml!=null){this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload)}else{if(this.conf.autoload.tabs!=null){this.loadStruct({tabs:this.conf.autoload.tabs},this.conf.autoload.onload)}}}if(this.conf.autoload.arrows_mode!=null){this.setArrowsMode(this.conf.autoload.arrows_mode)}this._fixTabsOfs();this.setSizes();return this}dhtmlXTabBar.prototype=new dhtmlXCellTop();dhtmlXTabBar.prototype._fixTabsOfs=function(){this.conf.tabsOfs=({dhx_skyblue:1,dhx_web:0,dhx_terrace:1,material:0}[this.conf.skin])};dhtmlXTabBar.prototype.cells=dhtmlXTabBar.prototype.tabs=function(a){if(this.t[a]){return this.t[a].cell}return null};dhtmlXTabBar.prototype.getAllTabs=function(){var c=[];for(var b in this.t){c.push(b)}return c};dhtmlXTabBar.prototype._setTabActive=function(b,a){if(!this.t[b]||this.t[b].conf.active){return}if(typeof(a)=="undefined"){a=true}if(a==true&&this.callEvent("onSelect",[b,this.conf.lastActive])!==true){return}this.setTabInActive();this.t[b].conf.active=true;if(this.conf.contZone){this.t[b].cell.cell.style.visibility="visible";this.t[b].cell.cell.style.top="0px";this.t[b].cell.cell.style.zIndex=1}this.t[b].tab.className=this._tabCss(b);this.conf.lastActive=b;this.setSizes();if(this.conf.url_demand==true){this._loadURLOnDemand(b)}};dhtmlXTabBar.prototype.setTabInActive=function(){if(this.conf.lastActive!=null&&this.t[this.conf.lastActive]){this.t[this.conf.lastActive].conf.active=false;if(this.conf.contZone){this.t[this.conf.lastActive].cell.cell.style.visibility="hidden";this.t[this.conf.lastActive].cell.cell.style.top="-5000px";this.t[this.conf.lastActive].cell.cell.style.zIndex=0}this.t[this.conf.lastActive].tab.className=this._tabCss(this.conf.lastActive);this.conf.lastActive=null}};dhtmlXTabBar.prototype._isTabActive=function(a){return(a==this.conf.lastActive&&this.conf.lastActive!=null)};dhtmlXTabBar.prototype.getActiveTab=function(){return this.conf.lastActive};dhtmlXTabBar.prototype.goToNextTab=function(){var a=this._getNextVisible(this.conf.lastActive,true);if(a!=null){this._setTabActive(a)}};dhtmlXTabBar.prototype.goToPrevTab=function(){var a=this._getPrevVisible(this.conf.lastActive,true);if(a!=null){this._setTabActive(a)}};dhtmlXTabBar.prototype._enableTab=function(b,a){if(!this.t[b]||this.t[b].conf.enabled){return}this.t[b].conf.enabled=true;this.t[b].tab.className=this._tabCss(b);if(a==true){this._setTabActive(b)}};dhtmlXTabBar.prototype._disableTab=function(b,a){if(!this.t[b]||!this.t[b].conf.enabled){return}this.t[b].conf.enabled=false;this.t[b].tab.className=this._tabCss(b);if(a!==false&&this.conf.lastActive==b){if(a==true){a=this._getNextVisible(b)||this._getPrevVisible(b)}this._setTabActive(a)}};dhtmlXTabBar.prototype._isTabEnabled=function(a){return(this.t[a]!=null&&this.t[a].conf.enabled==true)};dhtmlXTabBar.prototype._setTabText=function(e,c,b){if(!this.t[e]){return}var a=false;if(typeof(b)=="undefined"||b==null){b=this._getLabelWidth(c,this.t[e].conf.close);a=true}this.t[e].tab.style.width=b+"px";this.t[e].tab.childNodes[0].innerHTML=c;this.t[e].conf.text=c;this.t[e].conf.width=b;this.t[e].conf.autowidth=a};dhtmlXTabBar.prototype._getTabText=function(a){if(!this.t[a]){return null}return this.t[a].conf.text};dhtmlXTabBar.prototype._removeTab=function(l,c,h){if(!this.t[l]){return}if(h!=true&&this.t[l].conf.remove!=true){this.t[l].conf.remove=true;this._hideTab(l,c);return}if(typeof(c)=="undefined"){c=true}var e=this._getNextVisible(l);var g=this._getPrevVisible(l);if(this.t[l].conf.transEv==true){this.t[l].tab.removeEventListener(this.conf.transEv,this._doOnTrEnd,false);this.t[l].conf.transEv=false}for(var b in this.t[l].conf){this.t[l].conf[b]=null}this.t[l].conf=null;delete this.t[l].conf;this.t[l].cell._unload();this.t[l].cell=null;this.t[l].tab.parentNode.removeChild(this.t[l].tab);this.t[l].tab=null;this.t[l]=null;delete this.t[l];this.conf.urls[l]=null;delete this.conf.urls[l];if(this.conf.lastActive==l){this.conf.lastActive=null;if(c!=false){var j=(c==true?(e||g||this._getFirstVisible()):c);if(j!=null){this._setTabActive(j)}}}else{if(h!=true){this._adjustTabs()}}};dhtmlXTabBar.prototype.clearAll=function(){for(var b in this.t){this._removeTab(b,false,true)}this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px"};dhtmlXTabBar.prototype.moveTab=function(c,a){if(!this.t[c]||a<0){return}a+=1;var b=this.tabsArea.childNodes[1].firstChild;if(b.childNodes[a]!=this.t[c].tab){b.removeChild(this.t[c].tab);if(a>=b.childNodes.length){b.appendChild(this.t[c].tab)}else{b.insertBefore(this.t[c].tab,b.childNodes[a])}}b=null};dhtmlXTabBar.prototype._getIndex=function(e){var a=-1;var c=this.tabsArea.childNodes[1].firstChild;for(var b=1;b<c.childNodes.length;b++){if(c.childNodes[b]._tabId==e){a=b-1}}c=null;return a};dhtmlXTabBar.prototype.getNumberOfTabs=function(e){var c=0;for(var b in this.t){c+=(e!=true?1:(this.t[b].conf.visible==true?1:0))}return c};dhtmlXTabBar.prototype.forEachCell=dhtmlXTabBar.prototype.forEachTab=function(c){for(var b in this.t){c.apply(window,[this.t[b].cell])}};dhtmlXTabBar.prototype.enableAutoReSize=function(){this._initFSResize()};dhtmlXTabBar.prototype.setArrowsMode=function(a){a={auto:"auto",always:"always"}[String(a)];if(a==null||a==this.conf.mode){return}this.conf.arwMode=a;if(a=="always"){this.tabsArea.childNodes[0].className="dhxtabbar_tabs_ar_left";this.tabsArea.childNodes[2].className="dhxtabbar_tabs_ar_right"}this.setSizes()};dhtmlXTabBar.prototype._checkArrows=function(){var g=false;if(this.conf.arwMode=="auto"){var e=0;for(var c in this.t){e+=this.t[c].tab.offsetWidth}var b=this.tabsArea.childNodes[0];var h=this.tabsArea.childNodes[2];if(e>this.cont.offsetWidth){if(b.className.search(/dhxtabbar_tabs_ar_hidden/)>=0){b.className=b.className.replace(/\s{0,}dhxtabbar_tabs_ar_hidden/,"");h.className=h.className.replace(/\s{0,}dhxtabbar_tabs_ar_hidden/,"");g=true}}else{if(b.className.search(/dhxtabbar_tabs_ar_hidden/)<1){b.className+=" dhxtabbar_tabs_ar_hidden";h.className+=" dhxtabbar_tabs_ar_hidden";g=true}}b=h=null}return g};dhtmlXTabBar.prototype._loadURLOnDemand=function(a){if(a!=null&&this.conf.urls[a]!=null){this.cells(a).attachURL(this.conf.urls[a].href,this.conf.urls[a].ajax);this.conf.urls[a]=null}};window.dhtmlXTabBarCell=function(e,c){dhtmlXCellObject.apply(this,[e,"_tabbar"]);this.tabbar=c;this.conf.skin=this.tabbar.conf.skin;this.conf.tabbar_funcs={show:"_showTab",hide:"_hideTab",isVisible:"_isTabVisible",enable:"_enableTab",disable:"_disableTab",isEnabled:"_isTabEnabled",getIndex:"_getIndex",getText:"_getTabText",setText:"_setTabText",setActive:"_setTabActive",isActive:"_isTabActive",close:"_removeTab"};this._tabbarCall=function(a){return function(){var g=[this._idd];for(var h=0;h<arguments.length;h++){g.push(arguments[h])}return this.tabbar[a].apply(this.tabbar,g)}};for(var b in this.conf.tabbar_funcs){if(typeof(this[b])!="function"){this[b]=this._tabbarCall(this.conf.tabbar_funcs[b])}}this.attachEvent("_onCellUnload",function(){this.tabbar=null;for(var g in this.conf.tabbar_funcs){this[g]=null;this.conf.tabbar_funcs[g]=null}this.conf.tabbar_funcs=null});this.attachEvent("_onContentLoaded",function(){this.tabbar._callMainEvent("onContentLoaded",arguments);this.tabbar._callMainEvent("onTabContentLoaded",arguments)});this.attachEvent("_onContentAttach",function(){this.tabbar._adjustCell(this.tabbar.conf.lastActive)});this.attachEvent("_onBeforeContentAttach",function(a){if(a=="sidebar"&&this.conf.skin!="dhx_skyblue"){this._hideBorders()}})};window.dhtmlXTabBarCell.prototype=new dhtmlXCellObject();dhtmlXCellObject.prototype.attachTabbar=function(a){this.callEvent("_onBeforeContentAttach",["tabbar"]);if(typeof(a)=="string"){a={mode:a}}else{if(typeof(a)!="object"||a==null){a={}}}var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";if(typeof(window.dhtmlXAccordionCell)=="function"&&this instanceof window.dhtmlXAccordionCell){if(this.conf.skin=="material"){b._ofs={t:-1,r:-1,b:-1,l:-1}}else{b._ofs={t:-1}}}if(typeof(window.dhtmlXTabBarCell)=="function"&&this instanceof window.dhtmlXTabBarCell){if(this.conf.skin=="dhx_skyblue"){b._ofs={t:-1,r:-1,b:-1,l:-1}}if(this.conf.skin=="material"){b._ofs={t:8,r:8,b:8,l:8}}}if(typeof(window.dhtmlXSideBarCell)=="function"&&this instanceof window.dhtmlXSideBarCell){b._ofs={l:-1};if(this.conf.skin=="dhx_web"&&this.sidebar.conf.autohide==true){b._ofs.l=0}if(this.conf.skin=="dhx_terrace"){if(this.sidebar.conf.autohide==true){b._ofs.l=0}if(this.sidebar.conf.header==true){b._ofs.t=-1}}}if(typeof(window.dhtmlXCarouselCell)=="function"&&this instanceof window.dhtmlXCarouselCell){this._hideBorders()}this._attachObject(b);a.skin=this.conf.skin;a.parent=b;this.dataType="tabbar";this.dataObj=new dhtmlXTabBar(a);a.parent=b=null;a=null;this.callEvent("_onContentAttach",[]);return this.dataObj};function dhtmlXTabBarInitFromHTML(){var z=document.getElementsByTagName("div");for(var i=0;i<z.length;i++){if(z[i].className.indexOf("dhtmlxTabBar")!=-1){var conf={settings:{},tabs:[]};var n=z[i];var id=n.id;n.className="";var k=new Array();for(var j=0;j<n.childNodes.length;j++){if(n.childNodes[j].tagName&&n.childNodes[j].tagName!="!"){k[k.length]=n.childNodes[j]}}var skin=n.getAttribute("skin");if(skin!=null){conf.settings.skin=skin}var w=new dhtmlXTabBar({parent:id,mode:n.getAttribute("mode")});window[id]=w;acs=n.getAttribute("onbeforeinit");if(acs){eval(acs)}align=n.getAttribute("align");if(align){conf.settings.align=align}var cont={};for(var j=0;j<k.length;j++){var m=k[j];var tab={id:m.id,text:m.getAttribute("name"),width:m.getAttribute("width"),selected:m.getAttribute("selected"),active:m.getAttribute("active"),close:m.getAttribute("close")};var href=m.getAttribute("href");if(href){cont[m.id]={href:href}}else{cont[m.id]={cont:m}}conf.tabs.push(tab)}w.loadStruct(conf);for(var a in cont){if(cont[a].href){w.cells(a).attachURL(cont[a].href);cont[a].href=null}else{w.cells(a).attachObject(cont[a].cont);if(cont[a].cont.style.display=="none"){cont[a].cont.style.display=""}cont[a].cont=null}cont[a]=null}var selId=n.getAttribute("select");if(selId!=null){w.tabs(selId).setActive()}else{if(w.getActiveTab()==null){var v=w._getFirstVisible();if(v!=null){w.cells(v).setActive()}}}acs=n.getAttribute("oninit");if(acs){eval(acs)}}}if(typeof(window.addEventListener)=="function"){window.removeEventListener("load",dhtmlXTabBarInitFromHTML,false)}else{window.detachEvent("onload",dhtmlXTabBarInitFromHTML)}}if(typeof(window.addEventListener)=="function"){window.addEventListener("load",dhtmlXTabBarInitFromHTML,false)}else{window.attachEvent("onload",dhtmlXTabBarInitFromHTML)}function dhtmlXWindows(l){var h=this;var e={};if(typeof(l)!="undefined"){for(var c in l){e[c]=l[c]}}l=null;this.conf={skin:window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxwins")||"material",vp_pos_ofs:20,vp_custom:false,vp_of_auto:(e.vp_overflow=="auto"),vp_of_id:window.dhx4.newId(),ofs_w:null,ofs_h:null,button_last:null,dblclick_tm:300,dblclick_last:null,dblclick_id:null,dblclick_mode:"minmax",dblclick_active:false,dblclick_ev:(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8),fr_cover:(navigator.userAgent.indexOf("MSIE 6.0")>=0)};var b=window.dhx4.transDetect();this.conf.tr={prop:b.transProp,ev:b.transEv,height_open:"height 0.2s cubic-bezier(0.25,0.1,0.25,1)",height_close:"height 0.18s cubic-bezier(0.25,0.1,0.25,1)",op_open:"opacity 0.16s ease-in",op_close:"opacity 0.2s ease-out",op_v_open:"1",op_v_close:"0.4"};if(!e.viewport){this.attachViewportTo(document.body)}else{if(e.viewport.object!=null){this.attachViewportTo(e.viewport.object)}else{if(e.viewport.left!=null&&e.viewport.top!=null&&e.viewport.width!=null&&e.viewport.height!=null){this.setViewport(e.viewport.left,e.viewport.top,e.viewport.width,e.viewport.height,e.viewport.parent)}else{this.attachViewportTo(document.body)}}}this.w={};this.createWindow=function(n,D,A,o,F){var m={};if(arguments.length==1&&typeof(n)=="object"){m=n}else{m.id=n;m.left=D;m.top=A;m.width=o;m.height=F;if(typeof(m.id)=="undefined"||m.id==null){m.id=window.dhx4.newId()}while(this.w[m.id]!=null){m.id=window.dhx4.newId()}}if(m.left==null){m.left=0}if(m.top==null){m.top=0}m.move=(m.move!=null&&window.dhx4.s2b(m.move)==false?false:(m.deny_move!=null&&window.dhx4.s2b(m.deny_move)==true?false:true));m.park=(m.park!=null&&window.dhx4.s2b(m.park)==false?false:(m.deny_park!=null&&window.dhx4.s2b(m.deny_park)==true?false:true));m.resize=(m.resize!=null&&window.dhx4.s2b(m.resize)==false?false:(m.deny_resize!=null&&window.dhx4.s2b(m.deny_resize)==true?false:true));m.keep_in_viewport=(m.keep_in_viewport!=null&&window.dhx4.s2b(m.keep_in_viewport));m.modal=(m.modal!=null&&window.dhx4.s2b(m.modal));m.center=(m.center!=null&&window.dhx4.s2b(m.center));m.text=(m.text!=null?m.text:(m.caption!=null?m.caption:"dhtmlxWindow"));m.header=(!(m.header!=null&&window.dhx4.s2b(m.header)==false));var H=document.createElement("DIV");H.className="dhxwin_active";this.vp.appendChild(H);H._isWindow=true;H._idd=m.id;var v=document.createElement("DIV");v.className="dhxwin_hdr";v.style.zIndex=0;v.innerHTML="<div class='dhxwin_icon'></div><div class='dhxwin_text'><div class='dhxwin_text_inside'>"+m.text+"</div></div><div class='dhxwin_btns'></div>";H.appendChild(v);v.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};v.oncontextmenu=function(a){a=a||event;a.cancelBubble=true;return false};v._isWinHdr=true;v.firstChild._isWinIcon=true;var s=document.createElement("DIV");s.className="dhxwin_brd";H.appendChild(s);var z=document.createElement("DIV");z.className="dhxwin_fr_cover";z.innerHTML="<iframe class='dhxwin_fr_cover_inner' frameborder='0' border='0'></iframe><div class='dhxwin_fr_cover_inner'></div>";H.appendChild(z);this.w[m.id]={win:H,hdr:v,brd:s,fr_cover:z,b:{},conf:{z_id:window.dhx4.newId(),actv:false,modal:false,maxed:false,parked:false,sticked:false,visible:true,header:true,text:m.text,keep_in_vp:m.keep_in_viewport,allow_move:m.move,allow_park:m.park,allow_resize:m.resize,max_w:null,max_h:null,min_w:80,min_h:80}};var u={help:{title:"Help",visible:false},stick:{title:"Stick",visible:false},park:{title:"Park",visible:true},minmax:{title:"Min/Max",visible:true},close:{title:"Close",visible:true}};for(var C in u){var w=new dhtmlXWindowsButton(this,m.id,C,u[C].title,false);if(u[C].visible==false){w.hide()}v.lastChild.appendChild(w.button);this.w[m.id].b[C]=w;w=null}this._winAdjustTitle(m.id);this.w[m.id].win.style.zIndex=window.dhx4.zim.reserve(this.w[m.id].conf.z_id);var E=new dhtmlXWindowsCell(m.id,this);this.w[m.id].win.insertBefore(E.cell,z);this.w[m.id].cell=E;if(typeof(window.addEventListener)=="function"){this.w[m.id].win.addEventListener("mousedown",this._winOnMouseDown,false);this.w[m.id].win.addEventListener("mouseup",this._winOnMouseDown,false);if(this.conf.dblclick_ev){this.w[m.id].win.addEventListener("dblclick",this._winOnMouseDown,false)}if(this.conf.dnd_enabled==true&&window.dhx4.dnd.evs.start!=null){this.w[m.id].win.addEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,false);if(window.dhx4.dnd.p_en!=true){this.w[m.id].win.addEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,false);this.w[m.id].win.addEventListener(window.dhx4.dnd.evs.end,this._winOnMouseDown,false)}}}else{this.w[m.id].win.attachEvent("onmousedown",this._winOnMouseDown);this.w[m.id].win.attachEvent("onmouseup",this._winOnMouseDown);if(this.conf.dblclick_ev){this.w[m.id].win.attachEvent("ondblclick",this._winOnMouseDown)}}this._winInitFRM(m.id);this._winSetPosition(m.id,m.left,m.top);this._winSetSize(m.id,m.width,m.height);this._winMakeActive(m.id);if(m.center==true){this.w[m.id].cell.center()}if(m.modal==true){this.w[m.id].cell.setModal(true)}if(m.header==false){this.w[m.id].cell.hideHeader()}f=H=v=s=z=E=null;return this.w[m.id].cell};this._winOnMouseDown=function(n){n=n||event;var a=n.target||n.srcElement;var m={press_type:n.type};if(n.type=="MSPointerDown"||n.type=="pointerdown"){return}else{if(h.conf.ev_skip==true){h.conf.ev_skip=false;a=null;return}}while(a!=null&&a._isWindow!=true){if(typeof(a.className)!="undefined"&&m.mode==null){if(typeof(a._buttonName)!="undefined"){m.mode="button";m.button_name=a._buttonName}else{if(a._isWinHdr==true){m.mode="hdr"}else{if(a._isWinIcon==true){m.mode="icon"}}}}a=a.parentNode}if(m.mode==null){m.mode="win"}m.id=(a!=null&&a._isWindow==true?a._idd:null);a=null;if(m.id!=null&&h.w[m.id]!=null){h.callEvent("_winMouseDown",[n,m])}};this._winOnParkTrans=function(m){if(m.stopPropagation){m.stopPropagation()}var a=h.w[this._idd];if(m.propertyName=="opacity"){h._winCellClearOpacity(this._idd)}if(m.propertyName=="height"&&a.conf.tr_mode=="park"){if(a.conf.tr_mode=="park"){a.win.style[h.conf.tr.prop]="";if(!a.conf.parked){h._winAdjustCell(this._idd);h._callMainEvent("onParkDown",this._idd);if(a.conf.keep_in_vp){h._winAdjustPosition(this._idd,a.conf.x,a.conf.y)}}else{a.hdr.style.zIndex=3;h._callMainEvent("onParkUp",this._idd)}}}a=null};this.unload=function(){this.conf.unloading=true;if(this._dndInitModule){this._dndUnloadModule()}for(var m in this.w){this._winClose(m)}this.w=null;if(this.cm!=null&&typeof(this._unloadContextMenu)=="function"){this._unloadContextMenu()}window.dhx4._eventable(this,"clear");this.attachViewportTo(null);for(var m in this.conf){this.conf[m]=null;delete this.conf[m]}for(var m in this){this[m]=null}h=m=null};window.dhx4._eventable(this);this.attachEvent("_winMouseDown",this._winMouseDownHandler);if(this._dndInitModule){this._dndInitModule()}if(e.wins!=null){for(var j=0;j<e.wins.length;j++){var g=e.wins[j];this.createWindow(g)}}e=null;return this}dhtmlXWindows.prototype.forEachWindow=function(c){for(var b in this.w){c.apply(window,[this.w[b].cell])}};dhtmlXWindows.prototype.window=function(a){if(this.w[a]!=null){return this.w[a].cell}return null};dhtmlXWindows.prototype.isWindow=function(a){return(this.w[a]!=null)};dhtmlXWindows.prototype.findByText=function(e){var c=[];for(var b in this.w){if((this.w[b].cell.getText()).indexOf(String(e))>=0){c.push(this.w[b])}}return c};dhtmlXWindows.prototype.setSkin=function(c){if(c==this.conf.skin){return}if(this.vp!=null){this.vp.className=String(this.vp.className).replace("dhxwins_vp_"+this.conf.skin," dhxwins_vp_"+c)}for(var b in this.w){this.w[b].cell._resetSizeState();this._winAdjustCell(b);this._winAdjustTitle(b)}this.conf.skin=c};dhtmlXWindows.prototype.getBottommostWindow=function(){return this._getTopBottomWin(false)};dhtmlXWindows.prototype.getTopmostWindow=function(){return this._getTopBottomWin(true)};dhtmlXWindows.prototype._getTopBottomWin=function(g){var e=null;for(var b in this.w){if(this.w[b].conf.visible){var c=false;if(e!=null){c=e.z>this.w[b].win.style.zIndex;if(g){c=!c}}if(e==null||c){e={win:this.w[b].cell,z:this.w[b].win.style.zIndex}}}}return(e?e.win:null)};dhtmlXWindows.prototype._winMakeActive=function(e,h){if(e!=null&&h!==true&&this.w[e].conf.actv==true){return}var s=[];var m={};for(var c=0;c<this._zOrder.length;c++){var l=this._zOrder[c].name;var g=this._zOrder[c].value;var t=[];for(var o in this.w){var r=this.w[o];if(m[o]==null&&r.conf[l]===g&&r.conf.visible==true){if(e!=o){window.dhx4.zim.clear(r.conf.z_id);t.push([o,Number(r.win.style.zIndex)]);m[o]=true}}r=null}t.sort(function(v,u){return(v[1]<u[1]?1:-1)});if(e!=null&&this.w[e].conf[l]===g&&m[e]==null){window.dhx4.zim.clear(this.w[e].conf.z_id);var j=[[e,Number(this.w[e].win.style.zIndex)]];t=j.concat(t);m[e]=true}s=s.concat(t)}for(var c=s.length-1;c>=0;c--){var o=s[c][0];var r=this.w[o];r.win.style.zIndex=window.dhx4.zim.reserve(r.conf.z_id);if(r.conf.modal&&this.mcover!=null){for(var n in this.mcover){this.mcover[n].style.zIndex=r.win.style.zIndex}}this._winAdjustFRMZIndex(o);if(e==null&&c==0){e=o}r.conf.actv=(e==o);r.win.className=(r.conf.actv?"dhxwin_active":"dhxwin_inactive");r=null}if(e!=null&&this.conf.last_active!=e){this._callMainEvent("onFocus",e)}this.conf.last_active=e};dhtmlXWindows.prototype._zOrder=[{name:"modal",value:true},{name:"sticked",value:true},{name:"sticked",value:false}];dhtmlXWindows.prototype._vpPull={};dhtmlXWindows.prototype._vpOf={};dhtmlXWindows.prototype._vpPullAdd=function(){if(this.vp==null){return}var c=null;for(var b in this._vpPull){if(this._vpPull[b].vp==this.vp){this._vpPull[b].count++;c=b}}if(c==null){this._vpPull[window.dhx4.newId()]={vp:this.vp,count:1}}if(this.vp==document.body&&this.conf.vp_of_auto==true){this._vpOfInit()}this._vpOfUpd()};dhtmlXWindows.prototype._vpPullRemove=function(){if(this.vp==null){return 0}var c=0;for(var b in this._vpPull){if(this._vpPull[b].vp==this.vp){c=--this._vpPull[b].count;if(c==0){this._vpPull[b].vp=null;this._vpPull[b].count=null;delete this._vpPull[b]}}}this._vpOfClear();return c};dhtmlXWindows.prototype._vpOfInit=function(){this._vpOf[this.conf.vp_of_id]=true};dhtmlXWindows.prototype._vpOfClear=function(){this._vpOf[this.conf.vp_of_id]=false;delete this._vpOf[this.conf.vp_of_id];this._vpOfUpd()};dhtmlXWindows.prototype._vpOfUpd=function(){var c=false;for(var b in this._vpOf){c=c||this._vpOf[b]}if(c==true){if(document.body.className.match(/dhxwins_vp_auto/)==null){document.body.className+=" dhxwins_vp_auto"}}else{if(document.body.className.match(/dhxwins_vp_auto/)!=null){document.body.className=String(document.body.className).replace(/\s{0,}dhxwins_vp_auto/gi,"")}}};dhtmlXWindows.prototype.attachViewportTo=function(g){var c=this._vpPullRemove();if(this.conf.vp_custom){while(this.vp.childNodes.length>0){this.vp.removeChild(this.vp.lastChild)}this.vp.parentNode.removeChild(this.vp);this.vp=null}else{if(this.vp!=null&&c==0){this.vp.className=String(this.vp.className).replace(new RegExp("\\s{1,}dhxwins_vp_"+this.conf.skin),"")}}if(g==null){this.vp=null}else{this.vp=(typeof(g)=="string"?document.getElementById(g):g);var e="dhxwins_vp_"+this.conf.skin;if(this.vp.className.indexOf(e)<0){this.vp.className+=" "+e}g=null;for(var b in this.w){this.vp.appendChild(this.w[b].win)}this.conf.vp_custom=false}if(this.vp==document.body){document.body.style.position="static"}this._vpPullAdd()};dhtmlXWindows.prototype.setViewport=function(b,h,e,a,g){var c=document.createElement("DIV");c.style.position="absolute";c.style.left=b+"px";c.style.top=h+"px";c.style.width=e+"px";c.style.height=a+"px";if(typeof(g)=="undefined"||g==null){g=document.body}else{if(typeof(g)=="string"){g=document.getElementById(g)}}g.appendChild(c);this.attachViewportTo(c);this.conf.vp_custom=true;g=c=null};dhtmlXWindows.prototype._winSetPosition=function(e,a,c){var b=this.w[e];if(b.conf.maxed){b.conf.lastMX+=(a-b.conf.x);b.conf.lastMY+=(c-b.conf.y)}b.conf.x=a;b.conf.y=c;b.win.style.left=b.conf.x+"px";b.win.style.top=b.conf.y+"px";this._winAdjustFRMPosition(e);b=null};dhtmlXWindows.prototype._winAdjustPosition=function(j,b,h){var c=this.w[j];if(typeof(b)=="undefined"){b=c.conf.x}if(typeof(h)=="undefined"){h=c.conf.y}var a=(c.conf.keep_in_vp?0:-c.conf.w+this.conf.vp_pos_ofs);var g=(c.conf.keep_in_vp?this.vp.clientWidth-c.conf.w:this.vp.clientWidth-this.conf.vp_pos_ofs);if(b<a){b=a}else{if(b>g){b=g}}var e=(c.conf.keep_in_vp?this.vp.clientHeight-c.conf.h:this.vp.clientHeight-this.conf.vp_pos_ofs);if(h<0){h=0}else{if(h>e){h=e}}if(b!=c.conf.x||h!=c.conf.y){this._winSetPosition(j,b,h)}c=null};dhtmlXWindows.prototype._winSetSize=function(l,h,c,j,b){var e=this.w[l];var a=(h!=null?h:e.conf.w);var g=(c!=null?c:e.conf.h);if(this.conf.ofs_w==null){e.win.style.width=a+"px";e.win.style.height=g+"px";this.conf.ofs_w=e.win.offsetWidth-a;this.conf.ofs_h=e.win.offsetHeight-g}if(e.conf.min_w!=null&&a<e.conf.min_w){a=e.conf.min_w}if(e.conf.max_w!=null&&a>e.conf.max_w){a=e.conf.max_w}if(!e.conf.parked&&e.conf.min_h!=null&&g<e.conf.min_h){g=e.conf.min_h}if(e.conf.max_h!=null&&g>e.conf.max_h){g=e.conf.max_h}if(e.conf.keep_in_vp){if(a>this.vp.clientWidth){a=this.vp.clientWidth}if(g>this.vp.clientHeight){g=this.vp.clientHeight}}e.win.style.width=a-this.conf.ofs_w+"px";e.win.style.height=g-this.conf.ofs_h+"px";e.conf.w=a;e.conf.h=g;this._winAdjustFRMSize(l);if(b){this._winAdjustPosition(l,e.conf.x,e.conf.y)}if(!e.conf.parked&&j!=true){this._winAdjustCell(l)}e=null};dhtmlXWindows.prototype._winMinmax=function(g,c){if(typeof(c)!="undefined"&&this.w[g].conf.maxed==c){return}if(this.w[g].conf.allow_resize==false){return}var b=this.w[g];if(b.conf.parked){this._winPark(g,false)}if(b.conf.maxed){this._winSetSize(g,b.conf.lastMW,b.conf.lastMH);this._winAdjustPosition(g,b.conf.lastMX,b.conf.lastMY);b.conf.maxed=false}else{var a=0;var e=0;if(b.conf.max_w!=null){a=b.conf.x+Math.round(b.conf.w-b.conf.max_w)/2}if(b.conf.max_h!=null){e=Math.max(b.conf.y+Math.round(b.conf.h-b.conf.max_h)/2,0)}b.conf.lastMX=b.conf.x;b.conf.lastMY=b.conf.y;b.conf.lastMW=b.conf.w;b.conf.lastMH=b.conf.h;this._winSetSize(g,this.vp.clientWidth,this.vp.clientHeight);this._winAdjustPosition(g,a,e);b.conf.maxed=true}b.b.minmax.setCss(b.conf.maxed?"minmaxed":"minmax");if(b.conf.maxed){this._callMainEvent("onMaximize",g)}else{this._callMainEvent("onMinimize",g)}this._callMainEvent("onResizeFinish",g);b=null};dhtmlXWindows.prototype._winShow=function(b,a){if(this.w[b].conf.visible==true){return}this.w[b].win.style.display="";this.w[b].conf.visible=true;if(a==true||this.conf.last_active==null){this._winMakeActive(b,true)}this._callMainEvent("onShow",b)};dhtmlXWindows.prototype._winHide=function(b,a){if(this.w[b].conf.visible==false){return}this.w[b].win.style.display="none";this.w[b].conf.visible=false;if(this.w[b].conf.actv){this.w[b].conf.actv=false;this.w[b].win.className="dhxwin_inactive";this._winMakeActive(null,true)}this._callMainEvent("onHide",b)};dhtmlXWindows.prototype._winPark=function(c,a){if(this.w[c].conf.allow_park==false){return}if(this.w[c].conf.header==false){return}var b=this.w[c];if(a==true&&this.conf.tr.prop!==false){b.win.style[this.conf.tr.prop]=this.conf.tr[b.conf.parked?"height_open":"height_close"];if(!b.conf.tr_ev){b.win.addEventListener(this.conf.tr.ev,this._winOnParkTrans,false);b.conf.tr_ev=true}}if(b.conf.parked){b.hdr.className=String(b.hdr.className).replace(/\s{1,}dhxwin_hdr_parked/gi,"");b.hdr.style.zIndex=0;b.conf.parked=false;b.conf.tr_mode="park";this._winCellSetOpacity(c,"open",a);this._winSetSize(c,b.conf.w,b.conf.lastPH,(a==true&&this.conf.tr.prop!==false));if(!(a==true&&this.conf.tr.prop!==false)){this._callMainEvent("onParkDown",c);if(b.conf.keep_in_vp){this._winAdjustPosition(c,b.conf.x,b.conf.y)}}if(window.dhx4.isIE8==true&&this.conf.tr.prop==false&&b.cell.cell.className.match(/dhxwin_parked/)!=null){b.cell.cell.className=b.cell.cell.className.replace(/\s{0,}dhxwin_parked/gi,"")}}else{b.conf.lastPH=b.conf.h;b.hdr.className+=" dhxwin_hdr_parked";if(a==false||this.conf.tr.prop==false){b.hdr.style.zIndex=3}b.conf.parked=true;b.conf.tr_mode="park";this._winCellSetOpacity(c,"close",a);this._winSetSize(c,b.conf.w,b.hdr.offsetHeight+this.conf.ofs_h,(a==true&&this.conf.tr.prop!==false));if(!(a==true&&this.conf.tr.prop!==false)){this._callMainEvent("onParkUp",c)}if(window.dhx4.isIE8==true&&this.conf.tr.prop==false&&b.cell.cell.className.match(/dhxwin_parked/)==null){b.cell.cell.className+=" dhxwin_parked"}}b=null};dhtmlXWindows.prototype._winCellSetOpacity=function(j,h,c,g){var b=this.w[j].cell;for(var e in b.conf.idx){if({pr1:true,pr2:true}[e]!=true){if(c==true&&this.conf.tr.prop!=false){b.cell.childNodes[b.conf.idx[e]].style[this.conf.tr.prop]=this.conf.tr["op_"+h]}b.cell.childNodes[b.conf.idx[e]].style.opacity=this.conf.tr["op_v_"+h]}}b=null};dhtmlXWindows.prototype._winCellClearOpacity=function(e){var b=this.w[e].cell;for(var c in b.conf.idx){if({pr1:true,pr2:true}[c]!=true){if(this.conf.tr.prop!=false){b.cell.childNodes[b.conf.idx[c]].style[this.conf.tr.prop]=""}}}b=null};dhtmlXWindows.prototype._winStick=function(b,a){if(typeof(a)!="undefined"&&this.w[b].conf.sticked==a){return}this.w[b].conf.sticked=!this.w[b].conf.sticked;this.w[b].b.stick.setCss(this.w[b].conf.sticked?"sticked":"stick");this._winMakeActive(this.conf.last_active,true);if(this.w[b].conf.sticked){this._callMainEvent("onStick",b)}else{this._callMainEvent("onUnStick",b)}};dhtmlXWindows.prototype._winClose=function(e){if(this._callMainEvent("onClose",e)!==true&&this.conf.unloading!=true){return}var c=this.w[e];if(c.conf.fs_mode){c.cell.setToFullScreen(false)}if(c.conf.modal){this._winSetModal(e,false)}window.dhx4.zim.clear(c.conf.z_id);if(this.cm!=null&&this.cm.icon[e]!=null){this._detachContextMenu("icon",e,null)}if(typeof(window.addEventListener)=="function"){c.win.removeEventListener("mousedown",this._winOnMouseDown,false);c.win.removeEventListener("mouseup",this._winOnMouseDown,false);if(this.conf.dblclick_ev){c.win.removeEventListener("dblclick",this._winOnMouseDown,false)}if(this.conf.dnd_enabled==true&&window.dhx4.dnd.evs.start!=null){c.win.removeEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,false);if(window.dhx4.dnd.p_en!=true){c.win.removeEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,false);c.win.removeEventListener(window.dhx4.dnd.evs.end,this._winOnMouseDown,false)}}}else{c.win.detachEvent("onmousedown",this._winOnMouseDown);c.win.detachEvent("onmouseup",this._winOnMouseDown);if(this.conf.dblclick_ev){c.win.attachEvent("ondblclick",this._winOnMouseDown)}}for(var b in c.b){this._winRemoveButton(e,b,true)}c.b=null;c.cell._unload();c.cell=null;c.brd.parentNode.removeChild(c.brd);c.brd=null;if(c.fr_cover!=null){c.fr_cover.parentNode.removeChild(c.fr_cover);c.fr_cover=null}if(c.fr_m_cover!=null){c.fr_m_cover.parentNode.removeChild(c.fr_m_cover);c.fr_m_cover=null}c.hdr._isWinHdr=true;c.hdr.firstChild._isWinIcon=true;c.hdr.onselectstart=null;c.hdr.parentNode.removeChild(c.hdr);c.hdr=null;for(var b in c.conf){c.conf[b]=null;delete c.conf[b]}c.conf=null;c.win._idd=null;c.win._isWindow=null;c.win.parentNode.removeChild(c.win);c.win=null;c=null;this.w[e]=null;delete this.w[e];if(!this.conf.unloading){this._winMakeActive(null,true)}};dhtmlXWindows.prototype._winSetModal=function(j,e,h){if(this.w[j].conf.modal==e){return}if(typeof(h)=="undefined"){h=true}var c=this.w[j];if(e==true&&c.conf.modal==false){if(this.conf.last_modal!=null){this._winSetModal(this.conf.last_modal,false,false)}if(this.mcover==null){var g=document.createElement("DIV");g.className="dhxwins_mcover";this.vp.insertBefore(g,c.fr_m_cover||c.win);this.mcover={d:g};if(this.conf.fr_cover){this.mcover.f=document.createElement("IFRAME");this.mcover.f.className="dhxwins_mcover";this.mcover.f.border=0;this.mcover.f.frameBorder=0;this.vp.insertBefore(this.mcover.f,g)}g=null}else{if(this.mcover.d.nextSibling!=(c.fr_m_cover||c.win)){this.vp.insertBefore(this.mcover.d,c.fr_m_cover||c.win);if(this.mcover.f!=null){this.vp.insertBefore(this.mcover.f,this.mcover.d)}}}c.conf.modal=true;this.conf.last_modal=j;this._winMakeActive(j,true)}else{if(e==false&&c.conf.modal==true){c.conf.modal=false;this.conf.last_modal=null;if(h&&this.mcover!=null){for(var b in this.mcover){this.vp.removeChild(this.mcover[b]);this.mcover[b]=null}this.mcover=null}}}c=null};dhtmlXWindows.prototype._winMouseDownHandler=function(c,b){var a=c.target||c.srcElement;if(c.button>=2){return}if(b.mode=="button"){if(b.press_type=="mousedown"){this.conf.button_last=b.button_name}else{if((b.press_type=="mouseup"&&b.button_name==this.conf.button_last)||b.press_type=="MSPointerDown"||b.press_type=="pointerdown"){this.conf.button_last=null;if(this._winButtonClick(b.id,b.button_name,c)!==true){return}}}}if((b.press_type=="pointerdown"||b.press_type=="mousedown"||b.press_type=="dblclick")&&b.mode=="hdr"){this.conf.dblclick_active=false;if(this.conf.dblclick_ev==true){if(b.press_type=="dblclick"){this.conf.dblclick_active=true}}else{if(this.conf.dblclick_last==null){this.conf.dblclick_last=new Date().getTime();this.dblclick_id=b.id}else{var a=new Date().getTime();if(this.conf.dblclick_last+this.conf.dblclick_tm>a&&this.dblclick_id==b.id){this.conf.dblclick_active=true;this.conf.dblclick_last=null;this.dblclick_id=null}else{this.conf.dblclick_last=a;this.dblclick_id=b.id}}}if(this.conf.dblclick_active){this._winDoHeaderDblClick(b.id);return}}if(b.press_type=="mousedown"||(b.press_type==window.dhx4.dnd.evs.start)){this._winMakeActive(b.id)}if(b.press_type=="touchend"){}};dhtmlXWindows.prototype._winDoHeaderDblClick=function(a){if(this.conf.dblclick_mode=="minmax"){this._winMinmax(a);return}if(this.conf.dblclick_mode=="park"){this._winPark(a,true);return}if(typeof(this.conf.dblclick_mode)=="function"){this.conf.dblclick_mode.apply(window,[a]);return}if(typeof(window[this.conf.dblclick_mode])=="function"){window[this.conf.dblclick_mode].apply(window,[a]);return}};dhtmlXWindows.prototype._winAdjustCell=function(b){var n=this.w[b];if(this.conf.skin=="material"){var m=0;var l=(n.conf.header?n.hdr.offsetHeight:1);var e=n.win.clientWidth;var o=n.win.clientHeight-l}else{var m=1;var l=(n.conf.header?n.hdr.offsetHeight:1);var e=n.win.clientWidth-2;var o=n.win.clientHeight-l-1}n.brd.style.left=m+"px";n.brd.style.top=l+"px";if(n.conf.brd==null){n.brd.style.width=e+"px";n.brd.style.height=o+"px";n.conf.brd={w:e-n.brd.offsetWidth,h:o-n.brd.offsetHeight}}n.brd.style.width=e+n.conf.brd.w+"px";n.brd.style.height=o+n.conf.brd.h+"px";var c=5;if(this.conf.skin=="material"){c=1}var a=1+c;var j=(n.conf.header?l:l+c);var g=n.brd.clientWidth;var h=n.brd.clientHeight;n.cell._setSize(a,j,g,h);n.fr_cover.style.left=a+"px";n.fr_cover.style.top=j+"px";n.fr_cover.style.width=g+"px";n.fr_cover.style.height=h+"px";n=null};dhtmlXWindows.prototype._winAdjustTitle=function(g){var b=this.w[g].hdr.childNodes[0];var e=this.w[g].hdr.childNodes[1];var c=this.w[g].hdr.childNodes[2];var a=(this.conf.skin=="material"?7:0);e.style.paddingLeft=b.offsetWidth+12+a+"px";e.style.paddingRight=c.offsetWidth+10+a+"px";e=c=b=null};dhtmlXWindows.prototype._callMainEvent=function(b,e){var a=this.w[e];if(a.cell.checkEvent(b)){var c=a.cell._callMainEvent(b,[a.cell])}else{var c=this.callEvent(b,[a.cell])}a=null;return c};dhtmlXWindows.prototype._winInitFRM=function(c){if(this.conf.fr_cover!=true){return}var a=this.w[c];var b=document.createElement("IFRAME");b.className="dhxwin_main_fr_cover";b.border=0;b.frameBorder=0;b.style.zIndex=a.win.style.zIndex;a.win.parentNode.insertBefore(b,a.win);a.fr_m_cover=b;b=null};dhtmlXWindows.prototype._winAdjustFRMSize=function(b){var a=this.w[b];if(a.fr_m_cover!=null){a.fr_m_cover.style.width=a.conf.w+"px";a.fr_m_cover.style.height=a.conf.h+"px"}a=null};dhtmlXWindows.prototype._winAdjustFRMPosition=function(b){var a=this.w[b];if(a.fr_m_cover!=null){a.fr_m_cover.style.left=a.win.style.left;a.fr_m_cover.style.top=a.win.style.top}a=null};dhtmlXWindows.prototype._winAdjustFRMZIndex=function(b){var a=this.w[b];if(a.fr_m_cover!=null){a.fr_m_cover.style.zIndex=a.win.style.zIndex}a=null};function dhtmlXWindowsCell(g,e){dhtmlXCellObject.apply(this,[g,"_wins"]);this.wins=e;this.cell._winId=g;this.conf.skin=this.wins.conf.skin;this.attachEvent("_onCellUnload",function(){if(this._unloadResize){this._unloadResize()}window.dhx4._eventable(this.cell,"clear");this.cell._winId=null;this.wins=null;this.setText=null;this.getText=null;this.allowMove=null;this.denyMove=null;this.isMovable=null;this.allowResize=null;this.denyResize=null;this.isResizable=null;this.maximize=null;this.minimize=null;this.isMaximized=null;this.setPosition=null;this.getPosition=null;this.adjustPosition=null;this.park=null;this.isParked=null;this.allowPark=null;this.denyPark=null;this.isParkable=null;this.show=null;this.hide=null;this.isHidden=null;this.stick=null;this.unstick=null;this.isSticked=null;this.setDimension=null;this.getDimension=null;this.setMinDimension=null;this.getMinDimension=null;this.setMaxDimension=null;this.getMaxDimension=null;this.keepInViewport=null;this.center=null;this.centerOnScreen=null;this.bringToTop=null;this.bringToBottom=null;this.isOnTop=null;this.isOnBottom=null;this.showHeader=null;this.hideHeader=null;this.setModal=null;this.isModal=null;this.close=null;this._adjustByCont=null;this.button=null;this.addUserButton=null;this.removeUserButton=null;c=null});this.attachEvent("_onContentLoaded",function(){this.wins._callMainEvent("onContentLoaded",this._idd)});this.attachEvent("_onContentMouseDown",function(h,a){this.wins.callEvent("_winMouseDown",[a,{id:h,mode:"win"}])});this._callMainEvent=function(h,a){return this.callEvent(h,a)};this.conf.tr={};for(var b in this.wins.conf.tr){this.conf.tr[b]=this.wins.conf.tr[b]}if(this.conf.tr.prop!=false){}if(this._initResize){this._initResize()}window.dhx4._eventable(this.cell);var c=this;this.cell.attachEvent("_setCellSize",function(a,m){var j=c.wins.w[this._winId].conf.w-c.conf.size.w;var l=c.wins.w[this._winId].conf.h-c.conf.size.h;c.setDimension(a+j,m+l)});return this}dhtmlXWindowsCell.prototype=new dhtmlXCellObject();dhtmlXWindowsCell.prototype.setText=function(a){this.wins.w[this._idd].conf.text=a;this.wins.w[this._idd].hdr.childNodes[1].firstChild.innerHTML=a};dhtmlXWindowsCell.prototype.getText=function(){return this.wins.w[this._idd].conf.text};dhtmlXWindowsCell.prototype.allowMove=function(){this.wins.w[this._idd].conf.allow_move=true};dhtmlXWindowsCell.prototype.denyMove=function(){this.wins.w[this._idd].conf.allow_move=false};dhtmlXWindowsCell.prototype.isMovable=function(){return(this.wins.w[this._idd].conf.allow_move==true)};dhtmlXWindowsCell.prototype.allowResize=function(){this.wins.w[this._idd].conf.allow_resize=true;this.wins.w[this._idd].b.minmax.enable()};dhtmlXWindowsCell.prototype.denyResize=function(){this.wins.w[this._idd].conf.allow_resize=false;this.wins.w[this._idd].b.minmax.disable()};dhtmlXWindowsCell.prototype.isResizable=function(){return(this.wins.w[this._idd].conf.allow_resize==true)};dhtmlXWindowsCell.prototype.maximize=function(){this.wins._winMinmax(this._idd,true)};dhtmlXWindowsCell.prototype.minimize=function(){this.wins._winMinmax(this._idd,false)};dhtmlXWindowsCell.prototype.isMaximized=function(){return(this.wins.w[this._idd].conf.maxed==true)};dhtmlXWindowsCell.prototype.setPosition=function(a,b){this.wins._winSetPosition(this._idd,a,b)};dhtmlXWindowsCell.prototype.getPosition=function(){var a=this.wins.w[this._idd];var b=[a.conf.x,a.conf.y];a=null;return b};dhtmlXWindowsCell.prototype.adjustPosition=function(){this.wins._winAdjustPosition(this._idd)};dhtmlXWindowsCell.prototype.park=function(){this.wins._winPark(this._idd,true)};dhtmlXWindowsCell.prototype.isParked=function(){return(this.wins.w[this._idd].conf.parked==true)};dhtmlXWindowsCell.prototype.allowPark=function(){this.wins.w[this._idd].conf.allow_park=true;this.wins.w[this._idd].b.park.enable()};dhtmlXWindowsCell.prototype.denyPark=function(){this.wins.w[this._idd].conf.allow_park=false;this.wins.w[this._idd].b.park.disable()};dhtmlXWindowsCell.prototype.isParkable=function(){return(this.wins.w[this._idd].conf.allow_park==true)};dhtmlXWindowsCell.prototype.show=function(a){this.wins._winShow(this._idd,window.dhx4.s2b(a))};dhtmlXWindowsCell.prototype.hide=function(){this.wins._winHide(this._idd)};dhtmlXWindowsCell.prototype.isHidden=function(){return(this.wins.w[this._idd].conf.visible!=true)};dhtmlXWindowsCell.prototype.stick=function(){this.wins._winStick(this._idd,true)};dhtmlXWindowsCell.prototype.unstick=function(){this.wins._winStick(this._idd,false)};dhtmlXWindowsCell.prototype.isSticked=function(){return(this.wins.w[this._idd].conf.sticked==true)};dhtmlXWindowsCell.prototype.setDimension=function(c,a){var b=this.wins.w[this._idd];if(b.conf.parked){this.wins._winPark(this._idd,false)}if(b.conf.maxed){if(c!=null){b.conf.lastMW=c}if(a!=null){b.conf.lastMH=a}this.wins._winMinmax(this._idd)}else{this.wins._winSetSize(this._idd,c,a,false,true)}b=null};dhtmlXWindowsCell.prototype.getDimension=function(){var a=this.wins.w[this._idd];var b=[a.conf.w,a.conf.h];a=null;return b};dhtmlXWindowsCell.prototype.setMinDimension=function(c,a){var b=this.wins.w[this._idd];b.conf.min_w=c;b.conf.min_h=a;this.wins._winSetSize(this._idd,b.conf.w,b.conf.h);b=null};dhtmlXWindowsCell.prototype.getMinDimension=function(){var a=this.wins.w[this._idd];var b=[a.conf.min_w,a.conf.min_h];a=null;return b};dhtmlXWindowsCell.prototype.setMaxDimension=function(c,a){var b=this.wins.w[this._idd];b.conf.max_w=c;b.conf.max_h=a;this.wins._winSetSize(this._idd,b.conf.w,b.conf.h);b=null};dhtmlXWindowsCell.prototype.getMaxDimension=function(){var a=this.wins.w[this._idd];var b=[a.conf.max_w,a.conf.max_h];a=null;return b};dhtmlXWindowsCell.prototype.keepInViewport=function(a){this.wins.w[this._idd].conf.keep_in_vp=window.dhx4.s2b(a)};dhtmlXWindowsCell.prototype.center=function(){var c=this.wins.vp;var b=this.wins.w[this._idd];var a=Math.round((c.clientWidth-b.conf.w)/2);var e=Math.round((c.clientHeight-b.conf.h)/2);this.wins._winSetPosition(this._idd,a,e);c=b=null};dhtmlXWindowsCell.prototype.centerOnScreen=function(){var b=this.wins.w[this._idd];var h=window.dhx4.screenDim();var g=window.dhx4.absLeft(this.wins.vp);var e=window.dhx4.absTop(this.wins.vp);var c=this.wins.vp.parentNode;while(c!=null){if(c.scrollLeft){g=g-c.scrollLeft}if(c.scrollTop){e=e-c.scrollTop}c=c.parentNode}var a=Math.round((h.right-h.left-b.conf.w)/2);var j=Math.round((h.bottom-h.top-b.conf.h)/2);this.wins._winAdjustPosition(this._idd,a-g,j-e);d=b=null};dhtmlXWindowsCell.prototype.bringToTop=function(){this.wins._winMakeActive(this._idd,true)};dhtmlXWindowsCell.prototype.bringToBottom=function(){var a=(this.wins.w[this._idd].conf.actv?null:this.wins.conf.last_active);window.dhx4.zim.clear(this.wins.w[this._idd].conf.z_id);this.wins.w[this._idd].win.style.zIndex=0;this.wins._winMakeActive(a,true)};dhtmlXWindowsCell.prototype.isOnTop=function(){return(this.wins.w[this._idd].conf.actv==true)};dhtmlXWindowsCell.prototype.isOnBottom=function(){var c={id:null,z:+Infinity};for(var b in this.wins.w){if(this.wins.w[b].conf.visible&&this.wins.w[b].win.style.zIndex<c.z){c.id=b;c.z=this.wins.w[b].win.style.zIndex}}return(c.id==this._idd)};dhtmlXWindowsCell.prototype.showHeader=function(){var a=this.wins.w[this._idd];if(a.conf.header==false){a.hdr.className=String(a.hdr.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,"");a.brd.className=String(a.brd.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,"");this.conf.cells_cont=null;a.conf.brd=null;a.conf.header=true;this.wins._winAdjustCell(this._idd)}a=null};dhtmlXWindowsCell.prototype.hideHeader=function(){var a=this.wins.w[this._idd];if(a.conf.header==true){if(a.conf.parked){this.wins._winPark(this._idd,false)}a.hdr.className+=" dhxwin_hdr_hidden";a.brd.className+=" dhxwin_hdr_hidden";this.conf.cells_cont=null;a.conf.brd=null;a.conf.header=false;this.wins._winAdjustCell(this._idd)}a=null};dhtmlXWindowsCell.prototype.setModal=function(a){this.wins._winSetModal(this._idd,window.dhx4.s2b(a))};dhtmlXWindowsCell.prototype.isModal=function(){return(this.wins.w[this._idd].conf.modal==true)};dhtmlXWindowsCell.prototype._adjustByCont=function(a,b){a+=this.wins.w[this._idd].conf.w-this.conf.size.w;b+=this.wins.w[this._idd].conf.h-this.conf.size.h;this.wins._winSetSize(this._idd,a,b)};dhtmlXWindowsCell.prototype.close=function(){this.wins._winClose(this._idd)};dhtmlXWindowsCell.prototype.setIconCss=function(a){this.wins.w[this._idd].hdr.firstChild.className="dhxwin_icon "+a;this.wins._winAdjustTitle(this._idd)};dhtmlXWindowsCell.prototype.setToFullScreen=function(b){b=window.dhx4.s2b(b);var a=this.wins.w[this._idd];if(a.conf.fs_mode==b){a=null;return}if(this.wins.fsn==null){this.wins.fsn=document.createElement("DIV");this.wins.fsn.className=this.wins.vp.className+" dhxwins_vp_fs";document.body.appendChild(this.wins.fsn)}if(b){this.wins.fsn.appendChild(a.win);this.maximize();this.hideHeader()}else{this.wins.vp.appendChild(a.win);this.minimize();this.showHeader();if(this.wins.fsn.childNodes.length==0){this.wins.fsn.parentNode.removeChild(this.wins.fsn);this.wins.fsn=null}}a.conf.fs_mode=b;a=null};dhtmlXWindowsCell.prototype.button=function(a){if(a=="minmax1"||a=="minmax2"){a="minmax"}return this.wins.w[this._idd].b[a]};dhtmlXWindowsCell.prototype.addUserButton=function(l,j,e){var a=new dhtmlXWindowsButton(this.wins,this._idd,l,e,true);var g=null;var c=this.wins.w[this._idd].hdr.lastChild;if(isNaN(j)){j=0}else{if(j<0){j=0}}if(c.childNodes[j]!=null){g=c.childNodes[j]}if(g!=null){c.insertBefore(a.button,g)}else{c.appendChild(a.button)}this.wins.w[this._idd].b[l]=a;a=g=c=null;this.wins._winAdjustTitle(this._idd)};dhtmlXWindowsCell.prototype.removeUserButton=function(a){if(this.wins.w[this._idd].b[a]==null||this.wins.w[this._idd].b[a].conf.custom!=true){return}this.wins._winRemoveButton(this._idd,a)};window.dhtmlXWindowsButton=function(g,b,a,e,c){this.conf={wins:g,winId:b,name:a,enabled:true,visible:true,custom:true};this.button=document.createElement("DIV");this.button._buttonName=a;this.button.title=e;this.enable=function(){this.conf.enabled=true;this.setCss(this.conf.css)};this.disable=function(){this.conf.enabled=false;this.setCss(this.conf.css)};this.isEnabled=function(){return(this.conf.enabled==true)};this.show=function(){this.button.style.display="";this.conf.visible=true;this.conf.wins._winAdjustTitle(this.conf.winId)};this.hide=function(){this.button.style.display="none";this.conf.visible=false;this.conf.wins._winAdjustTitle(this.conf.winId)};this.isHidden=function(){return(this.conf.visible==false)};this.setCss=function(j){this.conf.css=j;var h=(this.conf.enabled?"":"_dis");this.button.className="dhxwin_button"+h+" dhxwin_button_"+this.conf.css+h};this._doOnClick=function(h){return this.callEvent("onClick",[this.conf.wins.w[this.conf.winId].cell,this])};this.unload=function(h){dhx4._eventable(this,"clear");this.button._buttonName=null;this.button.parentNode.removeChild(this.button);if(this.conf.wins.cm!=null&&this.conf.wins.cm.button[this.conf.winId]!=null&&this.conf.wins.cm.button[this.conf.winId][this.conf.name]!=null){this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name)}this.button=null;this.enable=null;this.disable=null;this.isEnabled=null;this.show=null;this.hide=null;this.isHidden=null;this.setCss=null;this.unload=null;if(h!=true){this.conf.wins._winAdjustTitle(this.conf.winId)}this.conf.wins=null;this.conf.winId=null;this.conf=null};this.setCss(a);dhx4._eventable(this);return this};dhtmlXWindows.prototype._winButtonClick=function(c,a,b){if(!this.w[c].b[a].isEnabled()){return true}if(this.w[c].b[a]._doOnClick()!==true){return}if(a=="help"){this._callMainEvent("onHelp",c)}if(a=="park"){this._winPark(c,true)}if(a=="minmax"){this._winMinmax(c)}if(a=="stick"){this._winStick(c);return false}if(a=="close"){this._winClose(c);return false}return true};dhtmlXWindows.prototype._winRemoveButton=function(c,a,b){this.w[c].b[a].unload(b);this.w[c].b[a]=null;delete this.w[c].b[a]};dhtmlXWindows.prototype._dndInitModule=function(){var a=this;this.conf.dnd_enabled=true;this.conf.dnd_tm=null;this.conf.dnd_time=0;this._dndOnMouseDown=function(g,h){if(a.conf.dblclick_active){return}if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}if(a._callMainEvent("onBeforeMoveStart",h)!==true){return}a.conf.dnd={id:h,x:a._dndPos(g,"X"),y:a._dndPos(g,"Y"),ready:true,css:false,css_touch:false,css_vp:false,tr:null,mode:"def",moved:false,prevent:false};if(a.w[h].conf.keep_in_vp){a.conf.dnd.minX=0;a.conf.dnd.maxX=a.vp.clientWidth-a.w[h].conf.w;a.conf.dnd.minY=0;a.conf.dnd.maxY=a.vp.clientHeight-a.w[h].conf.h}else{a.conf.dnd.minX=-a.w[h].conf.w+a.conf.vp_pos_ofs;a.conf.dnd.maxX=a.vp.clientWidth-a.conf.vp_pos_ofs;a.conf.dnd.minY=0;a.conf.dnd.maxY=a.vp.clientHeight-a.conf.vp_pos_ofs}var b=["MozTransform","WebkitTransform","OTransform","msTransform","transform"];for(var c=0;c<b.length;c++){if(document.documentElement.style[b[c]]!=null&&a.conf.dnd.tr==null){a.conf.dnd.tr=b[c];a.conf.dnd.mode="tr"}}if(a.conf.dnd.mode=="tr"){a.w[h].win.style[a.conf.dnd.tr]="translate(0px,0px)";if(a.w[h].fr_m_cover!=null){a.w[h].fr_m_cover.style[a.conf.dnd.tr]=a.w[h].win.style[a.conf.dnd.tr]}}if(window.dhx4.dnd._mTouch(g)==false&&g.type==window.dhx4.dnd.evs.start){if(a.conf.dnd.css_touch==false){a.w[h].win.className+=" dhxwin_dnd_touch";a.conf.dnd.css_touch=true}if(a.conf.dnd.css_vp==false){a.vp.className+=" dhxwins_vp_dnd";a.conf.dnd.css_vp=true}}else{a._dndInitEvents()}};this._dndOnMouseMove=function(h){h=h||event;var g=a.conf.dnd;var b=a._dndPos(h,"X")-g.x;var j=a._dndPos(h,"Y")-g.y;if(h.type==window.dhx4.dnd.evs.move){if(g.moved!=true&&(Math.abs(b)>20||Math.abs(j)>20)){if(a.conf.dnd_tm!=null){window.clearTimeout(a.conf.dnd_tm);a.conf.dnd_tm=null}window.removeEventListener(window.dhx4.dnd.evs.start,a._dndOnMouseMove,false);return}}if(g.ready!=true){return}var c=a.w[g.id];if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}if(g.css!=true){if(g.css_touch==false){c.win.className+=" dhxwin_dnd"}c.fr_cover.className+=" dhxwin_fr_cover_dnd";g.css=true}if(g.css_vp!=true){a.vp.className+=" dhxwins_vp_dnd";g.css_vp=true}g.newX=c.conf.x+b;g.newY=c.conf.y+j;if(g.mode=="tr"){g.newX=Math.min(Math.max(g.newX,g.minX),g.maxX);b=g.newX-c.conf.x;g.newY=Math.min(Math.max(g.newY,g.minY),g.maxY);j=g.newY-c.conf.y;c.win.style[g.tr]="translate("+b+"px,"+j+"px)";if(c.fr_m_cover!=null){c.fr_m_cover.style[g.tr]=c.win.style[g.tr]}}else{if(g.newX<g.minX||g.newX>g.maxX){g.newX=Math.min(Math.max(g.newX,g.minX),g.maxX)}else{g.x=a._dndPos(h,"X")}if(g.newY<g.minY||g.newY>g.maxY){g.newY=Math.min(Math.max(g.newY,g.minY),g.maxY)}else{g.y=a._dndPos(h,"Y")}a._winSetPosition(g.id,g.newX,g.newY)}g.moved=true;c=g=null};this._dndOnMouseUp=function(g){g=g||event;a._dndUnloadEvents();if(a.conf.dnd!=null&&a.conf.dnd.id!=null){var c=a.conf.dnd;var b=a.w[c.id];if(c.newX!=null){if(c.mode=="tr"){a._winSetPosition(c.id,c.newX,c.newY);b.win.style[c.tr]="translate(0px,0px)";if(b.fr_m_cover!=null){b.fr_m_cover.style[c.tr]=b.win.style[c.tr]}}}if(c.css==true){if(c.css_touch==false){b.win.className=String(b.win.className).replace(/\s{0,}dhxwin_dnd/gi,"")}b.fr_cover.className=String(b.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_dnd/gi,"")}if(c.css_touch==true){b.win.className=String(b.win.className).replace(/\s{0,}dhxwin_dnd_touch/gi,"")}if(c.css_vp==true){a.vp.className=String(a.vp.className).replace(/\s{0,}dhxwins_vp_dnd/gi,"")}if(c.moved==true){a._callMainEvent("onMoveFinish",c.id)}else{a._callMainEvent("onMoveCancel",c.id)}b=c=a.conf.dnd=null}if(window.dhx4.dnd.p_en==true&&g.type==window.dhx4.dnd.evs.end){window.dhx4.dnd._touchOn();window.removeEventListener(window.dhx4.dnd.evs.end,a._dndOnMouseUp,false);window.removeEventListener(window.dhx4.dnd.evs.move,a._dndOnMouseMove,false);if(a.conf.dnd_tm!=null){window.clearTimeout(a.conf.dnd_tm)}a.conf.dnd_tm=null}};this._dndOnSelectStart=function(b){b=b||event;if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}return false};this._dndInitEvents=function(){if(typeof(window.addEventListener)=="function"){window.addEventListener("mousemove",this._dndOnMouseMove,false);window.addEventListener("mouseup",this._dndOnMouseUp,false);window.addEventListener("selectstart",this._dndOnSelectStart,false)}else{document.body.attachEvent("onmousemove",this._dndOnMouseMove);document.body.attachEvent("onmouseup",this._dndOnMouseUp);document.body.attachEvent("onselectstart",this._dndOnSelectStart)}};this._dndUnloadEvents=function(){if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousemove",this._dndOnMouseMove,false);window.removeEventListener("mouseup",this._dndOnMouseUp,false);window.removeEventListener("selectstart",this._dndOnSelectStart,false)}else{document.body.detachEvent("onmousemove",this._dndOnMouseMove);document.body.detachEvent("onmouseup",this._dndOnMouseUp);document.body.detachEvent("onselectstart",this._dndOnSelectStart)}};this._dndUnloadModule=function(){this.detachEvent(this.conf.dnd_evid);this.conf.dnd_evid=null;this._dndOnMouseDown=null;this._dndOnMouseMove=null;this._dndOnMouseUp=null;this._dndOnSelectStart=null;this._dndInitEvents=null;this._dndUnloadEvents=null;this._dndInitModule=null;this._dndUnloadModule=null;a=null};this._dndPos=function(c,b){var e=c[this.conf.dnd_ev_prefix+b];if((e==null||e==0)&&c.touches!=null){e=c.touches[0][this.conf.dnd_ev_prefix+b]}return e};this.conf.dnd_evid=this.attachEvent("_winMouseDown",function(c,b){if(this.w[b.id]==null||this.w[b.id].conf.allow_move!=true){return}if(typeof(c.button)!="undefined"&&c.button>=2){return}if(c.type==window.dhx4.dnd.evs.start){if(b.mode=="hdr"){if(this.w[b.id].conf.maxed&&this.w[b.id].conf.max_w==null&&this.w[b.id].conf.max_h==null){return}this.conf.dnd_ev_prefix="page";this.conf.dnd={x:this._dndPos(c,"X"),y:this._dndPos(c,"Y")};if(this.conf.dnd_time<1){this._dndOnMouseDown(c,b.id)}else{if(this.conf.dnd_tm!=null){window.clearTimeout(this.conf.dnd_tm)}this.conf.dnd_tm=window.setTimeout(function(){a._dndOnMouseDown(c,b.id)},this.conf.dnd_time)}if(window.dhx4.dnd.p_en==true){window.dhx4.dnd._touchOff();window.addEventListener(window.dhx4.dnd.evs.end,this._dndOnMouseUp,false)}window.addEventListener(window.dhx4.dnd.evs.move,this._dndOnMouseMove,false)}return false}if(c.type==window.dhx4.dnd.evs.end){if(this.conf.dnd_tm!=null){window.clearTimeout(this.conf.dnd_tm);this.conf.dnd_tm=null}this._dndOnMouseUp(c);window.removeEventListener(window.dhx4.dnd.evs.move,this._dndOnMouseMove,false);return false}this.conf.dnd_ev_prefix="client";if(!(b.mode=="hdr"&&c.type=="mousedown")){return}if(this.w[b.id].conf.maxed&&this.w[b.id].conf.max_w==null&&this.w[b.id].conf.max_h==null){return}if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}this._dndOnMouseDown(c,b.id);return false})};dhtmlXWindowsCell.prototype._initResize=function(){var a=this;var b=navigator.userAgent;this.conf.resize={b_width:6,c_type:(b.indexOf("MSIE 10.0")>0||b.indexOf("MSIE 9.0")>0||b.indexOf("MSIE 8.0")>0||b.indexOf("MSIE 7.0")>0||b.indexOf("MSIE 6.0")>0),btn_left:((window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&typeof(window.addEventListener)=="undefined"?1:0)};this._rOnCellMouseMove=function(l){if(a.wins.conf.resize_actv==true||a.wins.w[a._idd].conf.allow_resize==false||a.conf.progress==true||a.wins.w[a._idd].conf.maxed==true||a.wins.w[a._idd].conf.fs_mode==true){var h=a.wins.w[a._idd].brd;if(h.style.cursor!="default"){h.style.cursor="default"}h=null;return}l=l||event;var t=a.wins.w[a._idd].brd;var c=a.conf.resize;var n=(a.wins.w[a._idd].conf.header==false);var o=l.clientX;var m=l.clientY;o+=(document.documentElement.scrollLeft||document.body.scrollLeft||0);m+=(document.documentElement.scrollTop||document.body.scrollTop||0);var g=window.dhx4.absLeft(t);var s=window.dhx4.absTop(t);var j="";if(o<=g+c.b_width){j="w"}else{if(o>=g+t.offsetWidth-c.b_width){j="e"}}if(m>=s+t.offsetHeight-c.b_width){j="s"+j}else{if(n&&m<=s+c.b_width){j="n"+j}}if(j==""){j=false}if(c.mode!=j){c.mode=j;if(j==false){t.style.cursor="default"}else{t.style.cursor=j+"-resize"}}t=c=null};this._rOnCellMouseDown=function(j){j=j||event;if(typeof(j.button)!="undefined"&&j.button!=a.conf.resize.btn_left){return}if(a.conf.resize.mode==false){return}if(a.conf.progress==true){return}if(a.wins.w[a._idd].conf.allow_resize==false){return}if(a.wins.w[a._idd].conf.fs_mode==true){return}if(j.preventDefault){j.preventDefault()}else{j.returnValue=false}if(a.wins._callMainEvent("onBeforeResizeStart",a._idd)!==true){return}var c=a.wins.w[a._idd];var h=a.conf.resize;a.wins.conf.resize_actv=true;h.min_w=c.conf.min_w;h.min_h=c.conf.min_h;h.max_w=c.conf.max_w||+Infinity;h.max_h=c.conf.max_h||+Infinity;if(c.cell.dataType=="layout"&&c.cell.dataObj!=null&&typeof(c.cell.dataObj._getWindowMinDimension)=="function"){var g=c.cell.dataObj._getWindowMinDimension(c.cell);h.min_w=Math.max(g.w,h.min_w);h.min_h=Math.max(g.h,h.min_h)}h.vp_l=a.wins.conf.vp_pos_ofs;h.vp_r=a.wins.vp.clientWidth-a.wins.conf.vp_pos_ofs;h.vp_b=a.wins.vp.clientHeight-a.wins.conf.vp_pos_ofs;h.x=j.clientX;h.y=j.clientY;if(typeof(window.addEventListener)=="function"){window.addEventListener("mousemove",a._rOnWinMouseMove,false);window.addEventListener("mouseup",a._rOnWinMouseUp,false);window.addEventListener("selectstart",a._rOnSelectStart,false)}else{document.body.attachEvent("onmousemove",a._rOnWinMouseMove);document.body.attachEvent("onmouseup",a._rOnWinMouseUp);document.body.attachEvent("onselectstart",a._rOnSelectStart)}h.resized=false;h.vp_cursor=a.wins.vp.style.cursor;a.wins.vp.style.cursor=h.mode+"-resize";c=h=null};this._rOnCellContextMenu=function(c){c=c||event;if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}return false};this._rOnWinMouseMove=function(j){j=j||event;var g=a.wins.w[a._idd];var h=a.conf.resize;if(!h.resized){g.fr_cover.className+=" dhxwin_fr_cover_resize";h.resized=true}var c=j.clientX-h.x;var l=j.clientY-h.y;if(h.mode.indexOf("e")>=0){h.rw=Math.min(Math.max(g.conf.w+c,h.min_w),h.max_w);h.rx=null;if(g.conf.x+h.rw<h.vp_l){h.rw=h.vp_l-g.conf.x}else{if(g.conf.x+h.rw>a.wins.vp.clientWidth){h.rw=a.wins.vp.clientWidth-g.conf.x}}}else{if(h.mode.indexOf("w")>=0){h.rw=Math.min(Math.max(g.conf.w-c,h.min_w),h.max_w);h.rx=g.conf.x+g.conf.w-h.rw;if(h.rx<0){h.rw=h.rw+h.rx;h.rx=0}else{if(h.rx>h.vp_r){h.rw=h.rw-h.vp_r;h.rx=h.vp_r}}}}if(h.mode.indexOf("s")>=0){h.rh=Math.min(Math.max(g.conf.h+l,h.min_h),h.max_h);h.ry=null;if(g.conf.y+h.rh>a.wins.vp.clientHeight){h.rh=a.wins.vp.clientHeight-g.conf.y}}else{if(h.mode.indexOf("n")>=0){h.rh=Math.min(Math.max(g.conf.h-l,h.min_h),h.max_h);h.ry=g.conf.y+g.conf.h-h.rh;if(h.ry<0){h.rh=h.rh+h.ry;h.ry=0}else{if(h.ry>h.vp_b){h.rh=h.rh-h.vp_b;h.ry=h.vp_b}}}}a._rAdjustSizer();g=h=null};this._rOnWinMouseUp=function(){var e=a.conf.resize;var c=a.wins.w[a._idd];a.wins.conf.resize_actv=false;a.wins.vp.style.cursor=e.vp_cursor;c.fr_cover.className=String(c.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_resize/gi,"");if(e.resized){a.wins._winSetSize(a._idd,e.rw,e.rh);if(e.rx==null){e.rx=c.conf.x}if(e.ry==null){e.ry=c.conf.y}if(e.rx!=c.conf.x||e.ry!=c.conf.y){a.wins._winSetPosition(a._idd,e.rx,e.ry)}}if(e.obj!=null){e.obj.parentNode.removeChild(e.obj);e.obj=null}if(e.objFR!=null){e.objFR.parentNode.removeChild(e.objFR);e.objFR=null}if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousemove",a._rOnWinMouseMove,false);window.removeEventListener("mouseup",a._rOnWinMouseUp,false);window.removeEventListener("selectstart",a._rOnSelectStart,false)}else{document.body.detachEvent("onmousemove",a._rOnWinMouseMove);document.body.detachEvent("onmouseup",a._rOnWinMouseUp);document.body.detachEvent("onselectstart",a._rOnSelectStart)}if(e.resized==true){if(a.dataType=="layout"&&a.dataObj!=null){a.dataObj.callEvent("onResize",[])}a.wins._callMainEvent("onResizeFinish",a._idd)}else{a.wins._callMainEvent("onResizeCancel",a._idd)}e.mode="";c=e=null};this._rOnSelectStart=function(c){c=c||event;if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}return false};this._rInitSizer=function(){var e=a.conf.resize;var c=a.wins.w[a._idd];e.obj=document.createElement("DIV");e.obj.className="dhxwin_resize";e.obj.style.zIndex=c.win.style.zIndex;e.obj.style.cursor=e.mode+"-resize";a.wins.vp.appendChild(e.obj);if(a.wins.conf.fr_cover==true){e.objFR=document.createElement("IFRAME");e.objFR.className="dhxwin_resize_fr_cover";e.objFR.style.zIndex=e.obj.style.zIndex;a.wins.vp.insertBefore(e.objFR,e.obj)}e.rx=c.conf.x;e.ry=c.conf.y;e.rw=c.conf.w;e.rh=c.conf.h;e=null};this._rAdjustSizer=function(){var c=a.conf.resize;if(!c.obj){this._rInitSizer()}c.obj.style.width=c.rw+"px";c.obj.style.height=c.rh+"px";if(c.rx!=null){c.obj.style.left=c.rx+"px"}if(c.ry!=null){c.obj.style.top=c.ry+"px"}if(c.objFR!=null){c.objFR.style.width=c.obj.style.width;c.objFR.style.height=c.obj.style.height;if(c.rx!=null){c.objFR.style.left=c.obj.style.left}if(c.ry!=null){c.objFR.style.top=c.obj.style.top}}c=null};if(typeof(window.addEventListener)=="function"){this.wins.w[this._idd].brd.addEventListener("mousemove",this._rOnCellMouseMove,false);this.wins.w[this._idd].brd.addEventListener("mousedown",this._rOnCellMouseDown,false);this.wins.w[this._idd].brd.addEventListener("contextmenu",this._rOnCellContextMenu,false)}else{this.wins.w[this._idd].brd.attachEvent("onmousemove",this._rOnCellMouseMove);this.wins.w[this._idd].brd.attachEvent("onmousedown",this._rOnCellMouseDown);this.wins.w[this._idd].brd.attachEvent("oncontextmenu",this._rOnCellContextMenu)}this._unloadResize=function(){if(typeof(window.addEventListener)=="function"){this.wins.w[this._idd].brd.removeEventListener("mousemove",this._rOnCellMouseMove,false);this.wins.w[this._idd].brd.removeEventListener("mousedown",this._rOnCellMouseDown,false);this.wins.w[this._idd].brd.removeEventListener("contextmenu",this._rOnCellContextMenu,false)}else{this.wins.w[this._idd].brd.detachEvent("onmousemove",this._rOnCellMouseMove);this.wins.w[this._idd].brd.detachEvent("onmousedown",this._rOnCellMouseDown);this.wins.w[this._idd].brd.detachEvent("oncontextmenu",this._rOnCellContextMenu)}this._initResize=null;this._rOnCellMouseMove=null;this._rOnCellMouseDown=null;this._rOnWinMouseMove=null;this._rOnWinMouseUp=null;this._rOnSelectStart=null;this._rInitSizer=null;this._rAdjustSizer=null;this._unloadResize=null;this.conf.resize=null;a=null}};dhtmlXWindows.prototype.attachContextMenu=function(a){return this._renderContextMenu("icon",null,null,a)};dhtmlXWindows.prototype.getContextMenu=function(){if(this.cm!=null&&this.cm.global!=null){return this.cm.global}return null};dhtmlXWindows.prototype.detachContextMenu=function(){this._detachContextMenu("icon",null,null)};dhtmlXWindowsCell.prototype.attachContextMenu=function(a){return this.wins._renderContextMenu("icon",this._idd,null,a)};dhtmlXWindowsCell.prototype.getContextMenu=function(){if(this.wins.cm!=null&&this.wins.cm.icon[this._idd]!=null){return this.wins.cm.icon[this._idd]}return null};dhtmlXWindowsCell.prototype.detachContextMenu=function(){this.wins._detachContextMenu("icon",this._idd,null)};dhtmlXWindowsButton.prototype.attachContextMenu=function(a){return this.conf.wins._renderContextMenu("button",this.conf.winId,this.conf.name,a)};dhtmlXWindowsButton.prototype.getContextMenu=function(){if(this.conf.wins.cm==null||this.conf.wins.cm.button[this.conf.winId]==null){return null}if(this.conf.wins.cm.button[this.conf.winId][this.conf.name]!=null){return this.conf.wins.cm.button[this.conf.winId][this.conf.name]}return null};dhtmlXWindowsButton.prototype.detachContextMenu=function(){this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name)};dhtmlXWindows.prototype._renderContextMenu=function(j,h,c,b){var e=this;var a=false;if(this.cm==null){this.cm={global:null,icon:{},button:{}};a=true}if(h==null){if(this.cm.global!=null){return}}else{if(j=="icon"){if(this.cm.icon[h]!=null){return}}else{if(j=="button"){if(this.cm.button[h]!=null&&this.cm.button[h][c]!=null){return}}}}if(b==null){b={}}b.parent=null;b.context=true;var g=new dhtmlXMenuObject(b);g.setAutoHideMode(false);g.attachEvent("onShow",function(){this.conf.wins_menu_open=true});g.attachEvent("onHide",function(){this.conf.wins_menu_open=false;e.conf.opened_menu=null});if(h==null){this.cm.global=g}else{if(j=="icon"){this.cm.icon[h]=g}else{if(j=="button"){if(this.cm.button[h]==null){this.cm.button[h]={}}this.cm.button[h][c]=g}}}if(a){this._showContextMenu=function(o,n){if(o.button>=2){return}if(n.mode=="icon"&&n.id!=null&&n.press_type=="mousedown"){var r=this.cm.icon[n.id]||this.cm.global;if(r==null){return}o.cancelBubble=true;var m=this.w[n.id].hdr.firstChild;if(r.conf.wins_menu_open&&this.conf.opened_menu==n.id){r.hideContextMenu()}else{this._hideContextMenu();r.showContextMenu(window.dhx4.absLeft(m),window.dhx4.absTop(m)+m.offsetHeight);this.conf.opened_menu=n.id}r=m=null}if(n.mode=="button"&&n.id!=null&&n.press_type=="mousedown"){if(this.cm.button[n.id]==null||this.cm.button[n.id][n.button_name]==null){return}o.cancelBubble=true;this.conf.button_last=null;var r=this.cm.button[n.id][n.button_name];var l=this.w[n.id].b[n.button_name].button;if(r.conf.wins_menu_open&&this.conf.opened_menu==n.id){r.hideContextMenu()}else{this._hideContextMenu();r.showContextMenu(window.dhx4.absLeft(l),window.dhx4.absTop(l)+l.offsetHeight);this.conf.opened_menu=n.id}r=l=null}};this._hideContextMenu=function(s){if(s!=null){s=s||event;if(s.type=="keydown"&&s.keyCode!=27){return}var r=s.target||s.srcElement;var n=true;while(r!=null&&n==true){if(r.className!=null&&r.className.search(/SubLevelArea_Polygon/)>=0){n=false}else{r=r.parentNode}}}if(n||s==null){if(e.cm.global!=null){e.cm.global.hideContextMenu()}for(var o in e.cm.icon){if(e.cm.icon[o]!=null){e.cm.icon[o].hideContextMenu()}}for(var o in e.cm.button){for(var l in e.cm.button[o]){if(e.cm.button[o][l]!=null){e.cm.button[o][l].hideContextMenu()}}}}};this._detachContextMenu=function(n,m,l){if(this.cm==null){return}if(m==null){if(this.cm.global!=null){this.cm.global.unload();this.cm.global=null}}else{if(n=="icon"){if(this.cm.icon[m]!=null){this.cm.icon[m].unload();this.cm.icon[m]=null}}else{if(n=="button"){if(this.cm.button[m]!=null&&this.cm.button[m][l]!=null){this.cm.button[m][l].unload();this.cm.button[m][l]=null}}}}};this.attachEvent("_winMouseDown",this._showContextMenu);if(typeof(window.addEventListener)=="function"){window.addEventListener("mousedown",this._hideContextMenu,false);window.addEventListener("keydown",this._hideContextMenu,false)}else{document.body.attachEvent("onmousedown",this._hideContextMenu);document.body.attachEvent("onkeydown",this._hideContextMenu)}this._unloadContextMenu=function(){this._detachContextMenu("icon",null,null);this.cm=null;if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousedown",this._hideContextMenu,false);window.removeEventListener("keydown",this._hideContextMenu,false)}else{document.body.detachEvent("onmousedown",this._hideContextMenu);document.body.detachEvent("onkeydown",this._hideContextMenu)}e=null}}return g};if(!window.dhtmlx){window.dhtmlx={}}(function(){var n=null;function r(w,t){var v=w.callback;o(false);w.box.parentNode.removeChild(w.box);n=w.box=null;if(v){v(t)}}function a(v){if(n){v=v||event;var t=v.which||event.keyCode;if(dhtmlx.message.keyboard){if(t==13||t==32){r(n,true)}if(t==27){r(n,false)}}if(v.preventDefault){v.preventDefault()}return !(v.cancelBubble=true)}}if(document.attachEvent){document.attachEvent("onkeydown",a)}else{document.addEventListener("keydown",a,true)}function o(v){if(!o.cover){o.cover=document.createElement("DIV");o.cover.onkeydown=a;o.cover.className="dhx_modal_cover";document.body.appendChild(o.cover)}var t=document.body.scrollHeight;o.cover.style.display=v?"inline-block":"none"}function h(v,t){return"<div class='dhtmlx_popup_button' result='"+t+"' ><div>"+v+"</div></div>"}function c(v){if(!s.area){s.area=document.createElement("DIV");s.area.className="dhtmlx_message_area";s.area.style[s.position]="15px";document.body.appendChild(s.area)}s.hide(v.id);var t=document.createElement("DIV");t.innerHTML="<div>"+v.text+"</div>";t.className="dhtmlx-info dhtmlx-"+v.type;t.onclick=function(){if(v){s.hide(v.id)}v=null};if(s.position=="bottom"&&s.area.firstChild){s.area.insertBefore(t,s.area.firstChild)}else{s.area.appendChild(t)}if(v.expire>0){s.timers[v.id]=window.setTimeout(function(){s.hide(v.id)},v.expire)}s.pull[v.id]=t;t=null;return v.id}function j(v,x,A){var z=document.createElement("DIV");z.className=" dhtmlx_modal_box dhtmlx-"+v.type;z.setAttribute("dhxbox",1);var t="";if(v.width){z.style.width=v.width}if(v.height){z.style.height=v.height}if(v.title){t+='<div class="dhtmlx_popup_title">'+v.title+"</div>"}t+='<div class="dhtmlx_popup_text"><span>'+(v.content?"":v.text)+'</span></div><div  class="dhtmlx_popup_controls">';if(x){t+=h(v.ok||"OK",true)}if(A){t+=h(v.cancel||"Cancel",false)}if(v.buttons){for(var w=0;w<v.buttons.length;w++){t+=h(v.buttons[w],w)}}t+="</div>";z.innerHTML=t;if(v.content){var y=v.content;if(typeof y=="string"){y=document.getElementById(y)}if(y.style.display=="none"){y.style.display=""}z.childNodes[v.title?1:0].appendChild(y)}z.onclick=function(E){E=E||event;var D=E.target||E.srcElement;if(!D.className){D=D.parentNode}if(D.className=="dhtmlx_popup_button"){var C=D.getAttribute("result");C=(C=="true")||(C=="false"?false:C);r(v,C)}};v.box=z;if(x||A){n=v}return z}function u(v,w,A){var z=v.tagName?v:j(v,w,A);if(!v.hidden){o(true)}document.body.appendChild(z);var t=v.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-z.offsetWidth)/2));var C=v.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-z.offsetHeight)/2));if(v.position=="top"){z.style.top="-3px"}else{z.style.top=C+"px"}z.style.left=t+"px";z.onkeydown=a;z.focus();if(v.hidden){dhtmlx.modalbox.hide(z)}return z}function m(t){return u(t,true,false)}function b(t){return u(t,true,true)}function g(t){return u(t)}function l(v,t,w){if(typeof v!="object"){if(typeof t=="function"){w=t;t=""}v={text:v,type:t,callback:w}}return v}function e(w,v,t,x){if(typeof w!="object"||!w){w={text:w,type:v,expire:t,id:x}}w.id=w.id||s.uid();w.expire=w.expire||s.expire;return w}dhtmlx.alert=function(){var t=l.apply(this,arguments);t.type=t.type||"confirm";return m(t)};dhtmlx.confirm=function(){var t=l.apply(this,arguments);t.type=t.type||"alert";return b(t)};dhtmlx.modalbox=function(){var t=l.apply(this,arguments);t.type=t.type||"alert";return g(t)};dhtmlx.modalbox.hide=function(t){while(t&&t.getAttribute&&!t.getAttribute("dhxbox")){t=t.parentNode}if(t){t.parentNode.removeChild(t);o(false);n=null}};var s=dhtmlx.message=function(x,w,v,y){x=e.apply(this,arguments);x.type=x.type||"info";var t=x.type.split("-")[0];switch(t){case"alert":return m(x);case"confirm":return b(x);case"modalbox":return g(x);default:return c(x);break}};s.seed=(new Date()).valueOf();s.uid=function(){return s.seed++};s.expire=4000;s.keyboard=true;s.position="top";s.pull={};s.timers={};s.hideAll=function(){for(var t in s.pull){s.hide(t)}};s.hide=function(v){var t=s.pull[v];if(t&&t.parentNode){window.setTimeout(function(){t.parentNode.removeChild(t);t=null},2000);t.className+=" hidden";if(s.timers[v]){window.clearTimeout(s.timers[v])}delete s.pull[v]}}})();